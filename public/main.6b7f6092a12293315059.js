(self.webpackChunkwktest=self.webpackChunkwktest||[]).push([[179],{8255:e=>{function t(e){return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=()=>[],t.resolve=t,t.id=8255,e.exports=t},7238:(e,t,n)=>{"use strict";n.d(t,{l3:()=>s,_j:()=>r,LC:()=>i,ZN:()=>p,jt:()=>a,vP:()=>l,SB:()=>u,oB:()=>c,eR:()=>h,X$:()=>o,ZE:()=>f,k1:()=>g});class r{}class i{}const s="*";function o(e,t){return{type:7,name:e,definitions:t,options:{}}}function a(e,t=null){return{type:4,styles:t,timings:e}}function l(e,t=null){return{type:2,steps:e,options:t}}function c(e){return{type:6,styles:e,offset:null}}function u(e,t,n){return{type:0,name:e,styles:t,options:n}}function h(e,t,n=null){return{type:1,expr:e,animation:t,options:n}}function d(e){Promise.resolve(null).then(e)}class p{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){d(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class f{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,n=0,r=0;const i=this.players.length;0==i?d(()=>this._onFinish()):this.players.forEach(e=>{e.onDone(()=>{++t==i&&this._onFinish()}),e.onDestroy(()=>{++n==i&&this._onDestroy()}),e.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((e,t)=>Math.max(e,t.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(e=>{const n=e.totalTime?Math.min(1,t/e.totalTime):1;e.setPosition(n)})}getPosition(){const e=this.players.reduce((e,t)=>null===e||t.totalTime>e.totalTime?t:e,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}const g="!"},2872:(e,t,n)=>{"use strict";n.d(t,{aV:()=>ve,U8:()=>be});var r=n(7716);function i(e){return Array.isArray(e)?e:[e]}function s(e){return null==e?"":"string"==typeof e?e:`${e}px`}var o=n(9765),a=n(5917),l=n(7574),c=n(9796),u=n(9105),h=n(8002);function d(e,t,n,r){return(0,u.m)(n)&&(r=n,n=void 0),r?d(e,t,n).pipe((0,h.U)(e=>(0,c.k)(e)?r(...e):r(e))):new l.y(r=>{p(e,t,function(e){r.next(arguments.length>1?Array.prototype.slice.call(arguments):e)},r,n)})}function p(e,t,n,r,i){let s;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){const r=e;e.addEventListener(t,n,i),s=()=>r.removeEventListener(t,n,i)}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){const r=e;e.on(t,n),s=()=>r.off(t,n)}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e)){const r=e;e.addListener(t,n),s=()=>r.removeListener(t,n)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let s=0,o=e.length;s<o;s++)p(e[s],t,n,r,i)}r.add(s)}var f=n(6465),g=n(6102);new class extends g.v{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let n,r=-1,i=t.length;e=e||t.shift();do{if(n=e.execute(e.state,e.delay))break}while(++r<i&&(e=t.shift()));if(this.active=!1,n){for(;++r<i&&(e=t.shift());)e.unsubscribe();throw n}}}(class extends f.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(()=>e.flush(null))))}recycleAsyncId(e,t,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(e,t,n);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}}),n(4581);var m=n(5319);n(7519);var y=n(3637),_=n(5345);class v{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new w(e,this.durationSelector))}}class w extends _.Ds{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:t}=this;n=t(e)}catch(t){return this.destination.error(t)}const r=(0,_.ft)(n,new _.IY(this));!r||r.closed?this.clearThrottle():this.add(this.throttled=r)}}clearThrottle(){const{value:e,hasValue:t,throttled:n}=this;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),t&&(this.value=void 0,this.hasValue=!1,this.destination.next(e))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var b=n(6561),T=n(4869);function S(e){const{index:t,period:n,subscriber:r}=e;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}function E(e,t=y.P){return n=()=>function(e=0,t,n){let r=-1;return(0,b.k)(t)?r=Number(t)<1?1:Number(t):(0,T.K)(t)&&(n=t),(0,T.K)(n)||(n=y.P),new l.y(t=>{const i=(0,b.k)(e)?e:+e-n.now();return n.schedule(S,i,{index:0,period:r,subscriber:t})})}(e,t),function(e){return e.lift(new v(n))};var n}var C=n(5435);class I{constructor(e){this.notifier=e}call(e,t){const n=new k(e),r=(0,_.ft)(this.notifier,new _.IY(n));return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n}}class k extends _.Ds{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}n(9761),n(9328),n(3190),n(2066);var x=n(8583);let A;try{A="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(Te){A=!1}let P,R=(()=>{class e{constructor(e){this._platformId=e,this.isBrowser=this._platformId?(0,x.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!A)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.Lbi))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(r.Lbi))},token:e,providedIn:"root"}),e})(),N=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})();function O(){if(null==P){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return P=!1,P;if("scrollBehavior"in document.documentElement.style)P=!0;else{const e=Element.prototype.scrollTo;P=!!e&&!/\{\s*\[native code\]\s*\}/.test(e.toString())}}return P}function D(e){return e.composedPath?e.composedPath()[0]:e.target}function L(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}const F=new r.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,r.f3M)(x.K0)}});let M=(()=>{class e{constructor(e){if(this.value="ltr",this.change=new r.vpe,e){const t=e.documentElement?e.documentElement.dir:null,n=(e.body?e.body.dir:null)||t;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(F,8))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(F,8))},token:e,providedIn:"root"}),e})(),U=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})(),V=(()=>{class e{constructor(e,t,n){this._ngZone=e,this._platform=t,this._scrolled=new o.xQ,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=n}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new l.y(t=>{this._globalSubscription||this._addGlobalListener();const n=e>0?this._scrolled.pipe(E(e)).subscribe(t):this._scrolled.subscribe(t);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,a.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,t)=>this.deregister(t)),this._scrolled.complete()}ancestorScrolled(e,t){const n=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe((0,C.h)(e=>!e||n.indexOf(e)>-1))}getAncestorScrollContainers(e){const t=[];return this.scrollContainers.forEach((n,r)=>{this._scrollableContainsElement(r,e)&&t.push(r)}),t}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,t){let n=(i=t)instanceof r.SBq?i.nativeElement:i;var i;let s=e.getElementRef().nativeElement;do{if(n==s)return!0}while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>d(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.R0b),r.LFG(R),r.LFG(x.K0,8))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(r.R0b),r.LFG(R),r.LFG(x.K0,8))},token:e,providedIn:"root"}),e})(),j=(()=>{class e{constructor(e,t,n){this._platform=e,this._change=new o.xQ,this._changeListener=e=>{this._change.next(e)},this._document=n,t.runOutsideAngular(()=>{if(e.isBrowser){const e=this._getWindow();e.addEventListener("resize",this._changeListener),e.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:t,height:n}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+n,right:e.left+t,height:n,width:t}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,t=this._getWindow(),n=e.documentElement,r=n.getBoundingClientRect();return{top:-r.top||e.body.scrollTop||t.scrollY||n.scrollTop||0,left:-r.left||e.body.scrollLeft||t.scrollX||n.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(E(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(R),r.LFG(r.R0b),r.LFG(x.K0,8))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(R),r.LFG(r.R0b),r.LFG(x.K0,8))},token:e,providedIn:"root"}),e})(),q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})(),B=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[U,N,q],U,q]}),e})();var z=n(7636),$=n(6682);n(7393);var H=n(5257);const G=O();class Z{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=s(-this._previousScrollPosition.left),e.style.top=s(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,t=e.style,n=this._document.body.style,r=t.scrollBehavior||"",i=n.scrollBehavior||"";this._isEnabled=!1,t.left=this._previousHTMLStyles.left,t.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),G&&(t.scrollBehavior=n.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),G&&(t.scrollBehavior=r,n.scrollBehavior=i)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,t=this._viewportRuler.getViewportSize();return e.scrollHeight>t.height||e.scrollWidth>t.width}}class K{constructor(e,t,n,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class W{enable(){}disable(){}attach(){}}function Y(e,t){return t.some(t=>e.bottom<t.top||e.top>t.bottom||e.right<t.left||e.left>t.right)}function Q(e,t){return t.some(t=>e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right)}class J{constructor(e,t,n,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:t,height:n}=this._viewportRuler.getViewportSize();Y(e,[{width:t,height:n,bottom:n,right:t,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let X=(()=>{class e{constructor(e,t,n,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=n,this.noop=()=>new W,this.close=e=>new K(this._scrollDispatcher,this._ngZone,this._viewportRuler,e),this.block=()=>new Z(this._viewportRuler,this._document),this.reposition=e=>new J(this._scrollDispatcher,this._viewportRuler,this._ngZone,e),this._document=r}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(V),r.LFG(j),r.LFG(r.R0b),r.LFG(x.K0))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(V),r.LFG(j),r.LFG(r.R0b),r.LFG(x.K0))},token:e,providedIn:"root"}),e})();class ee{constructor(e){if(this.scrollStrategy=new W,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const n of t)void 0!==e[n]&&(this[n]=e[n])}}}class te{constructor(e,t,n,r,i){this.offsetX=n,this.offsetY=r,this.panelClass=i,this.originX=e.originX,this.originY=e.originY,this.overlayX=t.overlayX,this.overlayY=t.overlayY}}class ne{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let re=(()=>{class e{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const t=this._attachedOverlays.indexOf(e);t>-1&&this._attachedOverlays.splice(t,1),0===this._attachedOverlays.length&&this.detach()}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(x.K0))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(x.K0))},token:e,providedIn:"root"}),e})(),ie=(()=>{class e extends re{constructor(e){super(e),this._keydownListener=e=>{const t=this._attachedOverlays;for(let n=t.length-1;n>-1;n--)if(t[n]._keydownEvents.observers.length>0){t[n]._keydownEvents.next(e);break}}}add(e){super.add(e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(x.K0))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(x.K0))},token:e,providedIn:"root"}),e})(),se=(()=>{class e extends re{constructor(e,t){super(e),this._platform=t,this._cursorStyleIsSet=!1,this._pointerDownListener=e=>{this._pointerDownEventTarget=D(e)},this._clickListener=e=>{const t=D(e),n="click"===e.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:t;this._pointerDownEventTarget=null;const r=this._attachedOverlays.slice();for(let i=r.length-1;i>-1;i--){const s=r[i];if(!(s._outsidePointerEvents.observers.length<1)&&s.hasAttached()){if(s.overlayElement.contains(t)||s.overlayElement.contains(n))break;s._outsidePointerEvents.next(e)}}}}add(e){if(super.add(e),!this._isAttached){const e=this._document.body;e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=e.style.cursor,e.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(x.K0),r.LFG(R))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(x.K0),r.LFG(R))},token:e,providedIn:"root"}),e})(),oe=(()=>{class e{constructor(e,t){this._platform=t,this._document=e}ngOnDestroy(){const e=this._containerElement;e&&e.parentNode&&e.parentNode.removeChild(e)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||L()){const t=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let e=0;e<t.length;e++)t[e].parentNode.removeChild(t[e])}const t=this._document.createElement("div");t.classList.add(e),L()?t.setAttribute("platform","test"):this._platform.isBrowser||t.setAttribute("platform","server"),this._document.body.appendChild(t),this._containerElement=t}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(x.K0),r.LFG(R))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(x.K0),r.LFG(R))},token:e,providedIn:"root"}),e})();class ae{constructor(e,t,n,r,i,s,a,l,c){this._portalOutlet=e,this._host=t,this._pane=n,this._config=r,this._ngZone=i,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._backdropElement=null,this._backdropClick=new o.xQ,this._attachments=new o.xQ,this._detachments=new o.xQ,this._locationChanges=m.w.EMPTY,this._backdropClickHandler=e=>this._backdropClick.next(e),this._keydownEvents=new o.xQ,this._outsidePointerEvents=new o.xQ,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){let t=this._portalOutlet.attach(e);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,H.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=s(this._config.width),e.height=s(this._config.height),e.minWidth=s(this._config.minWidth),e.minHeight=s(this._config.minHeight),e.maxWidth=s(this._config.maxWidth),e.maxHeight=s(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(!e)return;let t;const n=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",n),this._disposeBackdrop(e)),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",n)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(n,500))}_toggleClasses(e,t,n){const r=e.classList;i(t).forEach(e=>{e&&(n?r.add(e):r.remove(e))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe((t=(0,$.T)(this._attachments,this._detachments),e=>e.lift(new I(t)))).subscribe(()=>{this._pane&&this._host&&0!==this._pane.children.length||(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),e.unsubscribe())});var t})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.parentNode&&e.parentNode.removeChild(e),this._backdropElement===e&&(this._backdropElement=null))}}const le="cdk-overlay-connected-position-bounding-box",ce=/([A-Za-z%]+)$/;class ue{constructor(e,t,n,r,i){this._viewportRuler=t,this._document=n,this._platform=r,this._overlayContainer=i,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new o.xQ,this._resizeSubscription=m.w.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(le),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const e=this._originRect,t=this._overlayRect,n=this._viewportRect,r=[];let i;for(let s of this._preferredPositions){let o=this._getOriginPoint(e,s),a=this._getOverlayPoint(o,t,s),l=this._getOverlayFit(a,t,n,s);if(l.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(s,o);this._canFitWithFlexibleDimensions(l,a,n)?r.push({position:s,origin:o,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(o,s)}):(!i||i.overlayFit.visibleArea<l.visibleArea)&&(i={overlayFit:l,overlayPoint:a,originPoint:o,position:s,overlayRect:t})}if(r.length){let e=null,t=-1;for(const n of r){const r=n.boundingBoxRect.width*n.boundingBoxRect.height*(n.position.weight||1);r>t&&(t=r,e=n)}return this._isPushed=!1,void this._applyPosition(e.position,e.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(i.position,i.originPoint);this._applyPosition(i.position,i.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&he(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(le),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const e=this._lastPosition||this._preferredPositions[0],t=this._getOriginPoint(this._originRect,e);this._applyPosition(e,t)}}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t){let n,r;if("center"==t.originX)n=e.left+e.width/2;else{const r=this._isRtl()?e.right:e.left,i=this._isRtl()?e.left:e.right;n="start"==t.originX?r:i}return r="center"==t.originY?e.top+e.height/2:"top"==t.originY?e.top:e.bottom,{x:n,y:r}}_getOverlayPoint(e,t,n){let r,i;return r="center"==n.overlayX?-t.width/2:"start"===n.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,i="center"==n.overlayY?-t.height/2:"top"==n.overlayY?0:-t.height,{x:e.x+r,y:e.y+i}}_getOverlayFit(e,t,n,r){const i=pe(t);let{x:s,y:o}=e,a=this._getOffset(r,"x"),l=this._getOffset(r,"y");a&&(s+=a),l&&(o+=l);let c=0-o,u=o+i.height-n.height,h=this._subtractOverflows(i.width,0-s,s+i.width-n.width),d=this._subtractOverflows(i.height,c,u),p=h*d;return{visibleArea:p,isCompletelyWithinViewport:i.width*i.height===p,fitsInViewportVertically:d===i.height,fitsInViewportHorizontally:h==i.width}}_canFitWithFlexibleDimensions(e,t,n){if(this._hasFlexibleDimensions){const r=n.bottom-t.y,i=n.right-t.x,s=de(this._overlayRef.getConfig().minHeight),o=de(this._overlayRef.getConfig().minWidth),a=e.fitsInViewportHorizontally||null!=o&&o<=i;return(e.fitsInViewportVertically||null!=s&&s<=r)&&a}return!1}_pushOverlayOnScreen(e,t,n){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=pe(t),i=this._viewportRect,s=Math.max(e.x+r.width-i.width,0),o=Math.max(e.y+r.height-i.height,0),a=Math.max(i.top-n.top-e.y,0),l=Math.max(i.left-n.left-e.x,0);let c=0,u=0;return c=r.width<=i.width?l||-s:e.x<this._viewportMargin?i.left-n.left-e.x:0,u=r.height<=i.height?a||-o:e.y<this._viewportMargin?i.top-n.top-e.y:0,this._previousPushAmount={x:c,y:u},{x:e.x+c,y:e.y+u}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const t=this._getScrollVisibility(),n=new ne(e,t);this._positionChanges.next(n)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=e.overlayY;n="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let i=0;i<t.length;i++)t[i].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(e,t){const n=this._viewportRect,r=this._isRtl();let i,s,o,a,l,c;if("top"===t.overlayY)s=e.y,i=n.height-s+this._viewportMargin;else if("bottom"===t.overlayY)o=n.height-e.y+2*this._viewportMargin,i=n.height-o+this._viewportMargin;else{const t=Math.min(n.bottom-e.y+n.top,e.y),r=this._lastBoundingBoxSize.height;i=2*t,s=e.y-t,i>r&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-r/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)c=n.width-e.x+this._viewportMargin,a=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)l=e.x,a=n.right-e.x;else{const t=Math.min(n.right-e.x+n.left,e.x),r=this._lastBoundingBoxSize.width;a=2*t,l=e.x-t,a>r&&!this._isInitialRender&&!this._growAfterOpen&&(l=e.x-r/2)}return{top:s,left:l,bottom:o,right:c,width:a,height:i}}_setBoundingBoxStyles(e,t){const n=this._calculateBoundingBoxRect(e,t);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const e=this._overlayRef.getConfig().maxHeight,i=this._overlayRef.getConfig().maxWidth;r.height=s(n.height),r.top=s(n.top),r.bottom=s(n.bottom),r.width=s(n.width),r.left=s(n.left),r.right=s(n.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",e&&(r.maxHeight=s(e)),i&&(r.maxWidth=s(i))}this._lastBoundingBoxSize=n,he(this._boundingBox.style,r)}_resetBoundingBoxStyles(){he(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){he(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const n={},r=this._hasExactPosition(),i=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const r=this._viewportRuler.getViewportScrollPosition();he(n,this._getExactOverlayY(t,e,r)),he(n,this._getExactOverlayX(t,e,r))}else n.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),n.transform=a.trim(),o.maxHeight&&(r?n.maxHeight=s(o.maxHeight):i&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=s(o.maxWidth):i&&(n.maxWidth="")),he(this._pane.style,n)}_getExactOverlayY(e,t,n){let r={top:"",bottom:""},i=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n));let o=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return i.y-=o,"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(i.y+this._overlayRect.height)+"px":r.top=s(i.y),r}_getExactOverlayX(e,t,n){let r,i={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n)),r=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===r?i.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":i.left=s(o.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),n=this._scrollables.map(e=>e.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Q(e,n),isOriginOutsideView:Y(e,n),isOverlayClipped:Q(t,n),isOverlayOutsideView:Y(t,n)}}_subtractOverflows(e,...t){return t.reduce((e,t)=>e-Math.max(t,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&i(e).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof r.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,n=e.height||0;return{top:e.y,bottom:e.y+n,left:e.x,right:e.x+t,height:n,width:t}}}function he(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function de(e){if("number"!=typeof e&&null!=e){const[t,n]=e.split(ce);return n&&"px"!==n?null:parseFloat(t)}return e||null}function pe(e){return{top:Math.floor(e.top),right:Math.floor(e.right),bottom:Math.floor(e.bottom),left:Math.floor(e.left),width:Math.floor(e.width),height:Math.floor(e.height)}}class fe{constructor(e,t,n,r,i,s,o){this._preferredPositions=[],this._positionStrategy=new ue(n,r,i,s,o).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(e,t),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(e){this._overlayRef=e,this._positionStrategy.attach(e),this._direction&&(e.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(e){this._positionStrategy.withScrollableContainers(e)}withFallbackPosition(e,t,n,r){const i=new te(e,t,n,r);return this._preferredPositions.push(i),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(e){return this._overlayRef?this._overlayRef.setDirection(e):this._direction=e,this}withOffsetX(e){return this._positionStrategy.withDefaultOffsetX(e),this}withOffsetY(e){return this._positionStrategy.withDefaultOffsetY(e),this}withLockedPosition(e){return this._positionStrategy.withLockedPosition(e),this}withPositions(e){return this._preferredPositions=e.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(e){return this._positionStrategy.setOrigin(e),this}}const ge="cdk-global-overlay-wrapper";class me{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(ge),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:i,maxWidth:s,maxHeight:o}=n,a=!("100%"!==r&&"100vw"!==r||s&&"100%"!==s&&"100vw"!==s),l=!("100%"!==i&&"100vh"!==i||o&&"100%"!==o&&"100vh"!==o);e.position=this._cssPosition,e.marginLeft=a?"0":this._leftOffset,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,a?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,n=t.style;t.classList.remove(ge),n.justifyContent=n.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let ye=(()=>{class e{constructor(e,t,n,r){this._viewportRuler=e,this._document=t,this._platform=n,this._overlayContainer=r}global(){return new me}connectedTo(e,t,n){return new fe(t,n,e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(e){return new ue(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(j),r.LFG(x.K0),r.LFG(R),r.LFG(oe))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(j),r.LFG(x.K0),r.LFG(R),r.LFG(oe))},token:e,providedIn:"root"}),e})(),_e=0,ve=(()=>{class e{constructor(e,t,n,r,i,s,o,a,l,c,u){this.scrollStrategies=e,this._overlayContainer=t,this._componentFactoryResolver=n,this._positionBuilder=r,this._keyboardDispatcher=i,this._injector=s,this._ngZone=o,this._document=a,this._directionality=l,this._location=c,this._outsideClickDispatcher=u}create(e){const t=this._createHostElement(),n=this._createPaneElement(t),r=this._createPortalOutlet(n),i=new ee(e);return i.direction=i.direction||this._directionality.value,new ae(r,t,n,i,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const t=this._document.createElement("div");return t.id="cdk-overlay-"+_e++,t.classList.add("cdk-overlay-pane"),e.appendChild(t),t}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(r.z2F)),new z.u0(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(X),r.LFG(oe),r.LFG(r._Vd),r.LFG(ye),r.LFG(ie),r.LFG(r.zs3),r.LFG(r.R0b),r.LFG(x.K0),r.LFG(M),r.LFG(x.Ye),r.LFG(se))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const we={provide:new r.OlP("cdk-connected-overlay-scroll-strategy"),deps:[ve],useFactory:function(e){return()=>e.scrollStrategies.reposition()}};let be=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[ve,we],imports:[[U,z.eL,B],B]}),e})()},7636:(e,t,n)=>{"use strict";n.d(t,{C5:()=>s,u0:()=>l,nK:()=>u,eL:()=>c,UE:()=>o});var r=n(7716);n(8583);class i{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class s extends i{constructor(e,t,n,r){super(),this.component=e,this.viewContainerRef=t,this.injector=n,this.componentFactoryResolver=r}}class o extends i{constructor(e,t,n){super(),this.templateRef=e,this.viewContainerRef=t,this.context=n}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class a extends i{constructor(e){super(),this.element=e instanceof r.SBq?e.nativeElement:e}}class l extends class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof s?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof o?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof a?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(e,t,n,r,i){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=e=>{const t=e.element,n=this._document.createComment("dom-portal");t.parentNode.insertBefore(n,t),this.outletElement.appendChild(t),this._attachedPortal=e,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(t,n)})},this._document=i}attachComponentPortal(e){const t=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let n;return e.viewContainerRef?(n=e.viewContainerRef.createComponent(t,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>n.destroy())):(n=t.create(e.injector||this._defaultInjector),this._appRef.attachView(n.hostView),this.setDisposeFn(()=>{this._appRef.detachView(n.hostView),n.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(n)),this._attachedPortal=e,n}attachTemplatePortal(e){let t=e.viewContainerRef,n=t.createEmbeddedView(e.templateRef,e.context);return n.rootNodes.forEach(e=>this.outletElement.appendChild(e)),n.detectChanges(),this.setDisposeFn(()=>{let e=t.indexOf(n);-1!==e&&t.remove(e)}),this._attachedPortal=e,n}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let c=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})();class u{constructor(e,t){this._parentInjector=e,this._customTokens=t}get(e,t){const n=this._customTokens.get(e);return void 0!==n?n:this._parentInjector.get(e,t)}}},8583:(e,t,n)=>{"use strict";n.d(t,{mr:()=>w,ez:()=>Q,H9:()=>Y,K0:()=>l,Do:()=>T,V_:()=>h,Ye:()=>S,S$:()=>_,mk:()=>B,sg:()=>$,O5:()=>G,PC:()=>W,b0:()=>b,lw:()=>c,EM:()=>te,JF:()=>ie,xG:()=>F,jK:()=>N,NF:()=>X,PM:()=>ee,qS:()=>j,w_:()=>a,bD:()=>J,q:()=>s,Mx:()=>q,HT:()=>o});var r=n(7716);let i=null;function s(){return i}function o(e){i||(i=e)}class a{}const l=new r.OlP("DocumentToken");let c=(()=>{class e{historyGo(e){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:u,token:e,providedIn:"platform"}),e})();function u(){return(0,r.LFG)(d)}const h=new r.OlP("Location Initialized");let d=(()=>{class e extends c{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(e){const t=s().getGlobalEventTarget(this._doc,"window");return t.addEventListener("popstate",e,!1),()=>t.removeEventListener("popstate",e)}onHashChange(e){const t=s().getGlobalEventTarget(this._doc,"window");return t.addEventListener("hashchange",e,!1),()=>t.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){p()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){p()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(l))},e.\u0275prov=(0,r.Yz7)({factory:f,token:e,providedIn:"platform"}),e})();function p(){return!!window.history.pushState}function f(){return new d((0,r.LFG)(l))}function g(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function m(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function y(e){return e&&"?"!==e[0]?"?"+e:e}let _=(()=>{class e{historyGo(e){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:v,token:e,providedIn:"root"}),e})();function v(e){const t=(0,r.LFG)(l).location;return new b((0,r.LFG)(c),t&&t.origin||"")}const w=new r.OlP("appBaseHref");let b=(()=>{class e extends _{constructor(e,t){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=t}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return g(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+y(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${t}${n}`:t}pushState(e,t,n,r){const i=this.prepareExternalUrl(n+y(r));this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){const i=this.prepareExternalUrl(n+y(r));this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformLocation).historyGo)||void 0===n||n.call(t,e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(c),r.LFG(w,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),T=(()=>{class e extends _{constructor(e,t){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=t&&(this._baseHref=t)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}prepareExternalUrl(e){const t=g(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,n,r){let i=this.prepareExternalUrl(n+y(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){let i=this.prepareExternalUrl(n+y(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformLocation).historyGo)||void 0===n||n.call(t,e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(c),r.LFG(w,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),S=(()=>{class e{constructor(e,t){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const n=this._platformStrategy.getBaseHref();this._platformLocation=t,this._baseHref=m(C(n)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+y(t))}normalize(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,C(t)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,t="",n=null){this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+y(t)),n)}replaceState(e,t="",n=null){this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+y(t)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformStrategy).historyGo)||void 0===n||n.call(t,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)}))}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(n=>n(e,t))}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(_),r.LFG(c))},e.normalizeQueryParams=y,e.joinWithSlash=g,e.stripTrailingSlash=m,e.\u0275prov=(0,r.Yz7)({factory:E,token:e,providedIn:"root"}),e})();function E(){return new S((0,r.LFG)(_),(0,r.LFG)(c))}function C(e){return e.replace(/\/index.html$/,"")}const I={ADP:[void 0,void 0,0],AFN:[void 0,void 0,0],ALL:[void 0,void 0,0],AMD:[void 0,void 0,2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:[void 0,"\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["CFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var k=(()=>((k=k||{})[k.Decimal=0]="Decimal",k[k.Percent=1]="Percent",k[k.Currency=2]="Currency",k[k.Scientific=3]="Scientific",k))(),x=(()=>((x=x||{})[x.Zero=0]="Zero",x[x.One=1]="One",x[x.Two=2]="Two",x[x.Few=3]="Few",x[x.Many=4]="Many",x[x.Other=5]="Other",x))(),A=(()=>((A=A||{})[A.Decimal=0]="Decimal",A[A.Group=1]="Group",A[A.List=2]="List",A[A.PercentSign=3]="PercentSign",A[A.PlusSign=4]="PlusSign",A[A.MinusSign=5]="MinusSign",A[A.Exponential=6]="Exponential",A[A.SuperscriptingExponent=7]="SuperscriptingExponent",A[A.PerMille=8]="PerMille",A[A[1/0]=9]="Infinity",A[A.NaN=10]="NaN",A[A.TimeSeparator=11]="TimeSeparator",A[A.CurrencyDecimal=12]="CurrencyDecimal",A[A.CurrencyGroup=13]="CurrencyGroup",A))();function P(e,t){const n=(0,r.cg1)(e),i=n[r.wAp.NumberSymbols][t];if(void 0===i){if(t===A.CurrencyDecimal)return n[r.wAp.NumberSymbols][A.Decimal];if(t===A.CurrencyGroup)return n[r.wAp.NumberSymbols][A.Group]}return i}const R=r.kL8;function N(e,t,n="en"){const i=function(e){return(0,r.cg1)(e)[r.wAp.Currencies]}(n)[e]||I[e]||[],s=i[1];return"narrow"===t&&"string"==typeof s?s:i[0]||e}const O=/^(\d+)?\.((\d+)(-(\d+))?)?$/,D=".",L="0";function F(e,t,n,i,s){const o=function(e,t="-"){const n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=e.split(";"),i=r[0],s=r[1],o=-1!==i.indexOf(D)?i.split(D):[i.substring(0,i.lastIndexOf(L)+1),i.substring(i.lastIndexOf(L)+1)],a=o[0],l=o[1]||"";n.posPre=a.substr(0,a.indexOf("#"));for(let u=0;u<l.length;u++){const e=l.charAt(u);e===L?n.minFrac=n.maxFrac=u+1:"#"===e?n.maxFrac=u+1:n.posSuf+=e}const c=a.split(",");if(n.gSize=c[1]?c[1].length:0,n.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,s){const e=i.length-n.posPre.length-n.posSuf.length,t=s.indexOf("#");n.negPre=s.substr(0,t).replace(/'/g,""),n.negSuf=s.substr(t+e).replace(/'/g,"")}else n.negPre=t+n.posPre,n.negSuf=n.posSuf;return n}(function(e,t){return(0,r.cg1)(e)[r.wAp.NumberFormats][t]}(t,k.Currency),P(t,A.MinusSign));return o.minFrac=function(e){let t;const n=I[e];return n&&(t=n[2]),"number"==typeof t?t:2}(i),o.maxFrac=o.minFrac,function(e,t,n,r,i,s,o=!1){let a="",l=!1;if(isFinite(e)){let c=function(e){let t,n,r,i,s,o=Math.abs(e)+"",a=0;for((n=o.indexOf(D))>-1&&(o=o.replace(D,"")),(r=o.search(/e/i))>0?(n<0&&(n=r),n+=+o.slice(r+1),o=o.substring(0,r)):n<0&&(n=o.length),r=0;o.charAt(r)===L;r++);if(r===(s=o.length))t=[0],n=1;else{for(s--;o.charAt(s)===L;)s--;for(n-=r,t=[],i=0;r<=s;r++,i++)t[i]=Number(o.charAt(r))}return n>22&&(t=t.splice(0,21),a=n-1,n=1),{digits:t,exponent:a,integerLen:n}}(e);o&&(c=function(e){if(0===e.digits[0])return e;const t=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(0===t?e.digits.push(0,0):1===t&&e.digits.push(0),e.integerLen+=2),e}(c));let u=t.minInt,h=t.minFrac,d=t.maxFrac;if(s){const e=s.match(O);if(null===e)throw new Error(`${s} is not a valid digit info`);const t=e[1],n=e[3],r=e[5];null!=t&&(u=M(t)),null!=n&&(h=M(n)),null!=r?d=M(r):null!=n&&h>d&&(d=h)}!function(e,t,n){if(t>n)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${n}).`);let r=e.digits,i=r.length-e.integerLen;const s=Math.min(Math.max(t,i),n);let o=s+e.integerLen,a=r[o];if(o>0){r.splice(Math.max(e.integerLen,o));for(let e=o;e<r.length;e++)r[e]=0}else{i=Math.max(0,i),e.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let e=1;e<o;e++)r[e]=0}if(a>=5)if(o-1<0){for(let t=0;t>o;t--)r.unshift(0),e.integerLen++;r.unshift(1),e.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let l=0!==s;const c=t+e.integerLen,u=r.reduceRight(function(e,t,n,r){return r[n]=(t+=e)<10?t:t-10,l&&(0===r[n]&&n>=c?r.pop():l=!1),t>=10?1:0},0);u&&(r.unshift(u),e.integerLen++)}(c,h,d);let p=c.digits,f=c.integerLen;const g=c.exponent;let m=[];for(l=p.every(e=>!e);f<u;f++)p.unshift(0);for(;f<0;f++)p.unshift(0);f>0?m=p.splice(f,p.length):(m=p,p=[0]);const y=[];for(p.length>=t.lgSize&&y.unshift(p.splice(-t.lgSize,p.length).join(""));p.length>t.gSize;)y.unshift(p.splice(-t.gSize,p.length).join(""));p.length&&y.unshift(p.join("")),a=y.join(P(n,r)),m.length&&(a+=P(n,i)+m.join("")),g&&(a+=P(n,A.Exponential)+"+"+g)}else a=P(n,A.Infinity);return a=e<0&&!l?t.negPre+a+t.negSuf:t.posPre+a+t.posSuf,a}(e,o,t,A.CurrencyGroup,A.CurrencyDecimal,s).replace("\xa4",n).replace("\xa4","").trim()}function M(e){const t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t}class U{}let V=(()=>{class e extends U{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(R(t||this.locale)(e)){case x.Zero:return"zero";case x.One:return"one";case x.Two:return"two";case x.Few:return"few";case x.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.soG))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function j(e,t,n){return(0,r.dwT)(e,t,n)}function q(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[r,i]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(i)}return null}let B=(()=>{class e{constructor(e,t,n,r){this._iterableDiffers=e,this._keyValueDiffers=t,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,r.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachChangedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachRemovedItem(e=>{e.previousValue&&this._toggleClass(e.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(e=>{if("string"!=typeof e.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,r.AaK)(e.item)}`);this._toggleClass(e.item,!0)}),e.forEachRemovedItem(e=>this._toggleClass(e.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!0)):Object.keys(e).forEach(t=>this._toggleClass(t,!!e[t])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!1)):Object.keys(e).forEach(e=>this._toggleClass(e,!1)))}_toggleClass(e,t){(e=e.trim())&&e.split(/\s+/g).forEach(e=>{t?this._renderer.addClass(this._ngEl.nativeElement,e):this._renderer.removeClass(this._ngEl.nativeElement,e)})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.ZZ4),r.Y36(r.aQg),r.Y36(r.SBq),r.Y36(r.Qsj))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),e})();class z{constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $=(()=>{class e{constructor(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(t){throw new Error(`Cannot find a differ supporting object '${n}' of type '${e=n,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const t=[];e.forEachOperation((e,n,r)=>{if(null==e.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new z(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new H(e,n);t.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const s=new H(e,i);t.push(s)}});for(let n=0;n<t.length;n++)this._perViewChange(t[n].view,t[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const e=this._viewContainer.get(n);e.context.index=n,e.context.count=r,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,t){e.context.$implicit=t.item}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e})();class H{constructor(e,t){this.record=e,this.view=t}}let G=(()=>{class e{constructor(e,t){this._viewContainer=e,this._context=new Z,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){K("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){K("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.s_b),r.Y36(r.Rgc))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class Z{constructor(){this.$implicit=null,this.ngIf=null}}function K(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${(0,r.AaK)(t)}'.`)}let W=(()=>{class e{constructor(e,t,n){this._ngEl=e,this._differs=t,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,t){const[n,r]=e.split(".");null!=(t=null!=t&&r?`${t}${r}`:t)?this._renderer.setStyle(this._ngEl.nativeElement,n,t):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(e){e.forEachRemovedItem(e=>this._setStyle(e.key,null)),e.forEachAddedItem(e=>this._setStyle(e.key,e.currentValue)),e.forEachChangedItem(e=>this._setStyle(e.key,e.currentValue))}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.SBq),r.Y36(r.aQg),r.Y36(r.Qsj))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),e})(),Y=(()=>{class e{constructor(e,t="USD"){this._locale=e,this._defaultCurrencyCode=t}transform(t,n=this._defaultCurrencyCode,i="symbol",s,o){if(!function(e){return!(null==e||""===e||e!=e)}(t))return null;o=o||this._locale,"boolean"==typeof i&&(i=i?"symbol":"code");let a=n||this._defaultCurrencyCode;"code"!==i&&(a="symbol"===i||"symbol-narrow"===i?N(a,"symbol"===i?"wide":"narrow",o):i);try{return F(function(e){if("string"==typeof e&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if("number"!=typeof e)throw new Error(`${e} is not a number`);return e}(t),o,a,n,s)}catch(l){throw function(e,t){return Error(`InvalidPipeArgument: '${t}' for pipe '${(0,r.AaK)(e)}'`)}(e,l.message)}}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.soG,16),r.Y36(r.EJc,16))},e.\u0275pipe=r.Yjl({name:"currency",type:e,pure:!0}),e})(),Q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[{provide:U,useClass:V}]}),e})();const J="browser";function X(e){return e===J}function ee(e){return"server"===e}let te=(()=>{class e{}return e.\u0275prov=(0,r.Yz7)({token:e,providedIn:"root",factory:()=>new ne((0,r.LFG)(l),window)}),e})();class ne{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const n=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const e=r.shadowRoot;if(e){const n=e.getElementById(t)||e.querySelector(`[name="${t}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=re(this.window.history)||re(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function re(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class ie{}},1841:(e,t,n)=>{"use strict";n.d(t,{eN:()=>x,JF:()=>q,UA:()=>I});var r=n(8583),i=n(7716),s=n(5917),o=n(7574),a=n(4612),l=n(5435),c=n(8002);class u{}class h{}class d{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(e=>{const t=e.indexOf(":");if(t>0){const n=e.slice(0,t),r=n.toLowerCase(),i=e.slice(t+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let n=e[t];const r=t.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof d?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new d;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof d?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...n),this.headers.set(t,r);break;case"d":const i=e.value;if(i){let e=this.headers.get(t);if(!e)return;e=e.filter(e=>-1===i.indexOf(e)),0===e.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,e)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class p{encodeKey(e){return f(e)}encodeValue(e){return f(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}function f(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function g(e){return`${e}`}class m{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new p,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(e,t){const n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(e=>{const r=e.indexOf("="),[i,s]=-1==r?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,r)),t.decodeValue(e.slice(r+1))],o=n.get(i)||[];o.push(s),n.set(i,o)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const n=e.fromObject[t];this.map.set(t,Array.isArray(n)?n:[n])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(n=>{const r=e[n];Array.isArray(r)?r.forEach(e=>{t.push({param:n,value:e,op:"a"})}):t.push({param:n,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(e=>t+"="+this.encoder.encodeValue(e)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new m({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(g(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let t=this.map.get(e.param)||[];const n=t.indexOf(g(e.value));-1!==n&&t.splice(n,1),t.length>0?this.map.set(e.param,t):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class y{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function _(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function v(e){return"undefined"!=typeof Blob&&e instanceof Blob}function w(e){return"undefined"!=typeof FormData&&e instanceof FormData}class b{constructor(e,t,n,r){let i;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new d),this.context||(this.context=new y),this.params){const e=this.params.toString();if(0===e.length)this.urlWithParams=t;else{const n=t.indexOf("?");this.urlWithParams=t+(-1===n?"?":n<t.length-1?"&":"")+e}}else this.params=new m,this.urlWithParams=t}serializeBody(){return null===this.body?null:_(this.body)||v(this.body)||w(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof m?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||w(this.body)?null:v(this.body)?this.body.type||null:_(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof m?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const u=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((t,n)=>t.set(n,e.setHeaders[n]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((t,n)=>t.set(n,e.setParams[n]),c)),new b(n,r,s,{params:c,headers:l,context:u,reportProgress:a,responseType:i,withCredentials:o})}}var T=(()=>((T=T||{})[T.Sent=0]="Sent",T[T.UploadProgress=1]="UploadProgress",T[T.ResponseHeader=2]="ResponseHeader",T[T.DownloadProgress=3]="DownloadProgress",T[T.Response=4]="Response",T[T.User=5]="User",T))();class S{constructor(e,t=200,n="OK"){this.headers=e.headers||new d,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class E extends S{constructor(e={}){super(e),this.type=T.ResponseHeader}clone(e={}){return new E({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class C extends S{constructor(e={}){super(e),this.type=T.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new C({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class I extends S{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function k(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let x=(()=>{class e{constructor(e){this.handler=e}request(e,t,n={}){let r;if(e instanceof b)r=e;else{let i,s;i=n.headers instanceof d?n.headers:new d(n.headers),n.params&&(s=n.params instanceof m?n.params:new m({fromObject:n.params})),r=new b(e,t,void 0!==n.body?n.body:null,{headers:i,context:n.context,params:s,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=(0,s.of)(r).pipe((0,a.b)(e=>this.handler.handle(e)));if(e instanceof b||"events"===n.observe)return i;const o=i.pipe((0,l.h)(e=>e instanceof C));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe((0,c.U)(e=>{if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return o.pipe((0,c.U)(e=>{if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return o.pipe((0,c.U)(e=>{if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return o.pipe((0,c.U)(e=>e.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(e,t={}){return this.request("DELETE",e,t)}get(e,t={}){return this.request("GET",e,t)}head(e,t={}){return this.request("HEAD",e,t)}jsonp(e,t){return this.request("JSONP",e,{params:(new m).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,t={}){return this.request("OPTIONS",e,t)}patch(e,t,n={}){return this.request("PATCH",e,k(n,t))}post(e,t,n={}){return this.request("POST",e,k(n,t))}put(e,t,n={}){return this.request("PUT",e,k(n,t))}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(u))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();class A{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const P=new i.OlP("HTTP_INTERCEPTORS");let R=(()=>{class e{intercept(e,t){return t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();const N=/^\)\]\}',?\n/;let O=(()=>{class e{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new o.y(t=>{const n=this.xhrFactory.build();if(n.open(e.method,e.urlWithParams),e.withCredentials&&(n.withCredentials=!0),e.headers.forEach((e,t)=>n.setRequestHeader(e,t.join(","))),e.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const t=e.detectContentTypeHeader();null!==t&&n.setRequestHeader("Content-Type",t)}if(e.responseType){const t=e.responseType.toLowerCase();n.responseType="json"!==t?t:"text"}const r=e.serializeBody();let i=null;const s=()=>{if(null!==i)return i;const t=1223===n.status?204:n.status,r=n.statusText||"OK",s=new d(n.getAllResponseHeaders()),o=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(n)||e.url;return i=new E({headers:s,status:t,statusText:r,url:o}),i},o=()=>{let{headers:r,status:i,statusText:o,url:a}=s(),l=null;204!==i&&(l=void 0===n.response?n.responseText:n.response),0===i&&(i=l?200:0);let c=i>=200&&i<300;if("json"===e.responseType&&"string"==typeof l){const e=l;l=l.replace(N,"");try{l=""!==l?JSON.parse(l):null}catch(u){l=e,c&&(c=!1,l={error:u,text:l})}}c?(t.next(new C({body:l,headers:r,status:i,statusText:o,url:a||void 0})),t.complete()):t.error(new I({error:l,headers:r,status:i,statusText:o,url:a||void 0}))},a=e=>{const{url:r}=s(),i=new I({error:e,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});t.error(i)};let l=!1;const c=r=>{l||(t.next(s()),l=!0);let i={type:T.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===e.responseType&&n.responseText&&(i.partialText=n.responseText),t.next(i)},u=e=>{let n={type:T.UploadProgress,loaded:e.loaded};e.lengthComputable&&(n.total=e.total),t.next(n)};return n.addEventListener("load",o),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),e.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",u)),n.send(r),t.next({type:T.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",o),n.removeEventListener("timeout",a),e.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",u)),n.readyState!==n.DONE&&n.abort()}})}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(r.JF))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();const D=new i.OlP("XSRF_COOKIE_NAME"),L=new i.OlP("XSRF_HEADER_NAME");class F{}let M=(()=>{class e{constructor(e,t,n){this.doc=e,this.platform=t,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,r.Mx)(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(r.K0),i.LFG(i.Lbi),i.LFG(D))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),U=(()=>{class e{constructor(e,t){this.tokenService=e,this.headerName=t}intercept(e,t){const n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);const r=this.tokenService.getToken();return null===r||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,r)})),t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(F),i.LFG(L))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),V=(()=>{class e{constructor(e,t){this.backend=e,this.injector=t,this.chain=null}handle(e){if(null===this.chain){const e=this.injector.get(P,[]);this.chain=e.reduceRight((e,t)=>new A(e,t),this.backend)}return this.chain.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(h),i.LFG(i.zs3))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),j=(()=>{class e{static disable(){return{ngModule:e,providers:[{provide:U,useClass:R}]}}static withOptions(t={}){return{ngModule:e,providers:[t.cookieName?{provide:D,useValue:t.cookieName}:[],t.headerName?{provide:L,useValue:t.headerName}:[]]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[U,{provide:P,useExisting:U,multi:!0},{provide:F,useClass:M},{provide:D,useValue:"XSRF-TOKEN"},{provide:L,useValue:"X-XSRF-TOKEN"}]}),e})(),q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[x,{provide:u,useClass:V},O,{provide:h,useExisting:O}],imports:[[j.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),e})()},2482:(e,t,n)=>{var r,i,s;!function(o){if("object"==typeof e.exports){var a=o(0,t);void 0!==a&&(e.exports=a)}else i=[n,t],void 0===(s="function"==typeof(r=o)?r.apply(t,i):r)||(e.exports=s)}(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=void 0;t.default=["pt",[["AM","PM"],n,n],n,[["D","S","T","Q","Q","S","S"],["dom.","seg.","ter.","qua.","qui.","sex.","s\xe1b."],["domingo","segunda-feira","ter\xe7a-feira","quarta-feira","quinta-feira","sexta-feira","s\xe1bado"],["dom.","seg.","ter.","qua.","qui.","sex.","s\xe1b."]],n,[["J","F","M","A","M","J","J","A","S","O","N","D"],["jan.","fev.","mar.","abr.","mai.","jun.","jul.","ago.","set.","out.","nov.","dez."],["janeiro","fevereiro","mar\xe7o","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]],n,[["a.C.","d.C."],n,["antes de Cristo","depois de Cristo"]],0,[6,0],["dd/MM/y","d 'de' MMM 'de' y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1} {0}",n,n,n],[",",".",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4\xa0#,##0.00","#E0"],"BRL","R$","Real brasileiro",{AUD:["AU$","$"],JPY:["JP\xa5","\xa5"],PTE:["Esc."],RON:[n,"L"],SYP:[n,"S\xa3"],THB:["\u0e3f"],TWD:["NT$"],USD:["US$","$"]},"ltr",function(e){var t=Math.floor(Math.abs(e));return t===Math.floor(t)&&t>=0&&t<=1?1:5}]})},7716:(e,t,n)=>{"use strict";n.d(t,{deG:()=>nn,tb:()=>Nl,AFp:()=>kl,ip1:()=>Cl,CZH:()=>Il,hGG:()=>Cc,z2F:()=>gc,sBO:()=>Ca,Sil:()=>zl,_Vd:()=>Wo,EJc:()=>Ll,SBq:()=>Xo,qLn:()=>_r,vpe:()=>ol,gxx:()=>ns,tBr:()=>En,XFs:()=>A,OlP:()=>tn,zs3:()=>ys,ZZ4:()=>_a,aQg:()=>wa,soG:()=>Dl,YKP:()=>La,v3s:()=>yc,h0i:()=>Da,PXZ:()=>uc,R0b:()=>Gl,FiY:()=>Cn,Lbi:()=>Rl,g9A:()=>Pl,Qsj:()=>na,FYo:()=>ta,JOm:()=>br,Tiy:()=>ia,q3G:()=>dr,tp0:()=>In,EAV:()=>wc,Rgc:()=>Pa,dDg:()=>Xl,DyG:()=>rn,q4F:()=>oa,GfV:()=>sa,s_b:()=>Ma,ifc:()=>L,eFA:()=>hc,G48:()=>lc,Gpc:()=>p,f3M:()=>bn,X6Q:()=>ac,_c5:()=>Sc,VLi:()=>nc,c2e:()=>Ol,zSh:()=>is,wAp:()=>Lo,vHH:()=>m,EiD:()=>ur,mCW:()=>Zn,qzn:()=>Fn,JVY:()=>Un,pB0:()=>Bn,eBb:()=>jn,L6k:()=>Vn,LAX:()=>qn,cg1:()=>No,Tjo:()=>Tc,kL8:()=>Oo,yhl:()=>Mn,dqk:()=>j,sIi:()=>ks,CqO:()=>Gs,QGY:()=>$s,F4k:()=>Hs,dwT:()=>Ro,RDi:()=>Ee,AaK:()=>u,z3N:()=>Ln,qOj:()=>vs,TTD:()=>_e,_Bn:()=>Go,xp6:()=>li,uIk:()=>Ns,Gre:()=>Co,MT6:()=>Io,ekj:()=>co,Suo:()=>wl,Xpm:()=>Q,lG2:()=>ie,Yz7:()=>w,cJS:()=>b,oAB:()=>te,Yjl:()=>se,Y36:()=>Fs,_UZ:()=>Bs,qZA:()=>qs,TgZ:()=>js,EpF:()=>zs,n5z:()=>Yt,Ikx:()=>ko,LFG:()=>wn,$8M:()=>Jt,$Z:()=>Ms,NdJ:()=>Zs,CRH:()=>bl,oxw:()=>Ys,ALo:()=>rl,xi3:()=>il,Hsn:()=>Xs,F$t:()=>Js,Q6J:()=>Us,s9C:()=>eo,DdM:()=>Ja,VKq:()=>Xa,WLB:()=>el,iGM:()=>_l,MAs:()=>Ls,CHM:()=>Be,LSH:()=>pr,kYT:()=>ne,Udp:()=>lo,YNc:()=>Ds,_uU:()=>To,Oqu:()=>So,hij:()=>Eo,Gf:()=>vl});var r=n(9765),i=n(5319),s=n(7574),o=n(6682),a=n(8819);function l(e){for(let t in e)if(e[t]===l)return t;throw Error("Could not find renamed property on target object.")}function c(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function u(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(u).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function h(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const d=l({__forward_ref__:l});function p(e){return e.__forward_ref__=p,e.toString=function(){return u(this())},e}function f(e){return g(e)?e():e}function g(e){return"function"==typeof e&&e.hasOwnProperty(d)&&e.__forward_ref__===p}class m extends Error{constructor(e,t){super(function(e,t){return`${e?`NG0${e}: `:""}${t}`}(e,t)),this.code=e}}function y(e){return"string"==typeof e?e:null==e?"":String(e)}function _(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():y(e)}function v(e,t){const n=t?` in ${t}`:"";throw new m("201",`No provider for ${_(e)} found${n}`)}function w(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function b(e){return{providers:e.providers||[],imports:e.imports||[]}}function T(e){return S(e,C)||S(e,k)}function S(e,t){return e.hasOwnProperty(t)?e[t]:null}function E(e){return e&&(e.hasOwnProperty(I)||e.hasOwnProperty(x))?e[I]:null}const C=l({"\u0275prov":l}),I=l({"\u0275inj":l}),k=l({ngInjectableDef:l}),x=l({ngInjectorDef:l});var A=(()=>((A=A||{})[A.Default=0]="Default",A[A.Host=1]="Host",A[A.Self=2]="Self",A[A.SkipSelf=4]="SkipSelf",A[A.Optional=8]="Optional",A))();let P;function R(e){const t=P;return P=e,t}function N(e,t,n){const r=T(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&A.Optional?null:void 0!==t?t:void v(u(e),"Injector")}function O(e){return{toString:e}.toString()}var D=(()=>((D=D||{})[D.OnPush=0]="OnPush",D[D.Default=1]="Default",D))(),L=(()=>((L=L||{})[L.Emulated=0]="Emulated",L[L.None=2]="None",L[L.ShadowDom=3]="ShadowDom",L))();const F="undefined"!=typeof globalThis&&globalThis,M="undefined"!=typeof window&&window,U="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,V="undefined"!=typeof global&&global,j=F||V||M||U,q={},B=[],z=l({"\u0275cmp":l}),$=l({"\u0275dir":l}),H=l({"\u0275pipe":l}),G=l({"\u0275mod":l}),Z=l({"\u0275loc":l}),K=l({"\u0275fac":l}),W=l({__NG_ELEMENT_ID__:l});let Y=0;function Q(e){return O(()=>{const t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===D.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||B,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||L.Emulated,id:"c",styles:e.styles||B,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,i=e.features,s=e.pipes;return n.id+=Y++,n.inputs=re(e.inputs,t),n.outputs=re(e.outputs),i&&i.forEach(e=>e(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(J):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(X):null,n})}function J(e){return oe(e)||function(e){return e[$]||null}(e)}function X(e){return function(e){return e[H]||null}(e)}const ee={};function te(e){return O(()=>{const t={type:e.type,bootstrap:e.bootstrap||B,declarations:e.declarations||B,imports:e.imports||B,exports:e.exports||B,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(ee[e.id]=e.type),t})}function ne(e,t){return O(()=>{const n=ae(e,!0);n.declarations=t.declarations||B,n.imports=t.imports||B,n.exports=t.exports||B})}function re(e,t){if(null==e)return q;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,t&&(t[i]=s)}return n}const ie=Q;function se(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function oe(e){return e[z]||null}function ae(e,t){const n=e[G]||null;if(!n&&!0===t)throw new Error(`Type ${u(e)} does not have '\u0275mod' property.`);return n}const le=20,ce=10;function ue(e){return Array.isArray(e)&&"object"==typeof e[1]}function he(e){return Array.isArray(e)&&!0===e[1]}function de(e){return 0!=(8&e.flags)}function pe(e){return 2==(2&e.flags)}function fe(e){return 1==(1&e.flags)}function ge(e){return null!==e.template}function me(e,t){return e.hasOwnProperty(K)?e[K]:null}class ye{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function _e(){return ve}function ve(e){return e.type.prototype.ngOnChanges&&(e.setInput=be),we}function we(){const e=Te(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===q)e.previous=t;else for(let e in t)n[e]=t[e];e.current=null,this.ngOnChanges(t)}}function be(e,t,n,r){const i=Te(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:q,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],l=o[a];s[a]=new ye(l&&l.currentValue,t,o===q),e[r]=t}function Te(e){return e.__ngSimpleChanges__||null}let Se;function Ee(e){Se=e}function Ce(e){return!!e.listen}_e.ngInherit=!0;const Ie={createRenderer:(e,t)=>void 0!==Se?Se:"undefined"!=typeof document?document:void 0};function ke(e){for(;Array.isArray(e);)e=e[0];return e}function xe(e,t){return ke(t[e])}function Ae(e,t){return ke(t[e.index])}function Pe(e,t){return e.data[t]}function Re(e,t){return e[t]}function Ne(e,t){const n=t[e];return ue(n)?n:n[0]}function Oe(e){return 4==(4&e[2])}function De(e){return 128==(128&e[2])}function Le(e,t){return null==t?null:e[t]}function Fe(e){e[18]=0}function Me(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const Ue={lFrame:lt(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ve(){return Ue.bindingsEnabled}function je(){return Ue.lFrame.lView}function qe(){return Ue.lFrame.tView}function Be(e){return Ue.lFrame.contextLView=e,e[8]}function ze(){let e=$e();for(;null!==e&&64===e.type;)e=e.parent;return e}function $e(){return Ue.lFrame.currentTNode}function He(e,t){const n=Ue.lFrame;n.currentTNode=e,n.isParent=t}function Ge(){return Ue.lFrame.isParent}function Ze(){Ue.lFrame.isParent=!1}function Ke(){return Ue.isInCheckNoChangesMode}function We(e){Ue.isInCheckNoChangesMode=e}function Ye(){const e=Ue.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function Qe(){return Ue.lFrame.bindingIndex}function Je(){return Ue.lFrame.bindingIndex++}function Xe(e){const t=Ue.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function et(e,t){const n=Ue.lFrame;n.bindingIndex=n.bindingRootIndex=e,tt(t)}function tt(e){Ue.lFrame.currentDirectiveIndex=e}function nt(){return Ue.lFrame.currentQueryIndex}function rt(e){Ue.lFrame.currentQueryIndex=e}function it(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function st(e,t,n){if(n&A.SkipSelf){let r=t,i=e;for(;r=r.parent,!(null!==r||n&A.Host||(r=it(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;t=r,e=i}const r=Ue.lFrame=at();return r.currentTNode=t,r.lView=e,!0}function ot(e){const t=at(),n=e[1];Ue.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function at(){const e=Ue.lFrame,t=null===e?null:e.child;return null===t?lt(e):t}function lt(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function ct(){const e=Ue.lFrame;return Ue.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const ut=ct;function ht(){const e=ct();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function dt(){return Ue.lFrame.selectedIndex}function pt(e){Ue.lFrame.selectedIndex=e}function ft(){const e=Ue.lFrame;return Pe(e.tView,e.selectedIndex)}function gt(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const t=e.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=t;r&&(e.contentHooks||(e.contentHooks=[])).push(-n,r),i&&((e.contentHooks||(e.contentHooks=[])).push(n,i),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,i)),s&&(e.viewHooks||(e.viewHooks=[])).push(-n,s),o&&((e.viewHooks||(e.viewHooks=[])).push(n,o),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,o)),null!=a&&(e.destroyHooks||(e.destroyHooks=[])).push(n,a)}}function mt(e,t,n){vt(e,t,3,n)}function yt(e,t,n,r){(3&e[2])===n&&vt(e,t,n,r)}function _t(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function vt(e,t,n,r){const i=null!=r?r:-1,s=t.length-1;let o=0;for(let a=void 0!==r?65535&e[18]:0;a<s;a++)if("number"==typeof t[a+1]){if(o=t[a],null!=r&&o>=r)break}else t[a]<0&&(e[18]+=65536),(o<i||-1==i)&&(wt(e,n,t,a),e[18]=(4294901760&e[18])+a+2),a++}function wt(e,t,n,r){const i=n[r]<0,s=n[r+1],o=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}const bt=-1;class Tt{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function St(e,t,n){const r=Ce(e);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],l=n[i++];r?e.setAttribute(t,a,l,o):t.setAttributeNS(o,a,l)}else{const o=s,a=n[++i];Ct(o)?r&&e.setProperty(t,o,a):r?e.setAttribute(t,o,a):t.setAttribute(o,a),i++}}return i}function Et(e){return 3===e||4===e||6===e}function Ct(e){return 64===e.charCodeAt(0)}function It(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||kt(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function kt(e,t,n,r,i){let s=0,o=e.length;if(-1===t)o=-1;else for(;s<e.length;){const n=e[s++];if("number"==typeof n){if(n===t){o=-1;break}if(n>t){o=s-1;break}}}for(;s<e.length;){const t=e[s];if("number"==typeof t)break;if(t===n){if(null===r)return void(null!==i&&(e[s+1]=i));if(r===e[s+1])return void(e[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,n),null!==r&&e.splice(s++,0,r),null!==i&&e.splice(s++,0,i)}function xt(e){return e!==bt}function At(e){return 32767&e}function Pt(e,t){let n=e>>16,r=t;for(;n>0;)r=r[15],n--;return r}let Rt=!0;function Nt(e){const t=Rt;return Rt=e,t}let Ot=0;function Dt(e,t){const n=Ft(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Lt(r.data,e),Lt(t,null),Lt(r.blueprint,null));const i=Mt(e,t),s=e.injectorIndex;if(xt(i)){const e=At(i),n=Pt(i,t),r=n[1].data;for(let i=0;i<8;i++)t[s+i]=n[e+i]|r[e+i]}return t[s+8]=i,s}function Lt(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Ft(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Mt(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){const e=i[1],t=e.type;if(r=2===t?e.declTNode:1===t?i[6]:null,null===r)return bt;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return bt}function Ut(e,t,n){!function(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(W)&&(r=n[W]),null==r&&(r=n[W]=Ot++);const i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function Vt(e,t,n){if(n&A.Optional)return e;v(t,"NodeInjector")}function jt(e,t,n,r){if(n&A.Optional&&void 0===r&&(r=null),0==(n&(A.Self|A.Host))){const i=e[9],s=R(void 0);try{return i?i.get(t,r,n&A.Optional):N(t,r,n&A.Optional)}finally{R(s)}}return Vt(r,t,n)}function qt(e,t,n,r=A.Default,i){if(null!==e){const s=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(W)?e[W]:void 0;return"number"==typeof t?t>=0?255&t:zt:t}(n);if("function"==typeof s){if(!st(t,e,r))return r&A.Host?Vt(i,n,r):jt(t,n,r,i);try{const e=s(r);if(null!=e||r&A.Optional)return e;v(n)}finally{ut()}}else if("number"==typeof s){let i=null,o=Ft(e,t),a=bt,l=r&A.Host?t[16][6]:null;for((-1===o||r&A.SkipSelf)&&(a=-1===o?Mt(e,t):t[o+8],a!==bt&&Kt(r,!1)?(i=t[1],o=At(a),t=Pt(a,t)):o=-1);-1!==o;){const e=t[1];if(Zt(s,o,e.data)){const e=$t(o,t,n,i,r,l);if(e!==Bt)return e}a=t[o+8],a!==bt&&Kt(r,t[1].data[o+8]===l)&&Zt(s,o,t)?(i=e,o=At(a),t=Pt(a,t)):o=-1}}}return jt(t,n,r,i)}const Bt={};function zt(){return new Wt(ze(),je())}function $t(e,t,n,r,i,s){const o=t[1],a=o.data[e+8],l=Ht(a,o,n,null==r?pe(a)&&Rt:r!=o&&0!=(3&a.type),i&A.Host&&s===a);return null!==l?Gt(t,o,l,a):Bt}function Ht(e,t,n,r,i){const s=e.providerIndexes,o=t.data,a=1048575&s,l=e.directiveStart,c=s>>20,u=i?a+c:e.directiveEnd;for(let h=r?a:a+c;h<u;h++){const e=o[h];if(h<l&&n===e||h>=l&&e.type===n)return h}if(i){const e=o[l];if(e&&ge(e)&&e.type===n)return l}return null}function Gt(e,t,n,r){let i=e[n];const s=t.data;if(i instanceof Tt){const o=i;o.resolving&&function(e,t){throw new m("200",`Circular dependency in DI detected for ${e}`)}(_(s[n]));const a=Nt(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?R(o.injectImpl):null;st(e,r,A.Default);try{i=e[n]=o.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){const r=ve(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s))}(n,s[n],t)}finally{null!==l&&R(l),Nt(a),o.resolving=!1,ut()}}return i}function Zt(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function Kt(e,t){return!(e&A.Self||e&A.Host&&t)}class Wt{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return qt(this._tNode,this._lView,e,void 0,t)}}function Yt(e){return O(()=>{const t=e.prototype.constructor,n=t[K]||Qt(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const e=i[K]||Qt(i);if(e&&e!==n)return e;i=Object.getPrototypeOf(i)}return e=>new e})}function Qt(e){return g(e)?()=>{const t=Qt(f(e));return t&&t()}:me(e)}function Jt(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const e=n.length;let r=0;for(;r<e;){const i=n[r];if(Et(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<e&&"string"==typeof n[r];)r++;else{if(i===t)return n[r+1];r+=2}}}return null}(ze(),e)}const Xt="__parameters__";function en(e,t,n){return O(()=>{const r=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function i(...e){if(this instanceof i)return r.apply(this,e),this;const t=new i(...e);return n.annotation=t,n;function n(e,n,r){const i=e.hasOwnProperty(Xt)?e[Xt]:Object.defineProperty(e,Xt,{value:[]})[Xt];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(t),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class tn{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=w({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const nn=new tn("AnalyzeForEntryComponents"),rn=Function;function sn(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),sn(r,t)):t!==e&&t.push(r)}return t}function on(e,t){e.forEach(e=>Array.isArray(e)?on(e,t):t(e))}function an(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function ln(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function cn(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}function un(e,t,n){let r=dn(e,t);return r>=0?e[1|r]=n:(r=~r,function(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function hn(e,t){const n=dn(e,t);if(n>=0)return e[1|n]}function dn(e,t){return function(e,t,n){let r=0,i=e.length>>1;for(;i!==r;){const n=r+(i-r>>1),s=e[n<<1];if(t===s)return n<<1;s>t?i=n:r=n+1}return~(i<<1)}(e,t)}const pn={},fn=/\n/gm,gn="__source",mn=l({provide:String,useValue:l});let yn;function _n(e){const t=yn;return yn=e,t}function vn(e,t=A.Default){if(void 0===yn)throw new Error("inject() must be called from an injection context");return null===yn?N(e,void 0,t):yn.get(e,t&A.Optional?null:void 0,t)}function wn(e,t=A.Default){return(P||vn)(f(e),t)}const bn=wn;function Tn(e){const t=[];for(let n=0;n<e.length;n++){const r=f(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let e,n=A.Default;for(let t=0;t<r.length;t++){const i=r[t],s=i.__NG_DI_FLAG__;"number"==typeof s?-1===s?e=i.token:n|=s:e=i}t.push(wn(e,n))}else t.push(wn(r))}return t}function Sn(e,t){return e.__NG_DI_FLAG__=t,e.prototype.__NG_DI_FLAG__=t,e}const En=Sn(en("Inject",e=>({token:e})),-1),Cn=Sn(en("Optional"),8),In=Sn(en("SkipSelf"),4);let kn;function xn(e){var t;return(null===(t=function(){if(void 0===kn&&(kn=null,j.trustedTypes))try{kn=j.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(t){}return kn}())||void 0===t?void 0:t.createHTML(e))||e}class An{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Pn extends An{getTypeName(){return"HTML"}}class Rn extends An{getTypeName(){return"Style"}}class Nn extends An{getTypeName(){return"Script"}}class On extends An{getTypeName(){return"URL"}}class Dn extends An{getTypeName(){return"ResourceURL"}}function Ln(e){return e instanceof An?e.changingThisBreaksApplicationSecurity:e}function Fn(e,t){const n=Mn(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}function Mn(e){return e instanceof An&&e.getTypeName()||null}function Un(e){return new Pn(e)}function Vn(e){return new Rn(e)}function jn(e){return new Nn(e)}function qn(e){return new On(e)}function Bn(e){return new Dn(e)}class zn{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(xn(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class $n{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const t=this.inertDocument.createElement("body");e.appendChild(t)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=xn(e),t;const n=this.inertDocument.createElement("body");return n.innerHTML=xn(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const n=t.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||e.removeAttribute(n)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Hn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Gn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Zn(e){return(e=String(e)).match(Hn)||e.match(Gn)?e:"unsafe:"+e}function Kn(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function Wn(...e){const t={};for(const n of e)for(const e in n)n.hasOwnProperty(e)&&(t[e]=!0);return t}const Yn=Kn("area,br,col,hr,img,wbr"),Qn=Kn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Jn=Kn("rp,rt"),Xn=Wn(Jn,Qn),er=Wn(Yn,Wn(Qn,Kn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Wn(Jn,Kn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Xn),tr=Kn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),nr=Kn("srcset"),rr=Wn(tr,nr,Kn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Kn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ir=Kn("script,style,template");class sr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let e=this.checkClobberedElement(t,t.nextSibling);if(e){t=e;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!er.hasOwnProperty(t))return this.sanitizedSomething=!0,!ir.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let i=0;i<n.length;i++){const e=n.item(i),t=e.name,s=t.toLowerCase();if(!rr.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let o=e.value;tr[s]&&(o=Zn(o)),nr[s]&&(r=o,o=(r=String(r)).split(",").map(e=>Zn(e.trim())).join(", ")),this.buf.push(" ",t,'="',lr(o),'"')}var r;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();er.hasOwnProperty(t)&&!Yn.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(lr(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const or=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ar=/([^\#-~ |!])/g;function lr(e){return e.replace(/&/g,"&amp;").replace(or,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(ar,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let cr;function ur(e,t){let n=null;try{cr=cr||function(e){const t=new $n(e);return function(){try{return!!(new window.DOMParser).parseFromString(xn(""),"text/html")}catch(e){return!1}}()?new zn(t):t}(e);let r=t?String(t):"";n=cr.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=cr.getInertBodyElement(r)}while(r!==s);return xn((new sr).sanitizeChildren(hr(n)||n))}finally{if(n){const e=hr(n)||n;for(;e.firstChild;)e.removeChild(e.firstChild)}}}function hr(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var dr=(()=>((dr=dr||{})[dr.NONE=0]="NONE",dr[dr.HTML=1]="HTML",dr[dr.STYLE=2]="STYLE",dr[dr.SCRIPT=3]="SCRIPT",dr[dr.URL=4]="URL",dr[dr.RESOURCE_URL=5]="RESOURCE_URL",dr))();function pr(e){const t=function(){const e=je();return e&&e[12]}();return t?t.sanitize(dr.URL,e)||"":Fn(e,"URL")?Ln(e):Zn(y(e))}function fr(e,t){e.__ngContext__=t}function gr(e){const t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function mr(e){return e.ngOriginalError}function yr(e,...t){e.error(...t)}class _r{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e&&e.ngErrorLogger||yr}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?function(e){return e.ngDebugContext}(e)||this._findContext(mr(e)):null}_findOriginalError(e){let t=e&&mr(e);for(;t&&mr(t);)t=mr(t);return t||null}}const vr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(j))();function wr(e){return e instanceof Function?e():e}var br=(()=>((br=br||{})[br.Important=1]="Important",br[br.DashCase=2]="DashCase",br))();function Tr(e,t){return(void 0)(e,t)}function Sr(e){const t=e[3];return he(t)?t[3]:t}function Er(e){return Ir(e[13])}function Cr(e){return Ir(e[4])}function Ir(e){for(;null!==e&&!he(e);)e=e[4];return e}function kr(e,t,n,r,i){if(null!=r){let s,o=!1;he(r)?s=r:ue(r)&&(o=!0,r=r[0]);const a=ke(r);0===e&&null!==n?null==i?Lr(t,n,a):Dr(t,n,a,i||null,!0):1===e&&null!==n?Dr(t,n,a,i||null,!0):2===e?function(e,t,n){const r=Mr(e,t);r&&function(e,t,n,r){Ce(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,a,o):3===e&&t.destroyNode(a),null!=s&&function(e,t,n,r,i){const s=n[7];s!==ke(n)&&kr(t,e,r,s,i);for(let o=ce;o<n.length;o++){const i=n[o];Hr(i[1],i,e,t,r,s)}}(t,e,s,n,i)}}function xr(e,t,n){return Ce(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Ar(e,t){const n=e[9],r=n.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,Me(i,-1)),n.splice(r,1)}function Pr(e,t){if(e.length<=ce)return;const n=ce+t,r=e[n];if(r){const s=r[17];null!==s&&s!==e&&Ar(s,r),t>0&&(e[n-1][4]=r[4]);const o=ln(e,ce+t);Hr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Rr(e,t){if(!(256&t[2])){const n=t[11];Ce(n)&&n.destroyNode&&Hr(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return Nr(e[1],e);for(;t;){let n=null;if(ue(t))n=t[13];else{const e=t[10];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)ue(t)&&Nr(t[1],t),t=t[3];null===t&&(t=e),ue(t)&&Nr(t[1],t),n=t&&t[4]}t=n}}(t)}}function Nr(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const e=t[n[r]];if(!(e instanceof Tt)){const t=n[r+1];if(Array.isArray(t))for(let n=0;n<t.length;n+=2){const r=e[t[n]],i=t[n+1];try{i.call(r)}finally{}}else try{t.call(e)}finally{}}}}(e,t),function(e,t){const n=e.cleanup,r=t[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const e=n[s+1],o="function"==typeof e?e(t):ke(t[e]),a=r[i=n[s+2]],l=n[s+3];"boolean"==typeof l?o.removeEventListener(n[s],a,l):l>=0?r[i=l]():r[i=-l].unsubscribe(),s+=2}else{const e=r[i=n[s+1]];n[s].call(e)}if(null!==r){for(let e=i+1;e<r.length;e++)(0,r[e])();t[7]=null}}(e,t),1===t[1].type&&Ce(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&he(t[3])){n!==t[3]&&Ar(n,t);const r=t[19];null!==r&&r.detachView(e)}}}function Or(e,t,n){return function(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const t=e.data[r.directiveStart].encapsulation;if(t===L.None||t===L.Emulated)return null}return Ae(r,n)}(e,t.parent,n)}function Dr(e,t,n,r,i){Ce(e)?e.insertBefore(t,n,r,i):t.insertBefore(n,r,i)}function Lr(e,t,n){Ce(e)?e.appendChild(t,n):t.appendChild(n)}function Fr(e,t,n,r,i){null!==r?Dr(e,t,n,r,i):Lr(e,t,n)}function Mr(e,t){return Ce(e)?e.parentNode(t):t.parentNode}function Ur(e,t,n){return Vr(e,t,n)}let Vr=function(e,t,n){return 40&e.type?Ae(e,n):null};function jr(e,t,n,r){const i=Or(e,r,t),s=t[11],o=Ur(r.parent||t[6],r,t);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Fr(s,i,n[a],o,!1);else Fr(s,i,n,o,!1)}function qr(e,t){if(null!==t){const n=t.type;if(3&n)return Ae(t,e);if(4&n)return zr(-1,e[t.index]);if(8&n){const n=t.child;if(null!==n)return qr(e,n);{const n=e[t.index];return he(n)?zr(-1,n):ke(n)}}if(32&n)return Tr(t,e)()||ke(e[t.index]);{const n=Br(e,t);return null!==n?Array.isArray(n)?n[0]:qr(Sr(e[16]),n):qr(e,t.next)}}return null}function Br(e,t){return null!==t?e[16][6].projection[t.projection]:null}function zr(e,t){const n=ce+e+1;if(n<t.length){const e=t[n],r=e[1].firstChild;if(null!==r)return qr(e,r)}return t[7]}function $r(e,t,n,r,i,s,o){for(;null!=n;){const a=r[n.index],l=n.type;if(o&&0===t&&(a&&fr(ke(a),r),n.flags|=4),64!=(64&n.flags))if(8&l)$r(e,t,n.child,r,i,s,!1),kr(t,e,i,a,s);else if(32&l){const o=Tr(n,r);let l;for(;l=o();)kr(t,e,i,l,s);kr(t,e,i,a,s)}else 16&l?Gr(e,t,r,n,i,s):kr(t,e,i,a,s);n=o?n.projectionNext:n.next}}function Hr(e,t,n,r,i,s){$r(n,r,e.firstChild,t,i,s,!1)}function Gr(e,t,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let l=0;l<a.length;l++)kr(t,e,i,a[l],s);else $r(e,t,a,o[3],i,s,!0)}function Zr(e,t,n){Ce(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function Kr(e,t,n){Ce(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function Wr(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const n=t.length;if(i+n===r||e.charCodeAt(i+n)<=32)return i}n=i+1}}const Yr="ng-template";function Qr(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==Wr(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function Jr(e){return 4===e.type&&e.value!==Yr}function Xr(e,t,n){return t===(4!==e.type||n?e.value:Yr)}function ei(e,t,n){let r=4;const i=e.attrs||[],s=function(e){for(let t=0;t<e.length;t++)if(Et(e[t]))return t;return e.length}(i);let o=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!Xr(e,l,n)||""===l&&1===t.length){if(ti(r))return!1;o=!0}}else{const c=8&r?l:t[++a];if(8&r&&null!==e.attrs){if(!Qr(e.attrs,c,n)){if(ti(r))return!1;o=!0}continue}const u=ni(8&r?"class":l,i,Jr(e),n);if(-1===u){if(ti(r))return!1;o=!0;continue}if(""!==c){let e;e=u>s?"":i[u+1].toLowerCase();const t=8&r?e:null;if(t&&-1!==Wr(t,c,0)||2&r&&c!==e){if(ti(r))return!1;o=!0}}}}else{if(!o&&!ti(r)&&!ti(l))return!1;if(o&&ti(l))continue;o=!1,r=l|1&r}}return ti(r)||o}function ti(e){return 0==(1&e)}function ni(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let n=!1;for(;i<t.length;){const r=t[i];if(r===e)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let e=t[++i];for(;"string"==typeof e;)e=t[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function ri(e,t,n=!1){for(let r=0;r<t.length;r++)if(ei(e,t[r],n))return!0;return!1}function ii(e,t){e:for(let n=0;n<t.length;n++){const r=t[n];if(e.length===r.length){for(let t=0;t<e.length;t++)if(e[t]!==r[t])continue e;return!0}}return!1}function si(e,t){return e?":not("+t.trim()+")":t}function oi(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let o=e[n];if("string"==typeof o)if(2&r){const t=e[++n];i+="["+o+(t.length>0?'="'+t+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||ti(o)||(t+=si(s,i),i=""),r=o,s=s||!ti(r);n++}return""!==i&&(t+=si(s,i)),t}const ai={};function li(e){ci(qe(),je(),dt()+e,Ke())}function ci(e,t,n,r){if(!r)if(3==(3&t[2])){const r=e.preOrderCheckHooks;null!==r&&mt(t,r,n)}else{const r=e.preOrderHooks;null!==r&&yt(t,r,0,n)}pt(n)}function ui(e,t){return e<<17|t<<2}function hi(e){return e>>17&32767}function di(e){return 2|e}function pi(e){return(131068&e)>>2}function fi(e,t){return-131069&e|t<<2}function gi(e){return 1|e}function mi(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=e.data[s];rt(i),n.contentQueries(2,t[s],s)}}}function yi(e,t,n,r,i,s,o,a,l,c){const u=t.blueprint.slice();return u[0]=i,u[2]=140|r,Fe(u),u[3]=u[15]=e,u[8]=n,u[10]=o||e&&e[10],u[11]=a||e&&e[11],u[12]=l||e&&e[12]||null,u[9]=c||e&&e[9]||null,u[6]=s,u[16]=2==t.type?e[16]:u,u}function _i(e,t,n,r,i){let s=e.data[t];if(null===s)s=function(e,t,n,r,i){const s=$e(),o=Ge(),a=e.data[t]=function(e,t,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}(e,t,n,r,i),Ue.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const e=function(){const e=Ue.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();s.injectorIndex=null===e?-1:e.injectorIndex}return He(s,!0),s}function vi(e,t,n,r){if(0===n)return-1;const i=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function wi(e,t,n){ot(t);try{const r=e.viewQuery;null!==r&&Wi(1,r,n);const i=e.template;null!==i&&Si(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&mi(e,t),e.staticViewQueries&&Wi(2,e.viewQuery,n);const s=e.components;null!==s&&function(e,t){for(let n=0;n<t.length;n++)$i(e,t[n])}(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),r}finally{t[2]&=-5,ht()}}function bi(e,t,n,r){const i=t[2];if(256==(256&i))return;ot(t);const s=Ke();try{Fe(t),Ue.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&Si(e,t,n,2,r);const o=3==(3&i);if(!s)if(o){const n=e.preOrderCheckHooks;null!==n&&mt(t,n,null)}else{const n=e.preOrderHooks;null!==n&&yt(t,n,0,null),_t(t,0)}if(function(e){for(let t=Er(e);null!==t;t=Cr(t)){if(!t[2])continue;const e=t[9];for(let t=0;t<e.length;t++){const n=e[t],r=n[3];0==(1024&n[2])&&Me(r,1),n[2]|=1024}}}(t),function(e){for(let t=Er(e);null!==t;t=Cr(t))for(let e=ce;e<t.length;e++){const n=t[e],r=n[1];De(n)&&bi(r,n,r.template,n[8])}}(t),null!==e.contentQueries&&mi(e,t),!s)if(o){const n=e.contentCheckHooks;null!==n&&mt(t,n)}else{const n=e.contentHooks;null!==n&&yt(t,n,1),_t(t,1)}!function(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let e=0;e<n.length;e++){const r=n[e];if(r<0)pt(~r);else{const i=r,s=n[++e],o=n[++e];et(s,i),o(2,t[i])}}}finally{pt(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let n=0;n<t.length;n++)Bi(e,t[n])}(t,a);const l=e.viewQuery;if(null!==l&&Wi(2,l,r),!s)if(o){const n=e.viewCheckHooks;null!==n&&mt(t,n)}else{const n=e.viewHooks;null!==n&&yt(t,n,2),_t(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),s||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Me(t[3],-1))}finally{ht()}}function Ti(e,t,n,r){const i=t[10],s=!Ke(),o=Oe(t);try{s&&!o&&i.begin&&i.begin(),o&&wi(e,t,r),bi(e,t,n,r)}finally{s&&!o&&i.end&&i.end()}}function Si(e,t,n,r,i){const s=dt(),o=2&r;try{pt(-1),o&&t.length>le&&ci(e,t,le,Ke()),n(r,i)}finally{pt(s)}}function Ei(e,t,n){Ve()&&(function(e,t,n,r){const i=n.directiveStart,s=n.directiveEnd;e.firstCreatePass||Dt(n,t),fr(r,t);const o=n.initialInputs;for(let a=i;a<s;a++){const r=e.data[a],s=ge(r);s&&Ui(t,n,r);const l=Gt(t,e,a,n);fr(l,t),null!==o&&Vi(0,a-i,l,r,0,o),s&&(Ne(n.index,t)[8]=l)}}(e,t,n,Ae(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=Ue.lFrame.currentDirectiveIndex;try{pt(s);for(let n=r;n<i;n++){const r=e.data[n],i=t[n];tt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Oi(r,i)}}finally{pt(-1),tt(o)}}(e,t,n))}function Ci(e,t,n=Ae){const r=t.localNames;if(null!==r){let i=t.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(t,e):e[o];e[i++]=a}}}function Ii(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=ki(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function ki(e,t,n,r,i,s,o,a,l,c){const u=le+r,h=u+i,d=function(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:ai);return n}(u,h),p="function"==typeof c?c():c;return d[1]={type:e,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:t,data:d.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1}}function xi(e,t,n,r){const i=Qi(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&Ji(e).push(r,i.length-1))}function Ai(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function Pi(e,t,n,r,i,s,o,a){const l=Ae(t,n);let c,u=t.inputs;var h;!a&&null!=u&&(c=u[r])?(es(e,n,c,r,i),pe(t)&&function(e,t){const n=Ne(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=o?o(i,t.value||"",r):i,Ce(s)?s.setProperty(l,r,i):Ct(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}function Ri(e,t,n,r){let i=!1;if(Ve()){const s=function(e,t,n){const r=e.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];ri(n,o.selectors,!1)&&(i||(i=[]),Ut(Dt(n,t),e,o.type),ge(o)?(Di(e,n),i.unshift(o)):i.push(o))}return i}(e,t,n),o=null===r?null:{"":-1};if(null!==s){i=!0,Fi(n,e.data.length,s.length);for(let e=0;e<s.length;e++){const t=s[e];t.providersResolver&&t.providersResolver(t)}let r=!1,a=!1,l=vi(e,t,s.length,null);for(let i=0;i<s.length;i++){const c=s[i];n.mergedAttrs=It(n.mergedAttrs,c.hostAttrs),Mi(e,n,t,l,c),Li(l,c,o),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const u=c.type.prototype;!r&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),r=!0),a||!u.ngOnChanges&&!u.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),a=!0),l++}!function(e,t){const n=t.directiveEnd,r=e.data,i=t.attrs,s=[];let o=null,a=null;for(let l=t.directiveStart;l<n;l++){const e=r[l],n=e.inputs,c=null===i||Jr(t)?null:ji(n,i);s.push(c),o=Ai(n,l,o),a=Ai(e.outputs,l,a)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=o,t.outputs=a}(e,n)}o&&function(e,t,n){if(t){const r=e.localNames=[];for(let e=0;e<t.length;e+=2){const i=n[t[e+1]];if(null==i)throw new m("301",`Export of name '${t[e+1]}' not found!`);r.push(t[e],i)}}}(n,r,o)}return n.mergedAttrs=It(n.mergedAttrs,n.attrs),i}function Ni(e,t,n,r,i,s){const o=s.hostBindings;if(o){let n=e.hostBindingOpCodes;null===n&&(n=e.hostBindingOpCodes=[]);const s=~t.index;(function(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(r,i,o)}}function Oi(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Di(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function Li(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;ge(t)&&(n[""]=e)}}function Fi(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Mi(e,t,n,r,i){e.data[r]=i;const s=i.factory||(i.factory=me(i.type)),o=new Tt(s,ge(i),null);e.blueprint[r]=o,n[r]=o,Ni(e,t,0,r,vi(e,n,i.hostVars,ai),i)}function Ui(e,t,n){const r=Ae(t,e),i=Ii(n),s=e[10],o=Hi(e,yi(e,i,null,n.onPush?64:16,r,t,s,s.createRenderer(r,n),null,null));e[t.index]=o}function Vi(e,t,n,r,i,s){const o=s[t];if(null!==o){const e=r.setInput;for(let t=0;t<o.length;){const i=o[t++],s=o[t++],a=o[t++];null!==e?r.setInput(n,a,i,s):n[s]=a}}}function ji(e,t){let n=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function qi(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function Bi(e,t){const n=Ne(t,e);if(De(n)){const e=n[1];80&n[2]?bi(e,n,e.template,n[8]):n[5]>0&&zi(n)}}function zi(e){for(let n=Er(e);null!==n;n=Cr(n))for(let e=ce;e<n.length;e++){const t=n[e];if(1024&t[2]){const e=t[1];bi(e,t,e.template,t[8])}else t[5]>0&&zi(t)}const t=e[1].components;if(null!==t)for(let n=0;n<t.length;n++){const r=Ne(t[n],e);De(r)&&r[5]>0&&zi(r)}}function $i(e,t){const n=Ne(t,e),r=n[1];!function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),wi(r,n,n[8])}function Hi(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Gi(e){for(;e;){e[2]|=64;const t=Sr(e);if(0!=(512&e[2])&&!t)return e;e=t}return null}function Zi(e,t,n){const r=t[10];r.begin&&r.begin();try{bi(e,t,e.template,n)}catch(i){throw Xi(t,i),i}finally{r.end&&r.end()}}function Ki(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=gr(n),i=r[1];Ti(i,r,i.template,n)}}(e[8])}function Wi(e,t,n){rt(0),t(e,n)}const Yi=(()=>Promise.resolve(null))();function Qi(e){return e[7]||(e[7]=[])}function Ji(e){return e.cleanup||(e.cleanup=[])}function Xi(e,t){const n=e[9],r=n?n.get(_r,null):null;r&&r.handleError(t)}function es(e,t,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],l=t[o],c=e.data[o];null!==c.setInput?c.setInput(l,i,r,a):l[a]=i}}function ts(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const e=t[o];"number"==typeof e?s=e:1==s?i=h(i,e):2==s&&(r=h(r,e+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}const ns=new tn("INJECTOR",-1);class rs{get(e,t=pn){if(t===pn){const t=new Error(`NullInjectorError: No provider for ${u(e)}!`);throw t.name="NullInjectorError",t}return t}}const is=new tn("Set Injector scope."),ss={},os={};let as;function ls(){return void 0===as&&(as=new rs),as}function cs(e,t=null,n=null,r){return new us(e,n,t||ls(),r)}class us{constructor(e,t,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];t&&on(t,n=>this.processProvider(n,e,t)),on([e],e=>this.processInjectorType(e,[],i)),this.records.set(ns,ps(void 0,this));const s=this.records.get(is);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof e?null:u(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=pn,n=A.Default){this.assertNotDestroyed();const r=_n(this),i=R(void 0);try{if(!(n&A.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(s=e)||"object"==typeof s&&s instanceof tn)&&T(e);t=n&&this.injectableDefInScope(n)?ps(hs(e),ss):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(n&A.Self?ls():this.parent).get(e,t=n&A.Optional&&t===pn?null:t)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(u(e)),r)throw o;return function(e,t,n,r){const i=e.ngTempTokenPath;throw t[gn]&&i.unshift(t[gn]),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let i=u(t);if(Array.isArray(t))i=t.map(u).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):u(r)))}i=`{${e.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(fn,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(o,e,"R3InjectorError",this.source)}throw o}finally{R(i),_n(r)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,n)=>e.push(u(n))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=f(e)))return!1;let r=E(e);const i=null==r&&e.ngModule||void 0,s=void 0===i?e:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=E(i)),null==r)return!1;if(null!=r.imports&&!o){let e;n.push(s);try{on(r.imports,r=>{this.processInjectorType(r,t,n)&&(void 0===e&&(e=[]),e.push(r))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:r}=e[t];on(r,e=>this.processProvider(e,n,r||B))}}this.injectorDefTypes.add(s);const a=me(s)||(()=>new s);this.records.set(s,ps(a,ss));const l=r.providers;if(null!=l&&!o){const t=e;on(l,e=>this.processProvider(e,t,l))}return void 0!==i&&void 0!==e.providers}processProvider(e,t,n){let r=gs(e=f(e))?e:f(e&&e.provide);const i=function(e,t,n){return fs(e)?ps(void 0,e.useValue):ps(ds(e),ss)}(e);if(gs(e)||!0!==e.multi)this.records.get(r);else{let t=this.records.get(r);t||(t=ps(void 0,ss,!0),t.factory=()=>Tn(t.multi),this.records.set(r,t)),r=e,t.multi.push(e)}this.records.set(r,i)}hydrate(e,t){var n;return t.value===ss&&(t.value=os,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=f(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function hs(e){const t=T(e),n=null!==t?t.factory:me(e);if(null!==n)return n;if(e instanceof tn)throw new Error(`Token ${u(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=cn(t,"?");throw new Error(`Can't resolve all parameters for ${u(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[C]||e[k]);if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function ds(e,t,n){let r;if(gs(e)){const t=f(e);return me(t)||hs(t)}if(fs(e))r=()=>f(e.useValue);else if((i=e)&&i.useFactory)r=()=>e.useFactory(...Tn(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>wn(f(e.useExisting));else{const t=f(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return me(t)||hs(t);r=()=>new t(...Tn(e.deps))}var i;return r}function ps(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function fs(e){return null!==e&&"object"==typeof e&&mn in e}function gs(e){return"function"==typeof e}const ms=function(e,t,n){return function(e,t=null,n=null,r){const i=cs(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)};class ys{static create(e,t){return Array.isArray(e)?ms(e,t,""):ms(e.providers,e.parent,e.name||"")}}function _s(e,t){gt(gr(e)[1],ze())}function vs(e){let t=Object.getPrototypeOf(e.type.prototype).constructor,n=!0;const r=[e];for(;t;){let i;if(ge(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(n){r.push(i);const t=e;t.inputs=ws(e.inputs),t.declaredInputs=ws(e.declaredInputs),t.outputs=ws(e.outputs);const n=i.hostBindings;n&&Ss(e,n);const s=i.viewQuery,o=i.contentQueries;if(s&&bs(e,s),o&&Ts(e,o),c(e.inputs,i.inputs),c(e.declaredInputs,i.declaredInputs),c(e.outputs,i.outputs),ge(i)&&i.data.animation){const t=e.data;t.animation=(t.animation||[]).concat(i.data.animation)}}const t=i.features;if(t)for(let r=0;r<t.length;r++){const i=t[r];i&&i.ngInherit&&i(e),i===vs&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=It(i.hostAttrs,n=It(n,i.hostAttrs))}}(r)}function ws(e){return e===q?{}:e===B?[]:e}function bs(e,t){const n=e.viewQuery;e.viewQuery=n?(e,r)=>{t(e,r),n(e,r)}:t}function Ts(e,t){const n=e.contentQueries;e.contentQueries=n?(e,r,i)=>{t(e,r,i),n(e,r,i)}:t}function Ss(e,t){const n=e.hostBindings;e.hostBindings=n?(e,r)=>{t(e,r),n(e,r)}:t}ys.THROW_IF_NOT_FOUND=pn,ys.NULL=new rs,ys.\u0275prov=w({token:ys,providedIn:"any",factory:()=>wn(ns)}),ys.__NG_ELEMENT_ID__=-1;let Es=null;function Cs(){if(!Es){const e=j.Symbol;if(e&&e.iterator)Es=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Es=n)}}}return Es}class Is{constructor(e){this.wrapped=e}static wrap(e){return new Is(e)}static unwrap(e){return Is.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof Is}}function ks(e){return!!xs(e)&&(Array.isArray(e)||!(e instanceof Map)&&Cs()in e)}function xs(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function As(e,t,n){return e[t]=n}function Ps(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Rs(e,t,n,r){const i=Ps(e,t,n);return Ps(e,t+1,r)||i}function Ns(e,t,n,r){const i=je();return Ps(i,Je(),t)&&(qe(),function(e,t,n,r,i,s){const o=Ae(e,t);!function(e,t,n,r,i,s,o){if(null==s)Ce(e)?e.removeAttribute(t,i,n):t.removeAttribute(i);else{const a=null==o?y(s):o(s,r||"",i);Ce(e)?e.setAttribute(t,i,a,n):n?t.setAttributeNS(n,i,a):t.setAttribute(i,a)}}(t[11],o,s,e.value,n,r,i)}(ft(),i,e,t,n,r)),Ns}function Os(e,t,n,r){return Ps(e,Je(),n)?t+y(n)+r:ai}function Ds(e,t,n,r,i,s,o,a){const l=je(),c=qe(),u=e+le,h=c.firstCreatePass?function(e,t,n,r,i,s,o,a,l){const c=t.consts,u=_i(t,e,4,o||null,Le(c,a));Ri(t,n,u,Le(c,l)),gt(t,u);const h=u.tViews=ki(2,u,r,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,u),h.queries=t.queries.embeddedTView(u)),u}(u,c,l,t,n,r,i,s,o):c.data[u];He(h,!1);const d=l[11].createComment("");jr(c,l,d,h),fr(d,l),Hi(l,l[u]=qi(d,l,d,h)),fe(h)&&Ei(c,l,h),null!=o&&Ci(l,h,a)}function Ls(e){return Re(Ue.lFrame.contextLView,le+e)}function Fs(e,t=A.Default){const n=je();return null===n?wn(e,t):qt(ze(),n,f(e),t)}function Ms(){throw new Error("invalid")}function Us(e,t,n){const r=je();return Ps(r,Je(),t)&&Pi(qe(),ft(),r,e,t,r[11],n,!1),Us}function Vs(e,t,n,r,i){const s=i?"class":"style";es(e,n,t.inputs[s],s,r)}function js(e,t,n,r){const i=je(),s=qe(),o=le+e,a=i[11],l=i[o]=xr(a,t,Ue.lFrame.currentNamespace),c=s.firstCreatePass?function(e,t,n,r,i,s,o){const a=t.consts,l=_i(t,e,2,i,Le(a,s));return Ri(t,n,l,Le(a,o)),null!==l.attrs&&ts(l,l.attrs,!1),null!==l.mergedAttrs&&ts(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(o,s,i,0,t,n,r):s.data[o];He(c,!0);const u=c.mergedAttrs;null!==u&&St(a,l,u);const h=c.classes;null!==h&&Kr(a,l,h);const d=c.styles;null!==d&&Zr(a,l,d),64!=(64&c.flags)&&jr(s,i,l,c),0===Ue.lFrame.elementDepthCount&&fr(l,i),Ue.lFrame.elementDepthCount++,fe(c)&&(Ei(s,i,c),function(e,t,n){if(de(t)){const r=t.directiveEnd;for(let i=t.directiveStart;i<r;i++){const t=e.data[i];t.contentQueries&&t.contentQueries(1,n[i],i)}}}(s,c,i)),null!==r&&Ci(i,c)}function qs(){let e=ze();Ge()?Ze():(e=e.parent,He(e,!1));const t=e;Ue.lFrame.elementDepthCount--;const n=qe();n.firstCreatePass&&(gt(n,e),de(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Vs(n,t,je(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Vs(n,t,je(),t.stylesWithoutHost,!1)}function Bs(e,t,n,r){js(e,t,n,r),qs()}function zs(){return je()}function $s(e){return!!e&&"function"==typeof e.then}function Hs(e){return!!e&&"function"==typeof e.subscribe}const Gs=Hs;function Zs(e,t,n,r){const i=je(),s=qe(),o=ze();return function(e,t,n,r,i,s,o,a){const l=fe(r),c=e.firstCreatePass&&Ji(e),u=Qi(t);let h=!0;if(3&r.type||a){const d=Ae(r,t),p=a?a(d):d,f=u.length,g=a?e=>a(ke(e[r.index])):r.index;if(Ce(n)){let o=null;if(!a&&l&&(o=function(e,t,n,r){const i=e.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const e=i[s];if(e===n&&i[s+1]===r){const e=t[7],n=i[s+2];return e.length>n?e[n]:null}"string"==typeof e&&(s+=2)}return null}(e,t,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=Ws(r,t,0,s,!1);const e=n.listen(p,i,s);u.push(s,e),c&&c.push(i,g,f,f+1)}}else s=Ws(r,t,0,s,!0),p.addEventListener(i,s,o),u.push(s),c&&c.push(i,g,f,o)}else s=Ws(r,t,0,s,!1);const d=r.outputs;let p;if(h&&null!==d&&(p=d[i])){const e=p.length;if(e)for(let n=0;n<e;n+=2){const e=t[p[n]][p[n+1]].subscribe(s),o=u.length;u.push(s,e),c&&c.push(i,r.index,o,-(o+1))}}}(s,i,i[11],o,e,t,!!n,r),Zs}function Ks(e,t,n,r){try{return!1!==n(r)}catch(i){return Xi(e,i),!1}}function Ws(e,t,n,r,i){return function n(s){if(s===Function)return r;const o=2&e.flags?Ne(e.index,t):t;0==(32&t[2])&&Gi(o);let a=Ks(t,0,r,s),l=n.__ngNextListenerFn__;for(;l;)a=Ks(t,0,l,s)&&a,l=l.__ngNextListenerFn__;return i&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function Ys(e=1){return function(e){return(Ue.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,Ue.lFrame.contextLView))[8]}(e)}function Qs(e,t){let n=null;const r=function(e){const t=e.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(e);for(let i=0;i<t.length;i++){const s=t[i];if("*"!==s){if(null===r?ri(e,s,!0):ii(r,s))return i}else n=i}return n}function Js(e){const t=je()[16][6];if(!t.projection){const n=t.projection=cn(e?e.length:1,null),r=n.slice();let i=t.child;for(;null!==i;){const t=e?Qs(i,e):0;null!==t&&(r[t]?r[t].projectionNext=i:n[t]=i,r[t]=i),i=i.next}}}function Xs(e,t=0,n){const r=je(),i=qe(),s=_i(i,le+e,16,null,n||null);null===s.projection&&(s.projection=t),Ze(),64!=(64&s.flags)&&function(e,t,n){Gr(t[11],0,t,n,Or(e,n,t),Ur(n.parent||t[6],n,t))}(i,r,s)}function eo(e,t,n){return to(e,"",t,"",n),eo}function to(e,t,n,r,i){const s=je(),o=Os(s,t,n,r);return o!==ai&&Pi(qe(),ft(),s,e,o,s[11],i,!1),to}function no(e,t,n,r,i){const s=e[n+1],o=null===t;let a=r?hi(s):pi(s),l=!1;for(;0!==a&&(!1===l||o);){const n=e[a+1];ro(e[a],t)&&(l=!0,e[a+1]=r?gi(n):di(n)),a=r?hi(n):pi(n)}l&&(e[n+1]=r?di(s):gi(s))}function ro(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&dn(e,t)>=0}const io={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function so(e){return e.substring(io.key,io.keyEnd)}function oo(e,t){const n=io.textEnd;return n===t?-1:(t=io.keyEnd=function(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,io.key=t,n),ao(e,t,n))}function ao(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function lo(e,t,n){return ho(e,t,n,!1),lo}function co(e,t){return ho(e,t,null,!0),co}function uo(e,t){for(let n=function(e){return function(e){io.key=0,io.keyEnd=0,io.value=0,io.valueEnd=0,io.textEnd=e.length}(e),oo(e,ao(e,0,io.textEnd))}(t);n>=0;n=oo(t,n))un(e,so(t),!0)}function ho(e,t,n,r){const i=je(),s=qe(),o=Xe(2);s.firstUpdatePass&&go(s,e,o,r),t!==ai&&Ps(i,o,t)&&_o(s,s.data[dt()],i,i[11],e,i[o+1]=function(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=u(Ln(e)))),e}(t,n),r,o)}function po(e,t,n,r){const i=qe(),s=Xe(2);i.firstUpdatePass&&go(i,null,s,r);const o=je();if(n!==ai&&Ps(o,s,n)){const a=i.data[dt()];if(bo(a,r)&&!fo(i,s)){let e=r?a.classesWithoutHost:a.stylesWithoutHost;null!==e&&(n=h(e,n||"")),Vs(i,a,o,n,r)}else!function(e,t,n,r,i,s,o,a){i===ai&&(i=B);let l=0,c=0,u=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;null!==u||null!==h;){const d=l<i.length?i[l+1]:void 0,p=c<s.length?s[c+1]:void 0;let f,g=null;u===h?(l+=2,c+=2,d!==p&&(g=h,f=p)):null===h||null!==u&&u<h?(l+=2,g=u):(c+=2,g=h,f=p),null!==g&&_o(e,t,n,r,g,f,o,a),u=l<i.length?i[l]:null,h=c<s.length?s[c]:null}}(i,a,o,o[11],o[s+1],o[s+1]=function(e,t,n){if(null==n||""===n)return B;const r=[],i=Ln(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)e(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&e(r,s,i[s]);else"string"==typeof i&&t(r,i);return r}(e,t,n),r,s)}}function fo(e,t){return t>=e.expandoStartIndex}function go(e,t,n,r){const i=e.data;if(null===i[n+1]){const s=i[dt()],o=fo(e,n);bo(s,r)&&null===t&&!o&&(t=!1),t=function(e,t,n,r){const i=function(e){const t=Ue.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let s=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=yo(n=mo(null,e,t,n,r),t.attrs,r),s=null);else{const o=t.directiveStylingLast;if(-1===o||e[o]!==i)if(n=mo(i,e,t,n,r),null===s){let n=function(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==pi(r))return e[hi(r)]}(e,t,r);void 0!==n&&Array.isArray(n)&&(n=mo(null,e,t,n[1],r),n=yo(n,t.attrs,r),function(e,t,n,r){e[hi(n?t.classBindings:t.styleBindings)]=r}(e,t,r,n))}else s=function(e,t,n){let r;const i=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<i;s++)r=yo(r,e[s].hostAttrs,n);return yo(r,t.attrs,n)}(e,t,r)}return void 0!==s&&(r?t.residualClasses=s:t.residualStyles=s),n}(i,s,t,r),function(e,t,n,r,i,s){let o=s?t.classBindings:t.styleBindings,a=hi(o),l=pi(o);e[r]=n;let c,u=!1;if(Array.isArray(n)){const e=n;c=e[1],(null===c||dn(e,c)>0)&&(u=!0)}else c=n;if(i)if(0!==l){const t=hi(e[a+1]);e[r+1]=ui(t,a),0!==t&&(e[t+1]=fi(e[t+1],r)),e[a+1]=131071&e[a+1]|r<<17}else e[r+1]=ui(a,0),0!==a&&(e[a+1]=fi(e[a+1],r)),a=r;else e[r+1]=ui(l,0),0===a?a=r:e[l+1]=fi(e[l+1],r),l=r;u&&(e[r+1]=di(e[r+1])),no(e,c,r,!0),no(e,c,r,!1),function(e,t,n,r,i){const s=i?e.residualClasses:e.residualStyles;null!=s&&"string"==typeof t&&dn(s,t)>=0&&(n[r+1]=gi(n[r+1]))}(t,c,e,r,s),o=ui(a,l),s?t.classBindings=o:t.styleBindings=o}(i,s,t,n,o,r)}}function mo(e,t,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=t[a],r=yo(r,s.hostAttrs,i),s!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function yo(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?i=o:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),un(e,o,!!n||t[++s]))}return void 0===e?null:e}function _o(e,t,n,r,i,s,o,a){if(!(3&t.type))return;const l=e.data,c=l[a+1];wo(1==(1&c)?vo(l,t,n,i,pi(c),o):void 0)||(wo(s)||2==(2&c)&&(s=vo(l,null,n,i,a,o)),function(e,t,n,r,i){const s=Ce(e);if(t)i?s?e.addClass(n,r):n.classList.add(r):s?e.removeClass(n,r):n.classList.remove(r);else{let t=-1===r.indexOf("-")?void 0:br.DashCase;if(null==i)s?e.removeStyle(n,r,t):n.style.removeProperty(r);else{const o="string"==typeof i&&i.endsWith("!important");o&&(i=i.slice(0,-10),t|=br.Important),s?e.setStyle(n,r,i,t):n.style.setProperty(r,i,o?"important":"")}}}(r,o,xe(dt(),n),i,s))}function vo(e,t,n,r,i,s){const o=null===t;let a;for(;i>0;){const t=e[i],s=Array.isArray(t),l=s?t[1]:t,c=null===l;let u=n[i+1];u===ai&&(u=c?B:void 0);let h=c?hn(u,r):l===r?u:void 0;if(s&&!wo(h)&&(h=hn(t,r)),wo(h)&&(a=h,o))return a;const d=e[i+1];i=o?hi(d):pi(d)}if(null!==t){let e=s?t.residualClasses:t.residualStyles;null!=e&&(a=hn(e,r))}return a}function wo(e){return void 0!==e}function bo(e,t){return 0!=(e.flags&(t?16:32))}function To(e,t=""){const n=je(),r=qe(),i=e+le,s=r.firstCreatePass?_i(r,i,1,t,null):r.data[i],o=n[i]=function(e,t){return Ce(e)?e.createText(t):e.createTextNode(t)}(n[11],t);jr(r,n,o,s),He(s,!1)}function So(e){return Eo("",e,""),So}function Eo(e,t,n){const r=je(),i=Os(r,e,t,n);return i!==ai&&function(e,t,n){const r=xe(t,e);!function(e,t,n){Ce(e)?e.setValue(t,n):t.textContent=n}(e[11],r,n)}(r,dt(),i),Eo}function Co(e,t,n){po(un,uo,Os(je(),e,t,n),!0)}function Io(e,t,n,r,i){po(un,uo,function(e,t,n,r,i,s){const o=Rs(e,Qe(),n,i);return Xe(2),o?t+y(n)+r+y(i)+s:ai}(je(),e,t,n,r,i),!0)}function ko(e,t,n){const r=je();return Ps(r,Je(),t)&&Pi(qe(),ft(),r,e,t,r[11],n,!0),ko}const xo=void 0;var Ao=["en",[["a","p"],["AM","PM"],xo],[["AM","PM"],xo,xo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],xo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],xo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",xo,"{1} 'at' {0}",xo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let Po={};function Ro(e,t,n){"string"!=typeof t&&(n=t,t=e[Lo.LocaleId]),t=t.toLowerCase().replace(/_/g,"-"),Po[t]=e,n&&(Po[t][Lo.ExtraData]=n)}function No(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=Do(t);if(n)return n;const r=t.split("-")[0];if(n=Do(r),n)return n;if("en"===r)return Ao;throw new Error(`Missing locale data for the locale "${e}".`)}function Oo(e){return No(e)[Lo.PluralCase]}function Do(e){return e in Po||(Po[e]=j.ng&&j.ng.common&&j.ng.common.locales&&j.ng.common.locales[e]),Po[e]}var Lo=(()=>((Lo=Lo||{})[Lo.LocaleId=0]="LocaleId",Lo[Lo.DayPeriodsFormat=1]="DayPeriodsFormat",Lo[Lo.DayPeriodsStandalone=2]="DayPeriodsStandalone",Lo[Lo.DaysFormat=3]="DaysFormat",Lo[Lo.DaysStandalone=4]="DaysStandalone",Lo[Lo.MonthsFormat=5]="MonthsFormat",Lo[Lo.MonthsStandalone=6]="MonthsStandalone",Lo[Lo.Eras=7]="Eras",Lo[Lo.FirstDayOfWeek=8]="FirstDayOfWeek",Lo[Lo.WeekendRange=9]="WeekendRange",Lo[Lo.DateFormat=10]="DateFormat",Lo[Lo.TimeFormat=11]="TimeFormat",Lo[Lo.DateTimeFormat=12]="DateTimeFormat",Lo[Lo.NumberSymbols=13]="NumberSymbols",Lo[Lo.NumberFormats=14]="NumberFormats",Lo[Lo.CurrencyCode=15]="CurrencyCode",Lo[Lo.CurrencySymbol=16]="CurrencySymbol",Lo[Lo.CurrencyName=17]="CurrencyName",Lo[Lo.Currencies=18]="Currencies",Lo[Lo.Directionality=19]="Directionality",Lo[Lo.PluralCase=20]="PluralCase",Lo[Lo.ExtraData=21]="ExtraData",Lo))();const Fo="en-US";let Mo=Fo;function Uo(e){var t,n;n="Expected localeId to be defined",null==(t=e)&&function(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e} [Expected=> null != ${t} <=Actual]`)}(n,t),"string"==typeof e&&(Mo=e.toLowerCase().replace(/_/g,"-"))}function Vo(e,t,n,r,i){if(e=f(e),Array.isArray(e))for(let s=0;s<e.length;s++)Vo(e[s],t,n,r,i);else{const s=qe(),o=je();let a=gs(e)?e:f(e.provide),l=ds(e);const c=ze(),u=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(gs(e)||!e.multi){const r=new Tt(l,i,Fs),p=Bo(a,t,i?u:u+d,h);-1===p?(Ut(Dt(c,o),s,a),jo(s,e,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),o.push(r)):(n[p]=r,o[p]=r)}else{const p=Bo(a,t,u+d,h),f=Bo(a,t,u,u+d),g=p>=0&&n[p],m=f>=0&&n[f];if(i&&!m||!i&&!g){Ut(Dt(c,o),s,a);const u=function(e,t,n,r,i){const s=new Tt(e,n,Fs);return s.multi=[],s.index=t,s.componentProviders=0,qo(s,i,r&&!n),s}(i?$o:zo,n.length,i,r,l);!i&&m&&(n[f].providerFactory=u),jo(s,e,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(u),o.push(u)}else jo(s,e,p>-1?p:f,qo(n[i?f:p],l,!i&&r));!i&&r&&m&&n[f].componentProviders++}}}function jo(e,t,n,r){const i=gs(t);if(i||t.useClass){const s=(t.useClass||t).prototype.ngOnDestroy;if(s){const o=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){const e=o.indexOf(n);-1===e?o.push(n,[r,s]):o[e+1].push(r,s)}else o.push(n,s)}}}function qo(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Bo(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function zo(e,t,n,r){return Ho(this.multi,[])}function $o(e,t,n,r){const i=this.multi;let s;if(this.providerFactory){const e=this.providerFactory.componentProviders,t=Gt(n,n[1],this.providerFactory.index,r);s=t.slice(0,e),Ho(i,s);for(let n=e;n<t.length;n++)s.push(t[n])}else s=[],Ho(i,s);return s}function Ho(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function Go(e,t=[]){return n=>{n.providersResolver=(n,r)=>function(e,t,n){const r=qe();if(r.firstCreatePass){const i=ge(e);Vo(n,r.data,r.blueprint,i,!0),Vo(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}class Zo{}class Ko{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${u(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(e)}}class Wo{}function Yo(...e){}function Qo(e,t){return new Xo(Ae(e,t))}Wo.NULL=new Ko;const Jo=function(){return Qo(ze(),je())};let Xo=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=Jo,e})();function ea(e){return e instanceof Xo?e.nativeElement:e}class ta{}let na=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>ra(),e})();const ra=function(){const e=je(),t=Ne(ze().index,e);return function(e){return e[11]}(ue(t)?t:e)};let ia=(()=>{class e{}return e.\u0275prov=w({token:e,providedIn:"root",factory:()=>null}),e})();class sa{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const oa=new sa("12.1.5");class aa{constructor(){}supports(e){return ks(e)}create(e){return new ca(e)}}const la=(e,t)=>t;class ca{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||la}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,i=null;for(;t||n;){const s=!n||t&&t.currentIndex<pa(n,r,i)?t:n,o=pa(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{i||(i=[]);const e=o-r,t=a-r;if(e!=t){for(let n=0;n<e;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;t<=s&&s<e&&(i[n]=r+1)}i[s.previousIndex]=t-e}}o!==a&&e(s,o,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!ks(e))throw new Error(`Error trying to diff '${u(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,i=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],r=this._trackByFn(t,n),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,t)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,t),s=!0),i=i._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Cs()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,e,r,t)),Object.is(i.item,e)||this._addIdentityChange(i,e)):(i=this._mismatch(i,e,r,t),s=!0),i=i._next,t++}),this.length=t;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):e=this._addAfter(new ua(t,n),i,r),e}_verifyReinsertion(e,t,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new da),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new da),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class ua{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ha{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class da{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new ha,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function pa(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class fa{constructor(){}supports(e){return e instanceof Map||xs(e)}create(){return new ga}}class ga{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||xs(e)))throw new Error(`Error trying to diff '${u(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new ma(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class ma{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ya(){return new _a([new aa])}let _a=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||ya()),deps:[[e,new In,new Cn]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.\u0275prov=w({token:e,providedIn:"root",factory:ya}),e})();function va(){return new wa([new fa])}let wa=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||va()),deps:[[e,new In,new Cn]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=w({token:e,providedIn:"root",factory:va}),e})();function ba(e,t,n,r,i=!1){for(;null!==n;){const s=t[n.index];if(null!==s&&r.push(ke(s)),he(s))for(let e=ce;e<s.length;e++){const t=s[e],n=t[1].firstChild;null!==n&&ba(t[1],t,n,r)}const o=n.type;if(8&o)ba(e,t,n.child,r);else if(32&o){const e=Tr(n,t);let i;for(;i=e();)r.push(i)}else if(16&o){const e=Br(t,n);if(Array.isArray(e))r.push(...e);else{const n=Sr(t[16]);ba(n[1],n,e,r,!0)}}n=i?n.projectionNext:n.next}return r}class Ta{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return ba(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(he(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(Pr(e,n),ln(t,n))}this._attachedToViewContainer=!1}Rr(this._lView[1],this._lView)}onDestroy(e){xi(this._lView[1],this._lView,null,e)}markForCheck(){Gi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Zi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){We(!0);try{Zi(e,t,n)}finally{We(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var e;this._appRef=null,Hr(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class Sa extends Ta{constructor(e){super(e),this._view=e}detectChanges(){Ki(this._view)}checkNoChanges(){!function(e){We(!0);try{Ki(e)}finally{We(!1)}}(this._view)}get context(){return null}}const Ea=function(e){return function(e,t,n){if(pe(e)&&!n){const n=Ne(e.index,t);return new Ta(n,n)}return 47&e.type?new Ta(t[16],t):null}(ze(),je(),16==(16&e))};let Ca=(()=>{class e{}return e.__NG_ELEMENT_ID__=Ea,e})();const Ia=[new fa],ka=new _a([new aa]),xa=new wa(Ia),Aa=function(){return Oa(ze(),je())};let Pa=(()=>{class e{}return e.__NG_ELEMENT_ID__=Aa,e})();const Ra=Pa,Na=class extends Ra{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e){const t=this._declarationTContainer.tViews,n=yi(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),wi(t,n,e),new Ta(n)}};function Oa(e,t){return 4&e.type?new Na(t,e,Qo(e,t)):null}class Da{}class La{}const Fa=function(){return Ba(ze(),je())};let Ma=(()=>{class e{}return e.__NG_ELEMENT_ID__=Fa,e})();const Ua=Ma,Va=class extends Ua{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return Qo(this._hostTNode,this._hostLView)}get injector(){return new Wt(this._hostTNode,this._hostLView)}get parentInjector(){const e=Mt(this._hostTNode,this._hostLView);if(xt(e)){const t=Pt(e,this._hostLView),n=At(e);return new Wt(t[1].data[n+8],t)}return new Wt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=ja(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-ce}createEmbeddedView(e,t,n){const r=e.createEmbeddedView(t||{});return this.insert(r,n),r}createComponent(e,t,n,r,i){const s=n||this.parentInjector;if(!i&&null==e.ngModule&&s){const e=s.get(Da,null);e&&(i=e)}const o=e.create(s,r,void 0,i);return this.insert(o.hostView,t),o}insert(e,t){const n=e._lView,r=n[1];if(he(n[3])){const t=this.indexOf(e);if(-1!==t)this.detach(t);else{const t=n[3],r=new Va(t,t[6],t[3]);r.detach(r.indexOf(e))}}const i=this._adjustIndex(t),s=this._lContainer;!function(e,t,n,r){const i=ce+r,s=n.length;r>0&&(n[i-1][4]=t),r<s-ce?(t[4]=n[i],an(n,ce+r,t)):(n.push(t),t[4]=null),t[3]=n;const o=t[17];null!==o&&n!==o&&function(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(o,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=128}(r,n,s,i);const o=zr(i,s),a=n[11],l=Mr(a,s[7]);return null!==l&&function(e,t,n,r,i,s){r[0]=i,r[6]=t,Hr(e,r,n,1,i,s)}(r,s[6],a,n,l,o),e.attachToViewContainerRef(),an(qa(s),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=ja(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=Pr(this._lContainer,t);n&&(ln(qa(this._lContainer),t),Rr(n[1],n))}detach(e){const t=this._adjustIndex(e,-1),n=Pr(this._lContainer,t);return n&&null!=ln(qa(this._lContainer),t)?new Ta(n):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function ja(e){return e[8]}function qa(e){return e[8]||(e[8]=[])}function Ba(e,t){let n;const r=t[e.index];if(he(r))n=r;else{let i;if(8&e.type)i=ke(r);else{const n=t[11];i=n.createComment("");const r=Ae(e,t);Dr(n,Mr(n,r),i,function(e,t){return Ce(e)?e.nextSibling(t):t.nextSibling}(n,r),!1)}t[e.index]=n=qi(r,t,i,e),Hi(t,n)}return new Va(n,e,t)}const za={};class $a extends Wo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=oe(e);return new Za(t,this.ngModule)}}function Ha(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const Ga=new tn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>vr});class Za extends Zo{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(oi).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Ha(this.componentDef.inputs)}get outputs(){return Ha(this.componentDef.outputs)}create(e,t,n,r){const i=(r=r||this.ngModule)?function(e,t){return{get:(n,r,i)=>{const s=e.get(n,za,i);return s!==za||r===za?s:t.get(n,r,i)}}}(e,r.injector):e,s=i.get(ta,Ie),o=i.get(ia,null),a=s.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",c=n?function(e,t,n){if(Ce(e))return e.selectRootElement(t,n===L.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(a,n,this.componentDef.encapsulation):xr(s.createRenderer(null,this.componentDef),l,function(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(l)),u=this.componentDef.onPush?576:528,h={components:[],scheduler:vr,clean:Yi,playerHandler:null,flags:0},d=ki(0,null,null,1,0,null,null,null,null,null),p=yi(null,d,h,u,null,null,s,a,o,i);let f,g;ot(p);try{const e=function(e,t,n,r,i,s){const o=n[1];n[20]=e;const a=_i(o,20,2,"#host",null),l=a.mergedAttrs=t.hostAttrs;null!==l&&(ts(a,l,!0),null!==e&&(St(i,e,l),null!==a.classes&&Kr(i,e,a.classes),null!==a.styles&&Zr(i,e,a.styles)));const c=r.createRenderer(e,t),u=yi(n,Ii(t),null,t.onPush?64:16,n[20],a,r,c,null,null);return o.firstCreatePass&&(Ut(Dt(a,n),o,t.type),Di(o,a),Fi(a,n.length,1)),Hi(n,u),n[20]=u}(c,this.componentDef,p,s,a);if(c)if(n)St(a,c,["ng-version",oa.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let s=e[r];if("string"==typeof s)2===i?""!==s&&t.push(s,e[++r]):8===i&&n.push(s);else{if(!ti(i))break;i=s}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&St(a,c,e),t&&t.length>0&&Kr(a,c,t.join(" "))}if(g=Pe(d,le),void 0!==t){const e=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=t[n];e.push(null!=r?Array.from(r):null)}}f=function(e,t,n,r,i){const s=n[1],o=function(e,t,n){const r=ze();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Mi(e,r,t,vi(e,t,1,null),n));const i=Gt(t,e,r.directiveStart,r);fr(i,t);const s=Ae(r,t);return s&&fr(s,t),i}(s,n,t);if(r.components.push(o),e[8]=o,i&&i.forEach(e=>e(o,t)),t.contentQueries){const e=ze();t.contentQueries(1,o,e.directiveStart)}const a=ze();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(pt(a.index),Ni(n[1],a,0,a.directiveStart,a.directiveEnd,t),Oi(t,o)),o}(e,this.componentDef,p,h,[_s]),wi(d,p,null)}finally{ht()}return new Ka(this.componentType,f,Qo(g,p),p,g)}}class Ka extends class{}{constructor(e,t,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=t,this.hostView=this.changeDetectorRef=new Sa(r),this.componentType=e}get injector(){return new Wt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const Wa=new Map;class Ya extends Da{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new $a(this);const n=ae(e),r=e[Z]||null;r&&Uo(r),this._bootstrapComponents=wr(n.bootstrap),this._r3Injector=cs(e,t,[{provide:Da,useValue:this},{provide:Wo,useValue:this.componentFactoryResolver}],u(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=ys.THROW_IF_NOT_FOUND,n=A.Default){return e===ys||e===Da||e===ns?this:this._r3Injector.get(e,t,n)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Qa extends La{constructor(e){super(),this.moduleType=e,null!==ae(e)&&function(e){const t=new Set;!function e(n){const r=ae(n,!0),i=r.id;null!==i&&(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${u(t)} vs ${u(t.name)}`)}(i,Wa.get(i),n),Wa.set(i,n));const s=wr(r.imports);for(const o of s)t.has(o)||(t.add(o),e(o))}(e)}(e)}create(e){return new Ya(this.moduleType,e)}}function Ja(e,t,n){const r=Ye()+e,i=je();return i[r]===ai?As(i,r,n?t.call(n):t()):function(e,t){return e[t]}(i,r)}function Xa(e,t,n,r){return function(e,t,n,r,i,s){const o=t+n;return Ps(e,o,i)?As(e,o+1,s?r.call(s,i):r(i)):tl(e,o+1)}(je(),Ye(),e,t,n,r)}function el(e,t,n,r,i){return nl(je(),Ye(),e,t,n,r,i)}function tl(e,t){const n=e[t];return n===ai?void 0:n}function nl(e,t,n,r,i,s,o){const a=t+n;return Rs(e,a,i,s)?As(e,a+2,o?r.call(o,i,s):r(i,s)):tl(e,a+2)}function rl(e,t){const n=qe();let r;const i=e+le;n.firstCreatePass?(r=function(e,t){if(t)for(let n=t.length-1;n>=0;n--){const r=t[n];if(e===r.name)return r}throw new m("302",`The pipe '${e}' could not be found!`)}(t,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=me(r.type)),o=R(Fs);try{const e=Nt(!1),t=s();return Nt(e),function(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}(n,je(),i,t),t}finally{R(o)}}function il(e,t,n,r){const i=e+le,s=je(),o=Re(s,i);return function(e,t){return Is.isWrapped(t)&&(t=Is.unwrap(t),e[Qe()]=ai),t}(s,function(e,t){return e[1].data[t].pure}(s,i)?nl(s,Ye(),t,o.transform,n,r,o):o.transform(n,r))}function sl(e){return t=>{setTimeout(e,void 0,t)}}const ol=class extends r.xQ{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){var r,s,o;let a=e,l=t||(()=>null),c=n;if(e&&"object"==typeof e){const t=e;a=null===(r=t.next)||void 0===r?void 0:r.bind(t),l=null===(s=t.error)||void 0===s?void 0:s.bind(t),c=null===(o=t.complete)||void 0===o?void 0:o.bind(t)}this.__isAsync&&(l=sl(l),a&&(a=sl(a)),c&&(c=sl(c)));const u=super.subscribe({next:a,error:l,complete:c});return e instanceof i.w&&e.add(u),u}};function al(){return this._results[Cs()]()}class ll{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Cs(),n=ll.prototype;n[t]||(n[t]=al)}get changes(){return this._changes||(this._changes=new ol)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const n=this;n.dirty=!1;const r=sn(e);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(n._results,r,t))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class cl{constructor(e){this.queryList=e,this.matches=null}clone(){return new cl(this.queryList)}setDirty(){this.queryList.setDirty()}}class ul{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let e=0;e<n;e++){const n=t.getByIndex(e);r.push(this.queries[n.indexInDeclarationView].clone())}return new ul(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==El(e,t).matches&&this.queries[t].setDirty()}}class hl{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}}class dl{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const r=null!==t?t.length:0,i=this.getByIndex(n).embeddedTView(e,r);i&&(i.indexInDeclarationView=n,null!==t?t.push(i):t=[i])}return null!==t?new dl(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class pl{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new pl(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(e,t,fl(t,i)),this.matchTNodeWithReadOption(e,t,Ht(t,e,i,!1,!1))}else n===Pa?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Ht(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Xo||r===Ma||r===Pa&&4&t.type)this.addMatch(t.index,-2);else{const n=Ht(t,e,r,!1,!1);null!==n&&this.addMatch(t.index,n)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function fl(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function gl(e,t,n,r){return-1===n?function(e,t){return 11&e.type?Qo(e,t):4&e.type?Oa(e,t):null}(t,e):-2===n?function(e,t,n){return n===Xo?Qo(t,e):n===Pa?Oa(t,e):n===Ma?Ba(t,e):void 0}(e,t,r):Gt(e,e[1],n,t)}function ml(e,t,n,r){const i=t[19].queries[r];if(null===i.matches){const r=e.data,s=n.matches,o=[];for(let e=0;e<s.length;e+=2){const i=s[e];o.push(i<0?null:gl(t,r[i],s[e+1],n.metadata.read))}i.matches=o}return i.matches}function yl(e,t,n,r){const i=e.queries.getByIndex(n),s=i.matches;if(null!==s){const o=ml(e,t,i,n);for(let e=0;e<s.length;e+=2){const n=s[e];if(n>0)r.push(o[e/2]);else{const i=s[e+1],o=t[-n];for(let e=ce;e<o.length;e++){const t=o[e];t[17]===t[3]&&yl(t[1],t,i,r)}if(null!==o[9]){const e=o[9];for(let t=0;t<e.length;t++){const n=e[t];yl(n[1],n,i,r)}}}}}return r}function _l(e){const t=je(),n=qe(),r=nt();rt(r+1);const i=El(n,r);if(e.dirty&&Oe(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const s=i.crossesNgTemplate?yl(n,t,r,[]):ml(n,t,i,r);e.reset(s,ea),e.notifyOnChanges()}return!0}return!1}function vl(e,t,n){const r=qe();r.firstCreatePass&&(Sl(r,new hl(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),Tl(r,je(),t)}function wl(e,t,n,r){const i=qe();if(i.firstCreatePass){const s=ze();Sl(i,new hl(t,n,r),s.index),function(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(i,e),2==(2&n)&&(i.staticContentQueries=!0)}Tl(i,je(),n)}function bl(){return e=je(),t=nt(),e[19].queries[t].queryList;var e,t}function Tl(e,t,n){const r=new ll(4==(4&n));xi(e,t,r,r.destroy),null===t[19]&&(t[19]=new ul),t[19].queries.push(new cl(r))}function Sl(e,t,n){null===e.queries&&(e.queries=new dl),e.queries.track(new pl(t,n))}function El(e,t){return e.queries.getByIndex(t)}const Cl=new tn("Application Initializer");let Il=(()=>{class e{constructor(e){this.appInits=e,this.resolve=Yo,this.reject=Yo,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();if($s(t))e.push(t);else if(Gs(t)){const n=new Promise((e,n)=>{t.subscribe({complete:e,error:n})});e.push(n)}}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(wn(Cl,8))},e.\u0275prov=w({token:e,factory:e.\u0275fac}),e})();const kl=new tn("AppId"),xl={provide:kl,useFactory:function(){return`${Al()}${Al()}${Al()}`},deps:[]};function Al(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Pl=new tn("Platform Initializer"),Rl=new tn("Platform ID"),Nl=new tn("appBootstrapListener");let Ol=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac}),e})();const Dl=new tn("LocaleId"),Ll=new tn("DefaultCurrencyCode");class Fl{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const Ml=function(e){return new Qa(e)},Ul=Ml,Vl=function(e){return Promise.resolve(Ml(e))},jl=function(e){const t=Ml(e),n=wr(ae(e).declarations).reduce((e,t)=>{const n=oe(t);return n&&e.push(new Za(n)),e},[]);return new Fl(t,n)},ql=jl,Bl=function(e){return Promise.resolve(jl(e))};let zl=(()=>{class e{constructor(){this.compileModuleSync=Ul,this.compileModuleAsync=Vl,this.compileModuleAndAllComponentsSync=ql,this.compileModuleAndAllComponentsAsync=Bl}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac}),e})();const $l=(()=>Promise.resolve(0))();function Hl(e){"undefined"==typeof Zone?$l.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Gl{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ol(!1),this.onMicrotaskEmpty=new ol(!1),this.onStable=new ol(!1),this.onError=new ol(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&t,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let e=j.requestAnimationFrame,t=j.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(j,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Wl(e),e.isCheckStableRunning=!0,Kl(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Wl(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return Yl(e),n.invokeTask(i,s,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),Ql(e)}},onInvoke:(n,r,i,s,o,a,l)=>{try{return Yl(e),n.invoke(i,s,o,a,l)}finally{e.shouldCoalesceRunChangeDetection&&t(),Ql(e)}},onHasTask:(t,n,r,i)=>{t.hasTask(r,i),n===r&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,Wl(e),Kl(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,n,r,i)=>(t.handleError(r,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Gl.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Gl.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,e,Zl,Yo,Yo);try{return i.runTask(s,t,n)}finally{i.cancelTask(s)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const Zl={};function Kl(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Wl(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Yl(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Ql(e){e._nesting--,Kl(e)}class Jl{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ol,this.onMicrotaskEmpty=new ol,this.onStable=new ol,this.onError=new ol}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}let Xl=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Gl.assertNotInAngularZone(),Hl(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Hl(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(wn(Gl))},e.\u0275prov=w({token:e,factory:e.\u0275fac}),e})(),ec=(()=>{class e{constructor(){this._applications=new Map,ic.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return ic.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac}),e})();class tc{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}function nc(e){ic=e}let rc,ic=new tc,sc=!0,oc=!1;function ac(){return oc=!0,sc}function lc(){if(oc)throw new Error("Cannot enable prod mode after platform setup.");sc=!1}const cc=new tn("AllowMultipleToken");class uc{constructor(e,t){this.name=e,this.token=t}}function hc(e,t,n=[]){const r=`Platform: ${t}`,i=new tn(r);return(t=[])=>{let s=dc();if(!s||s.injector.get(cc,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{const e=n.concat(t).concat({provide:i,useValue:!0},{provide:is,useValue:"platform"});!function(e){if(rc&&!rc.destroyed&&!rc.injector.get(cc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");rc=e.get(pc);const t=e.get(Pl,null);t&&t.forEach(e=>e())}(ys.create({providers:e,name:r}))}return function(e){const t=dc();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function dc(){return rc&&!rc.destroyed?rc:null}let pc=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new Jl:("zone.js"===e?void 0:e)||new Gl({enableLongStackTrace:ac(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(t?t.ngZone:void 0,{ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1}),r=[{provide:Gl,useValue:n}];return n.run(()=>{const t=ys.create({providers:r,parent:this.injector,name:e.moduleType.name}),i=e.create(t),s=i.injector.get(_r,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const e=n.onError.subscribe({next:e=>{s.handleError(e)}});i.onDestroy(()=>{mc(this._modules,i),e.unsubscribe()})}),function(e,t,n){try{const r=n();return $s(r)?r.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(s,n,()=>{const e=i.injector.get(Il);return e.runInitializers(),e.donePromise.then(()=>(Uo(i.injector.get(Dl,Fo)||Fo),this._moduleDoBootstrap(i),i))})})}bootstrapModule(e,t=[]){const n=fc({},t);return function(e,t,n){const r=new Qa(n);return Promise.resolve(r)}(0,0,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(gc);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${u(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(wn(ys))},e.\u0275prov=w({token:e,factory:e.\u0275fac}),e})();function fc(e,t){return Array.isArray(t)?t.reduce(fc,e):Object.assign(Object.assign({},e),t)}let gc=(()=>{class e{constructor(e,t,n,r,i){this._zone=e,this._injector=t,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new s.y(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),c=new s.y(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{Gl.assertNotInAngularZone(),Hl(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Gl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=(0,o.T)(l,c.pipe((0,a.B)()))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof Zo?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Da),i=n.create(ys.NULL,[],t||n.selector,r),s=i.location.nativeElement,o=i.injector.get(Xl,null),a=o&&i.injector.get(ec);return o&&a&&a.registerApplication(s,o),i.onDestroy(()=>{this.detachView(i.hostView),mc(this.components,i),a&&a.unregisterApplication(s)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;mc(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Nl,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(wn(Gl),wn(ys),wn(_r),wn(Wo),wn(Il))},e.\u0275prov=w({token:e,factory:e.\u0275fac}),e})();function mc(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class yc{}class _c{}const vc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let wc=(()=>{class e{constructor(e,t){this._compiler=e,this._config=t||vc}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[t,r]=e.split("#");return void 0===r&&(r="default"),n(8255)(t).then(e=>e[r]).then(e=>bc(e,t,r)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,r]=e.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[r+i]).then(e=>bc(e,t,r))}}return e.\u0275fac=function(t){return new(t||e)(wn(zl),wn(_c,8))},e.\u0275prov=w({token:e,factory:e.\u0275fac}),e})();function bc(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}const Tc=function(e){return null},Sc=hc(null,"core",[{provide:Rl,useValue:"unknown"},{provide:pc,deps:[ys]},{provide:ec,deps:[]},{provide:Ol,deps:[]}]),Ec=[{provide:gc,useClass:gc,deps:[Gl,ys,_r,Wo,Il]},{provide:Ga,deps:[Gl],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:Il,useClass:Il,deps:[[new Cn,Cl]]},{provide:zl,useClass:zl,deps:[]},xl,{provide:_a,useFactory:function(){return ka},deps:[]},{provide:wa,useFactory:function(){return xa},deps:[]},{provide:Dl,useFactory:function(e){return Uo(e=e||"undefined"!=typeof $localize&&$localize.locale||Fo),e},deps:[[new En(Dl),new Cn,new In]]},{provide:Ll,useValue:"USD"}];let Cc=(()=>{class e{constructor(e){}}return e.\u0275fac=function(t){return new(t||e)(wn(gc))},e.\u0275mod=te({type:e}),e.\u0275inj=b({providers:Ec}),e})()},5355:(e,t,n)=>{"use strict";n.d(t,{nm:()=>j});var r=n(4459);n(7716),n(2329);var i=n(6304),s=n(279),o=n(8604),a=n(3854),l=n(9306);const c=new Map,u={activated:!1,tokenObservers:[]},h={initialized:!1,enabled:!1};function d(e){return c.get(e)||u}function p(e,t){c.set(e,t)}function f(){return h}class g{constructor(e,t,n,r,i){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,i.Z)(function*(){t.stop();try{t.pending=new a.BH,yield(n=t.getNextRun(e),new Promise(e=>{setTimeout(e,n)})),t.pending.resolve(),yield t.pending.promise,t.pending=new a.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}var n})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const m=new a.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function y(e){if(!d(e).activated)throw m.create("use-before-activation",{appName:e.name})}function _(e,t){return v.apply(this,arguments)}function v(){return(v=(0,i.Z)(function*({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});i&&(r["X-Firebase-Client"]=i.getPlatformInfoString());const s={method:"POST",body:JSON.stringify(t),headers:r};let o,a;try{o=yield fetch(e,s)}catch(h){throw m.create("fetch-network-error",{originalErrorMessage:h.message})}if(200!==o.status)throw m.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(h){throw m.create("fetch-parse-error",{originalErrorMessage:h.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw m.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=1e3*Number(l[1]),u=Date.now();return{token:a.attestationToken,expireTimeMillis:u+c,issuedAtTimeMillis:u}})).apply(this,arguments)}function w(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${n}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:t}}}const b="firebase-app-check-store";let T=null;function S(){return T||(T=new Promise((e,t)=>{try{const n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=t=>{e(t.target.result)},n.onerror=e=>{var n;t(m.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=e=>{const t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(b,{keyPath:"compositeKey"})}}}catch(n){t(m.create("storage-open",{originalErrorMessage:n.message}))}}),T)}function E(){return(E=(0,i.Z)(function*(e,t){const n=(yield S()).transaction(b,"readwrite"),r=n.objectStore(b).put({compositeKey:e,value:t});return new Promise((e,t)=>{r.onsuccess=t=>{e()},n.onerror=e=>{var n;t(m.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}})})).apply(this,arguments)}const C=new l.Yd("@firebase/app-check");function I(e,t){return(0,a.hl)()?function(e,t){return function(e,t){return E.apply(this,arguments)}(function(e){return`${e.options.appId}-${e.name}`}(e),t)}(e,t).catch(e=>{C.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function k(){return f().enabled}function x(){return A.apply(this,arguments)}function A(){return(A=(0,i.Z)(function*(){const e=f();if(e.enabled&&e.token)return e.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const P={error:"UNKNOWN_ERROR"};function R(e){return N.apply(this,arguments)}function N(){return(N=(0,i.Z)(function*(e,t=!1){const n=e.app;y(n);const r=d(n);let i,s=r.token;if(!s){const e=yield r.cachedTokenPromise;e&&F(e)&&(s=e)}if(!t&&s&&F(s))return{token:s.token};let o,a=!1;if(k()){r.exchangeTokenPromise||(r.exchangeTokenPromise=_(w(n,yield x()),e.platformLoggerProvider).then(e=>(r.exchangeTokenPromise=void 0,e)),a=!0);const t=yield r.exchangeTokenPromise;return yield I(n,t),p(n,Object.assign(Object.assign({},r),{token:t})),{token:t.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(e=>(r.exchangeTokenPromise=void 0,e)),a=!0),s=yield r.exchangeTokenPromise}catch(l){"appCheck/throttled"===l.code?C.warn(l.message):C.error(l),i=l}return s?(o={token:s.token},p(n,Object.assign(Object.assign({},r),{token:s})),yield I(n,s)):o=M(i),a&&L(n,o),o})).apply(this,arguments)}function O(e,t){const n=d(e),r=n.tokenObservers.filter(e=>e.next!==t);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),p(e,Object.assign(Object.assign({},n),{tokenObservers:r}))}function D(e){const{app:t}=e,n=d(t);let r=n.tokenRefresher;r||(r=function(e){const{app:t}=e;return new g((0,i.Z)(function*(){let n;if(n=d(t).token?yield R(e,!0):yield R(e),n.error)throw n.error}),()=>!0,()=>{const e=d(t);if(e.token){let t=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return t=Math.min(t,e.token.expireTimeMillis-3e5),Math.max(0,t-Date.now())}return 0},3e4,96e4)}(e),p(t,Object.assign(Object.assign({},n),{tokenRefresher:r}))),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function L(e,t){const n=d(e).tokenObservers;for(const i of n)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(r){}}function F(e){return e.expireTimeMillis-Date.now()>0}function M(e){return{token:(t=P,a.US.encodeString(JSON.stringify(t),!1)),error:e};var t}class U{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=d(this.app);for(const t of e)O(this.app,t.next);return Promise.resolve()}}const V="app-check-internal";(0,s._registerComponent)(new o.wA("app-check",e=>{return t=e.getProvider("app").getImmediate(),n=e.getProvider("platform-logger"),new U(t,n);var t,n},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(V).initialize()})),(0,s._registerComponent)(new o.wA(V,e=>{return t=e.getProvider("app-check").getImmediate(),{getToken:e=>R(t,e),addTokenListener:e=>function(e,t,n,r){const{app:i}=e,s=d(i),o={next:n,error:void 0,type:"INTERNAL"};if(p(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]})),s.token&&F(s.token)){const t=s.token;Promise.resolve().then(()=>{n({token:t.token}),D(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>D(e))}(t,0,e),removeTokenListener:e=>O(t.app,e)};var t},"PUBLIC").setInstantiationMode("EXPLICIT")),(0,s.registerVersion)("@firebase/app-check","0.5.2");class j{constructor(){return(0,r.vb)("app-check")}}"undefined"!=typeof window&&window},3820:(e,t,n)=>{"use strict";n.d(t,{zQ:()=>x,rT:()=>E,f7:()=>I,L6:()=>T,_Q:()=>S,lh:()=>C,Qv:()=>b,nw:()=>k});var r=n(7716),i=n(9765),s=n(5917),o=n(7574),a=n(4402),l=n(6682),c=n(3190);function u(e,t){return t?(0,c.w)(()=>e,t):(0,c.w)(()=>e)}var h=n(309),d=n(8002),p=n(2066),f=n(8049),g=n(9673),m=n(5435),y=n(4459),_=n(8747),v=n(8583),w=n(5355);n(7841);const b=new r.OlP("angularfire2.auth.use-emulator"),T=new r.OlP("angularfire2.auth.settings"),S=new r.OlP("angularfire2.auth.tenant-id"),E=new r.OlP("angularfire2.auth.langugage-code"),C=new r.OlP("angularfire2.auth.use-device-language"),I=new r.OlP("angularfire.auth.persistence"),k=(e,t,n,r,i,s,o,a)=>(0,_.cc)(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{const l=t.runOutsideAngular(()=>e.auth());if(n&&l.useEmulator(...n),r&&(l.tenantId=r),l.languageCode=i,s&&l.useDeviceLanguage(),o)for(const[e,t]of Object.entries(o))l.settings[e]=t;return a&&l.setPersistence(a),l},[n,r,i,s,o,a]);let x=(()=>{class e{constructor(e,t,r,w,b,T,S,E,C,I,x,A){const P=new i.xQ,R=(0,s.of)(void 0).pipe((0,h.QV)(b.outsideAngular),(0,c.w)(()=>w.runOutsideAngular(()=>Promise.resolve().then(n.bind(n,941)))),(0,d.U)(()=>(0,_.on)(e,w,t)),(0,d.U)(e=>k(e,w,T,E,C,I,S,x)),(0,p.d)({bufferSize:1,refCount:!1}));if((0,v.PM)(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,s.of)(null);else{R.pipe((0,f.P)()).subscribe();const e=R.pipe((0,c.w)(e=>e.getRedirectResult().then(e=>e,()=>null)),y.iC,(0,p.d)({bufferSize:1,refCount:!1})),t=R.pipe((0,c.w)(e=>new o.y(t=>({unsubscribe:w.runOutsideAngular(()=>e.onAuthStateChanged(e=>t.next(e),e=>t.error(e),()=>t.complete()))})))),n=R.pipe((0,c.w)(e=>new o.y(t=>({unsubscribe:w.runOutsideAngular(()=>e.onIdTokenChanged(e=>t.next(e),e=>t.error(e),()=>t.complete()))}))));this.authState=e.pipe(u(t),(0,g.R)(b.outsideAngular),(0,h.QV)(b.insideAngular)),this.user=e.pipe(u(n),(0,g.R)(b.outsideAngular),(0,h.QV)(b.insideAngular)),this.idToken=this.user.pipe((0,c.w)(e=>e?(0,a.D)(e.getIdToken()):(0,s.of)(null))),this.idTokenResult=this.user.pipe((0,c.w)(e=>e?(0,a.D)(e.getIdTokenResult()):(0,s.of)(null))),this.credential=(0,l.T)(e,P,this.authState.pipe((0,m.h)(e=>!e))).pipe((0,d.U)(e=>(null==e?void 0:e.user)?e:null),(0,g.R)(b.outsideAngular),(0,h.QV)(b.insideAngular))}return(0,_.pX)(this,R,w,{spy:{apply:(e,t,n)=>{(e.startsWith("signIn")||e.startsWith("createUser"))&&n.then(e=>P.next(e))}}})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(_.Dh),r.LFG(_.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(y.HU),r.LFG(b,8),r.LFG(T,8),r.LFG(S,8),r.LFG(E,8),r.LFG(C,8),r.LFG(I,8),r.LFG(w.nm,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})()},4384:(e,t,n)=>{"use strict";n.d(t,{ST:()=>tg,yb:()=>ng});var r,i=n(7716),s=n(3637),o=n(7574),a=n(4402),l=n(5917),c=n(4459),u=n(9761),h=n(9328),d=n(8002),p=n(2145),f=n(7519),g=n(5435),m=n(8747),y=n(8583),_=(n(941),n(156)),v=n(6304),w=n(279),b=n(8604),T=n(9306),S=n(3854),E="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},C={},I=I||{},k=E||self;function x(){}function A(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function P(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var R="closure_uid_"+(1e9*Math.random()>>>0),N=0;function O(e,t,n){return e.call.apply(e.bind,arguments)}function D(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function L(e,t,n){return(L=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?O:D).apply(null,arguments)}function F(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function M(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function U(){this.s=this.s,this.o=this.o}var V={};U.prototype.s=!1,U.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,R)&&e[R]||(e[R]=++N)}(this);delete V[e]}},U.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const j=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},q=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){const r=e.length,i="string"==typeof e?e.split(""):e;for(let s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)};function B(e){return Array.prototype.concat.apply([],arguments)}function z(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function $(e){return/^[\s\xa0]*$/.test(e)}var H,G=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Z(e,t){return-1!=e.indexOf(t)}function K(e,t){return e<t?-1:e>t?1:0}e:{var W=k.navigator;if(W){var Y=W.userAgent;if(Y){H=Y;break e}}H=""}function Q(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function J(e){const t={};for(const n in e)t[n]=e[n];return t}var X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<X.length;t++)n=X[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function te(e){return te[" "](e),e}te[" "]=x;var ne,re,ie=Z(H,"Opera"),se=Z(H,"Trident")||Z(H,"MSIE"),oe=Z(H,"Edge"),ae=oe||se,le=Z(H,"Gecko")&&!(Z(H.toLowerCase(),"webkit")&&!Z(H,"Edge"))&&!(Z(H,"Trident")||Z(H,"MSIE"))&&!Z(H,"Edge"),ce=Z(H.toLowerCase(),"webkit")&&!Z(H,"Edge");function ue(){var e=k.document;return e?e.documentMode:void 0}e:{var he="",de=(re=H,le?/rv:([^\);]+)(\)|;)/.exec(re):oe?/Edge\/([\d\.]+)/.exec(re):se?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(re):ce?/WebKit\/(\S+)/.exec(re):ie?/(?:Version)[ \/]?(\S+)/.exec(re):void 0);if(de&&(he=de?de[1]:""),se){var pe=ue();if(null!=pe&&pe>parseFloat(he)){ne=String(pe);break e}}ne=he}var fe={};var ge=k.document&&se&&(ue()||parseInt(ne,10))||void 0,me=function(){if(!k.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{k.addEventListener("test",x,t),k.removeEventListener("test",x,t)}catch(n){}return e}();function ye(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function _e(e,t){if(ye.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(le){e:{try{te(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:ve[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&_e.Z.h.call(this)}}ye.prototype.h=function(){this.defaultPrevented=!0},M(_e,ye);var ve={2:"touch",3:"pen",4:"mouse"};_e.prototype.h=function(){_e.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var we="closure_listenable_"+(1e6*Math.random()|0),be=0;function Te(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++be,this.ca=this.fa=!1}function Se(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Ee(e){this.src=e,this.g={},this.h=0}function Ce(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=j(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Se(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Ie(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==r)return i}return-1}Ee.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Ie(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Te(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var ke="closure_lm_"+(1e6*Math.random()|0),xe={};function Ae(e,t,n,r,i){if(r&&r.once)return Re(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Ae(e,t[s],n,r,i);return null}return n=Ue(n),e&&e[we]?e.N(t,n,P(r)?!!r.capture:!!r,i):Pe(e,t,n,!1,r,i)}function Pe(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=P(i)?!!i.capture:!!i,a=Fe(e);if(a||(e[ke]=a=new Ee(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){var e=Le;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)me||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(De(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Re(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Re(e,t[s],n,r,i);return null}return n=Ue(n),e&&e[we]?e.O(t,n,P(r)?!!r.capture:!!r,i):Pe(e,t,n,!0,r,i)}function Ne(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Ne(e,t[s],n,r,i);else r=P(r)?!!r.capture:!!r,n=Ue(n),e&&e[we]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=Ie(s=e.g[t],n,r,i))&&(Se(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=Fe(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ie(t,n,r,i)),(n=-1<e?t[e]:null)&&Oe(n))}function Oe(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[we])Ce(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(De(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Fe(t))?(Ce(n,e),0==n.h&&(n.src=null,t[ke]=null)):Se(e)}}}function De(e){return e in xe?xe[e]:xe[e]="on"+e}function Le(e,t){if(e.ca)e=!0;else{t=new _e(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Oe(e),e=n.call(r,t)}return e}function Fe(e){return(e=e[ke])instanceof Ee?e:null}var Me="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ue(e){return"function"==typeof e?e:(e[Me]||(e[Me]=function(t){return e.handleEvent(t)}),e[Me])}function Ve(){U.call(this),this.i=new Ee(this),this.P=this,this.I=null}function je(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new ye(t,e);else if(t instanceof ye)t.target=t.target||e;else{var i=t;ee(t=new ye(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=qe(o,r,!0,t)&&i}if(i=qe(o=t.g=e,r,!0,t)&&i,i=qe(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=qe(o=t.g=n[s],r,!1,t)&&i}function qe(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,l=o.ia||o.src;o.fa&&Ce(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}M(Ve,U),Ve.prototype[we]=!0,Ve.prototype.removeEventListener=function(e,t,n,r){Ne(this,e,t,n,r)},Ve.prototype.M=function(){if(Ve.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Se(n[r]);delete t.g[e],t.h--}}this.I=null},Ve.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ve.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Be=k.JSON.stringify;function ze(){var e=Ye;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var $e,He=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Ge,e=>e.reset());class Ge{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ze(e){k.setTimeout(()=>{throw e},0)}function Ke(e,t){$e||function(){var e=k.Promise.resolve(void 0);$e=function(){e.then(Qe)}}(),We||($e(),We=!0),Ye.add(e,t)}var We=!1,Ye=new class{constructor(){this.h=this.g=null}add(e,t){const n=He.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function Qe(){for(var e;e=ze();){try{e.h.call(e.g)}catch(n){Ze(n)}var t=He;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}We=!1}function Je(e,t){Ve.call(this),this.h=e||1,this.g=t||k,this.j=L(this.kb,this),this.l=Date.now()}function Xe(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function et(e,t,n){if("function"==typeof e)n&&(e=L(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=L(e.handleEvent,e)}return 2147483647<Number(t)?-1:k.setTimeout(e,t||0)}function tt(e){e.g=et(()=>{e.g=null,e.i&&(e.i=!1,tt(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}M(Je,Ve),(r=Je.prototype).da=!1,r.S=null,r.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),je(this,"tick"),this.da&&(Xe(this),this.start()))}},r.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},r.M=function(){Je.Z.M.call(this),Xe(this),delete this.g};class nt extends U{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:tt(this)}M(){super.M(),this.g&&(k.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rt(e){U.call(this),this.h=e,this.g={}}M(rt,U);var it=[];function st(e,t,n,r){Array.isArray(n)||(n&&(it[0]=n.toString()),n=it);for(var i=0;i<n.length;i++){var s=Ae(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function ot(e){Q(e.g,function(e,t){this.g.hasOwnProperty(t)&&Oe(e)},e),e.g={}}function at(){this.g=!0}function lt(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Be(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}rt.prototype.M=function(){rt.Z.M.call(this),ot(this)},rt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},at.prototype.Aa=function(){this.g=!1},at.prototype.info=function(){};var ct={},ut=null;function ht(){return ut=ut||new Ve}function dt(e){ye.call(this,ct.Ma,e)}function pt(e){const t=ht();je(t,new dt(t,e))}function ft(e,t){ye.call(this,ct.STAT_EVENT,e),this.stat=t}function gt(e){const t=ht();je(t,new ft(t,e))}function mt(e,t){ye.call(this,ct.Na,e),this.size=t}function yt(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return k.setTimeout(function(){e()},t)}ct.Ma="serverreachability",M(dt,ye),ct.STAT_EVENT="statevent",M(ft,ye),ct.Na="timingevent",M(mt,ye);var _t={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},vt={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function wt(){}function bt(){}wt.prototype.h=null;var Tt,St={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Et(){ye.call(this,"d")}function Ct(){ye.call(this,"c")}function It(){}function kt(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new rt(this),this.P=At,this.W=new Je(e=ae?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new xt}function xt(){this.i=null,this.g="",this.h=!1}M(Et,ye),M(Ct,ye),M(It,wt),It.prototype.g=function(){return new XMLHttpRequest},It.prototype.i=function(){return{}},Tt=new It;var At=45e3,Pt={},Rt={};function Nt(e,t,n){e.K=1,e.v=tn(Wt(t)),e.s=n,e.U=!0,Ot(e,null)}function Ot(e,t){e.F=Date.now(),Mt(e),e.A=Wt(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),gn(n.h,"t",r),e.C=0,n=e.l.H,e.h=new xt,e.g=gr(e.l,n?t:null,!e.s),0<e.O&&(e.L=new nt(L(e.Ia,e,e.g),e.O)),st(e.V,e.g,"readystatechange",e.gb),t=e.H?J(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),pt(1),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.X,e.s)}function Dt(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function Lt(e,t,n){let r,i=!0;for(;!e.I&&e.C<n.length;){if(r=Ft(e,n),r==Rt){4==t&&(e.o=4,gt(14),i=!1),lt(e.j,e.m,null,"[Incomplete Response]");break}if(r==Pt){e.o=4,gt(15),lt(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}lt(e.j,e.m,r,null),Bt(e,r)}Dt(e)&&r!=Rt&&r!=Pt&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,gt(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),ar(t),t.L=!0,gt(11))):(lt(e.j,e.m,n,"[Invalid Chunked Response]"),qt(e),jt(e))}function Ft(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Rt:(n=Number(t.substring(n,r)),isNaN(n)?Pt:(r+=1)+n>t.length?Rt:(t=t.substr(r,n),e.C=r+n,t))}function Mt(e){e.Y=Date.now()+e.P,Ut(e,e.P)}function Ut(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=yt(L(e.eb,e),t)}function Vt(e){e.B&&(k.clearTimeout(e.B),e.B=null)}function jt(e){0==e.l.G||e.I||ur(e.l,e)}function qt(e){Vt(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Xe(e.W),ot(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Bt(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||bn(n.i,e)))if(n.I=e.N,!e.J&&bn(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;cr(n),Jn(n)}or(n),gt(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=yt(L(n.ab,n),6e3));if(1>=wn(n.i)&&n.ka){try{n.ka()}catch(c){}n.ka=void 0}}else dr(n,11)}else if((e.J||n.g==e)&&cr(n),!$(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.U=c[0],c=c[1],2==n.G)if("c"==c[0]){n.J=c[1],n.la=c[2];const t=c[3];null!=t&&(n.ma=t,n.h.info("VER="+n.ma));const i=c[4];null!=i&&(n.za=i,n.h.info("SVER="+n.za));const u=c[5];null!=u&&"number"==typeof u&&0<u&&(n.K=r=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;!s.g&&(Z(e,"spdy")||Z(e,"quic")||Z(e,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(Tn(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.sa=e,en(r.F,r.D,e))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=e;if((r=n).oa=fr(r,r.H?r.la:null,r.W),o.J){Sn(r.i,o);var a=o,l=r.K;l&&a.setTimeout(l),a.B&&(Vt(a),Mt(a)),r.g=o}else sr(r);0<n.l.length&&tr(n)}else"stop"!=c[0]&&"close"!=c[0]||dr(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?dr(n,7):Qn(n):"noop"!=c[0]&&n.j&&n.j.wa(c),n.A=0)}pt(4)}catch(c){}}function zt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(A(e)||"string"==typeof e)q(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(A(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(A(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}}function $t(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof $t)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Ht(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Gt(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Gt(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Gt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(r=kt.prototype).setTimeout=function(e){this.P=e},r.gb=function(e){e=e.target;const t=this.L;t&&3==Gn(e)?t.l():this.Ia(e)},r.Ia=function(e){try{if(e==this.g)e:{const u=Gn(this.g);var t=this.g.Da();const h=this.g.ba();if(!(3>u)&&(3!=u||ae||this.g&&(this.h.h||this.g.ga()||Zn(this.g)))){this.I||4!=u||7==t||pt(8==t||0>=h?3:2),Vt(this);var n=this.g.ba();this.N=n;t:if(Dt(this)){var r=Zn(this.g);e="";var i=r.length,s=4==Gn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){qt(this),jt(this);var o="";break t}this.h.i=new k.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.X,u,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,gt(12),qt(this),jt(this);break e}lt(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Bt(this,n)}this.U?(Lt(this,u,o),ae&&this.i&&3==u&&(st(this.V,this.W,"tick",this.fb),this.W.start())):(lt(this.j,this.m,o,null),Bt(this,o)),4==u&&qt(this),this.i&&!this.I&&(4==u?ur(this.l,this):(this.i=!1,Mt(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,gt(12)):(this.o=0,gt(13)),qt(this),jt(this)}}}catch(u){}},r.fb=function(){if(this.g){var e=Gn(this.g),t=this.g.ga();this.C<t.length&&(Vt(this),Lt(this,e,t),this.i&&4!=e&&Mt(this))}},r.cancel=function(){this.I=!0,qt(this)},r.eb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(pt(3),gt(17)),qt(this),this.o=2,jt(this)):Ut(this,this.Y-e)},(r=$t.prototype).R=function(){Ht(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},r.T=function(){return Ht(this),this.g.concat()},r.get=function(e,t){return Gt(this.h,e)?this.h[e]:t},r.set=function(e,t){Gt(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},r.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}};var Zt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Kt(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Kt){this.g=void 0!==t?t:e.g,Yt(this,e.j),this.s=e.s,Qt(this,e.i),Jt(this,e.m),this.l=e.l,t=e.h;var n=new hn;n.i=t.i,t.g&&(n.g=new $t(t.g),n.h=t.h),Xt(this,n),this.o=e.o}else e&&(n=String(e).match(Zt))?(this.g=!!t,Yt(this,n[1]||"",!0),this.s=nn(n[2]||""),Qt(this,n[3]||"",!0),Jt(this,n[4]),this.l=nn(n[5]||"",!0),Xt(this,n[6]||"",!0),this.o=nn(n[7]||"")):(this.g=!!t,this.h=new hn(null,this.g))}function Wt(e){return new Kt(e)}function Yt(e,t,n){e.j=n?nn(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Qt(e,t,n){e.i=n?nn(t,!0):t}function Jt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Xt(e,t,n){t instanceof hn?(e.h=t,function(e,t){t&&!e.j&&(dn(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(pn(this,t),gn(this,n,e))},e)),e.j=t}(e.h,e.g)):(n||(t=rn(t,cn)),e.h=new hn(t,e.g))}function en(e,t,n){e.h.set(t,n)}function tn(e){return en(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function nn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function rn(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,sn),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function sn(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Kt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(rn(t,on,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(rn(t,on,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(rn(n,"/"==n.charAt(0)?ln:an,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",rn(n,un)),e.join("")};var on=/[#\/\?@]/g,an=/[#\?:]/g,ln=/[#\?]/g,cn=/[#\?@]/g,un=/#/g;function hn(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function dn(e){e.g||(e.g=new $t,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function pn(e,t){dn(e),t=mn(e,t),Gt(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Gt((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Ht(e)))}function fn(e,t){return dn(e),t=mn(e,t),Gt(e.g.h,t)}function gn(e,t,n){pn(e,t),0<n.length&&(e.i=null,e.g.set(mn(e,t),z(n)),e.h+=n.length)}function mn(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function yn(e){this.l=e||_n,e=k.PerformanceNavigationTiming?0<(e=k.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(k.g&&k.g.Ea&&k.g.Ea()&&k.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(r=hn.prototype).add=function(e,t){dn(this),this.i=null,e=mn(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},r.forEach=function(e,t){dn(this),this.g.forEach(function(n,r){q(n,function(n){e.call(t,n,r,this)},this)},this)},r.T=function(){dn(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n},r.R=function(e){dn(this);var t=[];if("string"==typeof e)fn(this,e)&&(t=B(t,this.g.get(mn(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=B(t,e[n])}return t},r.set=function(e,t){return dn(this),this.i=null,fn(this,e=mn(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},r.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},r.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),e.push(o)}}return this.i=e.join("&")};var _n=10;function vn(e){return!!e.h||!!e.g&&e.g.size>=e.j}function wn(e){return e.h?1:e.g?e.g.size:0}function bn(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Tn(e,t){e.g?e.g.add(t):e.h=t}function Sn(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function En(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return z(e.i)}function Cn(){}function In(){this.g=new Cn}function kn(e,t,n){const r=n||"";try{zt(e,function(e,n){let i=e;P(e)&&(i=Be(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function xn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function An(e){this.l=e.$b||null,this.j=e.ib||!1}function Pn(e,t){Ve.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Rn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}yn.prototype.cancel=function(){if(this.i=En(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},Cn.prototype.stringify=function(e){return k.JSON.stringify(e,void 0)},Cn.prototype.parse=function(e){return k.JSON.parse(e,void 0)},M(An,wt),An.prototype.g=function(){return new Pn(this.l,this.j)},An.prototype.i=function(e){return function(){return e}}({}),M(Pn,Ve);var Rn=0;function Nn(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function On(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Dn(e)}function Dn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(r=Pn.prototype).open=function(e,t){if(this.readyState!=Rn)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Dn(this)},r.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||k).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},r.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,On(this)),this.readyState=Rn},r.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dn(this)),this.g&&(this.readyState=3,Dn(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==k.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Nn(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},r.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?On(this):Dn(this),3==this.readyState&&Nn(this)}},r.Ua=function(e){this.g&&(this.response=this.responseText=e,On(this))},r.Ta=function(e){this.g&&(this.response=e,On(this))},r.ha=function(){this.g&&On(this)},r.setRequestHeader=function(e,t){this.v.append(e,t)},r.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Pn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Ln=k.JSON.parse;function Fn(e){Ve.call(this),this.headers=new $t,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Mn,this.K=this.L=!1}M(Fn,Ve);var Mn="",Un=/^https?$/i,Vn=["POST","PUT"];function jn(e){return"content-type"==e.toLowerCase()}function qn(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Bn(e),$n(e)}function Bn(e){e.D||(e.D=!0,je(e,"complete"),je(e,"error"))}function zn(e){if(e.h&&void 0!==I&&(!e.C[1]||4!=Gn(e)||2!=e.ba()))if(e.v&&4==Gn(e))et(e.Fa,0,e);else if(je(e,"readystatechange"),4==Gn(e)){e.h=!1;try{const l=e.ba();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===l){var i=String(e.H).match(Zt)[1]||null;if(!i&&k.self&&k.self.location){var s=k.self.location.protocol;i=s.substr(0,s.length-1)}r=!Un.test(i?i.toLowerCase():"")}n=r}if(n)je(e,"complete"),je(e,"success");else{e.m=6;try{var o=2<Gn(e)?e.g.statusText:""}catch(a){o=""}e.j=o+" ["+e.ba()+"]",Bn(e)}}finally{$n(e)}}}function $n(e,t){if(e.g){Hn(e);const r=e.g,i=e.C[0]?x:null;e.g=null,e.C=null,t||je(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Hn(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(k.clearTimeout(e.A),e.A=null)}function Gn(e){return e.g?e.g.readyState:0}function Zn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Mn:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Kn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){let t="";return Q(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):en(e,t,n))}function Wn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Yn(e){this.za=0,this.l=[],this.h=new at,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Wn("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Wn("baseRetryDelayMs",5e3,e),this.$a=Wn("retryDelaySeedMs",1e4,e),this.Ya=Wn("forwardChannelMaxRetries",2,e),this.ra=Wn("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new yn(e&&e.concurrentRequestLimit),this.Ca=new In,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Qn(e){if(Xn(e),3==e.G){var t=e.V++,n=Wt(e.F);en(n,"SID",e.J),en(n,"RID",t),en(n,"TYPE","terminate"),rr(e,n),(t=new kt(e,e.h,t,void 0)).K=2,t.v=tn(Wt(n)),n=!1,k.navigator&&k.navigator.sendBeacon&&(n=k.navigator.sendBeacon(t.v.toString(),"")),!n&&k.Image&&((new Image).src=t.v,n=!0),n||(t.g=gr(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Mt(t)}pr(e)}function Jn(e){e.g&&(ar(e),e.g.cancel(),e.g=null)}function Xn(e){Jn(e),e.u&&(k.clearTimeout(e.u),e.u=null),cr(e),e.i.cancel(),e.m&&("number"==typeof e.m&&k.clearTimeout(e.m),e.m=null)}function er(e,t){e.l.push(new class{constructor(e,t){this.h=e,this.g=t}}(e.Za++,t)),3==e.G&&tr(e)}function tr(e){vn(e.i)||e.m||(e.m=!0,Ke(e.Ha,e),e.C=0)}function nr(e,t){var n;n=t?t.m:e.V++;const r=Wt(e.F);en(r,"SID",e.J),en(r,"RID",n),en(r,"AID",e.U),rr(e,r),e.o&&e.s&&Kn(r,e.o,e.s),n=new kt(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=ir(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Tn(e.i,n),Nt(n,r,t)}function rr(e,t){e.j&&zt({},function(e,n){en(t,n,e)})}function ir(e,t,n){n=Math.min(e.l.length,n);var r=e.j?L(e.j.Oa,e.j,e):null;e:{var i=e.l;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].h;const a=i[o].g;if(n-=t,0>n)t=Math.max(0,i[o].h-100),s=!1;else try{kn(a,e,"req"+n+"_")}catch(Zr){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.l.splice(0,n),t.D=e,r}function sr(e){e.g||e.u||(e.Y=1,Ke(e.Ga,e),e.A=0)}function or(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=yt(L(e.Ga,e),hr(e,e.A)),e.A++,0))}function ar(e){null!=e.B&&(k.clearTimeout(e.B),e.B=null)}function lr(e){e.g=new kt(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Wt(e.oa);en(t,"RID","rpc"),en(t,"SID",e.J),en(t,"CI",e.N?"0":"1"),en(t,"AID",e.U),rr(e,t),en(t,"TYPE","xmlhttp"),e.o&&e.s&&Kn(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=tn(Wt(t)),n.s=null,n.U=!0,Ot(n,e)}function cr(e){null!=e.v&&(k.clearTimeout(e.v),e.v=null)}function ur(e,t){var n=null;if(e.g==t){cr(e),ar(e),e.g=null;var r=2}else{if(!bn(e.i,t))return;n=t.D,Sn(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;je(r=ht(),new mt(r,n,t,i)),tr(e)}else sr(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(wn(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=yt(L(e.Ha,e,t),hr(e,e.C)),e.C++,0)))}(e,t)||2==r&&or(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:dr(e,5);break;case 4:dr(e,10);break;case 3:dr(e,6);break;default:dr(e,2)}}function hr(e,t){let n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function dr(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=L(e.jb,e);n||(n=new Kt("//www.google.com/images/cleardot.gif"),k.location&&"http"==k.location.protocol||Yt(n,"https"),tn(n)),function(e,t){const n=new at;if(k.Image){const r=new Image;r.onload=F(xn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=F(xn,n,r,"TestLoadImage: error",!1,t),r.onabort=F(xn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=F(xn,n,r,"TestLoadImage: timeout",!1,t),k.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else gt(2);e.G=0,e.j&&e.j.va(t),pr(e),Xn(e)}function pr(e){e.G=0,e.I=-1,e.j&&(0==En(e.i).length&&0==e.l.length||(e.i.i.length=0,z(e.l),e.l.length=0),e.j.ua())}function fr(e,t,n){let r=function(e){return e instanceof Kt?Wt(e):new Kt(e,void 0)}(n);if(""!=r.i)t&&Qt(r,t+"."+r.i),Jt(r,r.m);else{const e=k.location;r=function(e,t,n,r){var i=new Kt(null,void 0);return e&&Yt(i,e),t&&Qt(i,t),n&&Jt(i,n),r&&(i.l=r),i}(e.protocol,t?t+"."+e.hostname:e.hostname,+e.port,n)}return e.aa&&Q(e.aa,function(e,t){en(r,t,e)}),n=e.sa,(t=e.D)&&n&&en(r,t,n),en(r,"VER",e.ma),rr(e,r),r}function gr(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Fn(n&&e.Ba&&!e.qa?new An({ib:!0}):e.qa)).L=e.H,t}function mr(){}function yr(){if(se&&!(10<=Number(ge)))throw Error("Environmental error: no available transport.")}function _r(e,t){Ve.call(this),this.g=new Yn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!$(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!$(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new br(this)}function vr(e){Et.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function wr(){Ct.call(this),this.status=1}function br(e){this.g=e}(r=Fn.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Tt.g(),this.C=function(e){return e.h||(e.h=e.i())}(this.u?this.u:Tt),this.g.onreadystatechange=L(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){return void qn(this,s)}e=n||"";const i=new $t(this.headers);r&&zt(r,function(e,t){i.set(t,e)}),r=function(e){e:{var t=jn;const n=e.length,r="string"==typeof e?e.split(""):e;for(let i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=k.FormData&&e instanceof k.FormData,!(0<=j(Vn,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.g.setRequestHeader(t,e)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Hn(this),0<this.B&&((this.K=function(e){return se&&function(){return e=fe,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let e=0;const t=G(String(ne)).split("."),n=G("9").split("."),r=Math.max(t.length,n.length);for(let o=0;0==e&&o<r;o++){var i=t[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;e=K(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||K(0==i[2].length,0==s[2].length)||K(i[2],s[2]),i=i[3],s=s[3]}while(0==e)}return 0<=e}();var e}()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=L(this.pa,this)):this.A=et(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){qn(this,s)}},r.pa=function(){void 0!==I&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,je(this,"timeout"),this.abort(8))},r.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,je(this,"complete"),je(this,"abort"),$n(this))},r.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),$n(this,!0)),Fn.Z.M.call(this)},r.Fa=function(){this.s||(this.F||this.v||this.l?zn(this):this.cb())},r.cb=function(){zn(this)},r.ba=function(){try{return 2<Gn(this)?this.g.status:-1}catch(re){return-1}},r.ga=function(){try{return this.g?this.g.responseText:""}catch(re){return""}},r.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ln(t)}},r.Da=function(){return this.m},r.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(r=Yn.prototype).ma=8,r.G=1,r.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},r.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new kt(this,this.h,e,void 0);let s=this.s;if(this.P&&(s?(s=J(s),ee(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var t=0,n=0;n<this.l.length;n++){var r=this.l[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.l.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=ir(this,i,t),en(n=Wt(this.F),"RID",e),en(n,"CVER",22),this.D&&en(n,"X-HTTP-Session-Id",this.D),rr(this,n),this.o&&s&&Kn(n,this.o,s),Tn(this.i,i),this.Ra&&en(n,"TYPE","init"),this.ja?(en(n,"$req",t),en(n,"SID","null"),i.$=!0,Nt(i,n,null)):Nt(i,n,t),this.G=2}}else 3==this.G&&(e?nr(this,e):0==this.l.length||vn(this.i)||nr(this))},r.Ga=function(){if(this.u=null,lr(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=yt(L(this.bb,this),e)}},r.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,gt(10),Jn(this),lr(this))},r.ab=function(){null!=this.v&&(this.v=null,Jn(this),or(this),gt(19))},r.jb=function(e){e?(this.h.info("Successfully pinged google.com"),gt(2)):(this.h.info("Failed to ping google.com"),gt(1))},(r=mr.prototype).xa=function(){},r.wa=function(){},r.va=function(){},r.ua=function(){},r.Oa=function(){},yr.prototype.g=function(e,t){return new _r(e,t)},M(_r,Ve),_r.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Ke(L(e.hb,e,t))),gt(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=fr(e,null,e.W),tr(e)},_r.prototype.close=function(){Qn(this.g)},_r.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,er(this.g,t)}else this.v?((t={}).__data__=Be(e),er(this.g,t)):er(this.g,e)},_r.prototype.M=function(){this.g.j=null,delete this.j,Qn(this.g),delete this.g,_r.Z.M.call(this)},M(vr,Et),M(wr,Ct),M(br,mr),br.prototype.xa=function(){je(this.g,"a")},br.prototype.wa=function(e){je(this.g,new vr(e))},br.prototype.va=function(e){je(this.g,new wr(e))},br.prototype.ua=function(){je(this.g,"b")},yr.prototype.createWebChannel=yr.prototype.g,_r.prototype.send=_r.prototype.u,_r.prototype.open=_r.prototype.m,_r.prototype.close=_r.prototype.close,_t.NO_ERROR=0,_t.TIMEOUT=8,_t.HTTP_ERROR=6,vt.COMPLETE="complete",bt.EventType=St,St.OPEN="a",St.CLOSE="b",St.ERROR="c",St.MESSAGE="d",Ve.prototype.listen=Ve.prototype.N,Fn.prototype.listenOnce=Fn.prototype.O,Fn.prototype.getLastError=Fn.prototype.La,Fn.prototype.getLastErrorCode=Fn.prototype.Da,Fn.prototype.getStatus=Fn.prototype.ba,Fn.prototype.getResponseJson=Fn.prototype.Qa,Fn.prototype.getResponseText=Fn.prototype.ga,Fn.prototype.send=Fn.prototype.ea;var Tr=C.createWebChannelTransport=function(){return new yr},Sr=C.getStatEventTarget=function(){return ht()},Er=C.ErrorCode=_t,Cr=C.EventType=vt,Ir=C.Event=ct,kr=C.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},xr=C.FetchXmlHttpFactory=An,Ar=C.WebChannel=bt,Pr=C.XhrIo=Fn;const Rr="@firebase/firestore";class Nr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nr.UNAUTHENTICATED=new Nr(null),Nr.GOOGLE_CREDENTIALS=new Nr("google-credentials-uid"),Nr.FIRST_PARTY=new Nr("first-party-uid"),Nr.MOCK_USER=new Nr("mock-user");let Or="9.5.0";const Dr=new T.Yd("@firebase/firestore");function Lr(){return Dr.logLevel}function Fr(e,...t){if(Dr.logLevel<=T.in.DEBUG){const n=t.map(Vr);Dr.debug(`Firestore (${Or}): ${e}`,...n)}}function Mr(e,...t){if(Dr.logLevel<=T.in.ERROR){const n=t.map(Vr);Dr.error(`Firestore (${Or}): ${e}`,...n)}}function Ur(e,...t){if(Dr.logLevel<=T.in.WARN){const n=t.map(Vr);Dr.warn(`Firestore (${Or}): ${e}`,...n)}}function Vr(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function jr(e="Unexpected state"){const t=`FIRESTORE (${Or}) INTERNAL ASSERTION FAILED: `+e;throw Mr(t),new Error(t)}function qr(e,t){e||jr()}function Br(e,t){return e}const zr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $r extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Hr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Gr{constructor(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}class Zr{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Nr.UNAUTHENTICATED))}shutdown(){}}class Kr{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Wr{constructor(e){this.t=e,this.currentUser=Nr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var n=this;let r=this.i;const i=e=>this.i!==r?(r=this.i,t(e)):Promise.resolve();let s=new Hr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Hr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const t=s;e.enqueueRetryable((0,v.Z)(function*(){yield t.promise,yield i(n.currentUser)}))},a=e=>{Fr("FirebaseCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Fr("FirebaseCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Hr)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Fr("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(qr("string"==typeof t.accessToken),new Gr(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return qr(null===e||"string"==typeof e),new Nr(e)}}class Yr{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=Nr.FIRST_PARTY}get authHeaders(){const e={"X-Goog-AuthUser":this.l},t=this.h.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}class Qr{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Yr(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Nr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Jr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.g(e),this.p=e=>t.writeSequenceNumber(e))}g(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.p&&this.p(e),e}}function Xr(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Jr.T=-1;class ei{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=Xr(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function ti(e,t){return e<t?-1:e>t?1:0}function ni(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function ri(e){return e+"\0"}class ii{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new $r(zr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new $r(zr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new $r(zr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $r(zr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ii.fromMillis(Date.now())}static fromDate(e){return ii.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new ii(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ti(this.nanoseconds,e.nanoseconds):ti(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class si{constructor(e){this.timestamp=e}static fromTimestamp(e){return new si(e)}static min(){return new si(new ii(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function oi(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ai(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function li(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ci{constructor(e,t,n){void 0===t?t=0:t>e.length&&jr(),void 0===n?n=e.length-t:n>e.length-t&&jr(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ci.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ci?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ui extends ci{construct(e,t,n){return new ui(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new $r(zr.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new ui(t)}static emptyPath(){return new ui([])}}const hi=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class di extends ci{construct(e,t,n){return new di(e,t,n)}static isValidIdentifier(e){return hi.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),di.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new di(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new $r(zr.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new $r(zr.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new $r(zr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new $r(zr.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new di(t)}static emptyPath(){return new di([])}}class pi{constructor(e){this.fields=e,e.sort(di.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ni(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class fi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new fi(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new fi(t)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ti(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fi.EMPTY_BYTE_STRING=new fi("");const gi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mi(e){if(qr(!!e),"string"==typeof e){let t=0;const n=gi.exec(e);if(qr(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:yi(e.seconds),nanos:yi(e.nanos)}}function yi(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function _i(e){return"string"==typeof e?fi.fromBase64String(e):fi.fromUint8Array(e)}function vi(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function wi(e){const t=e.mapValue.fields.__previous_value__;return vi(t)?wi(t):t}function bi(e){const t=mi(e.mapValue.fields.__local_write_time__.timestampValue);return new ii(t.seconds,t.nanos)}function Ti(e){return null==e}function Si(e){return 0===e&&1/e==-1/0}function Ei(e){return"number"==typeof e&&Number.isInteger(e)&&!Si(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}class Ci{constructor(e){this.path=e}static fromPath(e){return new Ci(ui.fromString(e))}static fromName(e){return new Ci(ui.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===ui.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ui.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ci(new ui(e.slice()))}}function Ii(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?vi(e)?4:10:jr()}function ki(e,t){const n=Ii(e);if(n!==Ii(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return bi(e).isEqual(bi(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=mi(e.timestampValue),r=mi(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return _i(e.bytesValue).isEqual(_i(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return yi(e.geoPointValue.latitude)===yi(t.geoPointValue.latitude)&&yi(e.geoPointValue.longitude)===yi(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return yi(e.integerValue)===yi(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=yi(e.doubleValue),r=yi(t.doubleValue);return n===r?Si(n)===Si(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ni(e.arrayValue.values||[],t.arrayValue.values||[],ki);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(oi(n)!==oi(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ki(n[i],r[i])))return!1;return!0}(e,t);default:return jr()}}function xi(e,t){return void 0!==(e.values||[]).find(e=>ki(e,t))}function Ai(e,t){const n=Ii(e),r=Ii(t);if(n!==r)return ti(n,r);switch(n){case 0:return 0;case 1:return ti(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=yi(e.integerValue||e.doubleValue),r=yi(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Pi(e.timestampValue,t.timestampValue);case 4:return Pi(bi(e),bi(t));case 5:return ti(e.stringValue,t.stringValue);case 6:return function(e,t){const n=_i(e),r=_i(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=ti(n[i],r[i]);if(0!==e)return e}return ti(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=ti(yi(e.latitude),yi(t.latitude));return 0!==n?n:ti(yi(e.longitude),yi(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Ai(n[i],r[i]);if(e)return e}return ti(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=ti(r[o],s[o]);if(0!==e)return e;const t=Ai(n[r[o]],i[s[o]]);if(0!==t)return t}return ti(r.length,s.length)}(e.mapValue,t.mapValue);default:throw jr()}}function Pi(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ti(e,t);const n=mi(e),r=mi(t),i=ti(n.seconds,r.seconds);return 0!==i?i:ti(n.nanos,r.nanos)}function Ri(e){return Ni(e)}function Ni(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=mi(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?_i(e.bytesValue).toBase64():"referenceValue"in e?Ci.fromName(e.referenceValue).toString():"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ni(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Ni(e.fields[i])}`;return n+"}"}(e.mapValue):jr();var t}function Oi(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Di(e){return!!e&&"integerValue"in e}function Li(e){return!!e&&"arrayValue"in e}function Fi(e){return!!e&&"nullValue"in e}function Mi(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ui(e){return!!e&&"mapValue"in e}function Vi(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ai(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Vi(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Vi(e.arrayValue.values[n]);return t}return Object.assign({},e)}class ji{constructor(e){this.value=e}static empty(){return new ji({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ui(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vi(t)}setAll(e){let t=di.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Vi(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Ui(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ki(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ui(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ai(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new ji(Vi(this.value))}}function qi(e){const t=[];return ai(e.fields,(e,n)=>{const r=new di([e]);if(Ui(n)){const e=qi(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new pi(t)}class Bi{constructor(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}static newInvalidDocument(e){return new Bi(e,0,si.min(),ji.empty(),0)}static newFoundDocument(e,t,n){return new Bi(e,1,t,n,0)}static newNoDocument(e,t){return new Bi(e,2,t,ji.empty(),0)}static newUnknownDocument(e,t){return new Bi(e,3,t,ji.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ji.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ji.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Bi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new Bi(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class zi{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.A=null}}function $i(e,t=null,n=[],r=[],i=null,s=null,o=null){return new zi(e,t,n,r,i,s,o)}function Hi(e){const t=Br(e);if(null===t.A){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>function(e){return e.field.canonicalString()+e.op.toString()+Ri(e.value)}(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Ti(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=is(t.startAt)),t.endAt&&(e+="|ub:",e+=is(t.endAt)),t.A=e}return t.A}function Gi(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<e.orderBy.length;i++)if(!os(e.orderBy[i],t.orderBy[i]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if((n=e.filters[i]).op!==(r=t.filters[i]).op||!n.field.isEqual(r.field)||!ki(n.value,r.value))return!1;var n,r;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ls(e.startAt,t.startAt)&&ls(e.endAt,t.endAt)}function Zi(e){return Ci.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Ki extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.R(e,t,n):new Wi(e,t,n):"array-contains"===t?new Xi(e,n):"in"===t?new es(e,n):"not-in"===t?new ts(e,n):"array-contains-any"===t?new ns(e,n):new Ki(e,t,n)}static R(e,t,n){return"in"===t?new Yi(e,n):new Qi(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.P(Ai(t,this.value)):null!==t&&Ii(this.value)===Ii(t)&&this.P(Ai(t,this.value))}P(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return jr()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Wi extends Ki{constructor(e,t,n){super(e,t,n),this.key=Ci.fromName(n.referenceValue)}matches(e){const t=Ci.comparator(e.key,this.key);return this.P(t)}}class Yi extends Ki{constructor(e,t){super(e,"in",t),this.keys=Ji(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Qi extends Ki{constructor(e,t){super(e,"not-in",t),this.keys=Ji(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ji(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Ci.fromName(e.referenceValue))}class Xi extends Ki{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Li(t)&&xi(t.arrayValue,this.value)}}class es extends Ki{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&xi(this.value.arrayValue,t)}}class ts extends Ki{constructor(e,t){super(e,"not-in",t)}matches(e){if(xi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!xi(this.value.arrayValue,t)}}class ns extends Ki{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Li(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>xi(this.value.arrayValue,e))}}class rs{constructor(e,t){this.position=e,this.before=t}}function is(e){return`${e.before?"b":"a"}:${e.position.map(e=>Ri(e)).join(",")}`}class ss{constructor(e,t="asc"){this.field=e,this.dir=t}}function os(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function as(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Ci.comparator(Ci.fromName(o.referenceValue),n.key):Ai(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function ls(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ki(e.position[n],t.position[n]))return!1;return!0}class cs{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.V=null,this.S=null}}function us(e,t,n,r,i,s,o,a){return new cs(e,t,n,r,i,s,o,a)}function hs(e){return new cs(e)}function ds(e){return!Ti(e.limit)&&"F"===e.limitType}function ps(e){return!Ti(e.limit)&&"L"===e.limitType}function fs(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function gs(e){for(const t of e.filters)if(t.v())return t.field;return null}function ms(e){return null!==e.collectionGroup}function ys(e){const t=Br(e);if(null===t.V){t.V=[];const e=gs(t),n=fs(t);if(null!==e&&null===n)e.isKeyField()||t.V.push(new ss(e)),t.V.push(new ss(di.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.V.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.V.push(new ss(di.keyField(),e))}}}return t.V}function _s(e){const t=Br(e);if(!t.S)if("F"===t.limitType)t.S=$i(t.path,t.collectionGroup,ys(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of ys(t))e.push(new ss(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new rs(t.endAt.position,!t.endAt.before):null,r=t.startAt?new rs(t.startAt.position,!t.startAt.before):null;t.S=$i(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t.S}function vs(e,t,n){return new cs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ws(e,t){return Gi(_s(e),_s(t))&&e.limitType===t.limitType}function bs(e){return`${Hi(_s(e))}|lt:${e.limitType}`}function Ts(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>{return`${(t=e).field.canonicalString()} ${t.op} ${Ri(t.value)}`;var t}).join(", ")}]`),Ti(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: "+is(e.startAt)),e.endAt&&(t+=", endAt: "+is(e.endAt)),`Target(${t})`}(_s(e))}; limitType=${e.limitType})`}function Ss(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ci.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!as(e.startAt,ys(e),t)||e.endAt&&as(e.endAt,ys(e),t))}(e,t)}function Es(e){return(t,n)=>{let r=!1;for(const i of ys(e)){const e=Cs(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Cs(e,t,n){const r=e.field.isKeyField()?Ci.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ai(r,i):jr()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return jr()}}function Is(e,t){if(e.D){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Si(t)?"-0":t}}function ks(e){return{integerValue:""+e}}function xs(e,t){return Ei(t)?ks(t):Is(e,t)}class As{constructor(){this._=void 0}}function Ps(e,t,n){return e instanceof Os?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Ds?Ls(e,t):e instanceof Fs?Ms(e,t):function(e,t){const n=Ns(e,t),r=Vs(n)+Vs(e.C);return Di(n)&&Di(e.C)?ks(r):Is(e.N,r)}(e,t)}function Rs(e,t,n){return e instanceof Ds?Ls(e,t):e instanceof Fs?Ms(e,t):n}function Ns(e,t){return e instanceof Us?Di(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Os extends As{}class Ds extends As{constructor(e){super(),this.elements=e}}function Ls(e,t){const n=js(t);for(const r of e.elements)n.some(e=>ki(e,r))||n.push(r);return{arrayValue:{values:n}}}class Fs extends As{constructor(e){super(),this.elements=e}}function Ms(e,t){let n=js(t);for(const r of e.elements)n=n.filter(e=>!ki(e,r));return{arrayValue:{values:n}}}class Us extends As{constructor(e,t){super(),this.N=e,this.C=t}}function Vs(e){return yi(e.integerValue||e.doubleValue)}function js(e){return Li(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class qs{constructor(e,t){this.field=e,this.transform=t}}class Bs{constructor(e,t){this.version=e,this.transformResults=t}}class zs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new zs}static exists(e){return new zs(void 0,e)}static updateTime(e){return new zs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $s(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Hs{}function Gs(e,t,n){e instanceof Qs?function(e,t,n){const r=e.value.clone(),i=eo(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Js?function(e,t,n){if(!$s(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=eo(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Xs(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Zs(e,t,n){e instanceof Qs?function(e,t,n){if(!$s(e.precondition,t))return;const r=e.value.clone(),i=to(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Ys(t),r).setHasLocalMutations()}(e,t,n):e instanceof Js?function(e,t,n){if(!$s(e.precondition,t))return;const r=to(e.fieldTransforms,n,t),i=t.data;i.setAll(Xs(e)),i.setAll(r),t.convertToFoundDocument(Ys(t),i).setHasLocalMutations()}(e,t,n):function(e,t){$s(e.precondition,t)&&t.convertToNoDocument(si.min())}(e,t)}function Ks(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Ns(r.transform,e||null);null!=i&&(null==n&&(n=ji.empty()),n.set(r.field,i))}return n||null}function Ws(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ni(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ds&&t instanceof Ds||e instanceof Fs&&t instanceof Fs?ni(e.elements,t.elements,ki):e instanceof Us&&t instanceof Us?ki(e.C,t.C):e instanceof Os&&t instanceof Os}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Ys(e){return e.isFoundDocument()?e.version:si.min()}class Qs extends Hs{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}}class Js extends Hs{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}}function Xs(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function eo(e,t,n){const r=new Map;qr(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Rs(o,a,n[i]))}return r}function to(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Ps(e,s,t))}return r}class no extends Hs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class ro extends Hs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class io{constructor(e){this.count=e}}var so,oo;function ao(e){switch(e){default:return jr();case zr.CANCELLED:case zr.UNKNOWN:case zr.DEADLINE_EXCEEDED:case zr.RESOURCE_EXHAUSTED:case zr.INTERNAL:case zr.UNAVAILABLE:case zr.UNAUTHENTICATED:return!1;case zr.INVALID_ARGUMENT:case zr.NOT_FOUND:case zr.ALREADY_EXISTS:case zr.PERMISSION_DENIED:case zr.FAILED_PRECONDITION:case zr.ABORTED:case zr.OUT_OF_RANGE:case zr.UNIMPLEMENTED:case zr.DATA_LOSS:return!0}}function lo(e){if(void 0===e)return Mr("GRPC error has no .code"),zr.UNKNOWN;switch(e){case so.OK:return zr.OK;case so.CANCELLED:return zr.CANCELLED;case so.UNKNOWN:return zr.UNKNOWN;case so.DEADLINE_EXCEEDED:return zr.DEADLINE_EXCEEDED;case so.RESOURCE_EXHAUSTED:return zr.RESOURCE_EXHAUSTED;case so.INTERNAL:return zr.INTERNAL;case so.UNAVAILABLE:return zr.UNAVAILABLE;case so.UNAUTHENTICATED:return zr.UNAUTHENTICATED;case so.INVALID_ARGUMENT:return zr.INVALID_ARGUMENT;case so.NOT_FOUND:return zr.NOT_FOUND;case so.ALREADY_EXISTS:return zr.ALREADY_EXISTS;case so.PERMISSION_DENIED:return zr.PERMISSION_DENIED;case so.FAILED_PRECONDITION:return zr.FAILED_PRECONDITION;case so.ABORTED:return zr.ABORTED;case so.OUT_OF_RANGE:return zr.OUT_OF_RANGE;case so.UNIMPLEMENTED:return zr.UNIMPLEMENTED;case so.DATA_LOSS:return zr.DATA_LOSS;default:return jr()}}(oo=so||(so={}))[oo.OK=0]="OK",oo[oo.CANCELLED=1]="CANCELLED",oo[oo.UNKNOWN=2]="UNKNOWN",oo[oo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oo[oo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oo[oo.NOT_FOUND=5]="NOT_FOUND",oo[oo.ALREADY_EXISTS=6]="ALREADY_EXISTS",oo[oo.PERMISSION_DENIED=7]="PERMISSION_DENIED",oo[oo.UNAUTHENTICATED=16]="UNAUTHENTICATED",oo[oo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oo[oo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oo[oo.ABORTED=10]="ABORTED",oo[oo.OUT_OF_RANGE=11]="OUT_OF_RANGE",oo[oo.UNIMPLEMENTED=12]="UNIMPLEMENTED",oo[oo.INTERNAL=13]="INTERNAL",oo[oo.UNAVAILABLE=14]="UNAVAILABLE",oo[oo.DATA_LOSS=15]="DATA_LOSS";class co{constructor(e,t){this.comparator=e,this.root=t||ho.EMPTY}insert(e,t){return new co(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ho.BLACK,null,null))}remove(e){return new co(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ho.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uo(this.root,e,this.comparator,!1)}getReverseIterator(){return new uo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uo(this.root,e,this.comparator,!0)}}class uo{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ho{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ho.RED,this.left=null!=r?r:ho.EMPTY,this.right=null!=i?i:ho.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new ho(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ho.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ho.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ho.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ho.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw jr();if(this.right.isRed())throw jr();const e=this.left.check();if(e!==this.right.check())throw jr();return e+(this.isRed()?0:1)}}ho.EMPTY=null,ho.RED=!0,ho.BLACK=!1,ho.EMPTY=new class{constructor(){this.size=0}get key(){throw jr()}get value(){throw jr()}get color(){throw jr()}get left(){throw jr()}get right(){throw jr()}copy(e,t,n,r,i){return this}insert(e,t,n){return new ho(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class po{constructor(e){this.comparator=e,this.data=new co(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fo(this.data.getIterator())}getIteratorFrom(e){return new fo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof po))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new po(this.comparator);return t.data=e,t}}class fo{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const go=new co(Ci.comparator);function mo(){return go}const yo=new co(Ci.comparator);function _o(){return yo}const vo=new co(Ci.comparator);function wo(){return vo}const bo=new po(Ci.comparator);function To(...e){let t=bo;for(const n of e)t=t.add(n);return t}const So=new po(ti);function Eo(){return So}class Co{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,Io.createSynthesizedTargetChangeForCurrentChange(e,t)),new Co(si.min(),n,Eo(),mo(),To())}}class Io{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Io(fi.EMPTY_BYTE_STRING,t,To(),To(),To())}}class ko{constructor(e,t,n,r){this.k=e,this.removedTargetIds=t,this.key=n,this.$=r}}class xo{constructor(e,t){this.targetId=e,this.O=t}}class Ao{constructor(e,t,n=fi.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Po{constructor(){this.F=0,this.M=Oo(),this.L=fi.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}W(){let e=To(),t=To(),n=To();return this.M.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:jr()}}),new Io(this.L,this.B,e,t,n)}G(){this.U=!1,this.M=Oo()}H(e,t){this.U=!0,this.M=this.M.insert(e,t)}J(e){this.U=!0,this.M=this.M.remove(e)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class Ro{constructor(e){this.tt=e,this.et=new Map,this.nt=mo(),this.st=No(),this.it=new po(ti)}rt(e){for(const t of e.k)e.$&&e.$.isFoundDocument()?this.ot(t,e.$):this.ct(t,e.key,e.$);for(const t of e.removedTargetIds)this.ct(t,e.key,e.$)}at(e){this.forEachTarget(e,t=>{const n=this.ut(t);switch(e.state){case 0:this.ht(t)&&n.j(e.resumeToken);break;case 1:n.X(),n.q||n.G(),n.j(e.resumeToken);break;case 2:n.X(),n.q||this.removeTarget(t);break;case 3:this.ht(t)&&(n.Z(),n.j(e.resumeToken));break;case 4:this.ht(t)&&(this.lt(t),n.j(e.resumeToken));break;default:jr()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.et.forEach((e,n)=>{this.ht(n)&&t(n)})}ft(e){const t=e.targetId,n=e.O.count,r=this.dt(t);if(r){const e=r.target;if(Zi(e))if(0===n){const n=new Ci(e.path);this.ct(t,n,Bi.newNoDocument(n,si.min()))}else qr(1===n);else this.wt(t)!==n&&(this.lt(t),this.it=this.it.add(t))}}_t(e){const t=new Map;this.et.forEach((n,r)=>{const i=this.dt(r);if(i){if(n.current&&Zi(i.target)){const t=new Ci(i.target.path);null!==this.nt.get(t)||this.gt(r,t)||this.ct(r,t,Bi.newNoDocument(t,e))}n.K&&(t.set(r,n.W()),n.G())}});let n=To();this.st.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.dt(e);return!t||2===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))});const r=new Co(e,t,this.it,this.nt,n);return this.nt=mo(),this.st=No(),this.it=new po(ti),r}ot(e,t){if(!this.ht(e))return;const n=this.gt(e,t.key)?2:0;this.ut(e).H(t.key,n),this.nt=this.nt.insert(t.key,t),this.st=this.st.insert(t.key,this.yt(t.key).add(e))}ct(e,t,n){if(!this.ht(e))return;const r=this.ut(e);this.gt(e,t)?r.H(t,1):r.J(t),this.st=this.st.insert(t,this.yt(t).delete(e)),n&&(this.nt=this.nt.insert(t,n))}removeTarget(e){this.et.delete(e)}wt(e){const t=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Y(e){this.ut(e).Y()}ut(e){let t=this.et.get(e);return t||(t=new Po,this.et.set(e,t)),t}yt(e){let t=this.st.get(e);return t||(t=new po(ti),this.st=this.st.insert(e,t)),t}ht(e){const t=null!==this.dt(e);return t||Fr("WatchChangeAggregator","Detected inactive target",e),t}dt(e){const t=this.et.get(e);return t&&t.q?null:this.tt.Tt(e)}lt(e){this.et.set(e,new Po),this.tt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}gt(e,t){return this.tt.getRemoteKeysForTarget(e).has(t)}}function No(){return new co(Ci.comparator)}function Oo(){return new co(Ci.comparator)}const Do={asc:"ASCENDING",desc:"DESCENDING"},Lo={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Fo{constructor(e,t){this.databaseId=e,this.D=t}}function Mo(e,t){return e.D?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Uo(e,t){return e.D?t.toBase64():t.toUint8Array()}function Vo(e,t){return Mo(e,t.toTimestamp())}function jo(e){return qr(!!e),si.fromTimestamp(function(e){const t=mi(e);return new ii(t.seconds,t.nanos)}(e))}function qo(e,t){return function(e){return new ui(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Bo(e){const t=ui.fromString(e);return qr(da(t)),t}function zo(e,t){return qo(e.databaseId,t.path)}function $o(e,t){const n=Bo(t);if(n.get(1)!==e.databaseId.projectId)throw new $r(zr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new $r(zr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ci(Ko(n))}function Ho(e,t){return qo(e.databaseId,t)}function Go(e){const t=Bo(e);return 4===t.length?ui.emptyPath():Ko(t)}function Zo(e){return new ui(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ko(e){return qr(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Wo(e,t,n){return{name:zo(e,t),fields:n.value.mapValue.fields}}function Yo(e,t,n){const r=$o(e,t.name),i=jo(t.updateTime),s=new ji({mapValue:{fields:t.fields}}),o=Bi.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Qo(e,t){let n;if(t instanceof Qs)n={update:Wo(e,t.key,t.value)};else if(t instanceof no)n={delete:zo(e,t.key)};else if(t instanceof Js)n={update:Wo(e,t.key,t.data),updateMask:ha(t.fieldMask)};else{if(!(t instanceof ro))return jr();n={verify:zo(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Os)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ds)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Fs)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Us)return{fieldPath:t.field.canonicalString(),increment:n.C};throw jr()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Vo(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:jr()}(e,t.precondition)),n}function Jo(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?zs.updateTime(jo(e.updateTime)):void 0!==e.exists?zs.exists(e.exists):zs.none()}(t.currentDocument):zs.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;"setToServerValue"in t?(qr("REQUEST_TIME"===t.setToServerValue),n=new Os):"appendMissingElements"in t?n=new Ds(t.appendMissingElements.values||[]):"removeAllFromArray"in t?n=new Fs(t.removeAllFromArray.values||[]):"increment"in t?n=new Us(e,t.increment):jr();const r=di.fromServerFormat(t.fieldPath);return new qs(r,n)}(e,t)):[];if(t.update){const i=$o(e,t.update.name),s=new ji({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){return new pi((e.fieldPaths||[]).map(e=>di.fromServerFormat(e)))}(t.updateMask);return new Js(i,s,e,n,r)}return new Qs(i,s,n,r)}if(t.delete){const r=$o(e,t.delete);return new no(r,n)}if(t.verify){const r=$o(e,t.verify);return new ro(r,n)}return jr()}function Xo(e,t){return{documents:[Ho(e,t.path)]}}function ea(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Ho(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Ho(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0===e.length)return;const t=e.map(e=>function(e){if("=="===e.op){if(Mi(e.value))return{unaryFilter:{field:aa(e.field),op:"IS_NAN"}};if(Fi(e.value))return{unaryFilter:{field:aa(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Mi(e.value))return{unaryFilter:{field:aa(e.field),op:"IS_NOT_NAN"}};if(Fi(e.value))return{unaryFilter:{field:aa(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:aa(e.field),op:oa(e.op),value:e.value}}}(e));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:aa(e.field),direction:sa(e.dir)}}(e))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(e,t){return e.D||Ti(t)?t:{value:t}}(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=ra(t.startAt)),t.endAt&&(n.structuredQuery.endAt=ra(t.endAt)),n}function ta(e){let t=Go(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){qr(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=na(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>function(e){return new ss(la(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Ti(t)?null:t}(n.limit));let l=null;n.startAt&&(l=ia(n.startAt));let c=null;return n.endAt&&(c=ia(n.endAt)),us(t,i,o,s,a,"F",l,c)}function na(e){return e?void 0!==e.unaryFilter?[ua(e)]:void 0!==e.fieldFilter?[ca(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(e=>na(e)).reduce((e,t)=>e.concat(t)):jr():[]}function ra(e){return{before:e.before,values:e.position}}function ia(e){return new rs(e.values||[],!!e.before)}function sa(e){return Do[e]}function oa(e){return Lo[e]}function aa(e){return{fieldPath:e.canonicalString()}}function la(e){return di.fromServerFormat(e.fieldPath)}function ca(e){return Ki.create(la(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return jr()}}(e.fieldFilter.op),e.fieldFilter.value)}function ua(e){switch(e.unaryFilter.op){case"IS_NAN":const t=la(e.unaryFilter.field);return Ki.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=la(e.unaryFilter.field);return Ki.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=la(e.unaryFilter.field);return Ki.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=la(e.unaryFilter.field);return Ki.create(i,"!=",{nullValue:"NULL_VALUE"});default:return jr()}}function ha(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function da(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function pa(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=ga(t)),t=fa(e.get(n),t);return ga(t)}function fa(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function ga(e){return e+"\x01\x01"}function ma(e){const t=e.length;if(qr(t>=2),2===t)return qr("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ui.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&jr(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:jr()}s=t+2}return new ui(r)}class ya{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class _a{constructor(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}}_a.store="owner",_a.key="owner";class va{constructor(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}}va.store="mutationQueues",va.keyPath="userId";class wa{constructor(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}}wa.store="mutations",wa.keyPath="batchId",wa.userMutationsIndex="userMutationsIndex",wa.userMutationsKeyPath=["userId","batchId"];class ba{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,pa(t)]}static key(e,t,n){return[e,pa(t),n]}}ba.store="documentMutations",ba.PLACEHOLDER=new ba;class Ta{constructor(e,t){this.path=e,this.readTime=t}}class Sa{constructor(e,t){this.path=e,this.version=t}}class Ea{constructor(e,t,n,r,i,s){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s}}Ea.store="remoteDocuments",Ea.readTimeIndex="readTimeIndex",Ea.readTimeIndexPath="readTime",Ea.collectionReadTimeIndex="collectionReadTimeIndex",Ea.collectionReadTimeIndexPath=["parentPath","readTime"];class Ca{constructor(e){this.byteSize=e}}Ca.store="remoteDocumentGlobal",Ca.key="remoteDocumentGlobalKey";class Ia{constructor(e,t,n,r,i,s,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o}}Ia.store="targets",Ia.keyPath="targetId",Ia.queryTargetsIndexName="queryTargetsIndex",Ia.queryTargetsKeyPath=["canonicalId","targetId"];class ka{constructor(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n}}ka.store="targetDocuments",ka.keyPath=["targetId","path"],ka.documentTargetsIndex="documentTargetsIndex",ka.documentTargetsKeyPath=["path","targetId"];class xa{constructor(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}}xa.key="targetGlobalKey",xa.store="targetGlobal";class Aa{constructor(e,t){this.collectionId=e,this.parent=t}}Aa.store="collectionParents",Aa.keyPath=["collectionId","parent"];class Pa{constructor(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}}Pa.store="clientMetadata",Pa.keyPath="clientId";class Ra{constructor(e,t,n){this.bundleId=e,this.createTime=t,this.version=n}}Ra.store="bundles",Ra.keyPath="bundleId";class Na{constructor(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n}}Na.store="namedQueries",Na.keyPath="name";const Oa=[va.store,wa.store,ba.store,Ea.store,Ia.store,_a.store,xa.store,ka.store,Pa.store,Ca.store,Aa.store,Ra.store,Na.store],Da="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class La{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Fa{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&jr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Fa((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Fa?t:Fa.resolve(t)}catch(e){return Fa.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Fa.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Fa.reject(t)}static resolve(e){return new Fa((t,n)=>{t(e)})}static reject(e){return new Fa((t,n)=>{n(e)})}static waitFor(e){return new Fa((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=Fa.resolve(!1);for(const n of e)t=t.next(e=>e?Fa.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}}class Ma{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.Et=new Hr,this.transaction.oncomplete=()=>{this.Et.resolve()},this.transaction.onabort=()=>{t.error?this.Et.reject(new ja(e,t.error)):this.Et.resolve()},this.transaction.onerror=t=>{const n=Ha(t.target.error);this.Et.reject(new ja(e,n))}}static open(e,t,n,r){try{return new Ma(t,e.transaction(r,n))}catch(e){throw new ja(t,e)}}get It(){return this.Et.promise}abort(e){e&&this.Et.reject(e),this.aborted||(Fr("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new Ba(t)}}class Ua{constructor(e,t,n){this.name=e,this.version=t,this.At=n,12.2===Ua.Rt((0,S.z$)())&&Mr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fr("SimpleDb","Removing database:",e),za(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!(0,S.hl)())return!1;if(Ua.Pt())return!0;const e=(0,S.z$)(),t=Ua.Rt(e),n=0<t&&t<10,r=Ua.vt(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static Pt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Vt)}static St(e,t){return e.store(t)}static Rt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static vt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}Dt(e){var t=this;return(0,v.Z)(function*(){return t.db||(Fr("SimpleDb","Opening database:",t.name),t.db=yield new Promise((n,r)=>{const i=indexedDB.open(t.name,t.version);i.onsuccess=e=>{n(e.target.result)},i.onblocked=()=>{r(new ja(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=t=>{const n=t.target.error;r("VersionError"===n.name?new $r(zr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===n.name?new $r(zr.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n):new ja(e,n))},i.onupgradeneeded=e=>{Fr("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',e.oldVersion),t.At.Ct(e.target.result,i.transaction,e.oldVersion,t.version).next(()=>{Fr("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Nt&&(t.db.onversionchange=e=>t.Nt(e)),t.db})()}xt(e){this.Nt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,n,r){var i=this;return(0,v.Z)(function*(){const s="readonly"===t;let o=0;for(;;){++o;try{i.db=yield i.Dt(e);const t=Ma.open(i.db,e,s?"readonly":"readwrite",n),o=r(t).catch(e=>(t.abort(e),Fa.reject(e))).toPromise();return o.catch(()=>{}),yield t.It,o}catch(e){const n="FirebaseError"!==e.name&&o<3;if(Fr("SimpleDb","Transaction failed with error:",e.message,"Retrying:",n),i.close(),!n)return Promise.reject(e)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Va{constructor(e){this.kt=e,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(e){this.kt=e}done(){this.$t=!0}Mt(e){this.Ot=e}delete(){return za(this.kt.delete())}}class ja extends $r{constructor(e,t){super(zr.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function qa(e){return"IndexedDbTransactionError"===e.name}class Ba{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Fr("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Fr("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),za(n)}add(e){return Fr("SimpleDb","ADD",this.store.name,e,e),za(this.store.add(e))}get(e){return za(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fr("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fr("SimpleDb","DELETE",this.store.name,e),za(this.store.delete(e))}count(){return Fr("SimpleDb","COUNT",this.store.name),za(this.store.count())}Lt(e,t){const n=this.cursor(this.options(e,t)),r=[];return this.Bt(n,(e,t)=>{r.push(t)}).next(()=>r)}Ut(e,t){Fr("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.qt=!1;const r=this.cursor(n);return this.Bt(r,(e,t,n)=>n.delete())}Kt(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.Bt(r,t)}jt(e){const t=this.cursor({});return new Fa((n,r)=>{t.onerror=e=>{const t=Ha(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}Bt(e,t){const n=[];return new Fa((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Va(i),o=t(i.primaryKey,i.value,s);if(o instanceof Fa){const e=o.catch(e=>(s.done(),Fa.reject(e)));n.push(e)}s.isDone?r():null===s.Ft?i.continue():i.continue(s.Ft)}}).next(()=>Fa.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.qt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function za(e){return new Fa((t,n)=>{e.onsuccess=e=>{t(e.target.result)},e.onerror=e=>{const t=Ha(e.target.error);n(t)}})}let $a=!1;function Ha(e){const t=Ua.Rt((0,S.z$)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new $r("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $a||($a=!0,setTimeout(()=>{throw e},0)),e}}return e}class Ga extends La{constructor(e,t){super(),this.Qt=e,this.currentSequenceNumber=t}}function Za(e,t){const n=Br(e);return Ua.St(n.Qt,t)}class Ka{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Gs(t,e,n[r])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Zs(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Zs(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const n=e.get(t.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(si.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),To())}isEqual(e){return this.batchId===e.batchId&&ni(this.mutations,e.mutations,(e,t)=>Ws(e,t))&&ni(this.baseMutations,e.baseMutations,(e,t)=>Ws(e,t))}}class Wa{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){qr(e.mutations.length===n.length);let r=wo();const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Wa(e,t,n,r)}}class Ya{constructor(e,t,n,r,i=si.min(),s=si.min(),o=fi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(e){return new Ya(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ya(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ya(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Qa{constructor(e){this.Wt=e}}function Ja(e,t){if(t.document)return Yo(e.Wt,t.document,!!t.hasCommittedMutations);if(t.noDocument){const e=Ci.fromSegments(t.noDocument.path),n=rl(t.noDocument.readTime),r=Bi.newNoDocument(e,n);return t.hasCommittedMutations?r.setHasCommittedMutations():r}if(t.unknownDocument){const e=Ci.fromSegments(t.unknownDocument.path),n=rl(t.unknownDocument.version);return Bi.newUnknownDocument(e,n)}return jr()}function Xa(e,t,n){const r=el(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){const n=function(e,t){return{name:zo(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Mo(e,t.version.toTimestamp())}}(e.Wt,t);return new Ea(null,null,n,t.hasCommittedMutations,r,i)}if(t.isNoDocument()){const e=t.key.path.toArray(),n=nl(t.version),s=t.hasCommittedMutations;return new Ea(null,new Ta(e,n),null,s,r,i)}if(t.isUnknownDocument()){const e=t.key.path.toArray(),n=nl(t.version);return new Ea(new Sa(e,n),null,null,!0,r,i)}return jr()}function el(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function tl(e){const t=new ii(e[0],e[1]);return si.fromTimestamp(t)}function nl(e){const t=e.toTimestamp();return new ya(t.seconds,t.nanoseconds)}function rl(e){const t=new ii(e.seconds,e.nanoseconds);return si.fromTimestamp(t)}function il(e,t){const n=(t.baseMutations||[]).map(t=>Jo(e.Wt,t));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(e.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const r=t.mutations.map(t=>Jo(e.Wt,t)),i=ii.fromMillis(t.localWriteTimeMs);return new Ka(t.batchId,i,n,r)}function sl(e){const t=rl(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?rl(e.lastLimboFreeSnapshotVersion):si.min();let r;var i;return void 0!==e.query.documents?(qr(1===(i=e.query).documents.length),r=_s(hs(Go(i.documents[0])))):r=function(e){return _s(ta(e))}(e.query),new Ya(r,e.targetId,0,e.lastListenSequenceNumber,t,n,fi.fromBase64String(e.resumeToken))}function ol(e,t){const n=nl(t.snapshotVersion),r=nl(t.lastLimboFreeSnapshotVersion);let i;i=Zi(t.target)?Xo(e.Wt,t.target):ea(e.Wt,t.target);const s=t.resumeToken.toBase64();return new Ia(t.targetId,Hi(t.target),n,s,t.sequenceNumber,r,i)}function al(e){const t=ta({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?vs(t,t.limit,"L"):t}class ll{getBundleMetadata(e,t){return cl(e).get(t).next(e=>{if(e)return{id:(t=e).bundleId,createTime:rl(t.createTime),version:t.version};var t})}saveBundleMetadata(e,t){return cl(e).put({bundleId:(n=t).id,createTime:nl(jo(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return ul(e).get(t).next(e=>{if(e)return{name:(t=e).name,query:al(t.bundledQuery),readTime:rl(t.readTime)};var t})}saveNamedQuery(e,t){return ul(e).put(function(e){return{name:e.name,readTime:nl(jo(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function cl(e){return Za(e,Ra.store)}function ul(e){return Za(e,Na.store)}class hl{constructor(){this.Gt=new dl}addToCollectionParentIndex(e,t){return this.Gt.add(t),Fa.resolve()}getCollectionParents(e,t){return Fa.resolve(this.Gt.getEntries(t))}}class dl{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new po(ui.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new po(ui.comparator)).toArray()}}class pl{constructor(){this.zt=new dl}addToCollectionParentIndex(e,t){if(!this.zt.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.zt.add(t)});const i={collectionId:n,parent:pa(r)};return fl(e).put(i)}return Fa.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[ri(t),""],!1,!0);return fl(e).Lt(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(ma(r.parent))}return n})}}function fl(e){return Za(e,Aa.store)}const gl={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ml{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new ml(e,ml.DEFAULT_COLLECTION_PERCENTILE,ml.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function yl(e,t,n){const r=e.store(wa.store),i=e.store(ba.store),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Kt({range:o},(e,t,n)=>(a++,n.delete()));s.push(l.next(()=>{qr(1===a)}));const c=[];for(const u of n.mutations){const e=ba.key(t,u.key.path,n.batchId);s.push(i.delete(e)),c.push(u.key)}return Fa.waitFor(s).next(()=>c)}function _l(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw jr();t=e.noDocument}return JSON.stringify(t).length}ml.DEFAULT_COLLECTION_PERCENTILE=10,ml.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ml.DEFAULT=new ml(41943040,ml.DEFAULT_COLLECTION_PERCENTILE,ml.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ml.DISABLED=new ml(-1,0,0);class vl{constructor(e,t,n,r){this.userId=e,this.N=t,this.Ht=n,this.referenceDelegate=r,this.Jt={}}static Yt(e,t,n,r){qr(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new vl(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return bl(e).Kt({index:wa.userMutationsIndex,range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const i=Tl(e),s=bl(e);return s.add({}).next(o=>{qr("number"==typeof o);const a=new Ka(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map(t=>Qo(e.Wt,t)),i=n.mutations.map(t=>Qo(e.Wt,t));return new wa(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(this.N,this.userId,a),c=[];let u=new po((e,t)=>ti(e.canonicalString(),t.canonicalString()));for(const e of r){const t=ba.key(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,ba.PLACEHOLDER))}return u.forEach(t=>{c.push(this.Ht.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Jt[o]=a.keys()}),Fa.waitFor(c).next(()=>a)})}lookupMutationBatch(e,t){return bl(e).get(t).next(e=>e?(qr(e.userId===this.userId),il(this.N,e)):null)}Xt(e,t){return this.Jt[t]?Fa.resolve(this.Jt[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.Jt[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return bl(e).Kt({index:wa.userMutationsIndex,range:r},(e,t,r)=>{t.userId===this.userId&&(qr(t.batchId>=n),i=il(this.N,t)),r.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return bl(e).Kt({index:wa.userMutationsIndex,range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return bl(e).Lt(wa.userMutationsIndex,t).next(e=>e.map(e=>il(this.N,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=ba.prefixForPath(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Tl(e).Kt({range:r},(n,r,s)=>{const[o,a,l]=n,c=ma(a);if(o===this.userId&&t.path.isEqual(c))return bl(e).get(l).next(e=>{if(!e)throw jr();qr(e.userId===this.userId),i.push(il(this.N,e))});s.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new po(ti);const r=[];return t.forEach(t=>{const i=ba.prefixForPath(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=Tl(e).Kt({range:s},(e,r,i)=>{const[s,o,a]=e,l=ma(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()});r.push(o)}),Fa.waitFor(r).next(()=>this.Zt(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=ba.prefixForPath(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new po(ti);return Tl(e).Kt({range:s},(e,t,i)=>{const[s,a,l]=e,c=ma(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(l)):i.done()}).next(()=>this.Zt(e,o))}Zt(e,t){const n=[],r=[];return t.forEach(t=>{r.push(bl(e).get(t).next(e=>{if(null===e)throw jr();qr(e.userId===this.userId),n.push(il(this.N,e))}))}),Fa.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return yl(e.Qt,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.te(t.batchId)}),Fa.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}te(e){delete this.Jt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Fa.resolve();const n=IDBKeyRange.lowerBound(ba.prefixForUser(this.userId)),r=[];return Tl(e).Kt({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=ma(e[1]);r.push(t)}else n.done()}).next(()=>{qr(0===r.length)})})}containsKey(e,t){return wl(e,this.userId,t)}ee(e){return Sl(e).get(this.userId).next(e=>e||new va(this.userId,-1,""))}}function wl(e,t,n){const r=ba.prefixForPath(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Tl(e).Kt({range:s,qt:!0},(e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()}).next(()=>o)}function bl(e){return Za(e,wa.store)}function Tl(e){return Za(e,ba.store)}function Sl(e){return Za(e,va.store)}class El{constructor(e){this.ne=e}next(){return this.ne+=2,this.ne}static se(){return new El(0)}static ie(){return new El(-1)}}class Cl{constructor(e,t){this.referenceDelegate=e,this.N=t}allocateTargetId(e){return this.re(e).next(t=>{const n=new El(t.highestTargetId);return t.highestTargetId=n.next(),this.oe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.re(e).next(e=>si.fromTimestamp(new ii(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.re(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.re(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.oe(e,r)))}addTargetData(e,t){return this.ce(e,t).next(()=>this.re(e).next(n=>(n.targetCount+=1,this.ae(t,n),this.oe(e,n))))}updateTargetData(e,t){return this.ce(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Il(e).delete(t.targetId)).next(()=>this.re(e)).next(t=>(qr(t.targetCount>0),t.targetCount-=1,this.oe(e,t)))}removeTargets(e,t,n){let r=0;const i=[];return Il(e).Kt((s,o)=>{const a=sl(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))}).next(()=>Fa.waitFor(i)).next(()=>r)}forEachTarget(e,t){return Il(e).Kt((e,n)=>{const r=sl(n);t(r)})}re(e){return kl(e).get(xa.key).next(e=>(qr(null!==e),e))}oe(e,t){return kl(e).put(xa.key,t)}ce(e,t){return Il(e).put(ol(this.N,t))}ae(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.re(e).next(e=>e.targetCount)}getTargetData(e,t){const n=Hi(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Il(e).Kt({range:r,index:Ia.queryTargetsIndexName},(e,n,r)=>{const s=sl(n);Gi(t,s.target)&&(i=s,r.done())}).next(()=>i)}addMatchingKeys(e,t,n){const r=[],i=xl(e);return t.forEach(t=>{const s=pa(t.path);r.push(i.put(new ka(n,s))),r.push(this.referenceDelegate.addReference(e,n,t))}),Fa.waitFor(r)}removeMatchingKeys(e,t,n){const r=xl(e);return Fa.forEach(t,t=>{const i=pa(t.path);return Fa.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=xl(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=xl(e);let i=To();return r.Kt({range:n,qt:!0},(e,t,n)=>{const r=ma(e[1]),s=new Ci(r);i=i.add(s)}).next(()=>i)}containsKey(e,t){const n=pa(t.path),r=IDBKeyRange.bound([n],[ri(n)],!1,!0);let i=0;return xl(e).Kt({index:ka.documentTargetsIndex,qt:!0,range:r},([e,t],n,r)=>{0!==e&&(i++,r.done())}).next(()=>i>0)}Tt(e,t){return Il(e).get(t).next(e=>e?sl(e):null)}}function Il(e){return Za(e,Ia.store)}function kl(e){return Za(e,xa.store)}function xl(e){return Za(e,ka.store)}function Al(e){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,v.Z)(function*(e){if(e.code!==zr.FAILED_PRECONDITION||e.message!==Da)throw e;Fr("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function Rl([e,t],[n,r]){const i=ti(e,n);return 0===i?ti(t,r):i}class Nl{constructor(e){this.ue=e,this.buffer=new po(Rl),this.he=0}le(){return++this.he}fe(e){const t=[e,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Rl(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ol{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.de=!1,this.we=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(e)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(e){var t=this;const n=this.de?3e5:6e4;Fr("LruGarbageCollector",`Garbage collection scheduled in ${n}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(0,v.Z)(function*(){t.we=null,t.de=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(e){qa(e)?Fr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):yield Al(e)}yield t._e(e)}))}}class Dl{constructor(e,t){this.me=e,this.params=t}calculateTargetCount(e,t){return this.me.ge(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Fa.resolve(Jr.T);const n=new Nl(t);return this.me.forEachTarget(e,e=>n.fe(e.sequenceNumber)).next(()=>this.me.ye(e,e=>n.fe(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.me.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.me.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fr("LruGarbageCollector","Garbage collection skipped; disabled"),Fa.resolve(gl)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Fr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gl):this.pe(e,t))}getCacheSize(e){return this.me.getCacheSize(e)}pe(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Fr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),Lr()<=T.in.DEBUG&&Fr("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-c}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(l-a)+"ms\n"+`Total Duration: ${l-c}ms`),Fa.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}class Ll{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new Dl(e,t)}(this,t)}ge(e){const t=this.Te(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}Te(e){let t=0;return this.ye(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ye(e,t){return this.Ee(e,(e,n)=>t(n))}addReference(e,t,n){return Fl(e,n)}removeReference(e,t,n){return Fl(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Fl(e,t)}Ie(e,t){return function(e,t){let n=!1;return Sl(e).jt(r=>wl(e,r,t).next(e=>(e&&(n=!0),Fa.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Ee(e,(s,o)=>{if(o<=t){const t=this.Ie(e,s).next(t=>{if(!t)return i++,n.getEntry(e,s).next(()=>(n.removeEntry(s),xl(e).delete([0,pa(s.path)])))});r.push(t)}}).next(()=>Fa.waitFor(r)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Fl(e,t)}Ee(e,t){const n=xl(e);let r,i=Jr.T;return n.Kt({index:ka.documentTargetsIndex},([e,n],{path:s,sequenceNumber:o})=>{0===e?(i!==Jr.T&&t(new Ci(ma(r)),i),i=o,r=s):i=Jr.T}).next(()=>{i!==Jr.T&&t(new Ci(ma(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Fl(e,t){return xl(e).put(function(e,t){return new ka(0,pa(e.path),t)}(t,e.currentSequenceNumber))}class Ml{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}forEach(e){ai(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return li(this.inner)}}class Ul{constructor(){this.changes=new Ml(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:si.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:Bi.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Fa.resolve(n.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Vl{constructor(e,t){this.N=e,this.Ht=t}addEntry(e,t,n){return Bl(e).put(zl(t),n)}removeEntry(e,t){const n=Bl(e),r=zl(t);return n.delete(r)}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.Ae(e,n)))}getEntry(e,t){return Bl(e).get(zl(t)).next(e=>this.Re(t,e))}be(e,t){return Bl(e).get(zl(t)).next(e=>({document:this.Re(t,e),size:_l(e)}))}getEntries(e,t){let n=mo();return this.Pe(e,t,(e,t)=>{const r=this.Re(e,t);n=n.insert(e,r)}).next(()=>n)}ve(e,t){let n=mo(),r=new co(Ci.comparator);return this.Pe(e,t,(e,t)=>{const i=this.Re(e,t);n=n.insert(e,i),r=r.insert(e,_l(t))}).next(()=>({documents:n,Ve:r}))}Pe(e,t,n){if(t.isEmpty())return Fa.resolve();const r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator();let s=i.getNext();return Bl(e).Kt({range:r},(e,t,r)=>{const o=Ci.fromSegments(e);for(;s&&Ci.comparator(s,o)<0;)n(s,null),s=i.getNext();s&&s.isEqual(o)&&(n(s,t),s=i.hasNext()?i.getNext():null),s?r.Mt(s.path.toArray()):r.done()}).next(()=>{for(;s;)n(s,null),s=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,t,n){let r=mo();const i=t.path.length+1,s={};if(n.isEqual(si.min())){const e=t.path.toArray();s.range=IDBKeyRange.lowerBound(e)}else{const e=t.path.toArray(),r=el(n);s.range=IDBKeyRange.lowerBound([e,r],!0),s.index=Ea.collectionReadTimeIndex}return Bl(e).Kt(s,(e,n,s)=>{if(e.length!==i)return;const o=Ja(this.N,n);t.path.isPrefixOf(o.key.path)?Ss(t,o)&&(r=r.insert(o.key,o)):s.done()}).next(()=>r)}newChangeBuffer(e){return new jl(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return ql(e).get(Ca.key).next(e=>(qr(!!e),e))}Ae(e,t){return ql(e).put(Ca.key,t)}Re(e,t){if(t){const e=Ja(this.N,t);if(!e.isNoDocument()||!e.version.isEqual(si.min()))return e}return Bi.newInvalidDocument(e)}}class jl extends Ul{constructor(e,t){super(),this.Se=e,this.trackRemovals=t,this.De=new Ml(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new po((e,t)=>ti(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,s)=>{const o=this.De.get(i);if(s.document.isValidDocument()){const a=Xa(this.Se.N,s.document,this.getReadTime(i));r=r.add(i.path.popLast());const l=_l(a);n+=l-o,t.push(this.Se.addEntry(e,i,a))}else if(n-=o,this.trackRemovals){const n=Xa(this.Se.N,Bi.newNoDocument(i,si.min()),this.getReadTime(i));t.push(this.Se.addEntry(e,i,n))}else t.push(this.Se.removeEntry(e,i))}),r.forEach(n=>{t.push(this.Se.Ht.addToCollectionParentIndex(e,n))}),t.push(this.Se.updateMetadata(e,n)),Fa.waitFor(t)}getFromCache(e,t){return this.Se.be(e,t).next(e=>(this.De.set(t,e.size),e.document))}getAllFromCache(e,t){return this.Se.ve(e,t).next(({documents:e,Ve:t})=>(t.forEach((e,t)=>{this.De.set(e,t)}),e))}}function ql(e){return Za(e,Ca.store)}function Bl(e){return Za(e,Ea.store)}function zl(e){return e.path.toArray()}class $l{constructor(e){this.N=e}Ct(e,t,n,r){qr(n<r&&n>=0&&r<=11);const i=new Ma("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(_a.store)}(e),function(e){e.createObjectStore(va.store,{keyPath:va.keyPath}),e.createObjectStore(wa.store,{keyPath:wa.keyPath,autoIncrement:!0}).createIndex(wa.userMutationsIndex,wa.userMutationsKeyPath,{unique:!0}),e.createObjectStore(ba.store)}(e),Hl(e),function(e){e.createObjectStore(Ea.store)}(e));let s=Fa.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(ka.store),e.deleteObjectStore(Ia.store),e.deleteObjectStore(xa.store)}(e),Hl(e)),s=s.next(()=>function(e){const t=e.store(xa.store),n=new xa(0,0,si.min().toTimestamp(),0);return t.put(xa.key,n)}(i))),n<4&&r>=4&&(0!==n&&(s=s.next(()=>function(e,t){return t.store(wa.store).Lt().next(n=>{e.deleteObjectStore(wa.store),e.createObjectStore(wa.store,{keyPath:wa.keyPath,autoIncrement:!0}).createIndex(wa.userMutationsIndex,wa.userMutationsKeyPath,{unique:!0});const r=t.store(wa.store),i=n.map(e=>r.put(e));return Fa.waitFor(i)})}(e,i))),s=s.next(()=>{!function(e){e.createObjectStore(Pa.store,{keyPath:Pa.keyPath})}(e)})),n<5&&r>=5&&(s=s.next(()=>this.Ce(i))),n<6&&r>=6&&(s=s.next(()=>(function(e){e.createObjectStore(Ca.store)}(e),this.Ne(i)))),n<7&&r>=7&&(s=s.next(()=>this.xe(i))),n<8&&r>=8&&(s=s.next(()=>this.ke(e,i))),n<9&&r>=9&&(s=s.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){const t=e.objectStore(Ea.store);t.createIndex(Ea.readTimeIndex,Ea.readTimeIndexPath,{unique:!1}),t.createIndex(Ea.collectionReadTimeIndex,Ea.collectionReadTimeIndexPath,{unique:!1})}(t)})),n<10&&r>=10&&(s=s.next(()=>this.$e(i))),n<11&&r>=11&&(s=s.next(()=>{!function(e){e.createObjectStore(Ra.store,{keyPath:Ra.keyPath})}(e),function(e){e.createObjectStore(Na.store,{keyPath:Na.keyPath})}(e)})),s}Ne(e){let t=0;return e.store(Ea.store).Kt((e,n)=>{t+=_l(n)}).next(()=>{const n=new Ca(t);return e.store(Ca.store).put(Ca.key,n)})}Ce(e){const t=e.store(va.store),n=e.store(wa.store);return t.Lt().next(t=>Fa.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.Lt(wa.userMutationsIndex,r).next(n=>Fa.forEach(n,n=>{qr(n.userId===t.userId);const r=il(this.N,n);return yl(e,t.userId,r).next(()=>{})}))}))}xe(e){const t=e.store(ka.store),n=e.store(Ea.store);return e.store(xa.store).get(xa.key).next(e=>{const r=[];return n.Kt((n,i)=>{const s=new ui(n),o=function(e){return[0,pa(e)]}(s);r.push(t.get(o).next(n=>n?Fa.resolve():(n=>t.put(new ka(0,pa(n),e.highestListenSequenceNumber)))(s)))}).next(()=>Fa.waitFor(r))})}ke(e,t){e.createObjectStore(Aa.store,{keyPath:Aa.keyPath});const n=t.store(Aa.store),r=new dl,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:pa(r)})}};return t.store(Ea.store).Kt({qt:!0},(e,t)=>{const n=new ui(e);return i(n.popLast())}).next(()=>t.store(ba.store).Kt({qt:!0},([e,t,n],r)=>{const s=ma(t);return i(s.popLast())}))}$e(e){const t=e.store(Ia.store);return t.Kt((e,n)=>{const r=sl(n),i=ol(this.N,r);return t.put(i)})}}function Hl(e){e.createObjectStore(ka.store,{keyPath:ka.keyPath}).createIndex(ka.documentTargetsIndex,ka.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Ia.store,{keyPath:Ia.keyPath}).createIndex(Ia.queryTargetsIndexName,Ia.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(xa.store)}const Gl="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Zl{constructor(e,t,n,r,i,s,o,a,l,c){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Oe=i,this.window=s,this.document=o,this.Fe=l,this.Me=c,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=e=>Promise.resolve(),!Zl.bt())throw new $r(zr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ll(this,r),this.We=t+"main",this.N=new Qa(a),this.Ge=new Ua(this.We,11,new $l(this.N)),this.ze=new Cl(this.referenceDelegate,this.N),this.Ht=new pl,this.He=function(e,t){return new Vl(e,t)}(this.N,this.Ht),this.Je=new ll,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===c&&Mr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new $r(zr.FAILED_PRECONDITION,Gl);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ze.getHighestSequenceNumber(e))}).then(e=>{this.Le=new Jr(e,this.Fe)}).then(()=>{this.Be=!0}).catch(e=>(this.Ge&&this.Ge.close(),Promise.reject(e)))}nn(e){var t=this;return this.Qe=function(){var n=(0,v.Z)(function*(n){if(t.started)return e(n)});return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ge.xt(function(){var t=(0,v.Z)(function*(t){null===t.newVersion&&(yield e())});return function(e){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,v.Z)(function*(){t.started&&(yield t.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Wl(e).put(new Pa(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(e).next(e=>{e||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(e)).next(t=>this.isPrimary&&!t?this.on(e).next(()=>!1):!!t&&this.cn(e).next(()=>!0))).catch(e=>{if(qa(e))return Fr("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.Qe(e)),this.isPrimary=e})}sn(e){return Kl(e).get(_a.key).next(e=>Fa.resolve(this.an(e)))}un(e){return Wl(e).delete(this.clientId)}hn(){var e=this;return(0,v.Z)(function*(){if(e.isPrimary&&!e.ln(e.je,18e5)){e.je=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const n=Za(t,Pa.store);return n.Lt().next(t=>{const r=e.fn(t,18e5),i=t.filter(e=>-1===r.indexOf(e));return Fa.forEach(i,e=>n.delete(e.clientId)).next(()=>i)})}).catch(()=>[]);if(e.Ye)for(const n of t)e.Ye.removeItem(e.dn(n.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}an(e){return!!e&&e.ownerId===this.clientId}rn(e){return this.Me?Fa.resolve(!0):Kl(e).get(_a.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)){if(this.an(t)&&this.networkEnabled)return!0;if(!this.an(t)){if(!t.allowTabSynchronization)throw new $r(zr.FAILED_PRECONDITION,Gl);return!1}}return!(!this.networkEnabled||!this.inForeground)||Wl(e).Lt().next(e=>void 0===this.fn(e,5e3).find(e=>{if(this.clientId!==e.clientId){const t=!this.inForeground&&e.inForeground,n=this.networkEnabled===e.networkEnabled;if(!this.networkEnabled&&e.networkEnabled||t&&n)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&Fr("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var e=this;return(0,v.Z)(function*(){e.Be=!1,e._n(),e.Ke&&(e.Ke.cancel(),e.Ke=null),e.mn(),e.gn(),yield e.Ge.runTransaction("shutdown","readwrite",[_a.store,Pa.store],t=>{const n=new Ga(t,Jr.T);return e.on(n).next(()=>e.un(n))}),e.Ge.close(),e.yn()})()}fn(e,t){return e.filter(e=>this.ln(e.updateTimeMs,t)&&!this.wn(e.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",e=>Wl(e).Lt().next(e=>this.fn(e,18e5).map(e=>e.clientId)))}get started(){return this.Be}getMutationQueue(e){return vl.Yt(e,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(e,t,n){let r;return Fr("IndexedDbPersistence","Starting transaction:",e),this.Ge.runTransaction(e,"readonly"===t?"readonly":"readwrite",Oa,i=>(r=new Ga(i,this.Le?this.Le.next():Jr.T),"readwrite-primary"===t?this.sn(r).next(e=>!!e||this.rn(r)).next(t=>{if(!t)throw Mr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new $r(zr.FAILED_PRECONDITION,Da);return n(r)}).next(e=>this.cn(r).next(()=>e)):this.Tn(r).next(()=>n(r)))).then(e=>(r.raiseOnCommittedEvent(),e))}Tn(e){return Kl(e).get(_a.key).next(e=>{if(null!==e&&this.ln(e.leaseTimestampMs,5e3)&&!this.wn(e.ownerId)&&!this.an(e)&&!(this.Me||this.allowTabSynchronization&&e.allowTabSynchronization))throw new $r(zr.FAILED_PRECONDITION,Gl)})}cn(e){const t=new _a(this.clientId,this.allowTabSynchronization,Date.now());return Kl(e).put(_a.key,t)}static bt(){return Ua.bt()}on(e){const t=Kl(e);return t.get(_a.key).next(e=>this.an(e)?(Fr("IndexedDbPersistence","Releasing primary lease."),t.delete(_a.key)):Fa.resolve())}ln(e,t){const n=Date.now();return!(e<n-t||e>n&&(Mr(`Detected an update time that is in the future: ${e} > ${n}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=()=>{this._n(),(0,S.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(e){var t;try{const n=null!==(null===(t=this.Ye)||void 0===t?void 0:t.getItem(this.dn(e)));return Fr("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return Mr("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(M){Mr("Failed to set zombie client id.",M)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(M){}}dn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Kl(e){return Za(e,_a.store)}function Wl(e){return Za(e,Pa.store)}function Yl(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Ql{constructor(e,t){this.progress=e,this.En=t}}class Jl{constructor(e,t,n){this.He=e,this.In=t,this.Ht=n}An(e,t){return this.In.getAllMutationBatchesAffectingDocumentKey(e,t).next(n=>this.Rn(e,t,n))}Rn(e,t,n){return this.He.getEntry(e,t).next(e=>{for(const t of n)t.applyToLocalView(e);return e})}bn(e,t){e.forEach((e,n)=>{for(const r of t)r.applyToLocalView(n)})}Pn(e,t){return this.He.getEntries(e,t).next(t=>this.vn(e,t).next(()=>t))}vn(e,t){return this.In.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>this.bn(t,e))}getDocumentsMatchingQuery(e,t,n){return function(e){return Ci.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Vn(e,t.path):ms(t)?this.Sn(e,t,n):this.Dn(e,t,n)}Vn(e,t){return this.An(e,new Ci(t)).next(e=>{let t=_o();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}Sn(e,t,n){const r=t.collectionGroup;let i=_o();return this.Ht.getCollectionParents(e,r).next(s=>Fa.forEach(s,s=>{const o=function(e,t){return new cs(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.Dn(e,o,n).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}Dn(e,t,n){let r,i;return this.He.getDocumentsMatchingQuery(e,t,n).next(n=>(r=n,this.In.getAllMutationBatchesAffectingQuery(e,t))).next(t=>(i=t,this.Cn(e,i,r).next(e=>{r=e;for(const t of i)for(const e of t.mutations){const n=e.key;let i=r.get(n);null==i&&(i=Bi.newInvalidDocument(n),r=r.insert(n,i)),Zs(e,i,t.localWriteTime),i.isFoundDocument()||(r=r.remove(n))}}))).next(()=>(r.forEach((e,n)=>{Ss(t,n)||(r=r.remove(e))}),r))}Cn(e,t,n){let r=To();for(const s of t)for(const e of s.mutations)e instanceof Js&&null===n.get(e.key)&&(r=r.add(e.key));let i=n;return this.He.getEntries(e,r).next(e=>(e.forEach((e,t)=>{t.isFoundDocument()&&(i=i.insert(e,t))}),i))}}class Xl{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Nn=n,this.xn=r}static kn(e,t){let n=To(),r=To();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Xl(e,t.fromCache,n,r)}}class ec{$n(e){this.On=e}getDocumentsMatchingQuery(e,t,n,r){return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(si.min())?this.Fn(e,t):this.On.Pn(e,r).next(i=>{const s=this.Mn(t,i);return(ds(t)||ps(t))&&this.Ln(t.limitType,s,r,n)?this.Fn(e,t):(Lr()<=T.in.DEBUG&&Fr("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ts(t)),this.On.getDocumentsMatchingQuery(e,t,n).next(e=>(s.forEach(t=>{e=e.insert(t.key,t)}),e)))})}Mn(e,t){let n=new po(Es(e));return t.forEach((t,r)=>{Ss(e,r)&&(n=n.add(r))}),n}Ln(e,t,n,r){if(n.size!==t.size)return!0;const i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Fn(e,t){return Lr()<=T.in.DEBUG&&Fr("QueryEngine","Using full collection scan to execute query:",Ts(t)),this.On.getDocumentsMatchingQuery(e,t,si.min())}}class tc{constructor(e,t,n,r){this.persistence=e,this.Bn=t,this.N=r,this.Un=new co(ti),this.qn=new Ml(e=>Hi(e),Gi),this.Kn=si.min(),this.In=e.getMutationQueue(n),this.jn=e.getRemoteDocumentCache(),this.ze=e.getTargetCache(),this.Qn=new Jl(this.jn,this.In,this.persistence.getIndexManager()),this.Je=e.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Un))}}function nc(e,t,n,r){return new tc(e,t,n,r)}function rc(e,t){return ic.apply(this,arguments)}function ic(){return(ic=(0,v.Z)(function*(e,t){const n=Br(e);let r=n.In,i=n.Qn;const s=yield n.persistence.runTransaction("Handle user change","readonly",e=>{let s;return n.In.getAllMutationBatches(e).next(o=>(s=o,r=n.persistence.getMutationQueue(t),i=new Jl(n.jn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e))).next(t=>{const n=[],r=[];let o=To();for(const e of s){n.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return i.Pn(e,o).next(e=>({Wn:e,removedBatchIds:n,addedBatchIds:r}))})});return n.In=r,n.Qn=i,n.Bn.$n(n.Qn),s})).apply(this,arguments)}function sc(e,t){const n=Br(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.jn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Fa.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);qr(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))})}),o.next(()=>e.In.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.In.performConsistencyCheck(e)).next(()=>n.Qn.Pn(e,r))})}function oc(e){const t=Br(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.ze.getLastRemoteSnapshotVersion(e))}function ac(e,t){const n=Br(e),r=t.snapshotVersion;let i=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.jn.newChangeBuffer({trackRemovals:!0});i=n.Un;const o=[];t.targetChanges.forEach((t,s)=>{const a=i.get(s);if(!a)return;o.push(n.ze.removeMatchingKeys(e,t.removedDocuments,s).next(()=>n.ze.addMatchingKeys(e,t.addedDocuments,s)));const l=t.resumeToken;if(l.approximateByteSize()>0){const c=a.withResumeToken(l,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(s,c),function(e,t,n){return qr(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,t)&&o.push(n.ze.updateTargetData(e,c))}});let a=mo();if(t.documentUpdates.forEach((r,i)=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(lc(e,s,t.documentUpdates,r,void 0).next(e=>{a=e})),!r.isEqual(si.min())){const t=n.ze.getLastRemoteSnapshotVersion(e).next(t=>n.ze.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return Fa.waitFor(o).next(()=>s.apply(e)).next(()=>n.Qn.vn(e,a)).next(()=>a)}).then(e=>(n.Un=i,e))}function lc(e,t,n,r,i){let s=To();return n.forEach(e=>s=s.add(e)),t.getEntries(e,s).next(e=>{let s=mo();return n.forEach((n,o)=>{const a=e.get(n),l=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(si.min())?(t.removeEntry(n,l),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o,l),s=s.insert(n,o)):Fr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),s})}function cc(e,t){const n=Br(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.In.getNextMutationBatchAfterBatchId(e,t)))}function uc(e,t){const n=Br(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.ze.getTargetData(e,t).next(i=>i?(r=i,Fa.resolve(r)):n.ze.allocateTargetId(e).next(i=>(r=new Ya(t,i,0,e.currentSequenceNumber),n.ze.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Un.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Un=n.Un.insert(e.targetId,e),n.qn.set(t,e.targetId)),e})}function hc(e,t,n){return dc.apply(this,arguments)}function dc(){return(dc=(0,v.Z)(function*(e,t,n){const r=Br(e),i=r.Un.get(t),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!qa(e))throw e;Fr("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.Un=r.Un.remove(t),r.qn.delete(i.target)})).apply(this,arguments)}function pc(e,t,n){const r=Br(e);let i=si.min(),s=To();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=Br(e),i=r.qn.get(n);return void 0!==i?Fa.resolve(r.Un.get(i)):r.ze.getTargetData(t,n)}(r,e,_s(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Bn.getDocumentsMatchingQuery(e,t,n?i:si.min(),n?s:To())).next(e=>({documents:e,Gn:s})))}function fc(e,t){const n=Br(e),r=Br(n.ze),i=n.Un.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",e=>r.Tt(e,t).next(e=>e?e.target:null))}function gc(e){const t=Br(e);return t.persistence.runTransaction("Get new document changes","readonly",e=>function(e,t,n){const r=Br(e);let i=mo(),s=el(n);const o=Bl(t),a=IDBKeyRange.lowerBound(s,!0);return o.Kt({index:Ea.readTimeIndex,range:a},(e,t)=>{const n=Ja(r.N,t);i=i.insert(n.key,n),s=t.readTime}).next(()=>({En:i,readTime:tl(s)}))}(t.jn,e,t.Kn)).then(({En:e,readTime:n})=>(t.Kn=n,e))}function mc(){return(mc=(0,v.Z)(function*(e){const t=Br(e);return t.persistence.runTransaction("Synchronize last document change read time","readonly",e=>function(e){const t=Bl(e);let n=si.min();return t.Kt({index:Ea.readTimeIndex,reverse:!0},(e,t,r)=>{t.readTime&&(n=tl(t.readTime)),r.done()}).next(()=>n)}(e)).then(e=>{t.Kn=e})})).apply(this,arguments)}function yc(){return(yc=(0,v.Z)(function*(e,t,n,r){const i=Br(e);let s=To(),o=mo(),a=wo();for(const u of n){const e=t.zn(u.metadata.name);u.document&&(s=s.add(e)),o=o.insert(e,t.Hn(u)),a=a.insert(e,t.Jn(u.metadata.readTime))}const l=i.jn.newChangeBuffer({trackRemovals:!0}),c=yield uc(i,function(e){return _s(hs(ui.fromString(`__bundle__/docs/${e}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",e=>lc(e,l,o,si.min(),a).next(t=>(l.apply(e),t)).next(t=>i.ze.removeMatchingKeysForTargetId(e,c.targetId).next(()=>i.ze.addMatchingKeys(e,s,c.targetId)).next(()=>i.Qn.vn(e,t)).next(()=>t)))})).apply(this,arguments)}function _c(e,t){return vc.apply(this,arguments)}function vc(){return(vc=(0,v.Z)(function*(e,t,n=To()){const r=yield uc(e,_s(al(t.bundledQuery))),i=Br(e);return i.persistence.runTransaction("Save named query","readwrite",e=>{const s=jo(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Je.saveNamedQuery(e,t);const o=r.withResumeToken(fi.EMPTY_BYTE_STRING,s);return i.Un=i.Un.insert(o.targetId,o),i.ze.updateTargetData(e,o).next(()=>i.ze.removeMatchingKeysForTargetId(e,r.targetId)).next(()=>i.ze.addMatchingKeys(e,n,r.targetId)).next(()=>i.Je.saveNamedQuery(e,t))})})).apply(this,arguments)}class wc{constructor(e){this.N=e,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return Fa.resolve(this.Yn.get(t))}saveBundleMetadata(e,t){var n;return this.Yn.set(t.id,{id:(n=t).id,version:n.version,createTime:jo(n.createTime)}),Fa.resolve()}getNamedQuery(e,t){return Fa.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,function(e){return{name:e.name,query:al(e.bundledQuery),readTime:jo(e.readTime)}}(t)),Fa.resolve()}}class bc{constructor(){this.Zn=new po(Tc.ts),this.es=new po(Tc.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const n=new Tc(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}ss(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.rs(new Tc(e,t))}os(e,t){e.forEach(e=>this.removeReference(e,t))}cs(e){const t=new Ci(new ui([])),n=new Tc(t,e),r=new Tc(t,e+1),i=[];return this.es.forEachInRange([n,r],e=>{this.rs(e),i.push(e.key)}),i}us(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new Ci(new ui([])),n=new Tc(t,e),r=new Tc(t,e+1);let i=To();return this.es.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Tc(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Tc{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return Ci.comparator(e.key,t.key)||ti(e.ls,t.ls)}static ns(e,t){return ti(e.ls,t.ls)||Ci.comparator(e.key,t.key)}}class Sc{constructor(e,t){this.Ht=e,this.referenceDelegate=t,this.In=[],this.fs=1,this.ds=new po(Tc.ts)}checkEmpty(e){return Fa.resolve(0===this.In.length)}addMutationBatch(e,t,n,r){const i=this.fs;this.fs++;const s=new Ka(i,t,n,r);this.In.push(s);for(const o of r)this.ds=this.ds.add(new Tc(o.key,i)),this.Ht.addToCollectionParentIndex(e,o.key.path.popLast());return Fa.resolve(s)}lookupMutationBatch(e,t){return Fa.resolve(this.ws(t))}getNextMutationBatchAfterBatchId(e,t){const n=this._s(t+1),r=n<0?0:n;return Fa.resolve(this.In.length>r?this.In[r]:null)}getHighestUnacknowledgedBatchId(){return Fa.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(e){return Fa.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Tc(t,0),r=new Tc(t,Number.POSITIVE_INFINITY),i=[];return this.ds.forEachInRange([n,r],e=>{const t=this.ws(e.ls);i.push(t)}),Fa.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new po(ti);return t.forEach(e=>{const t=new Tc(e,0),r=new Tc(e,Number.POSITIVE_INFINITY);this.ds.forEachInRange([t,r],e=>{n=n.add(e.ls)})}),Fa.resolve(this.gs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Ci.isDocumentKey(i)||(i=i.child(""));const s=new Tc(new Ci(i),0);let o=new po(ti);return this.ds.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)},s),Fa.resolve(this.gs(o))}gs(e){const t=[];return e.forEach(e=>{const n=this.ws(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){qr(0===this.ys(t.batchId,"removed")),this.In.shift();let n=this.ds;return Fa.forEach(t.mutations,r=>{const i=new Tc(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.ds=n})}te(e){}containsKey(e,t){const n=new Tc(t,0),r=this.ds.firstAfterOrEqual(n);return Fa.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return Fa.resolve()}ys(e,t){return this._s(e)}_s(e){return 0===this.In.length?0:e-this.In[0].batchId}ws(e){const t=this._s(e);return t<0||t>=this.In.length?null:this.In[t]}}class Ec{constructor(e,t){this.Ht=e,this.ps=t,this.docs=new co(Ci.comparator),this.size=0}addEntry(e,t,n){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ps(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:o,readTime:n}),this.size+=o-s,this.Ht.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Fa.resolve(n?n.document.clone():Bi.newInvalidDocument(t))}getEntries(e,t){let n=mo();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.clone():Bi.newInvalidDocument(e))}),Fa.resolve(n)}getDocumentsMatchingQuery(e,t,n){let r=mo();const i=new Ci(t.path.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:e,value:{document:i,readTime:o}}=s.getNext();if(!t.path.isPrefixOf(e.path))break;o.compareTo(n)<=0||Ss(t,i)&&(r=r.insert(i.key,i.clone()))}return Fa.resolve(r)}Ts(e,t){return Fa.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Cc(this)}getSize(e){return Fa.resolve(this.size)}}class Cc extends Ul{constructor(e){super(),this.Se=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.document.isValidDocument()?t.push(this.Se.addEntry(e,r.document,this.getReadTime(n))):this.Se.removeEntry(n)}),Fa.waitFor(t)}getFromCache(e,t){return this.Se.getEntry(e,t)}getAllFromCache(e,t){return this.Se.getEntries(e,t)}}class Ic{constructor(e){this.persistence=e,this.Es=new Ml(e=>Hi(e),Gi),this.lastRemoteSnapshotVersion=si.min(),this.highestTargetId=0,this.Is=0,this.As=new bc,this.targetCount=0,this.Rs=El.se()}forEachTarget(e,t){return this.Es.forEach((e,n)=>t(n)),Fa.resolve()}getLastRemoteSnapshotVersion(e){return Fa.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Fa.resolve(this.Is)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),Fa.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Is&&(this.Is=t),Fa.resolve()}ce(e){this.Es.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new El(t),this.highestTargetId=t),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}addTargetData(e,t){return this.ce(t),this.targetCount+=1,Fa.resolve()}updateTargetData(e,t){return this.ce(t),Fa.resolve()}removeTargetData(e,t){return this.Es.delete(t.target),this.As.cs(t.targetId),this.targetCount-=1,Fa.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Es.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Es.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),Fa.waitFor(i).next(()=>r)}getTargetCount(e){return Fa.resolve(this.targetCount)}getTargetData(e,t){const n=this.Es.get(t)||null;return Fa.resolve(n)}addMatchingKeys(e,t,n){return this.As.ss(t,n),Fa.resolve()}removeMatchingKeys(e,t,n){this.As.os(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Fa.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.As.cs(t),Fa.resolve()}getMatchingKeysForTargetId(e,t){const n=this.As.hs(t);return Fa.resolve(n)}containsKey(e,t){return Fa.resolve(this.As.containsKey(t))}}class kc{constructor(e,t){this.bs={},this.Le=new Jr(0),this.Be=!1,this.Be=!0,this.referenceDelegate=e(this),this.ze=new Ic(this),this.Ht=new hl,this.He=function(e,t){return new Ec(e,t)}(this.Ht,e=>this.referenceDelegate.Ps(e)),this.N=new Qa(t),this.Je=new wc(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new Sc(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(e,t,n){Fr("MemoryPersistence","Starting transaction:",e);const r=new xc(this.Le.next());return this.referenceDelegate.vs(),n(r).next(e=>this.referenceDelegate.Vs(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ss(e,t){return Fa.or(Object.values(this.bs).map(n=>()=>n.containsKey(e,t)))}}class xc extends La{constructor(e){super(),this.currentSequenceNumber=e}}class Ac{constructor(e){this.persistence=e,this.Ds=new bc,this.Cs=null}static Ns(e){return new Ac(e)}get xs(){if(this.Cs)return this.Cs;throw jr()}addReference(e,t,n){return this.Ds.addReference(n,t),this.xs.delete(n.toString()),Fa.resolve()}removeReference(e,t,n){return this.Ds.removeReference(n,t),this.xs.add(n.toString()),Fa.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),Fa.resolve()}removeTarget(e,t){this.Ds.cs(t.targetId).forEach(e=>this.xs.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.xs.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}vs(){this.Cs=new Set}Vs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Fa.forEach(this.xs,n=>{const r=Ci.fromPath(n);return this.ks(e,r).next(e=>{e||t.removeEntry(r)})}).next(()=>(this.Cs=null,t.apply(e)))}updateLimboDocument(e,t){return this.ks(e,t).next(e=>{e?this.xs.delete(t.toString()):this.xs.add(t.toString())})}Ps(e){return 0}ks(e,t){return Fa.or([()=>Fa.resolve(this.Ds.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ss(e,t)])}}function Pc(e,t){return`firestore_clients_${e}_${t}`}function Rc(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function Nc(e,t){return`firestore_targets_${e}_${t}`}class Oc{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static $s(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new $r(r.error.code,r.error.message))),s?new Oc(e,t,r.state,i):(Mr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Dc{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static $s(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new $r(n.error.code,n.error.message))),i?new Dc(e,n.state,r):(Mr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Lc{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Eo();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Ei(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new Lc(e,i):(Mr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Fc{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Fc(t.clientId,t.onlineState):(Mr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Mc{constructor(){this.activeTargetIds=Eo()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ms(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Uc{constructor(e,t,n,r,i){this.window=e,this.Oe=t,this.persistenceKey=n,this.Ls=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new co(ti),this.started=!1,this.Ks=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.js=Pc(this.persistenceKey,this.Ls),this.Qs=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.qs=this.qs.insert(this.Ls,new Mc),this.Ws=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Hs=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.Js=function(e){return`firestore_bundle_loaded_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,v.Z)(function*(){const t=yield e.syncEngine.pn();for(const r of t){if(r===e.Ls)continue;const t=e.getItem(Pc(e.persistenceKey,r));if(t){const n=Lc.$s(r,t);n&&(e.qs=e.qs.insert(n.clientId,n))}}e.Ys();const n=e.storage.getItem(e.Hs);if(n){const t=e.Xs(n);t&&e.Zs(t)}for(const r of e.Ks)e.Us(r);e.Ks=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Qs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(e){let t=!1;return this.qs.forEach((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ei(e,"pending")}updateMutationState(e,t,n){this.ei(e,t,n),this.ni(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Nc(this.persistenceKey,e));if(n){const r=Dc.$s(e,n);r&&(t=r.state)}}return this.si.Fs(e),this.Ys(),t}removeLocalQueryTarget(e){this.si.Ms(e),this.Ys()}isLocalQueryTarget(e){return this.si.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Nc(this.persistenceKey,e))}updateQueryState(e,t,n){this.ii(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.ni(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.ri(e)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fr("SharedClientState","READ",e,t),t}setItem(e,t){Fr("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fr("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Us(e){var t=this;const n=e;if(n.storageArea===this.storage){if(Fr("SharedClientState","EVENT",n.key,n.newValue),n.key===this.js)return void Mr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,v.Z)(function*(){if(t.started){if(null!==n.key)if(t.Ws.test(n.key)){if(null==n.newValue){const e=t.ci(n.key);return t.ai(e,null)}{const e=t.ui(n.key,n.newValue);if(e)return t.ai(e.clientId,e)}}else if(t.Gs.test(n.key)){if(null!==n.newValue){const e=t.hi(n.key,n.newValue);if(e)return t.li(e)}}else if(t.zs.test(n.key)){if(null!==n.newValue){const e=t.fi(n.key,n.newValue);if(e)return t.di(e)}}else if(n.key===t.Hs){if(null!==n.newValue){const e=t.Xs(n.newValue);if(e)return t.Zs(e)}}else if(n.key===t.Qs){const e=function(e){let t=Jr.T;if(null!=e)try{const n=JSON.parse(e);qr("number"==typeof n),t=n}catch(e){Mr("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue);e!==Jr.T&&t.sequenceNumberHandler(e)}else if(n.key===t.Js)return t.syncEngine.wi()}else t.Ks.push(n)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(e,t,n){const r=new Oc(this.currentUser,e,t,n),i=Rc(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Os())}ni(e){const t=Rc(this.persistenceKey,this.currentUser,e);this.removeItem(t)}ri(e){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:e}))}ii(e,t,n){const r=Nc(this.persistenceKey,e),i=new Dc(e,t,n);this.setItem(r,i.Os())}oi(){this.setItem(this.Js,"value-not-used")}ci(e){const t=this.Ws.exec(e);return t?t[1]:null}ui(e,t){const n=this.ci(e);return Lc.$s(n,t)}hi(e,t){const n=this.Gs.exec(e),r=Number(n[1]);return Oc.$s(new Nr(void 0!==n[2]?n[2]:null),r,t)}fi(e,t){const n=this.zs.exec(e),r=Number(n[1]);return Dc.$s(r,t)}Xs(e){return Fc.$s(e)}li(e){var t=this;return(0,v.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine._i(e.batchId,e.state,e.error);Fr("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}di(e){return this.syncEngine.mi(e.targetId,e.state,e.error)}ai(e,t){const n=t?this.qs.insert(e,t):this.qs.remove(e),r=this.ti(this.qs),i=this.ti(n),s=[],o=[];return i.forEach(e=>{r.has(e)||s.push(e)}),r.forEach(e=>{i.has(e)||o.push(e)}),this.syncEngine.gi(s,o).then(()=>{this.qs=n})}Zs(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ti(e){let t=Eo();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class Vc{constructor(){this.yi=new Mc,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.yi.Fs(e),this.pi[e]||"not-current"}updateQueryState(e,t,n){this.pi[e]=t}removeLocalQueryTarget(e){this.yi.Ms(e)}isLocalQueryTarget(e){return this.yi.activeTargetIds.has(e)}clearQueryState(e){delete this.pi[e]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(e){return this.yi.activeTargetIds.has(e)}start(){return this.yi=new Mc,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class jc{Ti(e){}shutdown(){}}class qc{constructor(){this.Ei=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ti(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ai)}Ii(){Fr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Ri(){Fr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Bc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class zc{constructor(e){this.vi=e.vi,this.Vi=e.Vi}Si(e){this.Di=e}Ci(e){this.Ni=e}onMessage(e){this.xi=e}close(){this.Vi()}send(e){this.vi(e)}ki(){this.Di()}$i(e){this.Ni(e)}Oi(e){this.xi(e)}}class $c extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Fi=(e.ssl?"https":"http")+"://"+e.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(e,t,n,r){const i=this.Bi(e,t);Fr("RestConnection","Sending: ",i,n);const s={};return this.Ui(s,r),this.qi(e,i,s,n).then(e=>(Fr("RestConnection","Received: ",e),e),t=>{throw Ur("RestConnection",`${e} failed with error: `,t,"url: ",i,"request:",n),t})}Ki(e,t,n,r){return this.Li(e,t,n,r)}Ui(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+Or,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(const n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])}Bi(e,t){return`${this.Fi}/v1/${t}:${Bc[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}qi(e,t,n,r){return new Promise((i,s)=>{const o=new Pr;o.listenOnce(Cr.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Er.NO_ERROR:const t=o.getResponseJson();Fr("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Er.TIMEOUT:Fr("Connection",'RPC "'+e+'" timed out'),s(new $r(zr.DEADLINE_EXCEEDED,"Request time out"));break;case Er.HTTP_ERROR:const n=o.getStatus();if(Fr("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const e=o.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(zr).indexOf(t)>=0?t:zr.UNKNOWN}(e.status);s(new $r(t,e.message))}else s(new $r(zr.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new $r(zr.UNAVAILABLE,"Connection failed."));break;default:jr()}}finally{Fr("Connection",'RPC "'+e+'" completed.')}});const a=JSON.stringify(r);o.send(t,"POST",a,n,15)})}ji(e,t){const n=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=Tr(),i=Sr(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new xr({})),this.Ui(s.initMessageHeaders,t),(0,S.uI)()||(0,S.b$)()||(0,S.d)()||(0,S.w1)()||(0,S.Mn)()||(0,S.ru)()||(s.httpHeadersOverwriteParam="$httpHeaders");const o=n.join("");Fr("Connection","Creating WebChannel: "+o,s);const a=r.createWebChannel(o,s);let l=!1,c=!1;const u=new zc({vi:e=>{c?Fr("Connection","Not sending because WebChannel is closed:",e):(l||(Fr("Connection","Opening WebChannel transport."),a.open(),l=!0),Fr("Connection","WebChannel sending:",e),a.send(e))},Vi:()=>a.close()}),h=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return h(a,Ar.EventType.OPEN,()=>{c||Fr("Connection","WebChannel transport opened.")}),h(a,Ar.EventType.CLOSE,()=>{c||(c=!0,Fr("Connection","WebChannel transport closed"),u.$i())}),h(a,Ar.EventType.ERROR,e=>{c||(c=!0,Ur("Connection","WebChannel transport errored:",e),u.$i(new $r(zr.UNAVAILABLE,"The operation could not be completed")))}),h(a,Ar.EventType.MESSAGE,e=>{var t;if(!c){const n=e.data[0];qr(!!n);const r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Fr("Connection","WebChannel received error:",i);const e=i.status;let t=function(e){const t=so[e];if(void 0!==t)return lo(t)}(e),n=i.message;void 0===t&&(t=zr.INTERNAL,n="Unknown error status: "+e+" with message "+i.message),c=!0,u.$i(new $r(t,n)),a.close()}else Fr("Connection","WebChannel received:",n),u.Oi(n)}}),h(i,Ir.STAT_EVENT,e=>{e.stat===kr.PROXY?Fr("Connection","Detected buffering proxy"):e.stat===kr.NOPROXY&&Fr("Connection","Detected no buffering proxy")}),setTimeout(()=>{u.ki()},0),u}}function Hc(){return"undefined"!=typeof window?window:null}function Gc(){return"undefined"!=typeof document?document:null}function Zc(e){return new Fo(e,!0)}class Kc{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Oe=e,this.timerId=t,this.Qi=n,this.Wi=r,this.Gi=i,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(e){this.cancel();const t=Math.floor(this.zi+this.Zi()),n=Math.max(0,Date.now()-this.Ji),r=Math.max(0,t-n);r>0&&Fr("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.zi} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,r,()=>(this.Ji=Date.now(),e())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class Wc{constructor(e,t,n,r,i,s,o){this.Oe=e,this.er=n,this.nr=r,this.sr=i,this.credentialsProvider=s,this.listener=o,this.state=0,this.ir=0,this.rr=null,this.cr=null,this.stream=null,this.ar=new Kc(e,t)}ur(){return 1===this.state||5===this.state||this.hr()}hr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.lr()}stop(){var e=this;return(0,v.Z)(function*(){e.ur()&&(yield e.close(0))})()}dr(){this.state=0,this.ar.reset()}wr(){this.hr()&&null===this.rr&&(this.rr=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this._r()))}mr(e){this.gr(),this.stream.send(e)}_r(){var e=this;return(0,v.Z)(function*(){if(e.hr())return e.close(0)})()}gr(){this.rr&&(this.rr.cancel(),this.rr=null)}yr(){this.cr&&(this.cr.cancel(),this.cr=null)}close(e,t){var n=this;return(0,v.Z)(function*(){n.gr(),n.yr(),n.ar.cancel(),n.ir++,4!==e?n.ar.reset():t&&t.code===zr.RESOURCE_EXHAUSTED?(Mr(t.toString()),Mr("Using maximum backoff delay to prevent overloading the backend."),n.ar.Yi()):t&&t.code===zr.UNAUTHENTICATED&&3!==n.state&&n.credentialsProvider.invalidateToken(),null!==n.stream&&(n.pr(),n.stream.close(),n.stream=null),n.state=e,yield n.listener.Ci(t)})()}pr(){}auth(){this.state=1;const e=this.Tr(this.ir),t=this.ir;this.credentialsProvider.getToken().then(e=>{this.ir===t&&this.Er(e)},t=>{e(()=>{const e=new $r(zr.UNKNOWN,"Fetching auth token failed: "+t.message);return this.Ir(e)})})}Er(e){const t=this.Tr(this.ir);this.stream=this.Ar(e),this.stream.Si(()=>{t(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.nr,1e4,()=>(this.hr()&&(this.state=3),Promise.resolve())),this.listener.Si()))}),this.stream.Ci(e=>{t(()=>this.Ir(e))}),this.stream.onMessage(e=>{t(()=>this.onMessage(e))})}lr(){var e=this;this.state=5,this.ar.Xi((0,v.Z)(function*(){e.state=0,e.start()}))}Ir(e){return Fr("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Tr(e){return t=>{this.Oe.enqueueAndForget(()=>this.ir===e?t():(Fr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Yc extends Wc{constructor(e,t,n,r,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i),this.N=r}Ar(e){return this.sr.ji("Listen",e)}onMessage(e){this.ar.reset();const t=function(e,t){let n;if("targetChange"in t){const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:jr()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.D?(qr(void 0===t||"string"==typeof t),fi.fromBase64String(t||"")):(qr(void 0===t||t instanceof Uint8Array),fi.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?zr.UNKNOWN:lo(e.code);return new $r(t,e.message||"")}(o);n=new Ao(r,i,s,a||null)}else if("documentChange"in t){const r=t.documentChange,i=$o(e,r.document.name),s=jo(r.document.updateTime),o=new ji({mapValue:{fields:r.document.fields}}),a=Bi.newFoundDocument(i,s,o);n=new ko(r.targetIds||[],r.removedTargetIds||[],a.key,a)}else if("documentDelete"in t){const r=t.documentDelete,i=$o(e,r.document),s=r.readTime?jo(r.readTime):si.min(),o=Bi.newNoDocument(i,s);n=new ko([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in t){const r=t.documentRemove,i=$o(e,r.document);n=new ko([],r.removedTargetIds||[],i,null)}else{if(!("filter"in t))return jr();{const e=t.filter,r=new io(e.count||0);n=new xo(e.targetId,r)}}return n}(this.N,e),n=function(e){if(!("targetChange"in e))return si.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?si.min():t.readTime?jo(t.readTime):si.min()}(e);return this.listener.Rr(t,n)}br(e){const t={};t.database=Zo(this.N),t.addTarget=function(e,t){let n;const r=t.target;return n=Zi(r)?{documents:Xo(e,r)}:{query:ea(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Uo(e,t.resumeToken):t.snapshotVersion.compareTo(si.min())>0&&(n.readTime=Mo(e,t.snapshotVersion.toTimestamp())),n}(this.N,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return jr()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);n&&(t.labels=n),this.mr(t)}Pr(e){const t={};t.database=Zo(this.N),t.removeTarget=e,this.mr(t)}}class Qc extends Wc{constructor(e,t,n,r,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i),this.N=r,this.vr=!1}get Vr(){return this.vr}start(){this.vr=!1,this.lastStreamToken=void 0,super.start()}pr(){this.vr&&this.Sr([])}Ar(e){return this.sr.ji("Write",e)}onMessage(e){if(qr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.vr){this.ar.reset();const t=function(e,t){return e&&e.length>0?(qr(void 0!==t),e.map(e=>function(e,t){let n=jo(e.updateTime?e.updateTime:t);return n.isEqual(si.min())&&(n=jo(t)),new Bs(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=jo(e.commitTime);return this.listener.Dr(n,t)}return qr(!e.writeResults||0===e.writeResults.length),this.vr=!0,this.listener.Cr()}Nr(){const e={};e.database=Zo(this.N),this.mr(e)}Sr(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Qo(this.N,e))};this.mr(t)}}class Jc extends class{}{constructor(e,t,n){super(),this.credentials=e,this.sr=t,this.N=n,this.kr=!1}$r(){if(this.kr)throw new $r(zr.FAILED_PRECONDITION,"The client has already been terminated.")}Li(e,t,n){return this.$r(),this.credentials.getToken().then(r=>this.sr.Li(e,t,n,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===zr.UNAUTHENTICATED&&this.credentials.invalidateToken(),e):new $r(zr.UNKNOWN,e.toString())})}Ki(e,t,n){return this.$r(),this.credentials.getToken().then(r=>this.sr.Ki(e,t,n,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===zr.UNAUTHENTICATED&&this.credentials.invalidateToken(),e):new $r(zr.UNKNOWN,e.toString())})}terminate(){this.kr=!0}}class Xc{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Or=0,this.Fr=null,this.Mr=!0}Lr(){0===this.Or&&(this.Br("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Fr=null,this.Ur("Backend didn't respond within 10 seconds."),this.Br("Offline"),Promise.resolve())))}qr(e){"Online"===this.state?this.Br("Unknown"):(this.Or++,this.Or>=1&&(this.Kr(),this.Ur(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Br("Offline")))}set(e){this.Kr(),this.Or=0,"Online"===e&&(this.Mr=!1),this.Br(e)}Br(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Ur(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Mr?(Mr(t),this.Mr=!1):Fr("OnlineStateTracker",t)}Kr(){null!==this.Fr&&(this.Fr.cancel(),this.Fr=null)}}class eu{constructor(e,t,n,r,i){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.jr=[],this.Qr=new Map,this.Wr=new Set,this.Gr=[],this.zr=i,this.zr.Ti(e=>{n.enqueueAndForget((0,v.Z)(function*(){var e;hu(s)&&(Fr("RemoteStore","Restarting streams for network reachability change."),yield(e=(0,v.Z)(function*(e){const t=Br(e);t.Wr.add(4),yield ru(t),t.Hr.set("Unknown"),t.Wr.delete(4),yield tu(t)}),function(t){return e.apply(this,arguments)})(s))}))}),this.Hr=new Xc(n,r)}}function tu(e){return nu.apply(this,arguments)}function nu(){return(nu=(0,v.Z)(function*(e){if(hu(e))for(const t of e.Gr)yield t(!0)})).apply(this,arguments)}function ru(e){return iu.apply(this,arguments)}function iu(){return(iu=(0,v.Z)(function*(e){for(const t of e.Gr)yield t(!1)})).apply(this,arguments)}function su(e,t){const n=Br(e);n.Qr.has(t.targetId)||(n.Qr.set(t.targetId,t),uu(n)?cu(n):Uu(n).hr()&&au(n,t))}function ou(e,t){const n=Br(e),r=Uu(n);n.Qr.delete(t),r.hr()&&lu(n,t),0===n.Qr.size&&(r.hr()?r.wr():hu(n)&&n.Hr.set("Unknown"))}function au(e,t){e.Jr.Y(t.targetId),Uu(e).br(t)}function lu(e,t){e.Jr.Y(t),Uu(e).Pr(t)}function cu(e){e.Jr=new Ro({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Tt:t=>e.Qr.get(t)||null}),Uu(e).start(),e.Hr.Lr()}function uu(e){return hu(e)&&!Uu(e).ur()&&e.Qr.size>0}function hu(e){return 0===Br(e).Wr.size}function du(e){e.Jr=void 0}function pu(e){return fu.apply(this,arguments)}function fu(){return(fu=(0,v.Z)(function*(e){e.Qr.forEach((t,n)=>{au(e,t)})})).apply(this,arguments)}function gu(e,t){return mu.apply(this,arguments)}function mu(){return(mu=(0,v.Z)(function*(e,t){du(e),uu(e)?(e.Hr.qr(t),cu(e)):e.Hr.set("Unknown")})).apply(this,arguments)}function yu(e,t,n){return _u.apply(this,arguments)}function _u(){return(_u=(0,v.Z)(function*(e,t,n){if(e.Hr.set("Online"),t instanceof Ao&&2===t.state&&t.cause)try{yield(r=(0,v.Z)(function*(e,t){const n=t.cause;for(const r of t.targetIds)e.Qr.has(r)&&(yield e.remoteSyncer.rejectListen(r,n),e.Qr.delete(r),e.Jr.removeTarget(r))}),function(e,t){return r.apply(this,arguments)})(e,t)}catch(n){Fr("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),yield vu(e,n)}else if(t instanceof ko?e.Jr.rt(t):t instanceof xo?e.Jr.ft(t):e.Jr.at(t),!n.isEqual(si.min()))try{const t=yield oc(e.localStore);n.compareTo(t)>=0&&(yield function(e,t){const n=e.Jr._t(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Qr.get(r);i&&e.Qr.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(t=>{const n=e.Qr.get(t);if(!n)return;e.Qr.set(t,n.withResumeToken(fi.EMPTY_BYTE_STRING,n.snapshotVersion)),lu(e,t);const r=new Ya(n.target,t,1,n.sequenceNumber);au(e,r)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n))}catch(t){Fr("RemoteStore","Failed to raise snapshot:",t),yield vu(e,t)}var r})).apply(this,arguments)}function vu(e,t,n){return wu.apply(this,arguments)}function wu(){return(wu=(0,v.Z)(function*(e,t,n){if(!qa(t))throw t;e.Wr.add(1),yield ru(e),e.Hr.set("Offline"),n||(n=()=>oc(e.localStore)),e.asyncQueue.enqueueRetryable((0,v.Z)(function*(){Fr("RemoteStore","Retrying IndexedDB access"),yield n(),e.Wr.delete(1),yield tu(e)}))})).apply(this,arguments)}function bu(e,t){return t().catch(n=>vu(e,n,t))}function Tu(e){return Su.apply(this,arguments)}function Su(){return(Su=(0,v.Z)(function*(e){const t=Br(e),n=Vu(t);let r=t.jr.length>0?t.jr[t.jr.length-1].batchId:-1;for(;Eu(t);)try{const e=yield cc(t.localStore,r);if(null===e){0===t.jr.length&&n.wr();break}r=e.batchId,Cu(t,e)}catch(e){yield vu(t,e)}Iu(t)&&ku(t)})).apply(this,arguments)}function Eu(e){return hu(e)&&e.jr.length<10}function Cu(e,t){e.jr.push(t);const n=Vu(e);n.hr()&&n.Vr&&n.Sr(t.mutations)}function Iu(e){return hu(e)&&!Vu(e).ur()&&e.jr.length>0}function ku(e){Vu(e).start()}function xu(e){return Au.apply(this,arguments)}function Au(){return(Au=(0,v.Z)(function*(e){Vu(e).Nr()})).apply(this,arguments)}function Pu(e){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,v.Z)(function*(e){const t=Vu(e);for(const n of e.jr)t.Sr(n.mutations)})).apply(this,arguments)}function Nu(e,t,n){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,v.Z)(function*(e,t,n){const r=e.jr.shift(),i=Wa.from(r,t,n);yield bu(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),yield Tu(e)})).apply(this,arguments)}function Du(e,t){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,v.Z)(function*(e,t){var n;t&&Vu(e).Vr&&(yield(n=(0,v.Z)(function*(e,t){if(ao(n=t.code)&&n!==zr.ABORTED){const n=e.jr.shift();Vu(e).dr(),yield bu(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),yield Tu(e)}var n}),function(e,t){return n.apply(this,arguments)})(e,t)),Iu(e)&&ku(e)})).apply(this,arguments)}function Fu(e,t){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,v.Z)(function*(e,t){const n=Br(e);t?(n.Wr.delete(2),yield tu(n)):t||(n.Wr.add(2),yield ru(n),n.Hr.set("Unknown"))})).apply(this,arguments)}function Uu(e){return e.Yr||(e.Yr=function(e,t,n){const r=Br(e);return r.$r(),new Yc(t,r.sr,r.credentials,r.N,n)}(e.datastore,e.asyncQueue,{Si:pu.bind(null,e),Ci:gu.bind(null,e),Rr:yu.bind(null,e)}),e.Gr.push(function(){var t=(0,v.Z)(function*(t){t?(e.Yr.dr(),uu(e)?cu(e):e.Hr.set("Unknown")):(yield e.Yr.stop(),du(e))});return function(e){return t.apply(this,arguments)}}())),e.Yr}function Vu(e){return e.Xr||(e.Xr=function(e,t,n){const r=Br(e);return r.$r(),new Qc(t,r.sr,r.credentials,r.N,n)}(e.datastore,e.asyncQueue,{Si:xu.bind(null,e),Ci:Du.bind(null,e),Cr:Pu.bind(null,e),Dr:Nu.bind(null,e)}),e.Gr.push(function(){var t=(0,v.Z)(function*(t){t?(e.Xr.dr(),yield Tu(e)):(yield e.Xr.stop(),e.jr.length>0&&(Fr("RemoteStore",`Stopping write stream with ${e.jr.length} pending writes`),e.jr=[]))});return function(e){return t.apply(this,arguments)}}())),e.Xr}class ju{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new ju(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new $r(zr.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qu(e,t){if(Mr("AsyncQueue",`${t}: ${e}`),qa(e))return new $r(zr.UNAVAILABLE,`${t}: ${e}`);throw e}class Bu{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ci.comparator(t.key,n.key):(e,t)=>Ci.comparator(e.key,t.key),this.keyedMap=_o(),this.sortedSet=new co(this.comparator)}static emptySet(e){return new Bu(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Bu))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Bu;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class zu{constructor(){this.Zr=new co(Ci.comparator)}track(e){const t=e.doc.key,n=this.Zr.get(t);n?0!==e.type&&3===n.type?this.Zr=this.Zr.insert(t,e):3===e.type&&1!==n.type?this.Zr=this.Zr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Zr=this.Zr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Zr=this.Zr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Zr=this.Zr.remove(t):1===e.type&&2===n.type?this.Zr=this.Zr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Zr=this.Zr.insert(t,{type:2,doc:e.doc}):jr():this.Zr=this.Zr.insert(t,e)}eo(){const e=[];return this.Zr.inorderTraversal((t,n)=>{e.push(n)}),e}}class $u{constructor(e,t,n,r,i,s,o,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(e,t,n,r){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new $u(e,t,Bu.emptySet(t),i,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ws(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Hu{constructor(){this.no=void 0,this.listeners=[]}}class Gu{constructor(){this.queries=new Ml(e=>bs(e),ws),this.onlineState="Unknown",this.so=new Set}}function Zu(e,t){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,v.Z)(function*(e,t){const n=Br(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Hu),i)try{s.no=yield n.onListen(r)}catch(e){const n=qu(e,`Initialization of query '${Ts(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.io(n.onlineState),s.no&&t.ro(s.no)&&Xu(n)})).apply(this,arguments)}function Wu(e,t){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,v.Z)(function*(e,t){const n=Br(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)})).apply(this,arguments)}function Qu(e,t){const n=Br(e);let r=!1;for(const i of t){const e=n.queries.get(i.query);if(e){for(const t of e.listeners)t.ro(i)&&(r=!0);e.no=i}}r&&Xu(n)}function Ju(e,t,n){const r=Br(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function Xu(e){e.so.forEach(e=>{e.next()})}class eh{constructor(e,t,n){this.query=e,this.oo=t,this.co=!1,this.ao=null,this.onlineState="Unknown",this.options=n||{}}ro(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new $u(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.co?this.uo(e)&&(this.oo.next(e),t=!0):this.ho(e,this.onlineState)&&(this.lo(e),t=!0),this.ao=e,t}onError(e){this.oo.error(e)}io(e){this.onlineState=e;let t=!1;return this.ao&&!this.co&&this.ho(this.ao,e)&&(this.lo(this.ao),t=!0),t}ho(e,t){return!e.fromCache||!(this.options.fo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}uo(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ao&&this.ao.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}lo(e){e=$u.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.oo.next(e)}}class th{constructor(e,t){this.payload=e,this.byteLength=t}wo(){return"metadata"in this.payload}}class nh{constructor(e){this.N=e}zn(e){return $o(this.N,e)}Hn(e){return e.metadata.exists?Yo(this.N,e.document,!1):Bi.newNoDocument(this.zn(e.metadata.name),this.Jn(e.metadata.readTime))}Jn(e){return jo(e)}}class rh{constructor(e,t,n){this._o=e,this.localStore=t,this.N=n,this.queries=[],this.documents=[],this.progress=ih(e)}mo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}yo(e){const t=new Map,n=new nh(this.N);for(const r of e)if(r.metadata.queries){const e=n.zn(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||To()).add(e);t.set(n,r)}}return t}complete(){var e=this;return(0,v.Z)(function*(){const t=yield function(e,t,n,r){return yc.apply(this,arguments)}(e.localStore,new nh(e.N),e.documents,e._o.id),n=e.yo(e.documents);for(const r of e.queries)yield _c(e.localStore,r,n.get(r.name));return e.progress.taskState="Success",new Ql(Object.assign({},e.progress),t)})()}}function ih(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class sh{constructor(e){this.key=e}}class oh{constructor(e){this.key=e}}class ah{constructor(e,t){this.query=e,this.po=t,this.To=null,this.current=!1,this.Eo=To(),this.mutatedKeys=To(),this.Io=Es(e),this.Ao=new Bu(this.Io)}get Ro(){return this.po}bo(e,t){const n=t?t.Po:new zu,r=t?t.Ao:this.Ao;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a=ds(this.query)&&r.size===this.query.limit?r.last():null,l=ps(this.query)&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Ss(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let p=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),p=!0):this.vo(c,u)||(n.track({type:2,doc:u}),p=!0,(a&&this.Io(u,a)>0||l&&this.Io(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),p=!0):c&&!u&&(n.track({type:1,doc:c}),p=!0,(a||l)&&(o=!0)),p&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),ds(this.query)||ps(this.query))for(;s.size>this.query.limit;){const e=ds(this.query)?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ao:s,Po:n,Ln:o,mutatedKeys:i}}vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.Ao;this.Ao=e.Ao,this.mutatedKeys=e.mutatedKeys;const i=e.Po.eo();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return jr()}};return n(e)-n(t)}(e.type,t.type)||this.Io(e.doc,t.doc)),this.Vo(n);const s=t?this.So():[],o=0===this.Eo.size&&this.current?1:0,a=o!==this.To;return this.To=o,0!==i.length||a?{snapshot:new $u(this.query,e.Ao,r,i,e.mutatedKeys,0===o,a,!1),Do:s}:{Do:s}}io(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ao:this.Ao,Po:new zu,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{Do:[]}}Co(e){return!this.po.has(e)&&!!this.Ao.has(e)&&!this.Ao.get(e).hasLocalMutations}Vo(e){e&&(e.addedDocuments.forEach(e=>this.po=this.po.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.po=this.po.delete(e)),this.current=e.current)}So(){if(!this.current)return[];const e=this.Eo;this.Eo=To(),this.Ao.forEach(e=>{this.Co(e.key)&&(this.Eo=this.Eo.add(e.key))});const t=[];return e.forEach(e=>{this.Eo.has(e)||t.push(new oh(e))}),this.Eo.forEach(n=>{e.has(n)||t.push(new sh(n))}),t}No(e){this.po=e.Gn,this.Eo=To();const t=this.bo(e.documents);return this.applyChanges(t,!0)}xo(){return $u.fromInitialDocuments(this.query,this.Ao,this.mutatedKeys,0===this.To)}}class lh{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class ch{constructor(e){this.key=e,this.ko=!1}}class uh{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.$o={},this.Oo=new Ml(e=>bs(e),ws),this.Fo=new Map,this.Mo=new Set,this.Lo=new co(Ci.comparator),this.Bo=new Map,this.Uo=new bc,this.qo={},this.Ko=new Map,this.jo=El.ie(),this.onlineState="Unknown",this.Qo=void 0}get isPrimaryClient(){return!0===this.Qo}}function hh(e,t){return dh.apply(this,arguments)}function dh(){return(dh=(0,v.Z)(function*(e,t){const n=td(e);let r,i;const s=n.Oo.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.xo();else{const e=yield uc(n.localStore,_s(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=yield ph(n,t,r,"current"===s),n.isPrimaryClient&&su(n.remoteStore,e)}return i})).apply(this,arguments)}function ph(e,t,n,r){return fh.apply(this,arguments)}function fh(){return(fh=(0,v.Z)(function*(e,t,n,r){e.Wo=(t,n,r)=>{return(i=(0,v.Z)(function*(e,t,n,r){let i=t.view.bo(n);i.Ln&&(i=yield pc(e.localStore,t.query,!1).then(({documents:e})=>t.view.bo(e,i)));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return Nh(e,t.targetId,o.Do),o.snapshot}),function(e,t,n,r){return i.apply(this,arguments)})(e,t,n,r);var i};const i=yield pc(e.localStore,t,!0),s=new ah(t,i.Gn),o=s.bo(i.documents),a=Io.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),l=s.applyChanges(o,e.isPrimaryClient,a);Nh(e,n,l.Do);const c=new lh(t,n,s);return e.Oo.set(t,c),e.Fo.has(n)?e.Fo.get(n).push(t):e.Fo.set(n,[t]),l.snapshot})).apply(this,arguments)}function gh(e,t){return mh.apply(this,arguments)}function mh(){return(mh=(0,v.Z)(function*(e,t){const n=Br(e),r=n.Oo.get(t),i=n.Fo.get(r.targetId);if(i.length>1)return n.Fo.set(r.targetId,i.filter(e=>!ws(e,t))),void n.Oo.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield hc(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),ou(n.remoteStore,r.targetId),Ph(n,r.targetId)}).catch(Al))):(Ph(n,r.targetId),yield hc(n.localStore,r.targetId,!0))})).apply(this,arguments)}function yh(){return(yh=(0,v.Z)(function*(e,t,n){const r=nd(e);try{const e=yield function(e,t){const n=Br(e),r=ii.now(),i=t.reduce((e,t)=>e.add(t.key),To());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>n.Qn.Pn(e,i).next(i=>{s=i;const o=[];for(const e of t){const t=Ks(e,s.get(e.key));null!=t&&o.push(new Js(e.key,t,qi(t.value.mapValue),zs.exists(!0)))}return n.In.addMutationBatch(e,r,o,t)})).then(e=>(e.applyToLocalDocumentSet(s),{batchId:e.batchId,changes:s}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.qo[e.currentUser.toKey()];r||(r=new co(ti)),r=r.insert(t,n),e.qo[e.currentUser.toKey()]=r}(r,e.batchId,n),yield Lh(r,e.changes),yield Tu(r.remoteStore)}catch(e){const t=qu(e,"Failed to persist write");n.reject(t)}})).apply(this,arguments)}function _h(e,t){return vh.apply(this,arguments)}function vh(){return(vh=(0,v.Z)(function*(e,t){const n=Br(e);try{const e=yield ac(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Bo.get(t);r&&(qr(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.ko=!0:e.modifiedDocuments.size>0?qr(r.ko):e.removedDocuments.size>0&&(qr(r.ko),r.ko=!1))}),yield Lh(n,e,t)}catch(e){yield Al(e)}})).apply(this,arguments)}function wh(e,t,n){const r=Br(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Oo.forEach((n,r)=>{const i=r.view.io(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Br(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.listeners)i.io(t)&&(r=!0)}),r&&Xu(n)}(r.eventManager,t),e.length&&r.$o.Rr(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function bh(e,t,n){return Th.apply(this,arguments)}function Th(){return(Th=(0,v.Z)(function*(e,t,n){const r=Br(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Bo.get(t),s=i&&i.key;if(s){let e=new co(Ci.comparator);e=e.insert(s,Bi.newNoDocument(s,si.min()));const n=To().add(s),i=new Co(si.min(),new Map,new po(ti),e,n);yield _h(r,i),r.Lo=r.Lo.remove(s),r.Bo.delete(t),Dh(r)}else yield hc(r.localStore,t,!1).then(()=>Ph(r,t,n)).catch(Al)})).apply(this,arguments)}function Sh(e,t){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,v.Z)(function*(e,t){const n=Br(e),r=t.batch.batchId;try{const e=yield sc(n.localStore,t);Ah(n,r,null),xh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Lh(n,e)}catch(e){yield Al(e)}})).apply(this,arguments)}function Ch(e,t,n){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,v.Z)(function*(e,t,n){const r=Br(e);try{const e=yield function(e,t){const n=Br(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.In.lookupMutationBatch(e,t).next(t=>(qr(null!==t),r=t.keys(),n.In.removeMutationBatch(e,t))).next(()=>n.In.performConsistencyCheck(e)).next(()=>n.Qn.Pn(e,r))})}(r.localStore,t);Ah(r,t,n),xh(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),yield Lh(r,e)}catch(n){yield Al(n)}})).apply(this,arguments)}function kh(){return(kh=(0,v.Z)(function*(e,t){const n=Br(e);hu(n.remoteStore)||Fr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=yield function(e){const t=Br(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.In.getHighestUnacknowledgedBatchId(e))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ko.get(e)||[];r.push(t),n.Ko.set(e,r)}catch(e){const n=qu(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}})).apply(this,arguments)}function xh(e,t){(e.Ko.get(t)||[]).forEach(e=>{e.resolve()}),e.Ko.delete(t)}function Ah(e,t,n){const r=Br(e);let i=r.qo[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.qo[r.currentUser.toKey()]=i}}function Ph(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Fo.get(t))e.Oo.delete(r),n&&e.$o.Go(r,n);e.Fo.delete(t),e.isPrimaryClient&&e.Uo.cs(t).forEach(t=>{e.Uo.containsKey(t)||Rh(e,t)})}function Rh(e,t){e.Mo.delete(t.path.canonicalString());const n=e.Lo.get(t);null!==n&&(ou(e.remoteStore,n),e.Lo=e.Lo.remove(t),e.Bo.delete(n),Dh(e))}function Nh(e,t,n){for(const r of n)r instanceof sh?(e.Uo.addReference(r.key,t),Oh(e,r)):r instanceof oh?(Fr("SyncEngine","Document no longer in limbo: "+r.key),e.Uo.removeReference(r.key,t),e.Uo.containsKey(r.key)||Rh(e,r.key)):jr()}function Oh(e,t){const n=t.key,r=n.path.canonicalString();e.Lo.get(n)||e.Mo.has(r)||(Fr("SyncEngine","New document in limbo: "+n),e.Mo.add(r),Dh(e))}function Dh(e){for(;e.Mo.size>0&&e.Lo.size<e.maxConcurrentLimboResolutions;){const t=e.Mo.values().next().value;e.Mo.delete(t);const n=new Ci(ui.fromString(t)),r=e.jo.next();e.Bo.set(r,new ch(n)),e.Lo=e.Lo.insert(n,r),su(e.remoteStore,new Ya(_s(hs(n.path)),r,2,Jr.T))}}function Lh(e,t,n){return Fh.apply(this,arguments)}function Fh(){return(Fh=(0,v.Z)(function*(e,t,n){const r=Br(e),i=[],s=[],o=[];var a;r.Oo.isEmpty()||(r.Oo.forEach((e,a)=>{o.push(r.Wo(a,t,n).then(e=>{if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),i.push(e);const t=Xl.kn(a.targetId,e);s.push(t)}}))}),yield Promise.all(o),r.$o.Rr(i),yield(a=(0,v.Z)(function*(e,t){const n=Br(e);try{yield n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Fa.forEach(t,t=>Fa.forEach(t.Nn,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Fa.forEach(t.xn,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!qa(e))throw e;Fr("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Un.get(e),r=t.withLastLimboFreeSnapshotVersion(t.snapshotVersion);n.Un=n.Un.insert(e,r)}}}),function(e,t){return a.apply(this,arguments)})(r.localStore,s))})).apply(this,arguments)}function Mh(e,t){return Uh.apply(this,arguments)}function Uh(){return(Uh=(0,v.Z)(function*(e,t){const n=Br(e);if(!n.currentUser.isEqual(t)){Fr("SyncEngine","User change. New user:",t.toKey());const e=yield rc(n.localStore,t);n.currentUser=t,function(e,t){e.Ko.forEach(e=>{e.forEach(e=>{e.reject(new $r(zr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Ko.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),yield Lh(n,e.Wn)}})).apply(this,arguments)}function Vh(e,t){const n=Br(e),r=n.Bo.get(t);if(r&&r.ko)return To().add(r.key);{let e=To();const r=n.Fo.get(t);if(!r)return e;for(const t of r){const r=n.Oo.get(t);e=e.unionWith(r.view.Ro)}return e}}function jh(e,t){return qh.apply(this,arguments)}function qh(){return(qh=(0,v.Z)(function*(e,t){const n=Br(e),r=yield pc(n.localStore,t.query,!0),i=t.view.No(r);return n.isPrimaryClient&&Nh(n,t.targetId,i.Do),i})).apply(this,arguments)}function Bh(e){return zh.apply(this,arguments)}function zh(){return(zh=(0,v.Z)(function*(e){const t=Br(e);return gc(t.localStore).then(e=>Lh(t,e))})).apply(this,arguments)}function $h(e,t,n,r){return Hh.apply(this,arguments)}function Hh(){return(Hh=(0,v.Z)(function*(e,t,n,r){const i=Br(e),s=yield function(e,t){const n=Br(e),r=Br(n.In);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>r.Xt(e,t).next(t=>t?n.Qn.Pn(e,t):Fa.resolve(null)))}(i.localStore,t);null!==s?("pending"===n?yield Tu(i.remoteStore):"acknowledged"===n||"rejected"===n?(Ah(i,t,r||null),xh(i,t),function(e,t){Br(Br(e).In).te(t)}(i.localStore,t)):jr(),yield Lh(i,s)):Fr("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function Gh(){return(Gh=(0,v.Z)(function*(e,t){const n=Br(e);if(td(n),nd(n),!0===t&&!0!==n.Qo){const e=n.sharedClientState.getAllActiveQueryTargets(),t=yield Zh(n,e.toArray());n.Qo=!0,yield Fu(n.remoteStore,!0);for(const r of t)su(n.remoteStore,r)}else if(!1===t&&!1!==n.Qo){const e=[];let t=Promise.resolve();n.Fo.forEach((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then(()=>(Ph(n,i),hc(n.localStore,i,!0))),ou(n.remoteStore,i)}),yield t,yield Zh(n,e),function(e){const t=Br(e);t.Bo.forEach((e,n)=>{ou(t.remoteStore,n)}),t.Uo.us(),t.Bo=new Map,t.Lo=new co(Ci.comparator)}(n),n.Qo=!1,yield Fu(n.remoteStore,!1)}})).apply(this,arguments)}function Zh(e,t,n){return Kh.apply(this,arguments)}function Kh(){return(Kh=(0,v.Z)(function*(e,t,n){const r=Br(e),i=[],s=[];for(const o of t){let e;const t=r.Fo.get(o);if(t&&0!==t.length){e=yield uc(r.localStore,_s(t[0]));for(const e of t){const t=r.Oo.get(e),n=yield jh(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=yield fc(r.localStore,o);e=yield uc(r.localStore,t),yield ph(r,Wh(t),o,!1)}i.push(e)}return r.$o.Rr(s),i})).apply(this,arguments)}function Wh(e){return us(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Yh(e){const t=Br(e);return Br(Br(t.localStore).persistence).pn()}function Qh(e,t,n,r){return Jh.apply(this,arguments)}function Jh(){return(Jh=(0,v.Z)(function*(e,t,n,r){const i=Br(e);if(i.Qo)Fr("SyncEngine","Ignoring unexpected query state notification.");else if(i.Fo.has(t))switch(n){case"current":case"not-current":{const e=yield gc(i.localStore),r=Co.createSynthesizedRemoteEventForCurrentChange(t,"current"===n);yield Lh(i,e,r);break}case"rejected":yield hc(i.localStore,t,!0),Ph(i,t,r);break;default:jr()}})).apply(this,arguments)}function Xh(e,t,n){return ed.apply(this,arguments)}function ed(){return(ed=(0,v.Z)(function*(e,t,n){const r=td(e);if(r.Qo){for(const e of t){if(r.Fo.has(e)){Fr("SyncEngine","Adding an already active target "+e);continue}const t=yield fc(r.localStore,e),n=yield uc(r.localStore,t);yield ph(r,Wh(t),n.targetId,!1),su(r.remoteStore,n)}for(const e of n)r.Fo.has(e)&&(yield hc(r.localStore,e,!1).then(()=>{ou(r.remoteStore,e),Ph(r,e)}).catch(Al))}})).apply(this,arguments)}function td(e){const t=Br(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=_h.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vh.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=bh.bind(null,t),t.$o.Rr=Qu.bind(null,t.eventManager),t.$o.Go=Ju.bind(null,t.eventManager),t}function nd(e){const t=Br(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Sh.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ch.bind(null,t),t}class rd{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,v.Z)(function*(){t.N=Zc(e.databaseInfo.databaseId),t.sharedClientState=t.Ho(e),t.persistence=t.Jo(e),yield t.persistence.start(),t.gcScheduler=t.Yo(e),t.localStore=t.Xo(e)})()}Yo(e){return null}Xo(e){return nc(this.persistence,new ec,e.initialUser,this.N)}Jo(e){return new kc(Ac.Ns,this.N)}Ho(e){return new Vc}terminate(){var e=this;return(0,v.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class id extends rd{constructor(e,t,n){super(),this.Zo=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,n=this;return(0,v.Z)(function*(){yield t().call(n,e),yield function(e){return mc.apply(this,arguments)}(n.localStore),yield n.Zo.initialize(n,e),yield nd(n.Zo.syncEngine),yield Tu(n.Zo.remoteStore),yield n.persistence.nn(()=>(n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()))})()}Xo(e){return nc(this.persistence,new ec,e.initialUser,this.N)}Yo(e){return new Ol(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Jo(e){const t=Yl(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ml.withCacheSize(this.cacheSizeBytes):ml.DEFAULT;return new Zl(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Hc(),Gc(),this.N,this.sharedClientState,!!this.forceOwnership)}Ho(e){return new Vc}}class sd extends id{constructor(e,t){super(e,t,!1),this.Zo=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,n=this;return(0,v.Z)(function*(){yield t().call(n,e);const r=n.Zo.syncEngine;n.sharedClientState instanceof Uc&&(n.sharedClientState.syncEngine={_i:$h.bind(null,r),mi:Qh.bind(null,r),gi:Xh.bind(null,r),pn:Yh.bind(null,r),wi:Bh.bind(null,r)},yield n.sharedClientState.start()),yield n.persistence.nn(function(){var e=(0,v.Z)(function*(e){yield function(e,t){return Gh.apply(this,arguments)}(n.Zo.syncEngine,e),n.gcScheduler&&(e&&!n.gcScheduler.started?n.gcScheduler.start(n.localStore):e||n.gcScheduler.stop())});return function(t){return e.apply(this,arguments)}}())})()}Ho(e){const t=Hc();if(!Uc.bt(t))throw new $r(zr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Yl(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Uc(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class od{initialize(e,t){var n=this;return(0,v.Z)(function*(){n.localStore||(n.localStore=e.localStore,n.sharedClientState=e.sharedClientState,n.datastore=n.createDatastore(t),n.remoteStore=n.createRemoteStore(t),n.eventManager=n.createEventManager(t),n.syncEngine=n.createSyncEngine(t,!e.synchronizeTabs),n.sharedClientState.onlineStateHandler=e=>wh(n.syncEngine,e,1),n.remoteStore.remoteSyncer.handleCredentialChange=Mh.bind(null,n.syncEngine),yield Fu(n.remoteStore,n.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Gu}createDatastore(e){const t=Zc(e.databaseInfo.databaseId),n=new $c(e.databaseInfo);return function(e,t,n){return new Jc(e,t,n)}(e.credentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>wh(this.syncEngine,e,0),s=qc.bt()?new qc:new jc,new eu(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new uh(e,t,n,r,i,s);return o&&(a.Qo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,v.Z)(function*(e){const t=Br(e);Fr("RemoteStore","RemoteStore shutting down."),t.Wr.add(5),yield ru(t),t.zr.shutdown(),t.Hr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function ad(e,t=10240){let n=0;return{read:()=>(0,v.Z)(function*(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}})(),cancel:()=>(0,v.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ld{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.tc(this.observer.next,e)}error(e){this.observer.error?this.tc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}ec(){this.muted=!0}tc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class cd{constructor(e,t){this.nc=e,this.N=t,this.metadata=new Hr,this.buffer=new Uint8Array,this.sc=new TextDecoder("utf-8"),this.ic().then(e=>{e&&e.wo()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.payload)}`))},e=>this.metadata.reject(e))}close(){return this.nc.cancel()}getMetadata(){var e=this;return(0,v.Z)(function*(){return e.metadata.promise})()}zo(){var e=this;return(0,v.Z)(function*(){return yield e.getMetadata(),e.ic()})()}ic(){var e=this;return(0,v.Z)(function*(){const t=yield e.rc();if(null===t)return null;const n=e.sc.decode(t),r=Number(n);isNaN(r)&&e.oc(`length string (${n}) is not valid number`);const i=yield e.cc(r);return new th(JSON.parse(i),t.length+r)})()}ac(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}rc(){var e=this;return(0,v.Z)(function*(){for(;e.ac()<0&&!(yield e.uc()););if(0===e.buffer.length)return null;const t=e.ac();t<0&&e.oc("Reached the end of bundle when a length string is expected.");const n=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),n})()}cc(e){var t=this;return(0,v.Z)(function*(){for(;t.buffer.length<e;)(yield t.uc())&&t.oc("Reached the end of bundle when more is expected.");const n=t.sc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),n})()}oc(e){throw this.nc.cancel(),new Error(`Invalid bundle format: ${e}`)}uc(){var e=this;return(0,v.Z)(function*(){const t=yield e.nc.read();if(!t.done){const n=new Uint8Array(e.buffer.length+t.value.length);n.set(e.buffer),n.set(t.value,e.buffer.length),e.buffer=n}return t.done})()}}class ud{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,v.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new $r(zr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=yield(r=(0,v.Z)(function*(e,t){const n=Br(e),r=Zo(n.N)+"/documents",i={documents:t.map(e=>zo(n.N,e))},s=yield n.Ki("BatchGetDocuments",r,i),o=new Map;s.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){qr(!!t.found);const n=$o(e,t.found.name),r=jo(t.found.updateTime),i=new ji({mapValue:{fields:t.found.fields}});return Bi.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){qr(!!t.missing),qr(!!t.readTime);const n=$o(e,t.missing),r=jo(t.readTime);return Bi.newNoDocument(n,r)}(e,t):jr()}(n.N,e);o.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=o.get(e.toString());qr(!!t),a.push(t)}),a}),function(e,t){return r.apply(this,arguments)})(t.datastore,e);var r;return n.forEach(e=>t.recordVersion(e)),n})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new no(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,v.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var n;e.mutations.forEach(e=>{t.delete(e.key.toString())}),t.forEach((t,n)=>{const r=Ci.fromPath(n);e.mutations.push(new ro(r,e.precondition(r)))}),yield(n=(0,v.Z)(function*(e,t){const n=Br(e),r=Zo(n.N)+"/documents",i={writes:t.map(e=>Qo(n.N,e))};yield n.Li("Commit",r,i)}),function(e,t){return n.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw jr();t=si.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new $r(zr.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?zs.updateTime(t):zs.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(si.min()))throw new $r(zr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return zs.updateTime(t)}return zs.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class hd{constructor(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.hc=5,this.ar=new Kc(this.asyncQueue,"transaction_retry")}run(){this.hc-=1,this.lc()}lc(){var e=this;this.ar.Xi((0,v.Z)(function*(){const t=new ud(e.datastore),n=e.fc(t);n&&n.then(n=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(n)}).catch(t=>{e.dc(t)}))}).catch(t=>{e.dc(t)})}))}fc(e){try{const t=this.updateFunction(e);return!Ti(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}dc(e){this.hc>0&&this.wc(e)?(this.hc-=1,this.asyncQueue.enqueueAndForget(()=>(this.lc(),Promise.resolve()))):this.deferred.reject(e)}wc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!ao(t)}return!1}}class dd{constructor(e,t,n){var r=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=Nr.UNAUTHENTICATED,this.clientId=ei.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(t,function(){var e=(0,v.Z)(function*(e){Fr("FirestoreClient","Received user=",e.uid),yield r.credentialListener(e),r.user=e});return function(t){return e.apply(this,arguments)}}())}getConfiguration(){var e=this;return(0,v.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,credentials:e.credentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new $r(zr.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,v.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.credentials.shutdown(),t.resolve()}catch(n){const e=qu(n,"Failed to shutdown persistence");t.reject(e)}})),t.promise}}function pd(e,t){return fd.apply(this,arguments)}function fd(){return(fd=(0,v.Z)(function*(e,t){e.asyncQueue.verifyOperationInProgress(),Fr("FirestoreClient","Initializing OfflineComponentProvider");const n=yield e.getConfiguration();yield t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(function(){var e=(0,v.Z)(function*(e){r.isEqual(e)||(yield rc(t.localStore,e),r=e)});return function(t){return e.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e.offlineComponents=t})).apply(this,arguments)}function gd(e,t){return md.apply(this,arguments)}function md(){return(md=(0,v.Z)(function*(e,t){e.asyncQueue.verifyOperationInProgress();const n=yield yd(e);Fr("FirestoreClient","Initializing OnlineComponentProvider");const r=yield e.getConfiguration();yield t.initialize(n,r),e.setCredentialChangeListener(e=>{return(n=(0,v.Z)(function*(e,t){const n=Br(e);n.asyncQueue.verifyOperationInProgress(),Fr("RemoteStore","RemoteStore received new credentials");const r=hu(n);n.Wr.add(3),yield ru(n),r&&n.Hr.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(t),n.Wr.delete(3),yield tu(n)}),function(e,t){return n.apply(this,arguments)})(t.remoteStore,e);var n}),e.onlineComponents=t})).apply(this,arguments)}function yd(e){return _d.apply(this,arguments)}function _d(){return(_d=(0,v.Z)(function*(e){return e.offlineComponents||(Fr("FirestoreClient","Using default OfflineComponentProvider"),yield pd(e,new rd)),e.offlineComponents})).apply(this,arguments)}function vd(e){return wd.apply(this,arguments)}function wd(){return(wd=(0,v.Z)(function*(e){return e.onlineComponents||(Fr("FirestoreClient","Using default OnlineComponentProvider"),yield gd(e,new od)),e.onlineComponents})).apply(this,arguments)}function bd(e){return yd(e).then(e=>e.persistence)}function Td(e){return yd(e).then(e=>e.localStore)}function Sd(e){return vd(e).then(e=>e.remoteStore)}function Ed(e){return vd(e).then(e=>e.syncEngine)}function Cd(e){return Id.apply(this,arguments)}function Id(){return(Id=(0,v.Z)(function*(e){const t=yield vd(e),n=t.eventManager;return n.onListen=hh.bind(null,t.syncEngine),n.onUnlisten=gh.bind(null,t.syncEngine),n})).apply(this,arguments)}function kd(e,t,n={}){const r=new Hr;return e.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return function(e,t,n,r,i){const s=new ld({next:s=>{t.enqueueAndForget(()=>Wu(e,o));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new $r(zr.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new $r(zr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new eh(hs(n.path),s,{includeMetadataChanges:!0,fo:!0});return Zu(e,o)}(yield Cd(e),e.asyncQueue,t,n,r)})),r.promise}function xd(e,t,n={}){const r=new Hr;return e.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return function(e,t,n,r,i){const s=new ld({next:n=>{t.enqueueAndForget(()=>Wu(e,o)),n.fromCache&&"server"===r.source?i.reject(new $r(zr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new eh(n,s,{includeMetadataChanges:!0,fo:!0});return Zu(e,o)}(yield Cd(e),e.asyncQueue,t,n,r)})),r.promise}class Ad{constructor(e,t,n,r,i,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class Pd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Pd&&e.projectId===this.projectId&&e.database===this.database}}const Rd=new Map;function Nd(e,t,n){if(!n)throw new $r(zr.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Od(e,t,n,r){if(!0===t&&!0===r)throw new $r(zr.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Dd(e){if(!Ci.isDocumentKey(e))throw new $r(zr.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Ld(e){if(Ci.isDocumentKey(e))throw new $r(zr.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Fd(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":jr()}function Md(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new $r(zr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fd(e);throw new $r(zr.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Ud(e,t){if(t<=0)throw new $r(zr.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class Vd{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new $r(zr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new $r(zr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Od("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jd{constructor(e,t){this._credentials=t,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vd({}),this._settingsFrozen=!1,e instanceof Pd?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new $r(zr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pd(e.options.projectId)}(e))}get app(){if(!this._app)throw new $r(zr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new $r(zr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vd(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new Zr;switch(e.type){case"gapi":const t=e.client;return qr(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Qr(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new $r(zr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Rd.get(e);t&&(Fr("ComponentProvider","Removing Datastore"),Rd.delete(e),t.terminate())}(this),Promise.resolve()}}class qd{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qd(this.firestore,e,this._key)}}class Bd{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Bd(this.firestore,e,this._query)}}class zd extends Bd{constructor(e,t,n){super(e,t,hs(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qd(this.firestore,null,new Ci(e))}withConverter(e){return new zd(this.firestore,e,this._path)}}function $d(e,t,...n){if(e=(0,S.m9)(e),Nd("collection","path",t),e instanceof jd){const r=ui.fromString(t,...n);return Ld(r),new zd(e,null,r)}{if(!(e instanceof qd||e instanceof zd))throw new $r(zr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ui.fromString(t,...n));return Ld(r),new zd(e.firestore,null,r)}}function Hd(e,t,...n){if(e=(0,S.m9)(e),1===arguments.length&&(t=ei.I()),Nd("doc","path",t),e instanceof jd){const r=ui.fromString(t,...n);return Dd(r),new qd(e,null,new Ci(r))}{if(!(e instanceof qd||e instanceof zd))throw new $r(zr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ui.fromString(t,...n));return Dd(r),new qd(e.firestore,e instanceof zd?e.converter:null,new Ci(r))}}function Gd(e,t){return e=(0,S.m9)(e),t=(0,S.m9)(t),(e instanceof qd||e instanceof zd)&&(t instanceof qd||t instanceof zd)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Zd(e,t){return e=(0,S.m9)(e),t=(0,S.m9)(t),e instanceof Bd&&t instanceof Bd&&e.firestore===t.firestore&&ws(e._query,t._query)&&e.converter===t.converter}class Kd{constructor(){this._c=Promise.resolve(),this.mc=[],this.gc=!1,this.yc=[],this.Tc=null,this.Ec=!1,this.Ic=!1,this.Ac=[],this.ar=new Kc(this,"async_queue_retry"),this.Rc=()=>{const e=Gc();e&&Fr("AsyncQueue","Visibility state changed to "+e.visibilityState),this.ar.tr()};const e=Gc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Rc)}get isShuttingDown(){return this.gc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.bc(),this.Pc(e)}enterRestrictedMode(e){if(!this.gc){this.gc=!0,this.Ic=e||!1;const t=Gc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Rc)}}enqueue(e){if(this.bc(),this.gc)return new Promise(()=>{});const t=new Hr;return this.Pc(()=>this.gc&&this.Ic?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.mc.push(e),this.vc()))}vc(){var e=this;return(0,v.Z)(function*(){if(0!==e.mc.length){try{yield e.mc[0](),e.mc.shift(),e.ar.reset()}catch(M){if(!qa(M))throw M;Fr("AsyncQueue","Operation failed with retryable error: "+M)}e.mc.length>0&&e.ar.Xi(()=>e.vc())}})()}Pc(e){const t=this._c.then(()=>(this.Ec=!0,e().catch(e=>{throw this.Tc=e,this.Ec=!1,Mr("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(e=>(this.Ec=!1,e))));return this._c=t,t}enqueueAfterDelay(e,t,n){this.bc(),this.Ac.indexOf(e)>-1&&(t=0);const r=ju.createAndSchedule(this,e,t,n,e=>this.Vc(e));return this.yc.push(r),r}bc(){this.Tc&&jr()}verifyOperationInProgress(){}Sc(){var e=this;return(0,v.Z)(function*(){let t;do{t=e._c,yield t}while(t!==e._c)})()}Dc(e){for(const t of this.yc)if(t.timerId===e)return!0;return!1}Cc(e){return this.Sc().then(()=>{this.yc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.yc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Sc()})}Nc(e){this.Ac.push(e)}Vc(e){const t=this.yc.indexOf(e);this.yc.splice(t,1)}}function Wd(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class Yd{constructor(){this._progressObserver={},this._taskCompletionResolver=new Hr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Qd extends jd{constructor(e,t){super(e,t),this.type="firestore",this._queue=new Kd,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Xd(this),this._firestoreClient.terminate()}}function Jd(e){return e._firestoreClient||Xd(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Xd(e){var t;const n=e._freezeSettings(),r=function(e,t,n,r){return new Ad(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new dd(e._credentials,e._queue,r)}function ep(e,t,n){const r=new Hr;return e.asyncQueue.enqueue((0,v.Z)(function*(){try{yield pd(e,n),yield gd(e,t),r.resolve()}catch(e){if(!function(e){return"FirebaseError"===e.name?e.code===zr.FAILED_PRECONDITION||e.code===zr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(e))throw e;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.reject(e)}})).then(()=>r.promise)}function tp(e){if(e._initialized||e._terminated)throw new $r(zr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class np{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new $r(zr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new di(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class rp{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rp(fi.fromBase64String(e))}catch(e){throw new $r(zr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new rp(fi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ip{constructor(e){this._methodName=e}}class sp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new $r(zr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new $r(zr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ti(this._lat,e._lat)||ti(this._long,e._long)}}const op=/^__.*__$/;class ap{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Js(e,this.data,this.fieldMask,t,this.fieldTransforms):new Qs(e,this.data,t,this.fieldTransforms)}}class lp{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Js(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function cp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw jr()}}class up{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.N=n,this.ignoreUndefinedProperties=r,void 0===i&&this.xc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get kc(){return this.settings.kc}$c(e){return new up(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Oc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.$c({path:n,Fc:!1});return r.Mc(e),r}Lc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.$c({path:n,Fc:!1});return r.xc(),r}Bc(e){return this.$c({path:void 0,Fc:!0})}Uc(e){return Pp(e,this.settings.methodName,this.settings.qc||!1,this.path,this.settings.Kc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.Mc(this.path.get(e))}Mc(e){if(0===e.length)throw this.Uc("Document fields must not be empty");if(cp(this.kc)&&op.test(e))throw this.Uc('Document fields cannot begin and end with "__"')}}class hp{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.N=n||Zc(e)}jc(e,t,n,r=!1){return new up({kc:e,methodName:t,Kc:n,path:di.emptyPath(),Fc:!1,qc:r},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function dp(e){const t=e._freezeSettings(),n=Zc(e._databaseId);return new hp(e._databaseId,!!t.ignoreUndefinedProperties,n)}function pp(e,t,n,r,i,s={}){const o=e.jc(s.merge||s.mergeFields?2:0,t,n,i);Ip("Data must be an object, but it was:",o,r);const a=Ep(r,o);let l,c;if(s.merge)l=new pi(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=kp(t,r,n);if(!o.contains(i))throw new $r(zr.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Rp(e,i)||e.push(i)}l=new pi(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new ap(new ji(a),l,c)}class fp extends ip{_toFieldTransform(e){if(2!==e.kc)throw e.Uc(1===e.kc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fp}}function gp(e,t,n){return new up({kc:3,Kc:t.settings.Kc,methodName:e._methodName,Fc:n},t.databaseId,t.N,t.ignoreUndefinedProperties)}class mp extends ip{_toFieldTransform(e){return new qs(e.path,new Os)}isEqual(e){return e instanceof mp}}class yp extends ip{constructor(e,t){super(e),this.Qc=t}_toFieldTransform(e){const t=gp(this,e,!0),n=this.Qc.map(e=>Sp(e,t)),r=new Ds(n);return new qs(e.path,r)}isEqual(e){return this===e}}class _p extends ip{constructor(e,t){super(e),this.Qc=t}_toFieldTransform(e){const t=gp(this,e,!0),n=this.Qc.map(e=>Sp(e,t)),r=new Fs(n);return new qs(e.path,r)}isEqual(e){return this===e}}class vp extends ip{constructor(e,t){super(e),this.Wc=t}_toFieldTransform(e){const t=new Us(e.N,xs(e.N,this.Wc));return new qs(e.path,t)}isEqual(e){return this===e}}function wp(e,t,n,r){const i=e.jc(1,t,n);Ip("Data must be an object, but it was:",i,r);const s=[],o=ji.empty();ai(r,(e,r)=>{const a=Ap(t,e,n);r=(0,S.m9)(r);const l=i.Lc(a);if(r instanceof fp)s.push(a);else{const e=Sp(r,l);null!=e&&(s.push(a),o.set(a,e))}});const a=new pi(s);return new lp(o,a,i.fieldTransforms)}function bp(e,t,n,r,i,s){const o=e.jc(1,t,n),a=[kp(t,r,n)],l=[i];if(s.length%2!=0)throw new $r(zr.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(kp(t,s[d])),l.push(s[d+1]);const c=[],u=ji.empty();for(let d=a.length-1;d>=0;--d)if(!Rp(c,a[d])){const e=a[d];let t=l[d];t=(0,S.m9)(t);const n=o.Lc(e);if(t instanceof fp)c.push(e);else{const r=Sp(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new pi(c);return new lp(u,h,o.fieldTransforms)}function Tp(e,t,n,r=!1){return Sp(n,e.jc(r?4:3,t))}function Sp(e,t){if(Cp(e=(0,S.m9)(e)))return Ip("Unsupported field value:",t,e),Ep(e,t);if(e instanceof ip)return function(e,t){if(!cp(t.kc))throw t.Uc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Uc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&4!==t.kc)throw t.Uc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Sp(i,t.Bc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,S.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return xs(t.N,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ii.fromDate(e);return{timestampValue:Mo(t.N,n)}}if(e instanceof ii){const n=new ii(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Mo(t.N,n)}}if(e instanceof sp)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof rp)return{bytesValue:Uo(t.N,e._byteString)};if(e instanceof qd){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Uc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:qo(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Uc(`Unsupported field value: ${Fd(e)}`)}(e,t)}function Ep(e,t){const n={};return li(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ai(e,(e,r)=>{const i=Sp(r,t.Oc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Cp(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ii||e instanceof sp||e instanceof rp||e instanceof qd||e instanceof ip)}function Ip(e,t,n){if(!Cp(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Fd(n);throw t.Uc("an object"===r?e+" a custom object":e+" "+r)}}function kp(e,t,n){if((t=(0,S.m9)(t))instanceof np)return t._internalPath;if("string"==typeof t)return Ap(e,t);throw Pp("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}const xp=new RegExp("[~\\*/\\[\\]]");function Ap(e,t,n){if(t.search(xp)>=0)throw Pp(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new np(...t.split("."))._internalPath}catch(r){throw Pp(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Pp(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new $r(zr.INVALID_ARGUMENT,a+e+l)}function Rp(e,t){return e.some(e=>e.isEqual(t))}class Np{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new qd(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Op(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Dp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Op extends Np{data(){return super.data()}}function Dp(e,t){return"string"==typeof t?Ap(e,t):t instanceof np?t._internalPath:t._delegate._internalPath}class Lp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fp extends Np{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Mp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Dp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Mp extends Fp{data(e={}){return super.data(e)}}class Up{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Lp(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Mp(this._firestore,this._userDataWriter,n.key,n,new Lp(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new $r(zr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>({type:"added",doc:new Mp(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Lp(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Mp(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Lp(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Vp(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Vp(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return jr()}}function jp(e,t){return e instanceof Fp&&t instanceof Fp?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Up&&t instanceof Up&&e._firestore===t._firestore&&Zd(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function qp(e){if(ps(e)&&0===e.explicitOrderBy.length)throw new $r(zr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bp{}function zp(e,...t){for(const n of t)e=n._apply(e);return e}class $p extends Bp{constructor(e,t,n){super(),this.Gc=e,this.zc=t,this.Hc=n,this.type="where"}_apply(e){const t=dp(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new $r(zr.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on FieldPath.documentId().`);if("in"===s||"not-in"===s){Qp(o,s);const t=[];for(const n of o)t.push(Yp(r,e,n));a={arrayValue:{values:t}}}else a=Yp(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Qp(o,s),a=Tp(n,"where",o,"in"===s||"not-in"===s);const l=Ki.create(i,s,a);return function(e,t){if(t.v()){const n=gs(e);if(null!==n&&!n.isEqual(t.field))throw new $r(zr.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${t.field.toString()}'`);const r=fs(e);null!==r&&Jp(0,t.field,r)}const n=function(e,t){for(const n of e.filters)if(t.indexOf(n.op)>=0)return n.op;return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw new $r(zr.INVALID_ARGUMENT,n===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}(e,l),l}(e._query,0,t,e.firestore._databaseId,this.Gc,this.zc,this.Hc);return new Bd(e.firestore,e.converter,function(e,t){const n=e.filters.concat([t]);return new cs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}class Hp extends Bp{constructor(e,t){super(),this.Gc=e,this.Jc=t,this.type="orderBy"}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new $r(zr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new $r(zr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new ss(t,n);return function(e,t){if(null===fs(e)){const n=gs(e);null!==n&&Jp(0,n,t.field)}}(e,r),r}(e._query,this.Gc,this.Jc);return new Bd(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new cs(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Gp extends Bp{constructor(e,t,n){super(),this.type=e,this.Yc=t,this.Xc=n}_apply(e){return new Bd(e.firestore,e.converter,vs(e._query,this.Yc,this.Xc))}}class Zp extends Bp{constructor(e,t,n){super(),this.type=e,this.Zc=t,this.ta=n}_apply(e){const t=Wp(e,this.type,this.Zc,this.ta);return new Bd(e.firestore,e.converter,function(e,t){return new cs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class Kp extends Bp{constructor(e,t,n){super(),this.type=e,this.Zc=t,this.ta=n}_apply(e){const t=Wp(e,this.type,this.Zc,this.ta);return new Bd(e.firestore,e.converter,function(e,t){return new cs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Wp(e,t,n,r){if(n[0]=(0,S.m9)(n[0]),n[0]instanceof Np)return function(e,t,n,r,i){if(!r)throw new $r(zr.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const o of ys(e))if(o.field.isKeyField())s.push(Oi(t,r.key));else{const e=r.data.field(o.field);if(vi(e))throw new $r(zr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new $r(zr.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new rs(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=dp(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new $r(zr.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new $r(zr.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof s}`);if(!ms(e)&&-1!==s.indexOf("/"))throw new $r(zr.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${r}() must be a plain document ID, but '${s}' contains a slash.`);const n=e.path.child(ui.fromString(s));if(!Ci.isDocumentKey(n))throw new $r(zr.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new Ci(n);a.push(Oi(t,i))}else{const e=Tp(n,r,s);a.push(e)}}return new rs(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function Yp(e,t,n){if("string"==typeof(n=(0,S.m9)(n))){if(""===n)throw new $r(zr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ms(t)&&-1!==n.indexOf("/"))throw new $r(zr.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ui.fromString(n));if(!Ci.isDocumentKey(r))throw new $r(zr.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Oi(e,new Ci(r))}if(n instanceof qd)return Oi(e,n._key);throw new $r(zr.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fd(n)}.`)}function Qp(e,t){if(!Array.isArray(e)||0===e.length)throw new $r(zr.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new $r(zr.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function Jp(e,t,n){if(!n.isEqual(t))throw new $r(zr.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Xp{convertValue(e,t="none"){switch(Ii(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_i(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw jr()}}convertObject(e,t){const n={};return ai(e.fields,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new sp(yi(e.latitude),yi(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=wi(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(bi(e));default:return null}}convertTimestamp(e){const t=mi(e);return new ii(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ui.fromString(e);qr(da(n));const r=new Pd(n.get(1),n.get(3)),i=new Ci(n.popFirst(5));return r.isEqual(t)||Mr(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function ef(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class tf extends Xp{constructor(e){super(),this.firestore=e}convertBytes(e){return new rp(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qd(this.firestore,null,t)}}class nf{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=dp(e)}set(e,t,n){this._verifyNotCommitted();const r=rf(e,this._firestore),i=ef(r.converter,t,n),s=pp(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,zs.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=rf(e,this._firestore);let s;return s="string"==typeof(t=(0,S.m9)(t))||t instanceof np?bp(this._dataReader,"WriteBatch.update",i._key,t,n,r):wp(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(s.toMutation(i._key,zs.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=rf(e,this._firestore);return this._mutations=this._mutations.concat(new no(t._key,zs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new $r(zr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function rf(e,t){if((e=(0,S.m9)(e)).firestore!==t)throw new $r(zr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class sf extends Xp{constructor(e){super(),this.firestore=e}convertBytes(e){return new rp(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qd(this.firestore,null,t)}}function of(e,t,n){e=Md(e,qd);const r=Md(e.firestore,Qd),i=ef(e.converter,t,n);return cf(r,[pp(dp(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,zs.none())])}function af(e,t,n,...r){e=Md(e,qd);const i=Md(e.firestore,Qd),s=dp(i);let o;return o="string"==typeof(t=(0,S.m9)(t))||t instanceof np?bp(s,"updateDoc",e._key,t,n,r):wp(s,"updateDoc",e._key,t),cf(i,[o.toMutation(e._key,zs.exists(!0))])}function lf(e,...t){var n,r,i;e=(0,S.m9)(e);let s={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||Wd(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(Wd(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let l,c,u;if(e instanceof qd)c=Md(e.firestore,Qd),u=hs(e._key.path),l={next:n=>{t[o]&&t[o](uf(c,e,n))},error:t[o+1],complete:t[o+2]};else{const n=Md(e,Bd);c=Md(n.firestore,Qd),u=n._query;const r=new sf(c);l={next:e=>{t[o]&&t[o](new Up(c,r,n,e))},error:t[o+1],complete:t[o+2]},qp(e._query)}return function(e,t,n,r){const i=new ld(r),s=new eh(t,i,n);return e.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return Zu(yield Cd(e),s)})),()=>{i.ec(),e.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return Wu(yield Cd(e),s)}))}}(Jd(c),u,a,l)}function cf(e,t){return function(e,t){const n=new Hr;return e.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return function(e,t,n){return yh.apply(this,arguments)}(yield Ed(e),t,n)})),n.promise}(Jd(e),t)}function uf(e,t,n){const r=n.docs.get(t._key),i=new sf(e);return new Fp(e,i,t._key,r,new Lp(n.hasPendingWrites,n.fromCache),t.converter)}class hf extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=dp(e)}get(e){const t=rf(e,this._firestore),n=new tf(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return jr();const r=e[0];if(r.isFoundDocument())return new Np(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Np(this._firestore,n,t._key,null,t.converter);throw jr()})}set(e,t,n){const r=rf(e,this._firestore),i=ef(r.converter,t,n),s=pp(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n,...r){const i=rf(e,this._firestore);let s;return s="string"==typeof(t=(0,S.m9)(t))||t instanceof np?bp(this._dataReader,"Transaction.update",i._key,t,n,r):wp(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,s),this}delete(e){const t=rf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=rf(e,this._firestore),n=new sf(this._firestore);return super.get(e).then(e=>new Fp(this._firestore,n,t._key,e._document,new Lp(!1,!1),t.converter))}}function df(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new $r("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}function pf(){if("undefined"==typeof Uint8Array)throw new $r("unimplemented","Uint8Arrays are not available in this environment.")}function ff(){if("undefined"==typeof atob)throw new $r("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){!function(e){Or=e}(w.SDK_VERSION),(0,w._registerComponent)(new b.wA("firestore",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=new Qd(r,new Wr(e.getProvider("auth-internal")));return n=Object.assign({useFetchStreams:t},n),i._setSettings(n),i},"PUBLIC")),(0,w.registerVersion)(Rr,"3.3.1",e),(0,w.registerVersion)(Rr,"3.3.1","esm2017")}();class gf{constructor(e){this._delegate=e}static fromBase64String(e){return ff(),new gf(rp.fromBase64String(e))}static fromUint8Array(e){return pf(),new gf(rp.fromUint8Array(e))}toBase64(){return ff(),this._delegate.toBase64()}toUint8Array(){return pf(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function mf(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class yf{enableIndexedDbPersistence(e,t){return function(e,t){tp(e=Md(e,Qd));const n=Jd(e),r=e._freezeSettings(),i=new od;return ep(n,i,new id(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){tp(e=Md(e,Qd));const t=Jd(e),n=e._freezeSettings(),r=new od;return ep(t,r,new sd(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new $r(zr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Hr;return e._queue.enqueueAndForgetEvenWhileRestricted((0,v.Z)(function*(){try{yield(n=(0,v.Z)(function*(e){if(!Ua.bt())return Promise.resolve();const t=e+"main";yield Ua.delete(t)}),function(e){return n.apply(this,arguments)})(Yl(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var n})),t.promise}(e._delegate)}}class _f{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Pd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Ur("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){!function(e,t,n,r={}){var i;const s=(e=Md(e,jd))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&Ur("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${n}`,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Nr.MOCK_USER;else{t=(0,S.Sg)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new $r(zr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Nr(s)}e._credentials=new Kr(new Gr(t,n))}}(this._delegate,e,t,n)}enableNetwork(){return function(e){return function(e){return e.asyncQueue.enqueue((0,v.Z)(function*(){const t=yield bd(e),n=yield Sd(e);return t.setNetworkEnabled(!0),function(e){const t=Br(e);return t.Wr.delete(0),tu(t)}(n)}))}(Jd(e=Md(e,Qd)))}(this._delegate)}disableNetwork(){return function(e){return function(e){return e.asyncQueue.enqueue((0,v.Z)(function*(){const t=yield bd(e),n=yield Sd(e);return t.setNetworkEnabled(!1),(r=(0,v.Z)(function*(e){const t=Br(e);t.Wr.add(0),yield ru(t),t.Hr.set("Offline")}),function(e){return r.apply(this,arguments)})(n);var r}))}(Jd(e=Md(e,Qd)))}(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Od("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(e){return function(e){const t=new Hr;return e.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return function(e,t){return kh.apply(this,arguments)}(yield Ed(e),t)})),t.promise}(Jd(e=Md(e,Qd)))}(this._delegate)}onSnapshotsInSync(e){return function(e,t){return function(e,t){const n=new ld(t);return e.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return function(e,t){Br(e).so.add(t),t.next()}(yield Cd(e),n)})),()=>{n.ec(),e.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return function(e,t){Br(e).so.delete(t)}(yield Cd(e),n)}))}}(Jd(e=Md(e,Qd)),Wd(t)?t:{next:t})}(this._delegate,e)}get app(){if(!this._appCompat)throw new $r("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Nf(this,$d(this._delegate,e))}catch(t){throw Ef(t,"collection()","Firestore.collection()")}}doc(e){try{return new Sf(this,Hd(this._delegate,e))}catch(t){throw Ef(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Af(this,function(e,t){if(e=Md(e,jd),Nd("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new $r(zr.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Bd(e,null,function(e){return new cs(ui.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw Ef(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t){return function(e,t){const n=new Hr;return e.asyncQueue.enqueueAndForget((0,v.Z)(function*(){const r=yield function(e){return vd(e).then(e=>e.datastore)}(e);new hd(e.asyncQueue,r,t,n).run()})),n.promise}(Jd(e=Md(e,Qd)),n=>t(new hf(e,n)))}(this._delegate,t=>e(new wf(this,t)))}batch(){return Jd(this._delegate),new bf(new nf(this._delegate,e=>cf(this._delegate,e)))}loadBundle(e){return function(e,t){const n=Jd(e=Md(e,Qd)),r=new Yd;return function(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?(new TextEncoder).encode(e):e,function(e,t){return new cd(e,t)}(function(e,t){if(e instanceof Uint8Array)return ad(e,t);if(e instanceof ArrayBuffer)return ad(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Zc(t));e.asyncQueue.enqueueAndForget((0,v.Z)(function*(){!function(e,t,n){const r=Br(e);var i;(i=(0,v.Z)(function*(e,t,n){try{const r=yield t.getMetadata();if(yield function(e,t){const n=Br(e),r=jo(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",e=>n.Je.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(r)>=0)}(e.localStore,r))return yield t.close(),void n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r));n._updateProgress(ih(r));const i=new rh(r,e.localStore,t.N);let s=yield t.zo();for(;s;){const e=yield i.mo(s);e&&n._updateProgress(e),s=yield t.zo()}const o=yield i.complete();yield Lh(e,o.En,void 0),yield function(e,t){const n=Br(e);return n.persistence.runTransaction("Save bundle","readwrite",e=>n.Je.saveBundleMetadata(e,t))}(e.localStore,r),n._completeWith(o.progress)}catch(e){Ur("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e)}}),function(e,t,n){return i.apply(this,arguments)})(r,t,n).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield Ed(e),i,r)}))}(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return function(e,t){return function(e,t){return e.asyncQueue.enqueue((0,v.Z)(function*(){return function(e,t){const n=Br(e);return n.persistence.runTransaction("Get named query","readonly",e=>n.Je.getNamedQuery(e,t))}(yield Td(e),t)}))}(Jd(e=Md(e,Qd)),t).then(t=>t?new Bd(e,null,t.query):null)}(this._delegate,e).then(e=>e?new Af(this,e):null)}}class vf extends Xp{constructor(e){super(),this.firestore=e}convertBytes(e){return new gf(new rp(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Sf.forKey(t,this.firestore,null)}}class wf{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new vf(e)}get(e){const t=Of(e);return this._delegate.get(t).then(e=>new kf(this._firestore,new Fp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter)))}set(e,t,n){const r=Of(e);return n?(df("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=Of(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=Of(e);return this._delegate.delete(t),this}}class bf{constructor(e){this._delegate=e}set(e,t,n){const r=Of(e);return n?(df("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=Of(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=Of(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Tf{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new Mp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new xf(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Tf.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new Tf(e,new vf(e),t),r.set(t,i)),i}}Tf.INSTANCES=new WeakMap;class Sf{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new vf(e)}static forPath(e,t,n){if(e.length%2!=0)throw new $r("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Sf(t,new qd(t._delegate,n,new Ci(e)))}static forKey(e,t,n){return new Sf(t,new qd(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new Nf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Nf(this.firestore,$d(this._delegate,e))}catch(t){throw Ef(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,S.m9)(e))instanceof qd&&Gd(this._delegate,e)}set(e,t){t=df("DocumentReference.set",t);try{return t?of(this._delegate,e,t):of(this._delegate,e)}catch(n){throw Ef(n,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?af(this._delegate,e):af(this._delegate,e,t,...n)}catch(r){throw Ef(r,"updateDoc()","DocumentReference.update()")}}delete(){return function(e){return cf(Md(e.firestore,Qd),[new no(e._key,zs.none())])}(this._delegate)}onSnapshot(...e){const t=Cf(e),n=If(e,e=>new kf(this.firestore,new Fp(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)));return lf(this._delegate,t,n)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=Md(e,qd);const t=Md(e.firestore,Qd),n=Jd(t),r=new sf(t);return function(e,t){const n=new Hr;return e.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return(r=(0,v.Z)(function*(e,t,n){try{const r=yield function(e,t){const n=Br(e);return n.persistence.runTransaction("read document","readonly",e=>n.Qn.An(e,t))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new $r(zr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=qu(e,`Failed to get document '${t} from cache`);n.reject(r)}}),function(e,t,n){return r.apply(this,arguments)})(yield Td(e),t,n);var r})),n.promise}(n,e._key).then(n=>new Fp(t,r,e._key,n,new Lp(null!==n&&n.hasLocalMutations,!0),e.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Md(e,qd);const t=Md(e.firestore,Qd);return kd(Jd(t),e._key,{source:"server"}).then(n=>uf(t,e,n))}(this._delegate):function(e){e=Md(e,qd);const t=Md(e.firestore,Qd);return kd(Jd(t),e._key).then(n=>uf(t,e,n))}(this._delegate),t.then(e=>new kf(this.firestore,new Fp(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)))}withConverter(e){return new Sf(this.firestore,this._delegate.withConverter(e?Tf.getInstance(this.firestore,e):null))}}function Ef(e,t,n){return e.message=e.message.replace(t,n),e}function Cf(e){for(const t of e)if("object"==typeof t&&!mf(t))return t;return{}}function If(e,t){var n,r;let i;return i=mf(e[0])?e[0]:mf(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class kf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Sf(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return jp(this._delegate,e._delegate)}}class xf extends kf{data(e){const t=this._delegate.data(e);return function(e,t){e||jr()}(void 0!==t),t}}class Af{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new vf(e)}where(e,t,n){try{return new Af(this.firestore,zp(this._delegate,function(e,t,n){const r=t,i=Dp("where",e);return new $p(i,r,n)}(e,t,n)))}catch(r){throw Ef(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Af(this.firestore,zp(this._delegate,function(e,t="asc"){const n=t,r=Dp("orderBy",e);return new Hp(r,n)}(e,t)))}catch(n){throw Ef(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Af(this.firestore,zp(this._delegate,function(e){return Ud("limit",e),new Gp("limit",e,"F")}(e)))}catch(t){throw Ef(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Af(this.firestore,zp(this._delegate,function(e){return Ud("limitToLast",e),new Gp("limitToLast",e,"L")}(e)))}catch(t){throw Ef(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Af(this.firestore,zp(this._delegate,function(...e){return new Zp("startAt",e,!0)}(...e)))}catch(t){throw Ef(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Af(this.firestore,zp(this._delegate,function(...e){return new Zp("startAfter",e,!1)}(...e)))}catch(t){throw Ef(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Af(this.firestore,zp(this._delegate,function(...e){return new Kp("endBefore",e,!0)}(...e)))}catch(t){throw Ef(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Af(this.firestore,zp(this._delegate,function(...e){return new Kp("endAt",e,!1)}(...e)))}catch(t){throw Ef(t,"endAt()","Query.endAt()")}}isEqual(e){return Zd(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=Md(e,Bd);const t=Md(e.firestore,Qd),n=Jd(t),r=new sf(t);return function(e,t){const n=new Hr;return e.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return(r=(0,v.Z)(function*(e,t,n){try{const r=yield pc(e,t,!0),i=new ah(t,r.Gn),s=i.bo(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=qu(e,`Failed to execute query '${t} against cache`);n.reject(r)}}),function(e,t,n){return r.apply(this,arguments)})(yield Td(e),t,n);var r})),n.promise}(n,e._query).then(n=>new Up(t,r,e,n))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Md(e,Bd);const t=Md(e.firestore,Qd),n=Jd(t),r=new sf(t);return xd(n,e._query,{source:"server"}).then(n=>new Up(t,r,e,n))}(this._delegate):function(e){e=Md(e,Bd);const t=Md(e.firestore,Qd),n=Jd(t),r=new sf(t);return qp(e._query),xd(n,e._query).then(n=>new Up(t,r,e,n))}(this._delegate),t.then(e=>new Rf(this.firestore,new Up(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)))}onSnapshot(...e){const t=Cf(e),n=If(e,e=>new Rf(this.firestore,new Up(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)));return lf(this._delegate,t,n)}withConverter(e){return new Af(this.firestore,this._delegate.withConverter(e?Tf.getInstance(this.firestore,e):null))}}class Pf{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new xf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Rf{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Af(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new xf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(e=>new Pf(this._firestore,e))}forEach(e,t){this._delegate.forEach(n=>{e.call(t,new xf(this._firestore,n))})}isEqual(e){return jp(this._delegate,e._delegate)}}class Nf extends Af{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Sf(this.firestore,e):null}doc(e){try{return new Sf(this.firestore,void 0===e?Hd(this._delegate):Hd(this._delegate,e))}catch(t){throw Ef(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Md(e.firestore,Qd),r=Hd(e),i=ef(e.converter,t);return cf(n,[pp(dp(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,zs.exists(!1))]).then(()=>r)}(this._delegate,e).then(e=>new Sf(this.firestore,e))}isEqual(e){return Gd(this._delegate,e._delegate)}withConverter(e){return new Nf(this.firestore,this._delegate.withConverter(e?Tf.getInstance(this.firestore,e):null))}}function Of(e){return Md(e,qd)}class Df{constructor(...e){this._delegate=new np(...e)}static documentId(){return new Df(di.keyField().canonicalString())}isEqual(e){return(e=(0,S.m9)(e))instanceof np&&this._delegate._internalPath.isEqual(e._internalPath)}}class Lf{constructor(e){this._delegate=e}static serverTimestamp(){const e=new mp("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Lf(e)}static delete(){const e=new fp("deleteField");return e._methodName="FieldValue.delete",new Lf(e)}static arrayUnion(...e){const t=function(...e){return new yp("arrayUnion",e)}(...e);return t._methodName="FieldValue.arrayUnion",new Lf(t)}static arrayRemove(...e){const t=function(...e){return new _p("arrayRemove",e)}(...e);return t._methodName="FieldValue.arrayRemove",new Lf(t)}static increment(e){const t=function(e){return new vp("increment",e)}(e);return t._methodName="FieldValue.increment",new Lf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Ff={Firestore:_f,GeoPoint:sp,Timestamp:ii,Blob:gf,Transaction:wf,WriteBatch:bf,DocumentReference:Sf,DocumentSnapshot:kf,Query:Af,QueryDocumentSnapshot:xf,QuerySnapshot:Rf,CollectionReference:Nf,FieldPath:Df,FieldValue:Lf,setLogLevel:function(e){!function(e){Dr.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};var Mf;(Mf=_.Z).INTERNAL.registerComponent(new b.wA("firestore-compat",e=>{return t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("firestore").getImmediate(),new _f(t,n,new yf);var t,n},"PUBLIC").setServiceProps(Object.assign({},Ff))),Mf.registerVersion("@firebase/firestore-compat","0.1.8");var Uf=n(3820),Vf=n(5355),jf=n(7841);function qf(e,t){return function(e,t=s.z){return new o.y(n=>{let r;return null!=t?t.schedule(()=>{r=e.onSnapshot({includeMetadataChanges:!0},n)}):r=e.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(e,t)}function Bf(e,t){return qf(e,t).pipe((0,d.U)(e=>({payload:e,type:"query"})))}function zf(e,t){return Bf(e,t).pipe((0,u.O)(void 0),(0,h.G)(),(0,d.U)(([e,t])=>{const n=t.payload.docChanges(),r=n.map(e=>({type:e.type,payload:e}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(t.payload.metadata)&&t.payload.docs.forEach((t,i)=>{const s=n.find(e=>e.doc.ref.isEqual(t.ref)),o=null==e?void 0:e.payload.docs.find(e=>e.ref.isEqual(t.ref));s&&JSON.stringify(s.doc.metadata)===JSON.stringify(t.metadata)||!s&&o&&JSON.stringify(o.metadata)===JSON.stringify(t.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:t}})}),r}))}function $f(e,t,n){return zf(e,n).pipe((0,p.R)((e,n)=>function(e,t,n){return t.forEach(t=>{n.indexOf(t.type)>-1&&(e=function(e,t){switch(t.type){case"added":if(!e[t.newIndex]||!e[t.newIndex].doc.ref.isEqual(t.doc.ref))return Hf(e,t.newIndex,0,t);break;case"modified":if(null==e[t.oldIndex]||e[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const n=e.slice();return n.splice(t.oldIndex,1),n.splice(t.newIndex,0,t),n}return Hf(e,t.newIndex,1,t)}break;case"removed":if(e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref))return Hf(e,t.oldIndex,1)}return e}(e,t))}),e}(e,n.map(e=>e.payload),t),[]),(0,f.x)(),(0,d.U)(e=>e.map(e=>({type:e.type,payload:e}))))}function Hf(e,t,n,...r){const i=e.slice();return i.splice(t,n,...r),i}function Gf(e){return e&&0!==e.length||(e=["added","removed","modified"]),e}class Zf{constructor(e,t,n){this.ref=e,this.query=t,this.afs=n}stateChanges(e){let t=zf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,d.U)(t=>t.filter(t=>e.indexOf(t.type)>-1)))),t.pipe((0,u.O)(void 0),(0,h.G)(),(0,g.h)(([e,t])=>t.length>0||!e),(0,d.U)(([e,t])=>t),c.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,p.R)((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=Gf(e);return $f(this.query,t,this.afs.schedulers.outsideAngular).pipe(c.iC)}valueChanges(e={}){return Bf(this.query,this.afs.schedulers.outsideAngular).pipe((0,d.U)(t=>t.payload.docs.map(t=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data())),c.iC)}get(e){return(0,a.D)(this.query.get(e)).pipe(c.iC)}add(e){return this.ref.add(e)}doc(e){return new Kf(this.ref.doc(e),this.afs)}}class Kf{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const n=this.ref.collection(e),{ref:r,query:i}=eg(n,t);return new Zf(r,i,this.afs)}snapshotChanges(){return qf(this.ref,this.afs.schedulers.outsideAngular).pipe((0,u.O)(void 0),(0,h.G)(),(0,d.U)(([e,t])=>t.exists?(null==e?void 0:e.exists)?{payload:t,type:"modified"}:{payload:t,type:"added"}:{payload:t,type:"removed"})).pipe(c.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,d.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,a.D)(this.ref.get(e)).pipe(c.iC)}}class Wf{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?zf(this.query,this.afs.schedulers.outsideAngular).pipe((0,d.U)(t=>t.filter(t=>e.indexOf(t.type)>-1)),(0,g.h)(e=>e.length>0),c.iC):zf(this.query,this.afs.schedulers.outsideAngular).pipe(c.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,p.R)((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=Gf(e);return $f(this.query,t,this.afs.schedulers.outsideAngular).pipe(c.iC)}valueChanges(e={}){return Bf(this.query,this.afs.schedulers.outsideAngular).pipe((0,d.U)(t=>t.payload.docs.map(t=>e.idField?Object.assign({[e.idField]:t.id},t.data()):t.data())),c.iC)}get(e){return(0,a.D)(this.query.get(e)).pipe(c.iC)}}const Yf=new i.OlP("angularfire2.enableFirestorePersistence"),Qf=new i.OlP("angularfire2.firestore.persistenceSettings"),Jf=new i.OlP("angularfire2.firestore.settings"),Xf=new i.OlP("angularfire2.firestore.use-emulator");function eg(e,t=(e=>e)){return{query:t(e),ref:e}}let tg=(()=>{class e{constructor(e,t,n,r,i,s,o,c,u,h,d,p,f,g,_,v,w){this.schedulers=o;const b=(0,m.on)(e,s,t),T=u;h&&(0,Uf.nw)(b,s,d,f,g,_,p,v),[this.firestore,this.persistenceEnabled$]=(0,m.cc)(`${b.name}.firestore`,"AngularFirestore",b.name,()=>{const e=s.runOutsideAngular(()=>b.firestore());if(r&&e.settings(r),T&&e.useEmulator(...T),n&&!(0,y.PM)(i)){const t=()=>{try{return(0,a.D)(e.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(t){return"undefined"!=typeof console&&console.warn(t),(0,l.of)(!1)}};return[e,s.runOutsideAngular(t)]}return[e,(0,l.of)(!1)]},[r,T,n])}collection(e,t){let n;n="string"==typeof e?this.firestore.collection(e):e;const{ref:r,query:i}=eg(n,t),s=this.schedulers.ngZone.run(()=>r);return new Zf(s,i,this)}collectionGroup(e,t){const n=t||(e=>e),r=this.firestore.collectionGroup(e);return new Wf(n(r),this)}doc(e){let t;t="string"==typeof e?this.firestore.doc(e):e;const n=this.schedulers.ngZone.run(()=>t);return new Kf(n,this)}createId(){return this.firestore.collection("_").doc().id}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(m.Dh),i.LFG(m.xv,8),i.LFG(Yf,8),i.LFG(Jf,8),i.LFG(i.Lbi),i.LFG(i.R0b),i.LFG(c.HU),i.LFG(Qf,8),i.LFG(Xf,8),i.LFG(Uf.zQ,8),i.LFG(Uf.Qv,8),i.LFG(Uf.L6,8),i.LFG(Uf._Q,8),i.LFG(Uf.rT,8),i.LFG(Uf.lh,8),i.LFG(Uf.f7,8),i.LFG(Vf.nm,8))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),ng=(()=>{class e{constructor(){jf.Z.registerVersion("angularfire",c.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:e,providers:[{provide:Yf,useValue:!0},{provide:Qf,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[tg]}),e})()},8534:(e,t,n)=>{"use strict";n.d(t,{Q1:()=>Qe,TE:()=>Xe,hP:()=>Ze});var r=n(7574),i=n(5917),s=n(4402),o=n(7393),a=n(3637);class l{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new c(e,this.dueTime,this.scheduler))}}class c extends o.L{constructor(e,t,n){super(e),this.dueTime=t,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(u,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function u(e){e.debouncedNext()}var h=n(8002),d=n(3190),p=n(4459),f=n(7716),g=n(8747),m=n(156),y=n(6304),_=n(279),v=n(3854),w=n(8604);const b="firebasestorage.googleapis.com";class T extends v.ZR{constructor(e,t){super(S(e),`Firebase Storage: ${t} (${S(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,T.prototype)}_codeEquals(e){return S(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function S(e){return"storage/"+e}function E(){return new T("unknown","An unknown error occurred, please check the error payload for server response.")}function C(){return new T("canceled","User canceled the upload/download.")}function I(){return new T("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function k(e){return new T("invalid-argument",e)}function x(){return new T("app-deleted","The Firebase app was deleted.")}function A(e){return new T("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function P(e,t){return new T("invalid-format","String does not match format '"+e+"': "+t)}function R(e){throw new T("internal-error","Internal error: "+e)}class N{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=N.makeFromUrl(e,t)}catch(r){return new N(e,"")}if(""===n.path)return n;throw new T("invalid-default-bucket","Invalid default bucket '"+e+"'.")}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${t===b?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){let e=r[t.indices.path];e||(e=""),n=new N(r[t.indices.bucket],e),t.postModify(n);break}}if(null==n)throw function(e){return new T("invalid-url","Invalid URL '"+e+"'.")}(e);return n}}class O{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function D(e){return"string"==typeof e||e instanceof String}function L(e){return F()&&e instanceof Blob}function F(){return"undefined"!=typeof Blob}function M(e,t,n,r){if(r<t)throw k(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw k(`Invalid value for '${e}'. Expected ${n} or less.`)}function U(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function V(e){const t=encodeURIComponent;let n="?";for(const r in e)e.hasOwnProperty(r)&&(n=n+(t(r)+"=")+t(e[r])+"&");return n=n.slice(0,-1),n}var j=(()=>(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(j||(j={})),j))();class q{constructor(e,t,n,r,i,s,o,a,l,c,u){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());void 0!==e?n(e):n()}catch(s){r(s)}else if(null!==i){const e=E();e.serverResponse=i.getErrorText(),r(this.errorCallback_?this.errorCallback_(i,e):e)}else r(t.canceled?this.appDelete_?x():C():new T("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?e(0,new B(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(...e){c||(c=!0,t.apply(null,e))}function h(t){i=setTimeout(()=>{i=null,e(p,l())},t)}function d(){s&&clearTimeout(s)}function p(e,...t){if(c)return void d();if(e)return d(),void u.call(null,e,...t);if(l()||o)return d(),void u.call(null,e,...t);let n;r<64&&(r*=2),1===a?(a=2,n=0):n=1e3*(r+Math.random()),h(n)}let f=!1;function g(e){f||(f=!0,d(),c||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,g(!0)},n),g}((e,t)=>{if(t)return void e(!1,new B(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{null!==this.progressCallback_&&this.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===j.NO_ERROR,i=n.getStatus();if(!t||this.isRetryStatusCode_(i)){const t=n.getErrorCode()===j.ABORT;return void e(!1,new B(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new B(s,n))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}class B{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function z(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function $(...e){const t=z();if(void 0!==t){const n=new t;for(let t=0;t<e.length;t++)n.append(e[t]);return n.getBlob()}if(F())return new Blob(e);throw new T("unsupported-environment","This browser doesn't seem to support creating Blobs")}const H={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class G{constructor(e,t){this.data=e,this.contentType=t||null}}function Z(e,t){switch(e){case H.RAW:return new G(K(t));case H.BASE64:case H.BASE64URL:return new G(W(e,t));case H.DATA_URL:return new G(function(e){const t=new Y(e);return t.base64?W(H.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw P(H.DATA_URL,"Malformed data URL.")}return K(t)}(t.rest)}(t),new Y(t).contentType)}throw E()}function K(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):55296==(64512&r)?n<e.length-1&&56320==(64512&e.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function W(e,t){switch(e){case H.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw P(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break}case H.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r)throw P(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=atob(t)}catch(i){throw P(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class Y{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw P(H.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;var r,i;null!=n&&(this.base64=(r=n).length>=(i=";base64").length&&r.substring(r.length-i.length)===i,this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1)}}class Q{constructor(e,t){let n=0,r="";L(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(L(this.data_)){const s=(r=e,i=t,(n=this.data_).webkitSlice?n.webkitSlice(r,i):n.mozSlice?n.mozSlice(r,i):n.slice?n.slice(r,i):null);return null===s?null:new Q(s)}var n,r,i;{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Q(n,!0)}}static getBlob(...e){if(F()){const t=e.map(e=>e instanceof Q?e.data_:e);return new Q($.apply(null,t))}{const t=e.map(e=>D(e)?Z(H.RAW,e).data:e.data_);let n=0;t.forEach(e=>{n+=e.byteLength});const r=new Uint8Array(n);let i=0;return t.forEach(e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]}),new Q(r,!0)}}uploadData(){return this.data_}}function J(e){let t;try{t=JSON.parse(e)}catch(r){return null}return"object"!=typeof(n=t)||Array.isArray(n)?null:t;var n}function X(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function ee(e,t){return t}class te{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||ee}}let ne=null;function re(){if(ne)return ne;const e=[];e.push(new te("bucket")),e.push(new te("generation")),e.push(new te("metageneration")),e.push(new te("name","fullPath",!0));const t=new te("name");t.xform=function(e,t){return function(e){return!D(e)||e.length<2?e:X(e)}(t)},e.push(t);const n=new te("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new te("timeCreated")),e.push(new te("updated")),e.push(new te("md5Hash",null,!0)),e.push(new te("cacheControl",null,!0)),e.push(new te("contentDisposition",null,!0)),e.push(new te("contentEncoding",null,!0)),e.push(new te("contentLanguage",null,!0)),e.push(new te("contentType",null,!0)),e.push(new te("metadata","customMetadata",!0)),ne=e,ne}function ie(e,t,n){const r=J(t);return null===r?null:function(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=new N(e.bucket,e.fullPath);return t._makeStorageReference(n)}})}(r,e),r}(e,r,n)}function se(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class oe{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ae(e){if(!e)throw E()}function le(e,t){return function(n,r){const i=ie(e,r,t);return ae(null!==i),i}}function ce(e){return function(t,n){let r;return r=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?new T("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new T("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?new T("quota-exceeded","Quota for bucket '"+e.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===t.getStatus()?new T("unauthorized","User does not have permission to access '"+e.path+"'."):n,r.serverResponse=n.serverResponse,r}}function ue(e){const t=ce(e);return function(n,r){let i=t(n,r);return 404===n.getStatus()&&(i=new T("object-not-found","Object '"+e.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function he(e,t,n){const r=U(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new oe(r,"GET",le(e,n),i);return s.errorHandler=ue(t),s}function de(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return t&&t.type()||"application/octet-stream"}(0,t)),r}class pe{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function fe(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){ae(!1)}return ae(!!n&&-1!==(t||["active"]).indexOf(n)),n}const ge=262144,me={STATE_CHANGED:"state_changed"},ye={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function _e(e){switch(e){case"running":case"pausing":case"canceling":return ye.RUNNING;case"paused":return ye.PAUSED;case"success":return ye.SUCCESS;case"canceled":return ye.CANCELED;case"error":default:return ye.ERROR}}class ve{constructor(e,t,n){if("function"==typeof e||null!=t||null!=n)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function we(e){return(...t)=>{Promise.resolve().then(()=>e(...t))}}class be extends class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=j.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=j.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=j.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r){if(this.sent_)throw R("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw R("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw R("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw R("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw R("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Te(){return new be}class Se{constructor(e,t,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=re(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{this._request=void 0,this._chunkMultiplier=1,e._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=e,this._transition("error"))},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals("canceled")?this.completeTransitions_():(this._error=e,this._transition("error"))},this._promise=new Promise((e,t)=>{this._resolve=e,this._reject=t,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,n])=>{switch(this._state){case"running":e(t,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const n=function(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o=de(t,r,i),a={name:o.fullPath},l=U(s,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},u=se(o,n),h=new oe(l,"POST",function(e){let t;fe(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){ae(!1)}return ae(D(t)),t},e.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=u,h.errorHandler=ce(t),h}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,Te,e,t);this._request=r,r.getPromise().then(e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,n)=>{const r=function(e,t,n,r){const i=new oe(n,"POST",function(e){const t=fe(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(s){ae(!1)}n||ae(!1);const i=Number(n);return ae(!isNaN(i)),new pe(i,r.size(),"final"===t)},e.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=ce(t),i}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,Te,t,n);this._request=i,i.getPromise().then(e=>{e=e,this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=ge*this._chunkMultiplier,t=new pe(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((r,i)=>{let s;try{s=function(e,t,n,r,i,s,o,a){const l=new pe(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new T("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const h=l.current,d={"X-Goog-Upload-Command":u===c?"upload, finalize":"upload","X-Goog-Upload-Offset":`${l.current}`},p=r.slice(h,h+u);if(null===p)throw I();const f=new oe(n,"POST",function(e,n){const i=fe(e,["active","final"]),o=l.current+u,a=r.size();let c;return c="final"===i?le(t,s)(e,n):null,new pe(o,a,"final"===i,c)},t.maxUploadRetryTime);return f.headers=d,f.body=p.uploadData(),f.progressCallback=a||null,f.errorHandler=ce(e),f}(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(a){return this._error=a,void this._transition("error")}const o=this._ref.storage._makeRequest(s,Te,r,i);this._request=o,o.getPromise().then(e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){ge*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const n=he(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,Te,e,t);this._request=r,r.getPromise().then(e=>{this._request=void 0,this._metadata=e,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const n=function(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const l=de(t,r,i),c=se(l,n),u=Q.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===u)throw I();const h={name:l.fullPath},d=U(s,e.host,e._protocol),p=e.maxUploadRetryTime,f=new oe(d,"POST",le(e,n),p);return f.urlParams=h,f.headers=o,f.body=u.uploadData(),f.errorHandler=ce(t),f}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,Te,e,t);this._request=r,r.getPromise().then(e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=C(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=_e(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new ve(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(_e(this._state)){case ye.SUCCESS:we(this._resolve.bind(null,this.snapshot))();break;case ye.CANCELED:case ye.ERROR:we(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(_e(this._state)){case ye.RUNNING:case ye.PAUSED:e.next&&we(e.next.bind(e,this.snapshot))();break;case ye.SUCCESS:e.complete&&we(e.complete.bind(e))();break;case ye.CANCELED:case ye.ERROR:e.error&&we(e.error.bind(e,this._error))();break;default:e.error&&we(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Ee{constructor(e,t){this._service=e,this._location=t instanceof N?t:N.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ee(e,t)}get root(){const e=new N(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return X(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new N(this._location.bucket,e);return new Ee(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw A(e)}}function Ce(e,t,n){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,y.Z)(function*(e,t,n){const r={pageToken:n},i=yield ke(e,r);t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&(yield Ce(e,t,i.nextPageToken))})).apply(this,arguments)}function ke(e,t){null!=t&&"number"==typeof t.maxResults&&M("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=function(e,t,n,r,i){const s={};s.prefix=t.isRoot?"":t.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=U(t.bucketOnlyServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,l=new oe(o,"GET",function(e,t){return function(n,r){const i=function(e,t,n){const r=J(n);return null===r?null:function(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(const i of n.prefixes){const n=i.replace(/\/$/,""),s=e._makeStorageReference(new N(t,n));r.prefixes.push(s)}if(n.items)for(const i of n.items){const n=e._makeStorageReference(new N(t,i.name));r.items.push(n)}return r}(e,t,r)}(e,t,r);return ae(null!==i),i}}(e,t.bucket),a);return l.urlParams=s,l.errorHandler=ce(t),l}(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,Te)}function xe(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new N(e._location.bucket,n);return new Ee(e.storage,r)}function Ae(e,t){if(e instanceof Ne){const n=e;if(null==n._bucket)throw new T("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");const r=new Ee(n,n._bucket);return null!=t?Ae(r,t):r}return void 0!==t?xe(e,t):e}function Pe(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Ne)return new Ee(e,t);throw k("To use ref(service, url), the first argument must be a Storage instance.")}return Ae(e,t)}function Re(e,t){const n=null==t?void 0:t.storageBucket;return null==n?null:N.makeFromBucketSpec(n,e)}class Ne{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=b,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?N.makeFromBucketSpec(r,this._host):Re(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?N.makeFromBucketSpec(this._url,e):Re(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){M("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){M("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,y.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const e=yield t.getToken();if(null!==e)return e.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,y.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ee(this,e)}_makeRequest(e,t,n,r){if(this._deleted)return new O(x());{const i=function(e,t,n,r,i,s){const o=V(e.urlParams),a=e.url+o,l=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(l,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(l,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(l,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(l,r),new q(a,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}makeRequestWithTokens(e,t){var n=this;return(0,y.Z)(function*(){const[r,i]=yield Promise.all([n._getAuthToken(),n._getAppCheckToken()]);return n._makeRequest(e,t,r,i).getPromise()})()}}const Oe="@firebase/storage",De="0.9.0";function Le(e,t){return Pe(e=(0,v.m9)(e),t)}(0,_._registerComponent)(new w.wA("storage",function(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new Ne(n,r,i,t,_.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,_.registerVersion)(Oe,De,""),(0,_.registerVersion)(Oe,De,"esm2017");class Fe{constructor(e,t,n){this._delegate=e,this.task=t,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Me{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Fe(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(t=>{if(e)return e(new Fe(t,this,this._ref))},t)}on(e,t,n,r){let i;return t&&(i="function"==typeof t?e=>t(new Fe(e,this,this._ref)):{next:t.next?e=>t.next(new Fe(e,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,i,n||void 0,r||void 0)}}class Ue{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Ve(e,this._service))}get items(){return this._delegate.items.map(e=>new Ve(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ve{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(e,t){return xe(e,t)}(this._delegate,e);return new Ve(t,this.storage)}get root(){return new Ve(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Ve(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Me(function(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new Se(e,new Q(t),n)}(e=(0,v.m9)(e),t,n)}(this._delegate,e,t),this)}putString(e,t=H.RAW,n){this._throwIfRoot("putString");const r=Z(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Me(new Se(this._delegate,new Q(r.data,!0),i),this)}listAll(){return function(e){return function(e){const t={prefixes:[],items:[]};return Ce(e,t).then(()=>t)}(e=(0,v.m9)(e))}(this._delegate).then(e=>new Ue(e,this.storage))}list(e){return function(e,t){return ke(e=(0,v.m9)(e),t)}(this._delegate,e||void 0).then(e=>new Ue(e,this.storage))}getMetadata(){return function(e){return function(e){e._throwIfRoot("getMetadata");const t=he(e.storage,e._location,re());return e.storage.makeRequestWithTokens(t,Te)}(e=(0,v.m9)(e))}(this._delegate)}updateMetadata(e){return function(e,t){return function(e,t){e._throwIfRoot("updateMetadata");const n=function(e,t,n,r){const i=U(t.fullServerUrl(),e.host,e._protocol),s=se(n,r),o=e.maxOperationRetryTime,a=new oe(i,"PATCH",le(e,r),o);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=s,a.errorHandler=ue(t),a}(e.storage,e._location,t,re());return e.storage.makeRequestWithTokens(n,Te)}(e=(0,v.m9)(e),t)}(this._delegate,e)}getDownloadURL(){return function(e){return function(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=U(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new oe(r,"GET",function(e,t){return function(n,r){const i=ie(e,r,t);return ae(null!==i),function(e,t,n,r){const i=J(t);if(null===i)return null;if(!D(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(t=>{const i=e.fullPath;return U("/b/"+o(e.bucket)+"/o/"+o(i),n,r)+V({alt:"media",token:t})})[0]}(i,r,e.host,e._protocol)}}(e,n),i);return s.errorHandler=ue(t),s}(e.storage,e._location,re());return e.storage.makeRequestWithTokens(t,Te).then(e=>{if(null===e)throw new T("no-download-url","The given file does not have any download URLs.");return e})}(e=(0,v.m9)(e))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(e){return function(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=U(t.fullServerUrl(),e.host,e._protocol),r=new oe(n,"DELETE",function(e,t){},e.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=ue(t),r}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,Te)}(e=(0,v.m9)(e))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw A(e)}}class je{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(qe(e))throw k("ref() expected a child path but got a URL, use refFromURL instead.");return new Ve(Le(this._delegate,e),this)}refFromURL(e){if(!qe(e))throw k("refFromURL() expected a full URL but got a child path, use ref() instead.");try{N.makeFromUrl(e,this._delegate.host)}catch(t){throw k("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ve(Le(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,n={}){!function(e,t,n,r={}){!function(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"==typeof i?i:(0,v.Sg)(i,e.app.options.projectId))}(e,t,n,r)}(this._delegate,e,t,n)}}function qe(e){return/^[A-Za-z]+:\/\//.test(e)}function Be(e,{instanceIdentifier:t}){const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("storage").getImmediate({identifier:t});return new je(n,r)}!function(e){const t={TaskState:ye,TaskEvent:me,StringFormat:H,Storage:je,Reference:Ve};e.INTERNAL.registerComponent(new w.wA("storage-compat",Be,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.8")}(m.Z);var ze=n(5355),$e=n(7841);function He(e){const t=function(e){return new r.y(t=>{const n=e=>t.next(e);n(e.snapshot);const r=e.on("state_changed",n);return e.then(e=>{n(e),t.complete()},r=>{n(e.snapshot),(e=>{t.error(e)})(r)}),function(){r()}}).pipe(function(e,t=a.P){return n=>n.lift(new l(e,t))}(0))}(e);return{task:e,then:e.then.bind(e),catch:e.catch.bind(e),pause:e.pause.bind(e),cancel:e.cancel.bind(e),resume:e.resume.bind(e),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,h.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function Ge(e){return{getDownloadURL:()=>(0,i.of)(void 0).pipe(p.fc,(0,d.w)(()=>e.getDownloadURL()),p.iC),getMetadata:()=>(0,i.of)(void 0).pipe(p.fc,(0,d.w)(()=>e.getMetadata()),p.iC),delete:()=>(0,s.D)(e.delete()),child:t=>Ge(e.child(t)),updateMetadata:t=>(0,s.D)(e.updateMetadata(t)),put:(t,n)=>He(e.put(t,n)),putString:(t,n,r)=>He(e.putString(t,n,r)),list:t=>(0,s.D)(e.list(t)),listAll:()=>(0,s.D)(e.listAll())}}const Ze=new f.OlP("angularfire2.storageBucket"),Ke=new f.OlP("angularfire2.storage.maxUploadRetryTime"),We=new f.OlP("angularfire2.storage.maxOperationRetryTime"),Ye=new f.OlP("angularfire2.storage.use-emulator");let Qe=(()=>{class e{constructor(e,t,n,r,i,s,o,a,l,c){const u=(0,g.on)(e,i,t);this.storage=(0,g.cc)(`${u.name}.storage.${n}`,"AngularFireStorage",u.name,()=>{const e=i.runOutsideAngular(()=>u.storage(n||void 0)),t=l;return t&&e.useEmulator(...t),o&&e.setMaxUploadRetryTime(o),a&&e.setMaxOperationRetryTime(a),e},[o,a])}ref(e){return Ge(this.storage.ref(e))}refFromURL(e){return Ge(this.storage.refFromURL(e))}upload(e,t,n){return Ge(this.storage.ref(e)).put(t,n)}}return e.\u0275fac=function(t){return new(t||e)(f.LFG(g.Dh),f.LFG(g.xv,8),f.LFG(Ze,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(p.HU),f.LFG(Ke,8),f.LFG(We,8),f.LFG(Ye,8),f.LFG(ze.nm,8))},e.\u0275prov=f.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),Je=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.oAB({type:e}),e.\u0275inj=f.cJS({}),e})(),Xe=(()=>{class e{constructor(){$e.Z.registerVersion("angularfire",p.q4.full,"gcs-compat")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.oAB({type:e}),e.\u0275inj=f.cJS({providers:[Qe],imports:[Je]}),e})()},8747:(e,t,n)=>{"use strict";n.d(t,{hO:()=>g,xv:()=>h,Dh:()=>u,GT:()=>l,cc:()=>m,on:()=>d,pX:()=>a});var r=n(7716),i=n(7841),s=n(4459);e=n.hmd(e);const o=["ngOnDestroy"],a=(e,t,n,r={})=>new Proxy(e,{get:(i,s)=>n.runOutsideAngular(()=>{var i;if(e[s])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(s,e[s]),e[s];if(o.indexOf(s)>-1)return()=>{};const a=t.toPromise().then(e=>{const t=e&&e[s];return"function"==typeof t?t.bind(e):t&&t.then?t.then(e=>n.run(()=>e)):n.run(()=>t)});return new Proxy(()=>{},{get:(e,t)=>a[t],apply:(e,t,n)=>a.then(e=>{var t;const i=e&&e(...n);return(null===(t=null==r?void 0:r.spy)||void 0===t?void 0:t.apply)&&r.spy.apply(s,n,i),i})})})}),l=(e,t)=>{t.forEach(t=>{Object.getOwnPropertyNames(t.prototype||t).forEach(n=>{Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype||t,n))})})};class c{constructor(e){return e}}const u=new r.OlP("angularfire2.app.options"),h=new r.OlP("angularfire2.app.name");function d(t,n,r){const s="object"==typeof r&&r||{};s.name=s.name||"string"==typeof r&&r||"[DEFAULT]";const o=i.Z.apps.filter(e=>e&&e.name===s.name)[0]||n.runOutsideAngular(()=>i.Z.initializeApp(t,s));try{JSON.stringify(t)!==JSON.stringify(o.options)&&p("error",`${o.name} Firebase App already initialized with different options${e.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(a){}return new c(o)}const p=(e,...t)=>{(0,r.X6Q)()&&"undefined"!=typeof console&&console[e](...t)},f={provide:c,useFactory:d,deps:[u,r.R0b,[new r.FiY,h]]};let g=(()=>{class e{constructor(e){i.Z.registerVersion("angularfire",s.q4.full,"core"),i.Z.registerVersion("angularfire",s.q4.full,"app-compat"),i.Z.registerVersion("angular",r.q4F.full,e.toString())}static initializeApp(t,n){return{ngModule:e,providers:[{provide:u,useValue:t},{provide:h,useValue:n}]}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.Lbi))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[f]}),e})();function m(e,t,n,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(t=>t[0]===e)||[];if(s)return function(e,t){try{return e.toString()===t.toString()}catch(n){return e===t}}(i,o)||(_("error",`${t} was already initialized on the ${n} Firebase App with different settings.${y?" You may need to reload as Firebase is not HMR aware.":""}`),_("warn",{is:i,was:o})),s;{const t=r();return globalThis.\u0275AngularfireInstanceCache.push([e,t,i]),t}}const y=!!e.hot,_=(e,...t)=>{(0,r.X6Q)()&&"undefined"!=typeof console&&console[e](...t)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4459:(e,t,n)=>{"use strict";n.d(t,{q4:()=>On,iC:()=>Hn,fc:()=>$n,HU:()=>Bn,vb:()=>Un,JM:()=>Mn});var r=n(7716),i=n(2329),s=n(6304),o=n(279),a=n(3854),l=n(8604),c=n(9306),u=n(6676);const h="@firebase/installations",d="0.5.4",p="w:0.5.4",f="FIS_v2",g=new a.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function m(e){return e instanceof a.ZR&&e.code.includes("request-failed")}function y({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function _(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function v(e,t){return w.apply(this,arguments)}function w(){return(w=(0,s.Z)(function*(e,t){const n=(yield t.json()).error;return g.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})})).apply(this,arguments)}function b({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function T(e,{refreshToken:t}){const n=b(e);return n.append("Authorization",function(e){return`FIS_v2 ${e}`}(t)),n}function S(e){return E.apply(this,arguments)}function E(){return(E=(0,s.Z)(function*(e){const t=yield e();return t.status>=500&&t.status<600?e():t})).apply(this,arguments)}function C(e,t){return I.apply(this,arguments)}function I(){return(I=(0,s.Z)(function*(e,{fid:t}){const n=y(e),r={method:"POST",headers:b(e),body:JSON.stringify({fid:t,authVersion:f,appId:e.appId,sdkVersion:p})},i=yield S(()=>fetch(n,r));if(i.ok){const e=yield i.json();return{fid:e.fid||t,registrationStatus:2,refreshToken:e.refreshToken,authToken:_(e.authToken)}}throw yield v("Create Installation",i)})).apply(this,arguments)}function k(e){return new Promise(t=>{setTimeout(t,e)})}const x=/^[cdef][\w-]{21}$/;function A(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return x.test(t)?t:""}catch(e){return""}}function P(e){return`${e.appName}!${e.appId}`}const R=new Map;function N(e,t){const n=P(e);O(n,t),function(e,t){const n=(!D&&"BroadcastChannel"in self&&(D=new BroadcastChannel("[Firebase] FID Change"),D.onmessage=e=>{O(e.data.key,e.data.fid)}),D);n&&n.postMessage({key:e,fid:t}),0===R.size&&D&&(D.close(),D=null)}(n,t)}function O(e,t){const n=R.get(e);if(n)for(const r of n)r(t)}let D=null;const L="firebase-installations-store";let F=null;function M(){return F||(F=(0,u.openDb)("firebase-installations-database",1,e=>{switch(e.oldVersion){case 0:e.createObjectStore(L)}})),F}function U(e,t){return V.apply(this,arguments)}function V(){return(V=(0,s.Z)(function*(e,t){const n=P(e),r=(yield M()).transaction(L,"readwrite"),i=r.objectStore(L),s=yield i.get(n);return yield i.put(t,n),yield r.complete,s&&s.fid===t.fid||N(e,t.fid),t})).apply(this,arguments)}function j(e){return q.apply(this,arguments)}function q(){return(q=(0,s.Z)(function*(e){const t=P(e),n=(yield M()).transaction(L,"readwrite");yield n.objectStore(L).delete(t),yield n.complete})).apply(this,arguments)}function B(e,t){return z.apply(this,arguments)}function z(){return(z=(0,s.Z)(function*(e,t){const n=P(e),r=(yield M()).transaction(L,"readwrite"),i=r.objectStore(L),s=yield i.get(n),o=t(s);return void 0===o?yield i.delete(n):yield i.put(o,n),yield r.complete,!o||s&&s.fid===o.fid||N(e,o.fid),o})).apply(this,arguments)}function $(e){return H.apply(this,arguments)}function H(){return(H=(0,s.Z)(function*(e){let t;const n=yield B(e,n=>{const r=G(n),i=Z(e,r);return t=i.registrationPromise,i.installationEntry});return""===n.fid?{installationEntry:yield t}:{installationEntry:n,registrationPromise:t}})).apply(this,arguments)}function G(e){return J(e||{fid:A(),registrationStatus:0})}function Z(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(g.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(e,t){return K.apply(this,arguments)}(e,n)}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:W(e)}:{installationEntry:t}}function K(){return(K=(0,s.Z)(function*(e,t){try{return U(e,yield C(e,t))}catch(n){throw m(n)&&409===n.customData.serverCode?yield j(e):yield U(e,{fid:t.fid,registrationStatus:0}),n}})).apply(this,arguments)}function W(e){return Y.apply(this,arguments)}function Y(){return(Y=(0,s.Z)(function*(e){let t=yield Q(e);for(;1===t.registrationStatus;)yield k(100),t=yield Q(e);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=yield $(e);return n||t}return t})).apply(this,arguments)}function Q(e){return B(e,e=>{if(!e)throw g.create("installation-not-found");return J(e)})}function J(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function X(e,t){return ee.apply(this,arguments)}function ee(){return(ee=(0,s.Z)(function*({appConfig:e,platformLoggerProvider:t},n){const r=te(e,n),i=T(e,n),s=t.getImmediate({optional:!0});s&&i.append("x-firebase-client",s.getPlatformInfoString());const o={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:p}})},a=yield S(()=>fetch(r,o));if(a.ok)return _(yield a.json());throw yield v("Generate Auth Token",a)})).apply(this,arguments)}function te(e,{fid:t}){return`${y(e)}/${t}/authTokens:generate`}function ne(e){return re.apply(this,arguments)}function re(){return(re=(0,s.Z)(function*(e,t=!1){let n;const r=yield B(e.appConfig,r=>{if(!ce(r))throw g.create("not-registered");const i=r.authToken;if(!t&&ue(i))return r;if(1===i.requestStatus)return n=ie(e,t),r;{if(!navigator.onLine)throw g.create("app-offline");const t=he(r);return n=ae(e,t),t}});return n?yield n:r.authToken})).apply(this,arguments)}function ie(e,t){return se.apply(this,arguments)}function se(){return(se=(0,s.Z)(function*(e,t){let n=yield oe(e.appConfig);for(;1===n.authToken.requestStatus;)yield k(100),n=yield oe(e.appConfig);const r=n.authToken;return 0===r.requestStatus?ne(e,t):r})).apply(this,arguments)}function oe(e){return B(e,e=>{if(!ce(e))throw g.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var t})}function ae(e,t){return le.apply(this,arguments)}function le(){return(le=(0,s.Z)(function*(e,t){try{const n=yield X(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return yield U(e.appConfig,r),n}catch(n){if(!m(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});yield U(e.appConfig,n)}else yield j(e.appConfig);throw n}})).apply(this,arguments)}function ce(e){return void 0!==e&&2===e.registrationStatus}function ue(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(e)}function he(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function de(){return(de=(0,s.Z)(function*(e){const t=e,{installationEntry:n,registrationPromise:r}=yield $(t.appConfig);return r?r.catch(console.error):ne(t).catch(console.error),n.fid})).apply(this,arguments)}function pe(){return(pe=(0,s.Z)(function*(e,t=!1){const n=e;return yield fe(n.appConfig),(yield ne(n,t)).token})).apply(this,arguments)}function fe(e){return ge.apply(this,arguments)}function ge(){return(ge=(0,s.Z)(function*(e){const{registrationPromise:t}=yield $(e);t&&(yield t)})).apply(this,arguments)}function me(e){return g.create("missing-app-config-values",{valueName:e})}const ye="installations";(0,o._registerComponent)(new l.wA(ye,e=>{const t=e.getProvider("app").getImmediate();return{app:t,appConfig:function(e){if(!e||!e.options)throw me("App Configuration");if(!e.name)throw me("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw me(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),platformLoggerProvider:(0,o._getProvider)(t,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,o._registerComponent)(new l.wA("installations-internal",e=>{const t=e.getProvider("app").getImmediate(),n=(0,o._getProvider)(t,ye).getImmediate();return{getId:()=>function(e){return de.apply(this,arguments)}(n),getToken:e=>function(e){return pe.apply(this,arguments)}(n,e)}},"PRIVATE")),(0,o.registerVersion)(h,d),(0,o.registerVersion)(h,d,"esm2017");const _e="@firebase/remote-config",ve="0.3.3",we=new a.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class be{constructor(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const n=Date.now()-t,r=n<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${n}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${r}.`),r}fetch(e){var t=this;return(0,s.Z)(function*(){const[n,r]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(r&&t.isCachedDataFresh(e.cacheMaxAgeMillis,n))return r;e.eTag=r&&r.eTag;const i=yield t.client.fetch(e),s=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===i.status&&s.push(t.storage.setLastSuccessfulFetchResponse(i)),yield Promise.all(s),i})()}}function Te(e=navigator){return e.languages&&e.languages[0]||e.language}class Se{constructor(e,t,n,r,i,s){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=s}fetch(e){var t=this;return(0,s.Z)(function*(){const[n,r]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),i=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},o={sdk_version:t.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:t.appId,language_code:Te()},a={method:"POST",headers:s,body:JSON.stringify(o)},l=fetch(i,a),c=new Promise((t,n)=>{e.signal.addEventListener(()=>{const e=new Error("The operation was aborted.");e.name="AbortError",n(e)})});let u;try{yield Promise.race([l,c]),u=yield l}catch(g){let e="fetch-client-network";throw"AbortError"===g.name&&(e="fetch-timeout"),we.create(e,{originalErrorMessage:g.message})}let h=u.status;const d=u.headers.get("ETag")||void 0;let p,f;if(200===u.status){let e;try{e=yield u.json()}catch(g){throw we.create("fetch-client-parse",{originalErrorMessage:g.message})}p=e.entries,f=e.state}if("INSTANCE_STATE_UNSPECIFIED"===f?h=500:"NO_CHANGE"===f?h=304:"NO_TEMPLATE"!==f&&"EMPTY_CONFIG"!==f||(p={}),304!==h&&200!==h)throw we.create("fetch-status",{httpStatus:h});return{status:h,eTag:d,config:p}})()}}class Ee{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,s.Z)(function*(){const n=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,n)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:n}){var r=this;return(0,s.Z)(function*(){yield function(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(s),r(we.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(e.signal,t);try{const t=yield r.client.fetch(e);return yield r.storage.deleteThrottleMetadata(),t}catch(i){if(!function(e){if(!(e instanceof a.ZR&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(i))throw i;const t={throttleEndTimeMillis:Date.now()+(0,a.$s)(n),backoffCount:n+1};return yield r.storage.setThrottleMetadata(t),r.attemptFetch(e,t)}})()}}class Ce{constructor(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ie(e,t){const n=e.target.error||void 0;return we.create(t,{originalErrorMessage:n&&n.message})}const ke="app_namespace_store";class xe{constructor(e,t,n,r=function(){return new Promise((e,t)=>{try{const n=indexedDB.open("firebase_remote_config",1);n.onerror=e=>{t(Ie(e,"storage-open"))},n.onsuccess=t=>{e(t.target.result)},n.onupgradeneeded=e=>{const t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(ke,{keyPath:"compositeKey"})}}}catch(n){t(we.create("storage-open",{originalErrorMessage:n}))}})}()){this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,s.Z)(function*(){const n=yield t.openDbPromise;return new Promise((r,i)=>{const s=n.transaction([ke],"readonly").objectStore(ke),o=t.createCompositeKey(e);try{const e=s.get(o);e.onerror=e=>{i(Ie(e,"storage-get"))},e.onsuccess=e=>{const t=e.target.result;r(t?t.value:void 0)}}catch(a){i(we.create("storage-get",{originalErrorMessage:a&&a.message}))}})})()}set(e,t){var n=this;return(0,s.Z)(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{const o=r.transaction([ke],"readwrite").objectStore(ke),a=n.createCompositeKey(e);try{const e=o.put({compositeKey:a,value:t});e.onerror=e=>{s(Ie(e,"storage-set"))},e.onsuccess=()=>{i()}}catch(l){s(we.create("storage-set",{originalErrorMessage:l&&l.message}))}})})()}delete(e){var t=this;return(0,s.Z)(function*(){const n=yield t.openDbPromise;return new Promise((r,i)=>{const s=n.transaction([ke],"readwrite").objectStore(ke),o=t.createCompositeKey(e);try{const e=s.delete(o);e.onerror=e=>{i(Ie(e,"storage-delete"))},e.onsuccess=()=>{r()}}catch(a){i(we.create("storage-delete",{originalErrorMessage:a&&a.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class Ae{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,s.Z)(function*(){const t=e.storage.getLastFetchStatus(),n=e.storage.getLastSuccessfulFetchTimestampMillis(),r=e.storage.getActiveConfig(),i=yield t;i&&(e.lastFetchStatus=i);const s=yield n;s&&(e.lastSuccessfulFetchTimestampMillis=s);const o=yield r;o&&(e.activeConfig=o)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function Pe(){return Re.apply(this,arguments)}function Re(){return(Re=(0,s.Z)(function*(){if(!(0,a.hl)())return!1;try{return yield(0,a.eu)()}catch(e){return!1}})).apply(this,arguments)}(0,o._registerComponent)(new l.wA("remote-config",function(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw we.create("registration-window");if(!(0,a.hl)())throw we.create("indexed-db-unavailable");const{projectId:i,apiKey:s,appId:l}=n.options;if(!i)throw we.create("registration-project-id");if(!s)throw we.create("registration-api-key");if(!l)throw we.create("registration-app-id");const u=new xe(l,n.name,t=t||"firebase"),h=new Ae(u),d=new c.Yd(_e);d.logLevel=c.in.ERROR;const p=new Se(r,o.SDK_VERSION,t,i,s,l),f=new Ee(p,u),g=new be(f,u,h,d),m=new Ce(n,g,h,u,d);return function(e){const t=(0,a.m9)(e);t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then(()=>{t._isInitializationComplete=!0}))}(m),m},"PUBLIC").setMultipleInstances(!0)),(0,o.registerVersion)(_e,ve),(0,o.registerVersion)(_e,ve,"esm2017");const Ne="/firebase-messaging-sw.js",Oe="/firebase-cloud-messaging-push-scope",De="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";var Le=(()=>(function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(Le||(Le={})),Le))();function Fe(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Me(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length);for(let i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}const Ue="fcm_token_details_db",Ve="fcm_token_object_Store";function je(e){return qe.apply(this,arguments)}function qe(){return(qe=(0,s.Z)(function*(e){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(e=>e.name).includes(Ue))return null;let t=null;return(yield(0,u.openDb)(Ue,5,function(){var n=(0,s.Z)(function*(n){var r;if(n.oldVersion<2)return;if(!n.objectStoreNames.contains(Ve))return;const i=n.transaction.objectStore(Ve),s=yield i.index("fcmSenderId").get(e);if(yield i.clear(),s)if(2===n.oldVersion){const e=s;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:null!==(r=e.createTime)&&void 0!==r?r:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"==typeof e.vapidKey?e.vapidKey:Fe(e.vapidKey)}}}else if(3===n.oldVersion){const e=s;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:Fe(e.auth),p256dh:Fe(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:Fe(e.vapidKey)}}}else if(4===n.oldVersion){const e=s;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:Fe(e.auth),p256dh:Fe(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:Fe(e.vapidKey)}}}});return function(e){return n.apply(this,arguments)}}())).close(),yield(0,u.deleteDb)(Ue),yield(0,u.deleteDb)("fcm_vapid_details_db"),yield(0,u.deleteDb)("undefined"),Be(t)?t:null})).apply(this,arguments)}function Be(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}const ze="firebase-messaging-store";let $e=null;function He(){return $e||($e=(0,u.openDb)("firebase-messaging-database",1,e=>{switch(e.oldVersion){case 0:e.createObjectStore(ze)}})),$e}function Ge(e){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,s.Z)(function*(e){const t=Je(e),n=yield He(),r=yield n.transaction(ze).objectStore(ze).get(t);if(r)return r;{const t=yield je(e.appConfig.senderId);if(t)return yield Ke(e,t),t}})).apply(this,arguments)}function Ke(e,t){return We.apply(this,arguments)}function We(){return(We=(0,s.Z)(function*(e,t){const n=Je(e),r=(yield He()).transaction(ze,"readwrite");return yield r.objectStore(ze).put(t,n),yield r.complete,t})).apply(this,arguments)}function Ye(e){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,s.Z)(function*(e){const t=Je(e),n=(yield He()).transaction(ze,"readwrite");yield n.objectStore(ze).delete(t),yield n.complete})).apply(this,arguments)}function Je({appConfig:e}){return e.appId}const Xe=new a.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function et(e,t){return tt.apply(this,arguments)}function tt(){return(tt=(0,s.Z)(function*(e,t){const n=yield at(e),r=ct(t),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{const t=yield fetch(ot(e.appConfig),i);s=yield t.json()}catch(o){throw Xe.create("token-subscribe-failed",{errorInfo:o})}if(s.error)throw Xe.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw Xe.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function nt(e,t){return rt.apply(this,arguments)}function rt(){return(rt=(0,s.Z)(function*(e,t){const n=yield at(e),r=ct(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{const n=yield fetch(`${ot(e.appConfig)}/${t.token}`,i);s=yield n.json()}catch(o){throw Xe.create("token-update-failed",{errorInfo:o})}if(s.error)throw Xe.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw Xe.create("token-update-no-token");return s.token})).apply(this,arguments)}function it(e,t){return st.apply(this,arguments)}function st(){return(st=(0,s.Z)(function*(e,t){const n={method:"DELETE",headers:yield at(e)};try{const r=yield fetch(`${ot(e.appConfig)}/${t}`,n),i=yield r.json();if(i.error)throw Xe.create("token-unsubscribe-failed",{errorInfo:i.error.message})}catch(r){throw Xe.create("token-unsubscribe-failed",{errorInfo:r})}})).apply(this,arguments)}function ot({projectId:e}){return`https://fcmregistrations.googleapis.com/v1/projects/${e}/registrations`}function at(e){return lt.apply(this,arguments)}function lt(){return(lt=(0,s.Z)(function*({appConfig:e,installations:t}){const n=yield t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function ct({p256dh:e,auth:t,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:t,p256dh:e}};return r!==De&&(i.web.applicationPubKey=r),i}const ut=6048e5;function ht(e){return dt.apply(this,arguments)}function dt(){return(dt=(0,s.Z)(function*(e){const t=yield vt(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:Fe(t.getKey("auth")),p256dh:Fe(t.getKey("p256dh"))},r=yield Ge(e.firebaseDependencies);if(r){if(bt(r.subscriptionOptions,n))return Date.now()>=r.createTime+ut?gt(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield it(e.firebaseDependencies,r.token)}catch(i){console.warn(i)}return yt(e.firebaseDependencies,n)}return yt(e.firebaseDependencies,n)})).apply(this,arguments)}function pt(e){return ft.apply(this,arguments)}function ft(){return(ft=(0,s.Z)(function*(e){const t=yield Ge(e.firebaseDependencies);t&&(yield it(e.firebaseDependencies,t.token),yield Ye(e.firebaseDependencies));const n=yield e.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()})).apply(this,arguments)}function gt(e,t){return mt.apply(this,arguments)}function mt(){return(mt=(0,s.Z)(function*(e,t){try{const n=yield nt(e.firebaseDependencies,t),r=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return yield Ke(e.firebaseDependencies,r),n}catch(n){throw yield pt(e),n}})).apply(this,arguments)}function yt(e,t){return _t.apply(this,arguments)}function _t(){return(_t=(0,s.Z)(function*(e,t){const n={token:yield et(e,t),createTime:Date.now(),subscriptionOptions:t};return yield Ke(e,n),n.token})).apply(this,arguments)}function vt(e,t){return wt.apply(this,arguments)}function wt(){return(wt=(0,s.Z)(function*(e,t){return(yield e.pushManager.getSubscription())||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Me(t)})})).apply(this,arguments)}function bt(e,t){return t.vapidKey===e.vapidKey&&t.endpoint===e.endpoint&&t.auth===e.auth&&t.p256dh===e.p256dh}function Tt(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcm_message_id};return function(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const r=t.notification.body;r&&(e.notification.body=r);const i=t.notification.image;i&&(e.notification.image=i)}(t,e),function(e,t){t.data&&(e.data=t.data)}(t,e),function(e,t){if(!t.fcmOptions)return;e.fcmOptions={};const n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);const r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}(t,e),t}function St(e){return"object"==typeof e&&!!e&&"google.c.a.c_id"in e}function Et(e,t){const n=[];for(let r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));return n.join("")}function Ct(e){return Xe.create("missing-app-config-values",{valueName:e})}Et("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Et("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class It{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function(e){if(!e||!e.options)throw Ct("App Configuration Object");if(!e.name)throw Ct("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const r of t)if(!n[r])throw Ct(r);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}function kt(e){return xt.apply(this,arguments)}function xt(){return(xt=(0,s.Z)(function*(e){try{e.swRegistration=yield navigator.serviceWorker.register(Ne,{scope:Oe}),e.swRegistration.update().catch(()=>{})}catch(t){throw Xe.create("failed-service-worker-registration",{browserErrorMessage:t.message})}})).apply(this,arguments)}function At(e,t){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,s.Z)(function*(e,t){if(t||e.swRegistration||(yield kt(e)),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw Xe.create("invalid-sw-registration");e.swRegistration=t}})).apply(this,arguments)}function Rt(e,t){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,s.Z)(function*(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=De)})).apply(this,arguments)}function Ot(){return(Ot=(0,s.Z)(function*(e,t){if(!navigator)throw Xe.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Xe.create("permission-blocked");return yield Rt(e,null==t?void 0:t.vapidKey),yield At(e,null==t?void 0:t.serviceWorkerRegistration),ht(e)})).apply(this,arguments)}function Dt(e,t,n){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,s.Z)(function*(e,t,n){const r=Ft(t);(yield e.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n["google.c.a.c_id"],message_name:n["google.c.a.c_l"],message_time:n["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ft(e){switch(e){case Le.NOTIFICATION_CLICKED:return"notification_open";case Le.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Mt(){return(Mt=(0,s.Z)(function*(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===Le.PUSH_RECEIVED&&("function"==typeof e.onMessageHandler?e.onMessageHandler(Tt(n)):e.onMessageHandler.next(Tt(n)));const r=n.data;St(r)&&"1"===r["google.c.a.e"]&&(yield Dt(e,n.messageType,r))})).apply(this,arguments)}const Ut="@firebase/messaging",Vt="0.9.4";function jt(){return qt.apply(this,arguments)}function qt(){return(qt=(0,s.Z)(function*(){return"undefined"!=typeof window&&(0,a.hl)()&&(yield(0,a.eu)())&&(0,a.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,o._registerComponent)(new l.wA("messaging",e=>{const t=new It(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",e=>function(e,t){return Mt.apply(this,arguments)}(t,e)),t},"PUBLIC")),(0,o._registerComponent)(new l.wA("messaging-internal",e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:e=>function(e,t){return Ot.apply(this,arguments)}(t,e)}},"PRIVATE")),(0,o.registerVersion)(Ut,Vt),(0,o.registerVersion)(Ut,Vt,"esm2017");const Bt="analytics",zt="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$t="https://www.googletagmanager.com/gtag/js",Ht=new c.Yd("@firebase/analytics");function Gt(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function Zt(e,t){const n=document.createElement("script");n.src=`${$t}?l=${e}&id=${t}`,n.async=!0,document.head.appendChild(n)}function Kt(e,t,n,r,i,s){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,s.Z)(function*(e,t,n,r,i,s){const o=r[i];try{if(o)yield t[o];else{const e=(yield Gt(n)).find(e=>e.measurementId===i);e&&(yield t[e.appId])}}catch(a){Ht.error(a)}e("config",i,s)})).apply(this,arguments)}function Yt(e,t,n,r,i){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,s.Z)(function*(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=yield Gt(n);for(const n of e){const e=r.find(e=>e.measurementId===n),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),yield Promise.all(s),e("event",r,i||{})}catch(s){Ht.error(s)}})).apply(this,arguments)}function Jt(){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes($t))return t;return null}const Xt=new a.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),en=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function tn(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function nn(e){return rn.apply(this,arguments)}function rn(){return(rn=(0,s.Z)(function*(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:tn(r)},s=zt.replace("{app-id}",n),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=yield o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(a){}throw Xt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()})).apply(this,arguments)}function sn(e){return on.apply(this,arguments)}function on(){return(on=(0,s.Z)(function*(e,t=en,n){const{appId:r,apiKey:i,measurementId:o}=e.options;if(!r)throw Xt.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw Xt.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new hn;return setTimeout((0,s.Z)(function*(){l.abort()}),void 0!==n?n:6e4),an({appId:r,apiKey:i,measurementId:o},a,l,t)})).apply(this,arguments)}function an(e,t,n){return ln.apply(this,arguments)}function ln(){return(ln=(0,s.Z)(function*(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=en){const{appId:s,measurementId:o}=e;try{yield cn(r,t)}catch(l){if(o)return Ht.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l.message}]`),{appId:s,measurementId:o};throw l}try{const t=yield nn(e);return i.deleteThrottleMetadata(s),t}catch(l){if(!un(l)){if(i.deleteThrottleMetadata(s),o)return Ht.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l.message}]`),{appId:s,measurementId:o};throw l}const t=503===Number(l.customData.httpStatus)?(0,a.$s)(n,i.intervalMillis,30):(0,a.$s)(n,i.intervalMillis),c={throttleEndTimeMillis:Date.now()+t,backoffCount:n+1};return i.setThrottleMetadata(s,c),Ht.debug(`Calling attemptFetch again in ${t} millis`),an(e,c,r,i)}})).apply(this,arguments)}function cn(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(s),r(Xt.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function un(e){if(!(e instanceof a.ZR&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}class hn{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}function dn(){return pn.apply(this,arguments)}function pn(){return(pn=(0,s.Z)(function*(){if(!(0,a.hl)())return Ht.warn(Xt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,a.eu)()}catch(e){return Ht.warn(Xt.create("indexeddb-unavailable",{errorInfo:e}).message),!1}return!0})).apply(this,arguments)}function fn(){return(fn=(0,s.Z)(function*(e,t,n,r,i,s,o){var a;const l=sn(e);l.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Ht.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>Ht.error(e)),t.push(l);const c=dn().then(e=>e?r.getId():void 0),[u,h]=yield Promise.all([l,c]);Jt()||Zt(s,u.measurementId),i("js",new Date);const d=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return d.origin="firebase",d.update=!0,null!=h&&(d.firebase_id=h),i("config",u.measurementId,d),u.measurementId})).apply(this,arguments)}class gn{constructor(e){this.app=e}_delete(){return delete mn[this.app.options.appId],Promise.resolve()}}let mn={},yn=[];const _n={};let vn,wn,bn="dataLayer",Tn=!1;function Sn(){return(Sn=(0,s.Z)(function*(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=yield t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}})).apply(this,arguments)}function En(){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,s.Z)(function*(){if((0,a.ru)())return!1;if(!(0,a.zI)())return!1;if(!(0,a.hl)())return!1;try{return yield(0,a.eu)()}catch(e){return!1}})).apply(this,arguments)}const In="@firebase/analytics",kn="0.7.4";(0,o._registerComponent)(new l.wA(Bt,(e,{options:t})=>function(e,t,n){!function(){const e=[];if((0,a.ru)()&&e.push("This is a browser extension environment."),(0,a.zI)()||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>`(${t+1}) ${e}`).join(" "),n=Xt.create("invalid-analytics-context",{errorInfo:t});Ht.warn(n.message)}}();const r=e.options.appId;if(!r)throw Xt.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Xt.create("no-api-key");Ht.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=mn[r])throw Xt.create("already-exists",{id:r});if(!Tn){!function(e){let t=[];Array.isArray(window.dataLayer)?t=window.dataLayer:window.dataLayer=t}();const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let o=function(...e){window.dataLayer.push(arguments)};return window.gtag&&"function"==typeof window.gtag&&(o=window.gtag),window.gtag=function(e,t,n,r){function i(){return(i=(0,s.Z)(function*(i,s,o){try{"event"===i?yield Yt(e,t,n,s,o):"config"===i?yield Kt(e,t,n,r,s,o):e("set",s)}catch(a){Ht.error(a)}})).apply(this,arguments)}return function(e,t,n){return i.apply(this,arguments)}}(o,e,t,n),{gtagCore:o,wrappedGtag:window.gtag}}(mn,yn,_n);wn=e,vn=t,Tn=!0}return mn[r]=function(e,t,n,r,i,s,o){return fn.apply(this,arguments)}(e,yn,_n,t,vn,bn,n),new gn(e)}(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),(0,o._registerComponent)(new l.wA("analytics-internal",function(e){try{const t=e.getProvider(Bt).getImmediate();return{logEvent:(e,n,r)=>function(e,t,n,r){e=(0,a.m9)(e),function(e,t,n,r,i){return Sn.apply(this,arguments)}(wn,mn[e.app.options.appId],t,n,r).catch(e=>Ht.error(e))}(t,e,n,r)}}catch(t){throw Xt.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,o.registerVersion)(In,kn),(0,o.registerVersion)(In,kn,"esm2017");var xn=n(7771),An=n(3637),Pn=n(3342),Rn=n(309),Nn=n(9673);const On=new r.GfV("7.2.0"),Dn="__angularfire_symbol__analyticsIsSupported",Ln="__angularfire_symbol__remoteConfigIsSupported",Fn="__angularfire_symbol__messagingIsSupported";function Mn(e,t,n){if(t){if(1===t.length)return t[0];const e=t.filter(e=>e.app===n);if(1===e.length)return e[0]}return n.container.getProvider(e).getImmediate({optional:!0})}globalThis[Dn]||(globalThis[Dn]=En().then(e=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=e)),globalThis[Fn]||(globalThis[Fn]=jt().then(e=>globalThis.__angularfire_symbol__messagingIsSupportedValue=e)),globalThis[Ln]||(globalThis[Ln]=Pe().then(e=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=e));const Un=(e,t)=>{const n=t?[t]:(0,i.C6)(),r=[];return n.forEach(t=>{t.container.getProvider(e).instances.forEach(e=>{r.includes(e)||r.push(e)})}),r};function Vn(){}class jn{constructor(e,t=xn.N){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,n){const r=this.zone;return this.delegate.schedule(function(t){r.runGuarded(()=>{e.apply(this,[t])})},t,n)}}class qn{constructor(e){this.zone=e,this.task=null}call(e,t){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vn,{},Vn,Vn)),t.pipe((0,Pn.b)({next:n,complete:n,error:n})).subscribe(e).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Bn=(()=>{class e{constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new jn(Zone.current)),this.insideAngular=e.run(()=>new jn(Zone.current,An.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.R0b))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function zn(){const e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return e}function $n(e){return e.pipe((0,Rn.QV)(zn().outsideAngular))}function Hn(e){return zn(),(t=zn(),function(e){return(e=e.lift(new qn(t.ngZone))).pipe((0,Nn.R)(t.outsideAngular),(0,Rn.QV)(t.insideAngular))})(e);var t}},665:(e,t,n)=>{"use strict";n.d(t,{Fj:()=>m,qu:()=>je,u:()=>xe,sg:()=>be,x0:()=>Se,u5:()=>Ue,JJ:()=>j,JL:()=>q,On:()=>fe,YN:()=>Ne,wV:()=>ye,UX:()=>Ve,EJ:()=>Re,kI:()=>T,_Y:()=>ge,Kr:()=>Fe});var r=n(7716),i=n(8583),s=n(7574),o=n(9796),a=n(8002),l=n(1555),c=n(4402);function u(e,t){return new s.y(n=>{const r=e.length;if(0===r)return void n.complete();const i=new Array(r);let s=0,o=0;for(let a=0;a<r;a++){const l=(0,c.D)(e[a]);let u=!1;n.add(l.subscribe({next:e=>{u||(u=!0,o++),i[a]=e},error:e=>n.error(e),complete:()=>{s++,s!==r&&u||(o===r&&n.next(t?t.reduce((e,t,n)=>(e[t]=i[n],e),{}):i),n.complete())}}))}})}let h=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}setProperty(e,t){this._renderer.setProperty(this._elementRef.nativeElement,e,t)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.Qsj),r.Y36(r.SBq))},e.\u0275dir=r.lG2({type:e}),e})(),d=(()=>{class e extends h{}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.n5z(e)))(n||e)}}(),e.\u0275dir=r.lG2({type:e,features:[r.qOj]}),e})();const p=new r.OlP("NgValueAccessor"),f={provide:p,useExisting:(0,r.Gpc)(()=>m),multi:!0},g=new r.OlP("CompositionEventMode");let m=(()=>{class e extends h{constructor(e,t,n){super(e,t),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const e=(0,i.q)()?(0,i.q)().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(g,8))},e.\u0275dir=r.lG2({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&r.NdJ("input",function(e){return t._handleInput(e.target.value)})("blur",function(){return t.onTouched()})("compositionstart",function(){return t._compositionStart()})("compositionend",function(e){return t._compositionEnd(e.target.value)})},features:[r._Bn([f]),r.qOj]}),e})();function y(e){return null==e||0===e.length}function _(e){return null!=e&&"number"==typeof e.length}const v=new r.OlP("NgValidators"),w=new r.OlP("NgAsyncValidators"),b=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class T{static min(e){return function(e){return t=>{if(y(t.value)||y(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}(e)}static max(e){return function(e){return t=>{if(y(t.value)||y(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}(e)}static required(e){return function(e){return y(e.value)?{required:!0}:null}(e)}static requiredTrue(e){return function(e){return!0===e.value?null:{required:!0}}(e)}static email(e){return function(e){return y(e.value)||b.test(e.value)?null:{email:!0}}(e)}static minLength(e){return function(e){return t=>y(t.value)||!_(t.value)?null:t.value.length<e?{minlength:{requiredLength:e,actualLength:t.value.length}}:null}(e)}static maxLength(e){return function(e){return t=>_(t.value)&&t.value.length>e?{maxlength:{requiredLength:e,actualLength:t.value.length}}:null}(e)}static pattern(e){return function(e){if(!e)return S;let t,n;return"string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),e=>{if(y(e.value))return null;const r=e.value;return t.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return A(e)}static composeAsync(e){return R(e)}}function S(e){return null}function E(e){return null!=e}function C(e){const t=(0,r.QGY)(e)?(0,c.D)(e):e;return(0,r.CqO)(t),t}function I(e){let t={};return e.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function k(e,t){return t.map(t=>t(e))}function x(e){return e.map(e=>function(e){return!e.validate}(e)?e:t=>e.validate(t))}function A(e){if(!e)return null;const t=e.filter(E);return 0==t.length?null:function(e){return I(k(e,t))}}function P(e){return null!=e?A(x(e)):null}function R(e){if(!e)return null;const t=e.filter(E);return 0==t.length?null:function(e){return function(...e){if(1===e.length){const t=e[0];if((0,o.k)(t))return u(t,null);if((0,l.K)(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return u(e.map(e=>t[e]),e)}}if("function"==typeof e[e.length-1]){const t=e.pop();return u(e=1===e.length&&(0,o.k)(e[0])?e[0]:e,null).pipe((0,a.U)(e=>t(...e)))}return u(e,null)}(k(e,t).map(C)).pipe((0,a.U)(I))}}function N(e){return null!=e?R(x(e)):null}function O(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}function D(e){return e._rawValidators}function L(e){return e._rawAsyncValidators}let F=(()=>{class e{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=P(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=N(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.lG2({type:e}),e})(),M=(()=>{class e extends F{get formDirective(){return null}get path(){return null}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.n5z(e)))(n||e)}}(),e.\u0275dir=r.lG2({type:e,features:[r.qOj]}),e})();class U extends F{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class V{constructor(e){this._cd=e}is(e){var t,n,r;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(r=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===r?void 0:r[e])}}let j=(()=>{class e extends V{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(U,2))},e.\u0275dir=r.lG2({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&r.ekj("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))},features:[r.qOj]}),e})(),q=(()=>{class e extends V{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(M,10))},e.\u0275dir=r.lG2({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,t){2&e&&r.ekj("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))("ng-submitted",t.is("submitted"))},features:[r.qOj]}),e})();function B(e,t){return[...t.path,e]}function z(e,t){G(e,t),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&K(e,t)})}(e,t),function(e,t){const n=(e,n)=>{t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&K(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function(e,t){if(t.valueAccessor.setDisabledState){const n=e=>{t.valueAccessor.setDisabledState(e)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t)}function $(e,t,n=!0){const r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),Z(e,t),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function H(e,t){e.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function G(e,t){const n=D(e);null!==t.validator?e.setValidators(O(n,t.validator)):"function"==typeof n&&e.setValidators([n]);const r=L(e);null!==t.asyncValidator?e.setAsyncValidators(O(r,t.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();H(t._rawValidators,i),H(t._rawAsyncValidators,i)}function Z(e,t){let n=!1;if(null!==e){if(null!==t.validator){const r=D(e);if(Array.isArray(r)&&r.length>0){const i=r.filter(e=>e!==t.validator);i.length!==r.length&&(n=!0,e.setValidators(i))}}if(null!==t.asyncValidator){const r=L(e);if(Array.isArray(r)&&r.length>0){const i=r.filter(e=>e!==t.asyncValidator);i.length!==r.length&&(n=!0,e.setAsyncValidators(i))}}}const r=()=>{};return H(t._rawValidators,r),H(t._rawAsyncValidators,r),n}function K(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function W(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}function Y(e,t){if(!t)return null;let n,r,i;return Array.isArray(t),t.forEach(e=>{e.constructor===m?n=e:Object.getPrototypeOf(e.constructor)===d?r=e:i=e}),i||r||n||null}function Q(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const J="VALID",X="INVALID",ee="PENDING",te="DISABLED";function ne(e){return(oe(e)?e.validators:e)||null}function re(e){return Array.isArray(e)?P(e):e||null}function ie(e,t){return(oe(t)?t.asyncValidators:e)||null}function se(e){return Array.isArray(e)?N(e):e||null}function oe(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class ae{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=re(this._rawValidators),this._composedAsyncValidatorFn=se(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===J}get invalid(){return this.status===X}get pending(){return this.status==ee}get disabled(){return this.status===te}get enabled(){return this.status!==te}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=re(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=se(e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ee,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=te,this.errors=null,this._forEachChild(t=>{t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=J,this._forEachChild(t=>{t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==J&&this.status!==ee||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?te:J}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ee,this._hasOwnPendingAsyncValidator=!0;const t=C(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(t=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(t,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(e,t,n){if(null==t)return null;if(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length)return null;let r=e;return t.forEach(e=>{r=r instanceof ce?r.controls.hasOwnProperty(e)?r.controls[e]:null:r instanceof ue&&r.at(e)||null}),r}(this,e)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new r.vpe,this.statusChanges=new r.vpe}_calculateStatus(){return this._allControlsDisabled()?te:this.errors?X:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ee)?ee:this._anyControlsHaveStatus(X)?X:J}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){oe(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class le extends ae{constructor(e=null,t,n){super(ne(t),ie(n,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(e=>e(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Q(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Q(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class ce extends ae{constructor(e,t,n){super(ne(t),ie(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,n={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t instanceof le?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(e,t)=>!!t._syncPendingControls()||e);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const n=this.controls[t];if(this.contains(t)&&e(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,n)=>((t.enabled||this.disabled)&&(e[n]=t.value),e))}_reduceChildren(e,t){let n=e;return this._forEachChild((e,r)=>{n=t(n,e,r)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class ue extends ae{constructor(e,t,n){super(ne(t),ie(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,n={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((e,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((e,n)=>{this.at(n)&&this.at(n).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof le?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((e,t)=>!!t._syncPendingControls()||e,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let he=(()=>{class e extends M{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return B(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.n5z(e)))(n||e)}}(),e.\u0275dir=r.lG2({type:e,features:[r.qOj]}),e})();const de={provide:U,useExisting:(0,r.Gpc)(()=>fe)},pe=(()=>Promise.resolve(null))();let fe=(()=>{class e extends U{constructor(e,t,n,i){super(),this.control=new le,this._registered=!1,this.update=new r.vpe,this._parent=e,this._setValidators(t),this._setAsyncValidators(n),this.valueAccessor=Y(0,i)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),W(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?B(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){z(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){pe.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const t=e.isDisabled.currentValue,n=""===t||t&&"false"!==t;pe.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(M,9),r.Y36(v,10),r.Y36(w,10),r.Y36(p,10))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r._Bn([de]),r.qOj,r.TTD]}),e})(),ge=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.lG2({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})();const me={provide:p,useExisting:(0,r.Gpc)(()=>ye),multi:!0};let ye=(()=>{class e extends d{writeValue(e){this.setProperty("value",null==e?"":e)}registerOnChange(e){this.onChange=t=>{e(""==t?null:parseFloat(t))}}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.n5z(e)))(n||e)}}(),e.\u0275dir=r.lG2({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,t){1&e&&r.NdJ("input",function(e){return t.onChange(e.target.value)})("blur",function(){return t.onTouched()})},features:[r._Bn([me]),r.qOj]}),e})(),_e=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})();const ve=new r.OlP("NgModelWithFormControlWarning"),we={provide:M,useExisting:(0,r.Gpc)(()=>be)};let be=(()=>{class e extends M{constructor(e,t){super(),this.validators=e,this.asyncValidators=t,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new r.vpe,this._setValidators(e),this._setAsyncValidators(t)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Z(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const t=this.form.get(e.path);return z(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t}getControl(e){return this.form.get(e.path)}removeControl(e){$(e.control||null,e,!1),Q(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,t){this.form.get(e.path).setValue(t)}onSubmit(e){return this.submitted=!0,t=this.directives,this.form._syncPendingControls(),t.forEach(e=>{const t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)}),this.ngSubmit.emit(e),!1;var t}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const t=e.control,n=this.form.get(e.path);t!==n&&($(t||null,e),n instanceof le&&(z(n,e),e.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const t=this.form.get(e.path);(function(e,t){G(e,t)})(t,e),t.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const t=this.form.get(e.path);t&&function(e,t){return Z(e,t)}(t,e)&&t.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){G(this.form,this),this._oldForm&&Z(this._oldForm,this)}_checkFormPresent(){}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(v,10),r.Y36(w,10))},e.\u0275dir=r.lG2({type:e,selectors:[["","formGroup",""]],hostBindings:function(e,t){1&e&&r.NdJ("submit",function(e){return t.onSubmit(e)})("reset",function(){return t.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r._Bn([we]),r.qOj,r.TTD]}),e})();const Te={provide:M,useExisting:(0,r.Gpc)(()=>Se)};let Se=(()=>{class e extends he{constructor(e,t,n){super(),this._parent=e,this._setValidators(t),this._setAsyncValidators(n)}_checkParentType(){Ie(this._parent)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(M,13),r.Y36(v,10),r.Y36(w,10))},e.\u0275dir=r.lG2({type:e,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[r._Bn([Te]),r.qOj]}),e})();const Ee={provide:M,useExisting:(0,r.Gpc)(()=>Ce)};let Ce=(()=>{class e extends M{constructor(e,t,n){super(),this._parent=e,this._setValidators(t),this._setAsyncValidators(n)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return B(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){Ie(this._parent)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(M,13),r.Y36(v,10),r.Y36(w,10))},e.\u0275dir=r.lG2({type:e,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[r._Bn([Ee]),r.qOj]}),e})();function Ie(e){return!(e instanceof Se||e instanceof be||e instanceof Ce)}const ke={provide:U,useExisting:(0,r.Gpc)(()=>xe)};let xe=(()=>{class e extends U{constructor(e,t,n,i,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.update=new r.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(t),this._setAsyncValidators(n),this.valueAccessor=Y(0,i)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),W(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return B(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(M,13),r.Y36(v,10),r.Y36(w,10),r.Y36(p,10),r.Y36(ve,8))},e.\u0275dir=r.lG2({type:e,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r._Bn([ke]),r.qOj,r.TTD]}),e._ngModelWarningSentOnce=!1,e})();const Ae={provide:p,useExisting:(0,r.Gpc)(()=>Re),multi:!0};function Pe(e,t){return null==e?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let Re=(()=>{class e extends d{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const t=this._getOptionId(e);null==t&&this.setProperty("selectedIndex",-1);const n=Pe(t,e);this.setProperty("value",n)}registerOnChange(e){this.onChange=t=>{this.value=this._getOptionValue(t),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t),e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.n5z(e)))(n||e)}}(),e.\u0275dir=r.lG2({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,t){1&e&&r.NdJ("change",function(e){return t.onChange(e.target.value)})("blur",function(){return t.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([Ae]),r.qOj]}),e})(),Ne=(()=>{class e{constructor(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(Pe(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(Re,9))},e.\u0275dir=r.lG2({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})();const Oe={provide:p,useExisting:(0,r.Gpc)(()=>Le),multi:!0};function De(e,t){return null==e?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let Le=(()=>{class e extends d{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let t;if(this.value=e,Array.isArray(e)){const n=e.map(e=>this._getOptionId(e));t=(e,t)=>{e._setSelected(n.indexOf(t.toString())>-1)}}else t=(e,t)=>{e._setSelected(!1)};this._optionMap.forEach(t)}registerOnChange(e){this.onChange=t=>{const n=[];if(void 0!==t.selectedOptions){const e=t.selectedOptions;for(let t=0;t<e.length;t++){const r=e.item(t),i=this._getOptionValue(r.value);n.push(i)}}else{const e=t.options;for(let t=0;t<e.length;t++){const r=e.item(t);if(r.selected){const e=this._getOptionValue(r.value);n.push(e)}}}this.value=n,e(n)}}_registerOption(e){const t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t)._value,e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.n5z(e)))(n||e)}}(),e.\u0275dir=r.lG2({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,t){1&e&&r.NdJ("change",function(e){return t.onChange(e.target)})("blur",function(){return t.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([Oe]),r.qOj]}),e})(),Fe=(()=>{class e{constructor(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(De(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(De(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(Le,9))},e.\u0275dir=r.lG2({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})(),Me=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[_e]]}),e})(),Ue=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[Me]}),e})(),Ve=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:ve,useValue:t.warnOnNgModelWithFormControl}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[Me]}),e})(),je=(()=>{class e{group(e,t=null){const n=this._reduceControls(e);let r,i=null,s=null;return null!=t&&(function(e){return void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn}(t)?(i=null!=t.validators?t.validators:null,s=null!=t.asyncValidators?t.asyncValidators:null,r=null!=t.updateOn?t.updateOn:void 0):(i=null!=t.validator?t.validator:null,s=null!=t.asyncValidator?t.asyncValidator:null)),new ce(n,{asyncValidators:s,updateOn:r,validators:i})}control(e,t,n){return new le(e,t,n)}array(e,t,n){const r=e.map(e=>this._createControl(e));return new ue(r,t,n)}_reduceControls(e){const t={};return Object.keys(e).forEach(n=>{t[n]=this._createControl(e[n])}),t}_createControl(e){return e instanceof le||e instanceof ce||e instanceof ue?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:function(){return new e},token:e,providedIn:Ve}),e})()},240:(e,t,n)=>{"use strict";n.d(t,{gz:()=>nt,F0:()=>Cn,yS:()=>In,Bz:()=>Un,lC:()=>xn});var r=n(8583),i=n(7716),s=n(9765),o=n(7971);class a extends s.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.N;return this._value}next(e){super.next(this._value=e)}}var l=n(4869),c=n(9796),u=n(5197),h=n(509),d=n(6693);const p={};class f{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new g(e,this.resultSelector))}}class g extends u.L{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(p),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let n=0;n<t;n++)this.add((0,h.D)(this,e[n],void 0,n))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,n){const r=this.values,i=this.toRespond?r[n]===p?--this.toRespond:this.toRespond:0;r[n]=t,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}var m=n(7574),y=n(4402),_=n(9193);function v(e){return new m.y(t=>{let n;try{n=e()}catch(r){return void t.error(r)}return(n?(0,y.D)(n):(0,_.c)()).subscribe(t)})}var w=n(5917),b=n(3410),T=n(8071),S=n(2441),E=n(5345);function C(e){return function(t){const n=new I(e),r=t.lift(n);return n.caught=r}}class I{constructor(e){this.selector=e}call(e,t){return t.subscribe(new k(e,this.selector,this.caught))}}class k extends E.Ds{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const r=new E.IY(this);this.add(r);const i=(0,E.ft)(n,r);i!==r&&this.add(i)}}}var x=n(5435),A=n(7393),P=n(7108);function R(e){return function(t){return 0===e?(0,_.c)():t.lift(new N(e))}}class N{constructor(e){if(this.total=e,this.total<0)throw new P.W}call(e,t){return t.subscribe(new O(e,this.total))}}class O extends A.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=t++%n;e.next(r[i])}}e.complete()}}var D=n(4635),L=n(5242),F=n(4487),M=n(8002),U=n(3190),V=n(5257),j=n(9761),q=n(2145),B=n(4612),z=n(8049),$=n(9773),H=n(3342),G=n(1307),Z=n(8939),K=n(3282);class W{constructor(e,t){this.id=e,this.url=t}}class Y extends W{constructor(e,t,n="imperative",r=null){super(e,t),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Q extends W{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class J extends W{constructor(e,t,n){super(e,t),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class X extends W{constructor(e,t,n){super(e,t),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ee extends W{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class te extends W{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ne extends W{constructor(e,t,n,r,i){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class re extends W{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ie extends W{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class se{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class oe{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ae{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class le{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ce{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ue{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class he{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const de="primary";class pe{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function fe(e){return new pe(e)}function ge(e){const t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function me(e,t,n){const r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let s=0;s<r.length;s++){const t=r[s],n=e[s];if(t.startsWith(":"))i[t.substring(1)]=n;else if(t!==n.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function ye(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!_e(e[i],t[i]))return!1;return!0}function _e(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((e,t)=>r[t]===e)}return e===t}function ve(e){return Array.prototype.concat.apply([],e)}function we(e){return e.length>0?e[e.length-1]:null}function be(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function Te(e){return(0,i.CqO)(e)?e:(0,i.QGY)(e)?(0,y.D)(Promise.resolve(e)):(0,w.of)(e)}const Se={exact:function e(t,n,r){if(!Ne(t.segments,n.segments))return!1;if(!xe(t.segments,n.segments,r))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!t.children[i])return!1;if(!e(t.children[i],n.children[i],r))return!1}return!0},subset:Ie},Ee={exact:function(e,t){return ye(e,t)},subset:function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>_e(e[n],t[n]))},ignored:()=>!0};function Ce(e,t,n){return Se[n.paths](e.root,t.root,n.matrixParams)&&Ee[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function Ie(e,t,n){return ke(e,t,t.segments,n)}function ke(e,t,n,r){if(e.segments.length>n.length){const i=e.segments.slice(0,n.length);return!!Ne(i,n)&&!t.hasChildren()&&!!xe(i,n,r)}if(e.segments.length===n.length){if(!Ne(e.segments,n))return!1;if(!xe(e.segments,n,r))return!1;for(const n in t.children){if(!e.children[n])return!1;if(!Ie(e.children[n],t.children[n],r))return!1}return!0}{const i=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!!Ne(e.segments,i)&&!!xe(e.segments,i,r)&&!!e.children.primary&&ke(e.children.primary,t,s,r)}}function xe(e,t,n){return t.every((t,r)=>Ee[n](e[r].parameters,t.parameters))}class Ae{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fe(this.queryParams)),this._queryParamMap}toString(){return Le.serialize(this)}}class Pe{constructor(e,t){this.segments=e,this.children=t,this.parent=null,be(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Fe(this)}}class Re{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=fe(this.parameters)),this._parameterMap}toString(){return ze(this)}}function Ne(e,t){return e.length===t.length&&e.every((e,n)=>e.path===t[n].path)}class Oe{}class De{parse(e){const t=new Ke(e);return new Ae(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var t;return`/${Me(e.root,!0)}${function(e){const t=Object.keys(e).map(t=>{const n=e[t];return Array.isArray(n)?n.map(e=>`${Ve(t)}=${Ve(e)}`).join("&"):`${Ve(t)}=${Ve(n)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${t=e.fragment,encodeURI(t)}`:""}`}}const Le=new De;function Fe(e){return e.segments.map(e=>ze(e)).join("/")}function Me(e,t){if(!e.hasChildren())return Fe(e);if(t){const t=e.children.primary?Me(e.children.primary,!1):"",n=[];return be(e.children,(e,t)=>{t!==de&&n.push(`${t}:${Me(e,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}{const t=function(e,t){let n=[];return be(e.children,(e,r)=>{r===de&&(n=n.concat(t(e,r)))}),be(e.children,(e,r)=>{r!==de&&(n=n.concat(t(e,r)))}),n}(e,(t,n)=>n===de?[Me(e.children.primary,!1)]:[`${n}:${Me(t,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children.primary?`${Fe(e)}/${t[0]}`:`${Fe(e)}/(${t.join("//")})`}}function Ue(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ve(e){return Ue(e).replace(/%3B/gi,";")}function je(e){return Ue(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function qe(e){return decodeURIComponent(e)}function Be(e){return qe(e.replace(/\+/g,"%20"))}function ze(e){return`${je(e.path)}${t=e.parameters,Object.keys(t).map(e=>`;${je(e)}=${je(t[e])}`).join("")}`;var t}const $e=/^[^\/()?;=#]+/;function He(e){const t=e.match($e);return t?t[0]:""}const Ge=/^[^=?&#]+/,Ze=/^[^?&#]+/;class Ke{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Pe([],{}):new Pe([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new Pe(e,t)),n}parseSegment(){const e=He(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Re(qe(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=He(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=He(this.remaining);e&&(n=e,this.capture(n))}e[qe(t)]=qe(n)}parseQueryParam(e){const t=function(e){const t=e.match(Ge);return t?t[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=function(e){const t=e.match(Ze);return t?t[0]:""}(this.remaining);e&&(n=e,this.capture(n))}const r=Be(t),i=Be(n);if(e.hasOwnProperty(r)){let t=e[r];Array.isArray(t)||(t=[t],e[r]=t),t.push(i)}else e[r]=i}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=He(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=de);const s=this.parseChildren();t[i]=1===Object.keys(s).length?s.primary:new Pe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class We{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Ye(e,this._root);return t?t.children.map(e=>e.value):[]}firstChild(e){const t=Ye(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Qe(e,this._root);return t.length<2?[]:t[t.length-2].children.map(e=>e.value).filter(t=>t!==e)}pathFromRoot(e){return Qe(e,this._root).map(e=>e.value)}}function Ye(e,t){if(e===t.value)return t;for(const n of t.children){const t=Ye(e,n);if(t)return t}return null}function Qe(e,t){if(e===t.value)return[t];for(const n of t.children){const r=Qe(e,n);if(r.length)return r.unshift(t),r}return[]}class Je{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Xe(e){const t={};return e&&e.children.forEach(e=>t[e.value.outlet]=e),t}class et extends We{constructor(e,t){super(e),this.snapshot=t,ot(this,e)}toString(){return this.snapshot.toString()}}function tt(e,t){const n=function(e,t){const n=new it([],{},{},"",{},de,t,null,e.root,-1,{});return new st("",new Je(n,[]))}(e,t),r=new a([new Re("",{})]),i=new a({}),s=new a({}),o=new a({}),l=new a(""),c=new nt(r,i,o,l,s,de,t,n.root);return c.snapshot=n.root,new et(new Je(c,[]),n)}class nt{constructor(e,t,n,r,i,s,o,a){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,M.U)(e=>fe(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,M.U)(e=>fe(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function rt(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const e=n[r],t=n[r-1];if(e.routeConfig&&""===e.routeConfig.path)r--;else{if(t.component)break;r--}}return function(e){return e.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class it{constructor(e,t,n,r,i,s,o,a,l,c,u){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=l,this._lastPathIndex=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=fe(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fe(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class st extends We{constructor(e,t){super(t),this.url=e,ot(this,t)}toString(){return at(this._root)}}function ot(e,t){t.value._routerState=e,t.children.forEach(t=>ot(e,t))}function at(e){const t=e.children.length>0?` { ${e.children.map(at).join(", ")} } `:"";return`${e.value}${t}`}function lt(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,ye(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),ye(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!ye(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),ye(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function ct(e,t){var n,r;return ye(e.params,t.params)&&Ne(n=e.url,r=t.url)&&n.every((e,t)=>ye(e.parameters,r[t].parameters))&&!(!e.parent!=!t.parent)&&(!e.parent||ct(e.parent,t.parent))}function ut(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const i=function(e,t,n){return t.children.map(t=>{for(const r of n.children)if(e.shouldReuseRoute(t.value,r.value.snapshot))return ut(e,t,r);return ut(e,t)})}(e,t,n);return new Je(r,i)}{if(e.shouldAttach(t.value)){const n=e.retrieve(t.value);if(null!==n){const e=n.route;return ht(t,e),e}}const n=new nt(new a((r=t.value).url),new a(r.params),new a(r.queryParams),new a(r.fragment),new a(r.data),r.outlet,r.component,r),i=t.children.map(t=>ut(e,t));return new Je(n,i)}var r}function ht(e,t){if(e.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=e.value;for(let n=0;n<e.children.length;++n)ht(e.children[n],t.children[n])}function dt(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function pt(e){return"object"==typeof e&&null!=e&&e.outlets}function ft(e,t,n,r,i){let s={};return r&&be(r,(e,t)=>{s[t]=Array.isArray(e)?e.map(e=>`${e}`):`${e}`}),new Ae(n.root===e?t:gt(n.root,e,t),s,i)}function gt(e,t,n){const r={};return be(e.children,(e,i)=>{r[i]=e===t?n:gt(e,t,n)}),new Pe(e.segments,r)}class mt{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&dt(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(pt);if(r&&r!==we(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class yt{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function _t(e,t,n){if(e||(e=new Pe([],{})),0===e.segments.length&&e.hasChildren())return vt(e,t,n);const r=function(e,t,n){let r=0,i=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return s;const t=e.segments[i],o=n[r];if(pt(o))break;const a=`${o}`,l=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&l&&"object"==typeof l&&void 0===l.outlets){if(!St(a,l,t))return s;r+=2}else{if(!St(a,{},t))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const t=new Pe(e.segments.slice(0,r.pathIndex),{});return t.children.primary=new Pe(e.segments.slice(r.pathIndex),e.children),vt(t,0,i)}return r.match&&0===i.length?new Pe(e.segments,{}):r.match&&!e.hasChildren()?wt(e,t,n):r.match?vt(e,0,i):wt(e,t,n)}function vt(e,t,n){if(0===n.length)return new Pe(e.segments,{});{const r=function(e){return pt(e[0])?e[0].outlets:{[de]:e}}(n),i={};return be(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=_t(e.children[r],t,n))}),be(e.children,(e,t)=>{void 0===r[t]&&(i[t]=e)}),new Pe(e.segments,i)}}function wt(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){const s=n[i];if(pt(s)){const e=bt(s.outlets);return new Pe(r,e)}if(0===i&&dt(n[0])){r.push(new Re(e.segments[t].path,Tt(n[0]))),i++;continue}const o=pt(s)?s.outlets.primary:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&dt(a)?(r.push(new Re(o,Tt(a))),i+=2):(r.push(new Re(o,{})),i++)}return new Pe(r,{})}function bt(e){const t={};return be(e,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=wt(new Pe([],{}),0,e))}),t}function Tt(e){const t={};return be(e,(e,n)=>t[n]=`${e}`),t}function St(e,t,n){return e==n.path&&ye(t,n.parameters)}class Et{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),lt(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=Xe(t);e.children.forEach(e=>{const t=e.value.outlet;this.deactivateRoutes(e,r[t],n),delete r[t]}),be(r,(e,t)=>{this.deactivateRouteAndItsChildren(e,n)})}deactivateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(e,t,i.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet);if(n&&n.outlet){const t=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:t,route:e,contexts:r})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,i=Xe(e);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(e,t,n){const r=Xe(t);e.children.forEach(e=>{this.activateRoutes(e,r[e.value.outlet],n),this.forwardEvent(new ue(e.value.snapshot))}),e.children.length&&this.forwardEvent(new le(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(lt(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,i.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const t=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const e=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),t.children.onOutletReAttached(e.contexts),t.attachRef=e.componentRef,t.route=e.route.value,t.outlet&&t.outlet.attach(e.componentRef,e.route.value),Ct(e.route)}else{const n=function(e){for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;t.attachRef=null,t.route=r,t.resolver=i,t.outlet&&t.outlet.activateWith(r,i),this.activateChildRoutes(e,null,t.children)}}else this.activateChildRoutes(e,null,n)}}function Ct(e){lt(e.value),e.children.forEach(Ct)}class It{constructor(e,t){this.routes=e,this.module=t}}function kt(e){return"function"==typeof e}function xt(e){return e instanceof Ae}const At=Symbol("INITIAL_VALUE");function Pt(){return(0,U.w)(e=>function(...e){let t,n;return(0,l.K)(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&(0,c.k)(e[0])&&(e=e[0]),(0,d.n)(e,n).lift(new f(t))}(e.map(e=>e.pipe((0,V.q)(1),(0,j.O)(At)))).pipe((0,q.R)((e,t)=>{let n=!1;return t.reduce((e,r,i)=>{if(e!==At)return e;if(r===At&&(n=!0),!n){if(!1===r)return r;if(i===t.length-1||xt(r))return r}return e},e)},At),(0,x.h)(e=>e!==At),(0,M.U)(e=>xt(e)?e:!0===e),(0,V.q)(1)))}let Rt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&i._UZ(0,"router-outlet")},directives:function(){return[xn]},encapsulation:2}),e})();function Nt(e,t=""){for(let n=0;n<e.length;n++){const r=e[n];Ot(r,Dt(t,r))}}function Ot(e,t){e.children&&Nt(e.children,t)}function Dt(e,t){return t?e||t.path?e&&!t.path?`${e}/`:!e&&t.path?t.path:`${e}/${t.path}`:"":e}function Lt(e){const t=e.children&&e.children.map(Lt),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==de&&(n.component=Rt),n}function Ft(e){return e.outlet||de}function Mt(e,t){const n=e.filter(e=>Ft(e)===t);return n.push(...e.filter(e=>Ft(e)!==t)),n}const Ut={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Vt(e,t,n){var r;if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?Object.assign({},Ut):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(t.matcher||me)(n,e,t);if(!i)return Object.assign({},Ut);const s={};be(i.posParams,(e,t)=>{s[t]=e.path});const o=i.consumed.length>0?Object.assign(Object.assign({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function jt(e,t,n,r,i="corrected"){if(n.length>0&&function(e,t,n){return n.some(n=>qt(e,t,n)&&Ft(n)!==de)}(e,n,r)){const i=new Pe(t,function(e,t,n,r){const i={};i.primary=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const s of n)if(""===s.path&&Ft(s)!==de){const n=new Pe([],{});n._sourceSegment=e,n._segmentIndexShift=t.length,i[Ft(s)]=n}return i}(e,t,r,new Pe(n,e.children)));return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(n=>qt(e,t,n))}(e,n,r)){const s=new Pe(e.segments,function(e,t,n,r,i,s){const o={};for(const a of r)if(qt(e,n,a)&&!i[Ft(a)]){const n=new Pe([],{});n._sourceSegment=e,n._segmentIndexShift="legacy"===s?e.segments.length:t.length,o[Ft(a)]=n}return Object.assign(Object.assign({},i),o)}(e,t,n,r,e.children,i));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const s=new Pe(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}function qt(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function Bt(e,t,n,r){return!!(Ft(e)===r||r!==de&&qt(t,n,e))&&("**"===e.path||Vt(t,e,n).matched)}function zt(e,t,n){return 0===t.length&&!e.children[n]}class $t{constructor(e){this.segmentGroup=e||null}}class Ht{constructor(e){this.urlTree=e}}function Gt(e){return new m.y(t=>t.error(new $t(e)))}function Zt(e){return new m.y(t=>t.error(new Ht(e)))}function Kt(e){return new m.y(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class Wt{constructor(e,t,n,r,s){this.configLoader=t,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(i.h0i)}apply(){const e=jt(this.urlTree.root,[],[],this.config).segmentGroup,t=new Pe(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,de).pipe((0,M.U)(e=>this.createUrlTree(Yt(e),this.urlTree.queryParams,this.urlTree.fragment))).pipe(C(e=>{if(e instanceof Ht)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof $t)throw this.noMatchError(e);throw e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,de).pipe((0,M.U)(t=>this.createUrlTree(Yt(t),e.queryParams,e.fragment))).pipe(C(e=>{if(e instanceof $t)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,n){const r=e.segments.length>0?new Pe([],{[de]:e}):e;return new Ae(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe((0,M.U)(e=>new Pe([],e))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,y.D)(r).pipe((0,B.b)(r=>{const i=n.children[r],s=Mt(t,r);return this.expandSegmentGroup(e,s,i,r).pipe((0,M.U)(e=>({segment:e,outlet:r})))}),(0,q.R)((e,t)=>(e[t.outlet]=t.segment,e),{}),function(e,t){const n=arguments.length>=2;return r=>r.pipe(e?(0,x.h)((t,n)=>e(t,n,r)):F.y,R(1),n?(0,L.d)(t):(0,D.T)(()=>new b.K))}())}expandSegment(e,t,n,r,i,s){return(0,y.D)(n).pipe((0,B.b)(o=>this.expandSegmentAgainstRoute(e,t,n,o,r,i,s).pipe(C(e=>{if(e instanceof $t)return(0,w.of)(null);throw e}))),(0,z.P)(e=>!!e),C((e,n)=>{if(e instanceof b.K||"EmptyError"===e.name){if(zt(t,r,i))return(0,w.of)(new Pe([],{}));throw new $t(t)}throw e}))}expandSegmentAgainstRoute(e,t,n,r,i,s,o){return Bt(r,t,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s):Gt(t):Gt(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Zt(i):this.lineralizeSegments(n,i).pipe((0,$.zg)(n=>{const i=new Pe(n,{});return this.expandSegment(e,i,t,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s){const{matched:o,consumedSegments:a,lastChild:l,positionalParamSegments:c}=Vt(t,r,i);if(!o)return Gt(t);const u=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Zt(u):this.lineralizeSegments(r,u).pipe((0,$.zg)(r=>this.expandSegment(e,t,n,r.concat(i.slice(l)),s,!1)))}matchSegmentAgainstRoute(e,t,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,w.of)(n._loadedConfig):this.configLoader.load(e.injector,n)).pipe((0,M.U)(e=>(n._loadedConfig=e,new Pe(r,{})))):(0,w.of)(new Pe(r,{}));const{matched:s,consumedSegments:o,lastChild:a}=Vt(t,n,r);if(!s)return Gt(t);const l=r.slice(a);return this.getChildConfig(e,n,r).pipe((0,$.zg)(e=>{const r=e.module,s=e.routes,{segmentGroup:a,slicedSegments:c}=jt(t,o,l,s),u=new Pe(a.segments,a.children);if(0===c.length&&u.hasChildren())return this.expandChildren(r,s,u).pipe((0,M.U)(e=>new Pe(o,e)));if(0===s.length&&0===c.length)return(0,w.of)(new Pe(o,{}));const h=Ft(n)===i;return this.expandSegment(r,u,s,c,h?de:i,!0).pipe((0,M.U)(e=>new Pe(o.concat(e.segments),e.children)))}))}getChildConfig(e,t,n){return t.children?(0,w.of)(new It(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,w.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe((0,$.zg)(n=>n?this.configLoader.load(e.injector,t).pipe((0,M.U)(e=>(t._loadedConfig=e,e))):function(e){return new m.y(t=>t.error(ge(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(t))):(0,w.of)(new It([],e))}runCanLoadGuards(e,t,n){const r=t.canLoad;if(!r||0===r.length)return(0,w.of)(!0);const i=r.map(r=>{const i=e.get(r);let s;if(function(e){return e&&kt(e.canLoad)}(i))s=i.canLoad(t,n);else{if(!kt(i))throw new Error("Invalid CanLoad guard");s=i(t,n)}return Te(s)});return(0,w.of)(i).pipe(Pt(),(0,H.b)(e=>{if(!xt(e))return;const t=ge(`Redirecting to "${this.urlSerializer.serialize(e)}"`);throw t.url=e,t}),(0,M.U)(e=>!0===e))}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,w.of)(n);if(r.numberOfChildren>1||!r.children.primary)return Kt(e.redirectTo);r=r.children.primary}}applyRedirectCommands(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreatreUrlTree(e,t,n,r){const i=this.createSegmentGroup(e,t.root,n,r);return new Ae(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return be(e,(e,r)=>{if("string"==typeof e&&e.startsWith(":")){const i=e.substring(1);n[r]=t[i]}else n[r]=e}),n}createSegmentGroup(e,t,n,r){const i=this.createSegments(e,t.segments,n,r);let s={};return be(t.children,(t,i)=>{s[i]=this.createSegmentGroup(e,t,n,r)}),new Pe(i,s)}createSegments(e,t,n,r){return t.map(t=>t.path.startsWith(":")?this.findPosParam(e,t,r):this.findOrReturn(t,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}function Yt(e){const t={};for(const n of Object.keys(e.children)){const r=Yt(e.children[n]);(r.segments.length>0||r.hasChildren())&&(t[n]=r)}return function(e){if(1===e.numberOfChildren&&e.children.primary){const t=e.children.primary;return new Pe(e.segments.concat(t.segments),t.children)}return e}(new Pe(e.segments,t))}class Qt{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Jt{constructor(e,t){this.component=e,this.route=t}}function Xt(e,t,n){const r=e._root;return tn(r,t?t._root:null,n,[r.value])}function en(e,t,n){const r=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function tn(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Xe(t);return e.children.forEach(e=>{!function(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,o=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!Ne(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Ne(e.url,t.url)||!ye(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ct(e,t)||!ye(e.queryParams,t.queryParams);case"paramsChange":default:return!ct(e,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Qt(r)):(s.data=o.data,s._resolvedData=o._resolvedData),tn(e,t,s.component?a?a.children:null:n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Jt(a.outlet.component,o))}else o&&nn(t,a,i),i.canActivateChecks.push(new Qt(r)),tn(e,null,s.component?a?a.children:null:n,r,i)}(e,s[e.value.outlet],n,r.concat([e.value]),i),delete s[e.value.outlet]}),be(s,(e,t)=>nn(e,n.getContext(t),i)),i}function nn(e,t,n){const r=Xe(e),i=e.value;be(r,(e,r)=>{nn(e,i.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new Jt(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}class rn{}function sn(e){return new m.y(t=>t.error(e))}class on{constructor(e,t,n,r,i,s){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){const e=jt(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,de);if(null===t)return null;const n=new it([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},de,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Je(n,t),i=new st(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(e){const t=e.value,n=rt(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}processChildren(e,t){const n=[];for(const i of Object.keys(t.children)){const r=t.children[i],s=Mt(e,i),o=this.processSegmentGroup(s,r,i);if(null===o)return null;n.push(...o)}const r=ln(n);return r.sort((e,t)=>e.value.outlet===de?-1:t.value.outlet===de?1:e.value.outlet.localeCompare(t.value.outlet)),r}processSegment(e,t,n,r){for(const i of e){const e=this.processSegmentAgainstRoute(i,t,n,r);if(null!==e)return e}return zt(t,n,r)?[]:null}processSegmentAgainstRoute(e,t,n,r){if(e.redirectTo||!Bt(e,t,n,r))return null;let i,s=[],o=[];if("**"===e.path){const r=n.length>0?we(n).parameters:{};i=new it(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,hn(e),Ft(e),e.component,e,cn(t),un(t)+n.length,dn(e))}else{const r=Vt(t,e,n);if(!r.matched)return null;s=r.consumedSegments,o=n.slice(r.lastChild),i=new it(s,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,hn(e),Ft(e),e.component,e,cn(t),un(t)+s.length,dn(e))}const a=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:l,slicedSegments:c}=jt(t,s,o,a.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution);if(0===c.length&&l.hasChildren()){const e=this.processChildren(a,l);return null===e?null:[new Je(i,e)]}if(0===a.length&&0===c.length)return[new Je(i,[])];const u=Ft(e)===r,h=this.processSegment(a,l,c,u?de:r);return null===h?null:[new Je(i,h)]}}function an(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function ln(e){const t=[],n=new Set;for(const r of e){if(!an(r)){t.push(r);continue}const e=t.find(e=>r.value.routeConfig===e.value.routeConfig);void 0!==e?(e.children.push(...r.children),n.add(e)):t.push(r)}for(const r of n){const e=ln(r.children);t.push(new Je(r.value,e))}return t.filter(e=>!n.has(e))}function cn(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function un(e){let t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function hn(e){return e.data||{}}function dn(e){return e.resolve||{}}function pn(e){return(0,U.w)(t=>{const n=e(t);return n?(0,y.D)(n).pipe((0,M.U)(()=>t)):(0,w.of)(t)})}class fn extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const gn=new i.OlP("ROUTES");class mn{constructor(e,t,n,r){this.loader=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const n=this.loadModuleFactory(t.loadChildren).pipe((0,M.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(t);const r=n.create(e);return new It(ve(r.injector.get(gn,void 0,i.XFs.Self|i.XFs.Optional)).map(Lt),r)}),C(e=>{throw t._loader$=void 0,e}));return t._loader$=new S.c(n,()=>new s.xQ).pipe((0,G.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,y.D)(this.loader.load(e)):Te(e()).pipe((0,$.zg)(e=>e instanceof i.YKP?(0,w.of)(e):(0,y.D)(this.compiler.compileModuleAsync(e))))}}class yn{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new _n,this.attachRef=null}}class _n{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new yn,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class vn{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function wn(e){throw e}function bn(e,t,n){return t.parse("/")}function Tn(e,t){return(0,w.of)(null)}const Sn={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},En={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Cn=(()=>{class e{constructor(e,t,n,r,o,l,c,u){this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=n,this.location=r,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new s.xQ,this.errorHandler=wn,this.malformedUriErrorHandler=bn,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Tn,afterPreactivation:Tn},this.urlHandlingStrategy=new vn,this.routeReuseStrategy=new fn,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(i.h0i),this.console=o.get(i.c2e);const h=o.get(i.R0b);this.isNgZoneEnabled=h instanceof i.R0b&&i.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Ae(new Pe([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new mn(l,c,e=>this.triggerEvent(new se(e)),e=>this.triggerEvent(new oe(e))),this.routerState=tt(this.currentUrlTree,this.rootComponentType),this.transitions=new a({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const t=this.events;return e.pipe((0,x.h)(e=>0!==e.id),(0,M.U)(e=>Object.assign(Object.assign({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),(0,U.w)(e=>{let n=!1,r=!1;return(0,w.of)(e).pipe((0,H.b)(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,U.w)(e=>{const n=!this.navigated||e.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return(0,w.of)(e).pipe((0,U.w)(e=>{const n=this.transitions.getValue();return t.next(new Y(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),n!==this.transitions.getValue()?_.E:Promise.resolve(e)}),(r=this.ngModule.injector,i=this.configLoader,s=this.urlSerializer,o=this.config,(0,U.w)(e=>function(e,t,n,r,i){return new Wt(e,t,n,r,i).apply()}(r,i,s,e.extractedUrl,o).pipe((0,M.U)(t=>Object.assign(Object.assign({},e),{urlAfterRedirects:t}))))),(0,H.b)(e=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,t,n,r,i){return(0,$.zg)(s=>function(e,t,n,r,i="emptyOnly",s="legacy"){try{const o=new on(e,t,n,r,i,s).recognize();return null===o?sn(new rn):(0,w.of)(o)}catch(o){return sn(o)}}(e,t,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe((0,M.U)(e=>Object.assign(Object.assign({},s),{targetSnapshot:e}))))}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,H.b)(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,e),this.browserUrlTree=e.urlAfterRedirects);const n=new ee(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(n)}));var r,i,s,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:o}=e,a=new Y(n,this.serializeUrl(r),i,s);t.next(a);const l=tt(r,this.rootComponentType).snapshot;return(0,w.of)(Object.assign(Object.assign({},e),{targetSnapshot:l,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),_.E}),pn(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.beforePreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,H.b)(e=>{const t=new te(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),(0,M.U)(e=>Object.assign(Object.assign({},e),{guards:Xt(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,t){return(0,$.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?(0,w.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return(0,y.D)(e).pipe((0,$.zg)(e=>function(e,t,n,r,i){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,w.of)(!0);const o=s.map(s=>{const o=en(s,t,i);let a;if(function(e){return e&&kt(e.canDeactivate)}(o))a=Te(o.canDeactivate(e,t,n,r));else{if(!kt(o))throw new Error("Invalid CanDeactivate guard");a=Te(o(e,t,n,r))}return a.pipe((0,z.P)())});return(0,w.of)(o).pipe(Pt())}(e.component,e.route,n,t,r)),(0,z.P)(e=>!0!==e,!0))}(o,r,i,e).pipe((0,$.zg)(n=>n&&"boolean"==typeof n?function(e,t,n,r){return(0,y.D)(t).pipe((0,B.b)(t=>(0,T.z)(function(e,t){return null!==e&&t&&t(new ae(e)),(0,w.of)(!0)}(t.route.parent,r),function(e,t){return null!==e&&t&&t(new ce(e)),(0,w.of)(!0)}(t.route,r),function(e,t,n){const r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(e=>function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)).filter(e=>null!==e).map(t=>v(()=>{const i=t.guards.map(i=>{const s=en(i,t.node,n);let o;if(function(e){return e&&kt(e.canActivateChild)}(s))o=Te(s.canActivateChild(r,e));else{if(!kt(s))throw new Error("Invalid CanActivateChild guard");o=Te(s(r,e))}return o.pipe((0,z.P)())});return(0,w.of)(i).pipe(Pt())}));return(0,w.of)(i).pipe(Pt())}(e,t.path,n),function(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return(0,w.of)(!0);const i=r.map(r=>v(()=>{const i=en(r,t,n);let s;if(function(e){return e&&kt(e.canActivate)}(i))s=Te(i.canActivate(t,e));else{if(!kt(i))throw new Error("Invalid CanActivate guard");s=Te(i(t,e))}return s.pipe((0,z.P)())}));return(0,w.of)(i).pipe(Pt())}(e,t.route,n))),(0,z.P)(e=>!0!==e,!0))}(r,s,e,t):(0,w.of)(n)),(0,M.U)(e=>Object.assign(Object.assign({},n),{guardsResult:e})))})}(this.ngModule.injector,e=>this.triggerEvent(e)),(0,H.b)(e=>{if(xt(e.guardsResult)){const t=ge(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw t.url=e.guardsResult,t}const t=new ne(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(t)}),(0,x.h)(e=>!!e.guardsResult||(this.restoreHistory(e),this.cancelNavigationTransition(e,""),!1)),pn(e=>{if(e.guards.canActivateChecks.length)return(0,w.of)(e).pipe((0,H.b)(e=>{const t=new re(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),(0,U.w)(e=>{let t=!1;return(0,w.of)(e).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,(0,$.zg)(e=>{const{targetSnapshot:t,guards:{canActivateChecks:i}}=e;if(!i.length)return(0,w.of)(e);let s=0;return(0,y.D)(i).pipe((0,B.b)(e=>function(e,t,n,r){return function(e,t,n,r){const i=Object.keys(e);if(0===i.length)return(0,w.of)({});const s={};return(0,y.D)(i).pipe((0,$.zg)(i=>function(e,t,n,r){const i=en(e,t,r);return Te(i.resolve?i.resolve(t,n):i(t,n))}(e[i],t,n,r).pipe((0,H.b)(e=>{s[i]=e}))),R(1),(0,$.zg)(()=>Object.keys(s).length===i.length?(0,w.of)(s):_.E))}(e._resolve,e,t,r).pipe((0,M.U)(t=>(e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),rt(e,n).resolve),null)))}(e.route,t,n,r)),(0,H.b)(()=>s++),R(1),(0,$.zg)(t=>s===i.length?(0,w.of)(e):_.E))})),(0,H.b)({next:()=>t=!0,complete:()=>{t||(this.restoreHistory(e),this.cancelNavigationTransition(e,"At least one route resolver didn't emit any value."))}}));var n,r}),(0,H.b)(e=>{const t=new ie(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}))}),pn(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.afterPreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,M.U)(e=>{const t=function(e,t,n){const r=ut(e,t._root,n?n._root:void 0);return new et(r,t)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:t})}),(0,H.b)(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,e),this.browserUrlTree=e.urlAfterRedirects)}),(i=this.rootContexts,s=this.routeReuseStrategy,o=e=>this.triggerEvent(e),(0,M.U)(e=>(new Et(s,e.targetRouterState,e.currentRouterState,o).activate(i),e))),(0,H.b)({next(){n=!0},complete(){n=!0}}),(0,Z.x)(()=>{if(!n&&!r){const t=`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(e),this.cancelNavigationTransition(e,t)):this.cancelNavigationTransition(e,t)}this.currentNavigation=null}),C(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=xt(n.url);r||(this.navigated=!0,this.restoreHistory(e,!0));const i=new J(e.id,this.serializeUrl(e.extractedUrl),n.message);t.next(i),r?setTimeout(()=>{const t=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(t,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{this.restoreHistory(e,!0);const r=new X(e.id,this.serializeUrl(e.extractedUrl),n);t.next(r);try{e.resolve(this.errorHandler(n))}catch(s){e.reject(s)}}var i;return _.E}));var i,s,o}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const t=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,t)&&setTimeout(()=>{const{source:e,state:n,urlTree:r}=t,i={replaceUrl:!0};if(n){const e=Object.assign({},n);delete e.navigationId,delete e.\u0275routerPageId,0!==Object.keys(e).length&&(i.state=e)}this.scheduleNavigation(r,e,n,i)},0),this.lastLocationChangeInfo=t}))}extractLocationChangeInfoFromEvent(e){var t;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(t=e.state)||void 0===t?void 0:t.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,t){if(!e)return!0;const n=t.urlTree.toString()===e.urlTree.toString();return!(t.transitionId===e.transitionId&&n&&("hashchange"===t.source&&"popstate"===e.source||"popstate"===t.source&&"hashchange"===e.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){Nt(e),this.config=e.map(Lt),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,t={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:s,preserveFragment:o}=t,a=n||this.routerState.root,l=o?this.currentUrlTree.fragment:i;let c=null;switch(s){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(e,t,n,r,i){if(0===n.length)return ft(t.root,t.root,t,r,i);const s=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new mt(!0,0,e);let t=0,n=!1;const r=e.reduce((e,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const t={};return be(r.outlets,(e,n)=>{t[n]="string"==typeof e?e.split("/"):e}),[...e,{outlets:t}]}if(r.segmentPath)return[...e,r.segmentPath]}return"string"!=typeof r?[...e,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[...e,r]},[]);return new mt(n,t,r)}(n);if(s.toRoot())return ft(t.root,new Pe([],{}),t,r,i);const o=function(e,t,n){if(e.isAbsolute)return new yt(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){const e=n.snapshot._urlSegment;return new yt(e,e===t.root,0)}const r=dt(e.commands[0])?0:1;return function(e,t,n){let r=e,i=t,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new yt(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(s,t,e),a=o.processChildren?vt(o.segmentGroup,o.index,s.commands):_t(o.segmentGroup,o.index,s.commands);return ft(o.segmentGroup,a,t,r,i)}(a,this.currentUrlTree,e,c,null!=l?l:null)}navigateByUrl(e,t={skipLocationChange:!1}){const n=xt(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}navigate(e,t={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}isActive(e,t){let n;if(n=!0===t?Object.assign({},Sn):!1===t?Object.assign({},En):t,xt(e))return Ce(this.currentUrlTree,e,n);const r=this.parseUrl(e);return Ce(this.currentUrlTree,r,n)}removeEmptyProps(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return null!=r&&(t[n]=r),t},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Q(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,t,n,r,i){var s,o;if(this.disposed)return Promise.resolve(!1);const a=this.getTransition(),l="imperative"!==t&&"imperative"===(null==a?void 0:a.source),c=(this.lastSuccessfulId===a.id||this.currentNavigation?a.rawUrl:a.urlAfterRedirects).toString()===e.toString();if(l&&c)return Promise.resolve(!0);let u,h,d;i?(u=i.resolve,h=i.reject,d=i.promise):d=new Promise((e,t)=>{u=e,h=t});const p=++this.navigationId;let f;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),f=n&&n.\u0275routerPageId?n.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?null!==(s=this.browserPageId)&&void 0!==s?s:0:(null!==(o=this.browserPageId)&&void 0!==o?o:0)+1):f=0,this.setTransition({id:p,targetPageId:f,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:u,reject:h,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(e=>Promise.reject(e))}setBrowserUrl(e,t){const n=this.urlSerializer.serialize(e),r=Object.assign(Object.assign({},t.extras.state),this.generateNgRouterState(t.id,t.targetPageId));this.location.isCurrentPathEqualTo(n)||t.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}restoreHistory(e,t=!1){var n,r;if("computed"===this.canceledNavigationResolution){const t=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(n=this.currentNavigation)||void 0===n?void 0:n.finalUrl)||0===t?this.currentUrlTree===(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)&&0===t&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(t)}else"replace"===this.canceledNavigationResolution&&(t&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,t){const n=new J(e.id,this.serializeUrl(e.extractedUrl),t);this.triggerEvent(n),e.resolve(!1)}generateNgRouterState(e,t){return"computed"===this.canceledNavigationResolution?{navigationId:e,"\u0275routerPageId":t}:{navigationId:e}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.DyG),i.LFG(Oe),i.LFG(_n),i.LFG(r.Ye),i.LFG(i.zs3),i.LFG(i.v3s),i.LFG(i.Sil),i.LFG(void 0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),In=(()=>{class e{constructor(e,t,n){this.router=e,this.route=t,this.locationStrategy=n,this.commands=[],this.onChanges=new s.xQ,this.subscription=e.events.subscribe(e=>{e instanceof Q&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,t,n,r,i){if(0!==e||t||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const s={skipLocationChange:kn(this.skipLocationChange),replaceUrl:kn(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,s),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:kn(this.preserveFragment)})}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(Cn),i.Y36(nt),i.Y36(r.S$))},e.\u0275dir=i.lG2({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&i.NdJ("click",function(e){return t.onClick(e.button,e.ctrlKey,e.shiftKey,e.altKey,e.metaKey)}),2&e&&(i.Ikx("href",t.href,i.LSH),i.uIk("target",t.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[i.TTD]}),e})();function kn(e){return""===e||!!e}let xn=(()=>{class e{constructor(e,t,n,r,s){this.parentContexts=e,this.location=t,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new i.vpe,this.deactivateEvents=new i.vpe,this.name=r||de,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new An(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(_n),i.Y36(i.s_b),i.Y36(i._Vd),i.$8M("name"),i.Y36(i.sBO))},e.\u0275dir=i.lG2({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e})();class An{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===nt?this.route:e===_n?this.childContexts:this.parent.get(e,t)}}class Pn{}class Rn{preload(e,t){return(0,w.of)(null)}}let Nn=(()=>{class e{constructor(e,t,n,r,i){this.router=e,this.injector=r,this.preloadingStrategy=i,this.loader=new mn(t,n,t=>e.triggerEvent(new se(t)),t=>e.triggerEvent(new oe(t)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,x.h)(e=>e instanceof Q),(0,B.b)(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(i.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,t){const n=[];for(const r of t)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const e=r._loadedConfig;n.push(this.processRoutes(e.module,e.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(e,r)):r.children&&n.push(this.processRoutes(e,r.children));return(0,y.D)(n).pipe((0,K.J)(),(0,M.U)(e=>{}))}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>(t._loadedConfig?(0,w.of)(t._loadedConfig):this.loader.load(e.injector,t)).pipe((0,$.zg)(e=>(t._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(Cn),i.LFG(i.v3s),i.LFG(i.Sil),i.LFG(i.zs3),i.LFG(Pn))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),On=(()=>{class e{constructor(e,t,n={}){this.router=e,this.viewportScroller=t,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Y?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Q&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof he&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.router.triggerEvent(new he(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(Cn),i.LFG(r.EM),i.LFG(void 0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();const Dn=new i.OlP("ROUTER_CONFIGURATION"),Ln=new i.OlP("ROUTER_FORROOT_GUARD"),Fn=[r.Ye,{provide:Oe,useClass:De},{provide:Cn,useFactory:function(e,t,n,r,i,s,o,a={},l,c){const u=new Cn(null,e,t,n,r,i,s,ve(o));return l&&(u.urlHandlingStrategy=l),c&&(u.routeReuseStrategy=c),function(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy)}(a,u),a.enableTracing&&u.events.subscribe(e=>{var t,n;null===(t=console.group)||void 0===t||t.call(console,`Router Event: ${e.constructor.name}`),console.log(e.toString()),console.log(e),null===(n=console.groupEnd)||void 0===n||n.call(console)}),u},deps:[Oe,_n,r.Ye,i.zs3,i.v3s,i.Sil,gn,Dn,[class{},new i.FiY],[class{},new i.FiY]]},_n,{provide:nt,useFactory:function(e){return e.routerState.root},deps:[Cn]},{provide:i.v3s,useClass:i.EAV},Nn,Rn,class{preload(e,t){return t().pipe(C(()=>(0,w.of)(null)))}},{provide:Dn,useValue:{enableTracing:!1}}];function Mn(){return new i.PXZ("Router",Cn)}let Un=(()=>{class e{constructor(e,t){}static forRoot(t,n){return{ngModule:e,providers:[Fn,Bn(t),{provide:Ln,useFactory:qn,deps:[[Cn,new i.FiY,new i.tp0]]},{provide:Dn,useValue:n||{}},{provide:r.S$,useFactory:jn,deps:[r.lw,[new i.tBr(r.mr),new i.FiY],Dn]},{provide:On,useFactory:Vn,deps:[Cn,r.EM,Dn]},{provide:Pn,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Rn},{provide:i.PXZ,multi:!0,useFactory:Mn},[zn,{provide:i.ip1,multi:!0,useFactory:$n,deps:[zn]},{provide:Gn,useFactory:Hn,deps:[zn]},{provide:i.tb,multi:!0,useExisting:Gn}]]}}static forChild(t){return{ngModule:e,providers:[Bn(t)]}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(Ln,8),i.LFG(Cn,8))},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({}),e})();function Vn(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new On(e,t,n)}function jn(e,t,n={}){return n.useHash?new r.Do(e,t):new r.b0(e,t)}function qn(e){return"guarded"}function Bn(e){return[{provide:i.deG,multi:!0,useValue:e},{provide:gn,multi:!0,useValue:e}]}let zn=(()=>{class e{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new s.xQ}appInitializer(){return this.injector.get(r.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let e=null;const t=new Promise(t=>e=t),n=this.injector.get(Cn),r=this.injector.get(Dn);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),e(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,w.of)(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),n.initialNavigation()):e(!0),t})}bootstrapListener(e){const t=this.injector.get(Dn),n=this.injector.get(Nn),r=this.injector.get(On),s=this.injector.get(Cn),o=this.injector.get(i.z2F);e===o.components[0]&&("enabledNonBlocking"!==t.initialNavigation&&void 0!==t.initialNavigation||s.initialNavigation(),n.setUpPreloading(),r.init(),s.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.zs3))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();function $n(e){return e.appInitializer.bind(e)}function Hn(e){return e.bootstrapListener.bind(e)}const Gn=new i.OlP("Router Initializer")},156:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(3854),i=n(8604),s=n(279),o=n(9306);class a{constructor(e,t){this._delegate=e,this.firebase=t,(0,s._addComponent)(e,new i.wA("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,s.deleteApp)(this._delegate)))}_getService(e,t=s._DEFAULT_ENTRY_NAME){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=s._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){(0,s._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,s._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const l=new r.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),c=function e(){const t=function(e){const t={},n={__esModule:!0,initializeApp:function(i,o={}){const a=s.initializeApp(i,o);if((0,r.r3)(t,a.name))return t[a.name];const l=new e(a,n);return t[a.name]=l,l},app:i,registerVersion:s.registerVersion,setLogLevel:s.setLogLevel,onLog:s.onLog,apps:null,SDK_VERSION:s.SDK_VERSION,INTERNAL:{registerComponent:function(t){const o=t.name,a=o.replace("-compat","");if(s._registerComponent(t)&&"PUBLIC"===t.type){const s=(e=i())=>{if("function"!=typeof e[a])throw l.create("invalid-app-argument",{appName:o});return e[a]()};void 0!==t.serviceProps&&(0,r.ZB)(s,t.serviceProps),n[a]=s,e.prototype[a]=function(...e){return this._getService.bind(this,o).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:s}};function i(e){if(!(0,r.r3)(t,e=e||s._DEFAULT_ENTRY_NAME))throw l.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(e=>t[e])}}),i.App=e,n}(a);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,r.ZB)(t,e)},createSubscribe:r.ne,ErrorFactory:r.LL,deepExtend:r.ZB}),t}(),u=new o.Yd("@firebase/app-compat");if((0,r.jU)()&&void 0!==self.firebase){u.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&u.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const h=c;(0,s.registerVersion)("@firebase/app-compat","0.1.10",void 0)},279:(e,t,n)=>{"use strict";n.r(t),n.d(t,{FirebaseError:()=>o.ZR,SDK_VERSION:()=>S,_DEFAULT_ENTRY_NAME:()=>h,_addComponent:()=>g,_addOrOverwriteComponent:()=>m,_apps:()=>p,_clearComponents:()=>w,_components:()=>f,_getProvider:()=>_,_registerComponent:()=>y,_removeServiceInstance:()=>v,deleteApp:()=>k,getApp:()=>C,getApps:()=>I,initializeApp:()=>E,onLog:()=>P,registerVersion:()=>A,setLogLevel:()=>R});var r=n(6304),i=n(8604),s=n(9306),o=n(3854);class a{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const l="@firebase/app",c="0.7.9",u=new s.Yd("@firebase/app"),h="[DEFAULT]",d={[l]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},p=new Map,f=new Map;function g(e,t){try{e.container.addComponent(t)}catch(n){u.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function m(e,t){e.container.addOrOverwriteComponent(t)}function y(e){const t=e.name;if(f.has(t))return u.debug(`There were multiple attempts to register component ${t}.`),!1;f.set(t,e);for(const n of p.values())g(n,e);return!0}function _(e,t){return e.container.getProvider(t)}function v(e,t,n=h){_(e,t).clearInstance(n)}function w(){f.clear()}const b=new o.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class T{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw b.create("app-deleted",{appName:this._name})}}const S="9.5.0";function E(e,t={}){"object"!=typeof t&&(t={name:t});const n=Object.assign({name:h,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw b.create("bad-app-name",{appName:String(r)});const s=p.get(r);if(s){if((0,o.vZ)(e,s.options)&&(0,o.vZ)(n,s.config))return s;throw b.create("duplicate-app",{appName:r})}const a=new i.H0(r);for(const i of f.values())a.addComponent(i);const l=new T(e,n,a);return p.set(r,l),l}function C(e=h){const t=p.get(e);if(!t)throw b.create("no-app",{appName:e});return t}function I(){return Array.from(p.values())}function k(e){return x.apply(this,arguments)}function x(){return(x=(0,r.Z)(function*(e){const t=e.name;p.has(t)&&(p.delete(t),yield Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)})).apply(this,arguments)}function A(e,t,n){var r;let s=null!==(r=d[e])&&void 0!==r?r:e;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${s}" with version "${t}":`];return o&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void u.warn(e.join(" "))}y(new i.wA(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}function P(e,t){if(null!==e&&"function"!=typeof e)throw b.create("invalid-log-argument");(0,s.Am)(e,t)}function R(e){(0,s.Ub)(e)}y(new i.wA("platform-logger",e=>new a(e),"PRIVATE")),A(l,c,""),A(l,c,"esm2017"),A("fire-js","")},8604:(e,t,n)=>{"use strict";n.d(t,{wA:()=>s,H0:()=>l,zt:()=>a});var r=n(6304),i=n(3854);class s{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const o="[DEFAULT]";class a{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new i.BH;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:o})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return(0,r.Z)(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(i)&&s.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===o?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(i){}var r;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:o:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class l{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new a(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},9306:(e,t,n)=>{"use strict";n.d(t,{in:()=>i,Yd:()=>c,Ub:()=>u,Am:()=>h});const r=[];var i=(()=>(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={})),i))();const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},o=i.INFO,a={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},l=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=a[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class c{constructor(e){this.name=e,this._logLevel=o,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...e),this._logHandler(this,i.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...e),this._logHandler(this,i.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,i.INFO,...e),this._logHandler(this,i.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,i.WARN,...e),this._logHandler(this,i.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,i.ERROR,...e),this._logHandler(this,i.ERROR,...e)}}function u(e){r.forEach(t=>{t.setLogLevel(e)})}function h(e,t){for(const n of r){let r=null;t&&t.level&&(r=s[t.level]),n.userLogHandler=null===e?null:(t,n,...s)=>{const o=s.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(e=>e).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:i[n].toLowerCase(),message:o,args:s,type:t.name})}}}},3854:(e,t,n)=>{"use strict";n.d(t,{BH:()=>d,LL:()=>A,ZR:()=>x,gQ:()=>H,zI:()=>k,hu:()=>r,g5:()=>i,US:()=>o,tV:()=>c,h$:()=>a,$s:()=>te,r3:()=>F,Sg:()=>p,ne:()=>G,p$:()=>u,vZ:()=>j,ZB:()=>h,gK:()=>Y,pd:()=>$,m9:()=>ne,z$:()=>f,GJ:()=>L,jU:()=>y,ru:()=>_,d:()=>w,xb:()=>U,w1:()=>b,hl:()=>C,uI:()=>g,UG:()=>m,Yr:()=>S,b$:()=>v,G6:()=>E,Mn:()=>T,w9:()=>D,cI:()=>R,UI:()=>V,xO:()=>B,zd:()=>z,DV:()=>M,ug:()=>ee,dS:()=>X,Pz:()=>N,Dv:()=>W,Wj:()=>Q,lb:()=>J,eu:()=>I});const r=function(e,t){if(!e)throw i(t)},i=function(e){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+e)},s=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0;let c=(15&o)<<2|l>>6,u=63&l;a||(u=64,s||(c=64)),r.push(n[t>>2],n[(3&t)<<4|o>>4],n[c],n[u])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw Error();r.push(t<<2|s>>4),64!==o&&(r.push(s<<4&240|o>>2),64!==a&&r.push(o<<6&192|a))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},a=function(e){const t=s(e);return o.encodeByteArray(t,!0)},l=function(e){return a(e).replace(/\./g,"")},c=function(e){try{return o.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function u(e){return h(void 0,e)}function h(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=h(e[n],t[n]));return e}class d{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function p(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[l(JSON.stringify({alg:"none",type:"JWT"})),l(JSON.stringify(s)),""].join(".")}function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function g(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())}function m(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function y(){return"object"==typeof self&&self.self===self}function _(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function v(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function w(){return f().indexOf("Electron/")>=0}function b(){const e=f();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function T(){return f().indexOf("MSAppHost/")>=0}function S(){return!1}function E(){return!m()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function C(){return"object"==typeof indexedDB}function I(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}function k(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class x extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,x.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,A.prototype.create)}}class A{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(P,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(i,n):"Error";return new x(r,`${this.serviceName}: ${s} (${r}).`,n)}}const P=/\{\$([^}]+)}/g;function R(e){return JSON.parse(e)}function N(e){return JSON.stringify(e)}const O=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=R(c(s[0])||""),n=R(c(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(s){}return{header:t,claims:n,data:r,signature:i}},D=function(e){const t=O(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},L=function(e){const t=O(e).claims;return"object"==typeof t&&!0===t.admin};function F(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function M(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function U(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function V(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function j(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(q(n)&&q(s)){if(!j(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function q(e){return null!==e&&"object"==typeof e}function B(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function z(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function $(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class H{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"==typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^o&(a^l),i=1518500249):(r=o^a^l,i=1859775393):u<60?(r=o&a|l&(o|a),i=2400959708):(r=o^a^l,i=3395469782);const e=(s<<5|s>>>27)+r+c+i+n[u]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}function G(e,t){const n=new Z(e,t);return n.subscribe.bind(n)}class Z{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of["next","error","complete"])if(n in e&&"function"==typeof e[n])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=K),void 0===r.error&&(r.error=K),void 0===r.complete&&(r.complete=K);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!=typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function K(){}const W=function(e,t,n,r){let i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function Y(e,t){return`${e} failed: ${t} argument `}function Q(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(Y(e,t)+"must be a valid function.")}function J(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(Y(e,t)+"must be a valid context object.")}const X=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);if(s>=55296&&s<=56319){const t=s-55296;i++,r(i<e.length,"Surrogate pair missing trail surrogate."),s=65536+(t<<10)+(e.charCodeAt(i)-56320)}s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):s<65536?(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},ee=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function te(e,t=1e3,n=2){const r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function ne(e){return e&&e._delegate?e._delegate:e}},2329:(e,t,n)=>{"use strict";n.d(t,{Mq:()=>r.getApp,C6:()=>r.getApps});var r=n(279);(0,r.registerVersion)("firebase","9.5.0","app")},7841:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r.Z});var r=n(156);r.Z.registerVersion("firebase","9.5.0","app-compat")},941:(e,t,n)=>{"use strict";n.r(t);var r=n(6304),i=n(156),s=n(3854),o=n(279);function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}var l=n(9306),c=n(8604);const u=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},h=new s.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),d=new l.Yd("@firebase/auth");function p(e,...t){d.logLevel<=l.in.ERROR&&d.error(`Auth (${o.SDK_VERSION}): ${e}`,...t)}function f(e,...t){throw _(e,...t)}function g(e,...t){return _(e,...t)}function m(e,t,n){const r=Object.assign(Object.assign({},{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),{[t]:n});return new s.LL("auth","Firebase",r).create(t,{appName:e.name})}function y(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&f(e,"argument-error"),m(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return h.create(e,...t)}function v(e,t,...n){if(!e)throw _(t,...n)}function w(e){const t="INTERNAL ASSERTION FAILED: "+e;throw p(t),new Error(t)}function b(e,t){e||w(t)}const T=new Map;function S(e){b(e instanceof Function,"Expected a class definition");let t=T.get(e);return t?(b(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,T.set(e,t),t)}function E(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function C(){return"http:"===I()||"https:"===I()}function I(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class k{constructor(e,t){this.shortDelay=e,this.longDelay=t,b(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,s.uI)()||(0,s.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(C()||(0,s.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function x(e,t){b(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class A{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void w("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void w("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void w("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const P={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},R=new k(3e4,6e4);function N(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function O(e,t,n,r){return D.apply(this,arguments)}function D(){return(D=(0,r.Z)(function*(e,t,n,r,i={}){return L(e,i,()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const a=(0,s.xO)(Object.assign({key:e.config.apiKey},o)).slice(1),l=new(A.headers());return l.set("Content-Type","application/json"),l.set("X-Client-Version",e._getSdkClientVersion()),e.languageCode&&l.set("X-Firebase-Locale",e.languageCode),A.fetch()(V(e,e.config.apiHost,n,a),Object.assign({method:t,headers:l,referrerPolicy:"no-referrer"},i))})})).apply(this,arguments)}function L(e,t,n){return F.apply(this,arguments)}function F(){return(F=(0,r.Z)(function*(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},P),t);try{const t=new j(e),i=yield Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=yield i.json();if("needConfirmation"in s)throw q(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw q(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw q(e,"email-already-in-use",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw m(e,a,o);f(e,a)}}catch(i){if(i instanceof s.ZR)throw i;f(e,"network-request-failed")}})).apply(this,arguments)}function M(e,t,n,r){return U.apply(this,arguments)}function U(){return(U=(0,r.Z)(function*(e,t,n,r,i={}){const s=yield O(e,t,n,r,i);return"mfaPendingCredential"in s&&f(e,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function V(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?x(e.config,i):`${e.config.apiScheme}://${i}`}class j{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(g(this.auth,"timeout")),R.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function q(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=g(e,t,r);return i.customData._tokenResponse=n,i}function B(){return(B=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:delete",t)})).apply(this,arguments)}function z(e,t){return $.apply(this,arguments)}function $(){return($=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function H(e,t){return G.apply(this,arguments)}function G(){return(G=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:lookup",t)})).apply(this,arguments)}function Z(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function K(){return(K=(0,r.Z)(function*(e,t=!1){const n=(0,s.m9)(e),r=yield n.getIdToken(t),i=Y(r);v(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Z(W(i.auth_time)),issuedAtTime:Z(W(i.iat)),expirationTime:Z(W(i.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}})).apply(this,arguments)}function W(e){return 1e3*Number(e)}function Y(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return p("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,s.tV)(n);return e?JSON.parse(e):(p("Failed to decode base64 JWT payload"),null)}catch(i){return p("Caught error parsing JWT payload as JSON",i),null}}function Q(e,t){return J.apply(this,arguments)}function J(){return(J=(0,r.Z)(function*(e,t,n=!1){if(n)return t;try{return yield t}catch(r){throw r instanceof s.ZR&&X(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})).apply(this,arguments)}function X({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}class ee{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout((0,r.Z)(function*(){yield t.iteration()}),n)}iteration(){var e=this;return(0,r.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t.code&&e.schedule(!0))}e.schedule()})()}}class te{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Z(this.lastLoginAt),this.creationTime=Z(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ne(e){return re.apply(this,arguments)}function re(){return(re=(0,r.Z)(function*(e){var t;const n=e.auth,r=yield e.getIdToken(),i=yield Q(e,H(n,{idToken:r}));v(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?oe(s.providerUserInfo):[],a=se(e.providerData,o),l=!!e.isAnonymous&&!(e.email&&s.passwordHash||(null==a?void 0:a.length)),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new te(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(e,c)})).apply(this,arguments)}function ie(){return(ie=(0,r.Z)(function*(e){const t=(0,s.m9)(e);yield ne(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})).apply(this,arguments)}function se(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function oe(e){return e.map(e=>{var{providerId:t}=e,n=a(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function ae(){return(ae=(0,r.Z)(function*(e,t){const n=yield L(e,{},()=>{const n=(0,s.xO)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=V(e,r,"/v1/token",`key=${i}`);return A.fetch()(o,{method:"POST",headers:{"X-Client-Version":e._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class le{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){v(e.idToken,"internal-error"),v(void 0!==e.idToken,"internal-error"),v(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=Y(e);return v(t,"internal-error"),v(void 0!==t.exp,"internal-error"),v(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var n=this;return(0,r.Z)(function*(){return v(!n.accessToken||n.refreshToken,e,"user-token-expired"),t||!n.accessToken||n.isExpired?n.refreshToken?(yield n.refresh(e,n.refreshToken),n.accessToken):null:n.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var n=this;return(0,r.Z)(function*(){const{accessToken:r,refreshToken:i,expiresIn:s}=yield function(e,t){return ae.apply(this,arguments)}(e,t);n.updateTokensAndExpiration(r,i,Number(s))})()}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new le;return n&&(v("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(v("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(v("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new le,this.toJSON())}_performRefresh(){return w("not implemented")}}function ce(e,t){v("string"==typeof e||void 0===e,"internal-error",{appName:t})}class ue{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=a(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new ee(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.metadata=new te(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,r.Z)(function*(){const n=yield Q(t,t.stsTokenManager.getToken(t.auth,e));return v(n,t.auth,"internal-error"),t.accessToken!==n&&(t.accessToken=n,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),n})()}getIdTokenResult(e){return function(e){return K.apply(this,arguments)}(this,e)}reload(){return function(e){return ie.apply(this,arguments)}(this)}_assign(e){this!==e&&(v(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new ue(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){v(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var n=this;return(0,r.Z)(function*(){let r=!1;e.idToken&&e.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield ne(n)),yield n.auth._persistUserIfCurrent(n),r&&n.auth._notifyListenersIfCurrent(n)})()}delete(){var e=this;return(0,r.Z)(function*(){const t=yield e.getIdToken();return yield Q(e,function(e,t){return B.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,f=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:_,emailVerified:w,isAnonymous:b,providerData:T,stsTokenManager:S}=t;v(_&&S,e,"internal-error");const E=le.fromJSON(this.name,S);v("string"==typeof _,e,"internal-error"),ce(u,e.name),ce(h,e.name),v("boolean"==typeof w,e,"internal-error"),v("boolean"==typeof b,e,"internal-error"),ce(d,e.name),ce(p,e.name),ce(f,e.name),ce(g,e.name),ce(m,e.name),ce(y,e.name);const C=new ue({uid:_,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:E,createdAt:m,lastLoginAt:y});return T&&Array.isArray(T)&&(C.providerData=T.map(e=>Object.assign({},e))),g&&(C._redirectEventId=g),C}static _fromIdTokenResponse(e,t,n=!1){return(0,r.Z)(function*(){const r=new le;r.updateFromServerResponse(t);const i=new ue({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return yield ne(i),i})()}}const he=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,r.Z)(function*(){return!0})()}_set(e,t){var n=this;return(0,r.Z)(function*(){n.storage[e]=t})()}_get(e){var t=this;return(0,r.Z)(function*(){const n=t.storage[e];return void 0===n?null:n})()}_remove(e){var t=this;return(0,r.Z)(function*(){delete t.storage[e]})()}_addListener(e,t){}_removeListener(e,t){}}return e.type="NONE",e})();function de(e,t,n){return`firebase:${e}:${t}:${n}`}class pe{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=de(this.userKey,r.apiKey,i),this.fullPersistenceKey=de("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,r.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?ue._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,r.Z)(function*(){if(t.persistence===e)return;const n=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,n?t.setCurrentUser(n):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,n="authUser"){return(0,r.Z)(function*(){if(!t.length)return new pe(S(he),e,n);const i=(yield Promise.all(t.map(function(){var e=(0,r.Z)(function*(e){if(yield e._isAvailable())return e});return function(t){return e.apply(this,arguments)}}()))).filter(e=>e);let s=i[0]||S(he);const o=de(n,e.config.apiKey,e.name);let a=null;for(const n of t)try{const t=yield n._get(o);if(t){const r=ue._fromJSON(e,t);n!==s&&(a=r),s=n;break}}catch(c){}const l=i.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&l.length?(s=l[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var e=(0,r.Z)(function*(e){if(e!==s)try{yield e._remove(o)}catch(c){}});return function(t){return e.apply(this,arguments)}}())),new pe(s,e,n)):new pe(s,e,n)})()}}function fe(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(_e(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ge(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(we(t))return"Blackberry";if(be(t))return"Webos";if(me(t))return"Safari";if((t.includes("chrome/")||ye(t))&&!t.includes("edge/"))return"Chrome";if(ve(t))return"Android";{const t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==t?void 0:t.length))return t[1]}return"Other"}function ge(e=(0,s.z$)()){return/firefox\//i.test(e)}function me(e=(0,s.z$)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ye(e=(0,s.z$)()){return/crios\//i.test(e)}function _e(e=(0,s.z$)()){return/iemobile/i.test(e)}function ve(e=(0,s.z$)()){return/android/i.test(e)}function we(e=(0,s.z$)()){return/blackberry/i.test(e)}function be(e=(0,s.z$)()){return/webos/i.test(e)}function Te(e=(0,s.z$)()){return/iphone|ipad|ipod/i.test(e)}function Se(e=(0,s.z$)()){return Te(e)||ve(e)||be(e)||we(e)||/windows phone/i.test(e)||_e(e)}function Ee(e,t=[]){let n;switch(e){case"Browser":n=fe((0,s.z$)());break;case"Worker":n=`${fe((0,s.z$)())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${o.SDK_VERSION}/${r}`}class Ce{constructor(e,t){this.app=e,this.config=t,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ke(this),this.idTokenSubscription=new ke(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=h,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=t.sdkClientVersion}_initializeWithPersistence(e,t){var n=this;return t&&(this._popupRedirectResolver=S(t)),this._initializationPromise=this.queue((0,r.Z)(function*(){var r,i;n._deleted||(n.persistenceManager=yield pe.create(n,e),n._deleted||((null===(r=n._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)&&(yield n._popupRedirectResolver._initialize(n)),yield n.initializeCurrentUser(t),n.lastNotifiedUid=(null===(i=n.currentUser)||void 0===i?void 0:i.uid)||null,n._deleted||(n._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,r.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();return e.currentUser||t?e.currentUser&&t&&e.currentUser.uid===t.uid?(e._currentUser._assign(t),void(yield e.currentUser.getIdToken())):void(yield e._updateCurrentUser(t)):void 0})()}initializeCurrentUser(e){var t=this;return(0,r.Z)(function*(){var n;let r=yield t.assertedPersistence.getCurrentUser();if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const i=null===(n=t.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null==r?void 0:r._redirectEventId,o=yield t.tryRedirectSignIn(e);i&&i!==s||!(null==o?void 0:o.user)||(r=o.user)}return r?r._redirectEventId?(v(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===r._redirectEventId?t.directlySetCurrentUser(r):t.reloadAndSetCurrentUserOrClear(r)):t.reloadAndSetCurrentUserOrClear(r):t.directlySetCurrentUser(null)})()}tryRedirectSignIn(e){var t=this;return(0,r.Z)(function*(){let n=null;try{n=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch(r){yield t._setRedirectUser(null)}return n})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,r.Z)(function*(){try{yield ne(e)}catch(n){if("auth/network-request-failed"!==n.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}_delete(){var e=this;return(0,r.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,r.Z)(function*(){const n=e?(0,s.m9)(e):null;return n&&v(n.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(n&&n._clone(t))})()}_updateCurrentUser(e){var t=this;return(0,r.Z)(function*(){if(!t._deleted)return e&&v(t.tenantId===e.tenantId,t,"tenant-id-mismatch"),t.queue((0,r.Z)(function*(){yield t.directlySetCurrentUser(e),t.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,r.Z)(function*(){return(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null)})()}setPersistence(e){var t=this;return this.queue((0,r.Z)(function*(){yield t.assertedPersistence.setPersistence(S(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new s.LL("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var n=this;return(0,r.Z)(function*(){const r=yield n.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,r.Z)(function*(){if(!t.redirectPersistenceManager){const n=e&&S(e)||t._popupRedirectResolver;v(n,t,"argument-error"),t.redirectPersistenceManager=yield pe.create(t,[S(n._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,r.Z)(function*(){var n,i;return t._isInitialized&&(yield t.queue((0,r.Z)(function*(){}))),(null===(n=t._currentUser)||void 0===n?void 0:n._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,r.Z)(function*(){if(e===t.currentUser)return t.queue((0,r.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return v(s,this,"internal-error"),s.then(()=>i(this.currentUser)),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return(0,r.Z)(function*(){t.currentUser&&t.currentUser!==e&&(t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh()),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return v(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ee(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function Ie(e){return(0,s.m9)(e)}class ke{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,s.ne)(e=>this.observer=e)}get next(){return v(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function xe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ae(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Pe{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return w("not implemented")}_getIdTokenResponse(e){return w("not implemented")}_linkToIdToken(e,t){return w("not implemented")}_getReauthenticationResolver(e){return w("not implemented")}}function Re(e,t){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:resetPassword",N(e,t))})).apply(this,arguments)}function Oe(e,t){return De.apply(this,arguments)}function De(){return(De=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function Le(e,t){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:update",N(e,t))})).apply(this,arguments)}function Me(){return(Me=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithPassword",N(e,t))})).apply(this,arguments)}function Ue(e,t){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:sendOobCode",N(e,t))})).apply(this,arguments)}function je(e,t){return qe.apply(this,arguments)}function qe(){return(qe=(0,r.Z)(function*(e,t){return Ue(e,t)})).apply(this,arguments)}function Be(e,t){return ze.apply(this,arguments)}function ze(){return(ze=(0,r.Z)(function*(e,t){return Ue(e,t)})).apply(this,arguments)}function $e(e,t){return He.apply(this,arguments)}function He(){return(He=(0,r.Z)(function*(e,t){return Ue(e,t)})).apply(this,arguments)}function Ge(e,t){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,r.Z)(function*(e,t){return Ue(e,t)})).apply(this,arguments)}function Ke(){return(Ke=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithEmailLink",N(e,t))})).apply(this,arguments)}function We(){return(We=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithEmailLink",N(e,t))})).apply(this,arguments)}class Ye extends Pe{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Ye(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Ye(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return(0,r.Z)(function*(){switch(t.signInMethod){case"password":return function(e,t){return Me.apply(this,arguments)}(e,{returnSecureToken:!0,email:t._email,password:t._password});case"emailLink":return function(e,t){return Ke.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:f(e,"internal-error")}})()}_linkToIdToken(e,t){var n=this;return(0,r.Z)(function*(){switch(n.signInMethod){case"password":return Oe(e,{idToken:t,returnSecureToken:!0,email:n._email,password:n._password});case"emailLink":return function(e,t){return We.apply(this,arguments)}(e,{idToken:t,email:n._email,oobCode:n._password});default:f(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function Qe(e,t){return Je.apply(this,arguments)}function Je(){return(Je=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithIdp",N(e,t))})).apply(this,arguments)}class Xe extends Pe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Xe(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):f("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=a(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Xe(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Qe(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Qe(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Qe(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,s.xO)(t)}return e}}function et(e,t){return tt.apply(this,arguments)}function tt(){return(tt=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:sendVerificationCode",N(e,t))})).apply(this,arguments)}function nt(){return(nt=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithPhoneNumber",N(e,t))})).apply(this,arguments)}function rt(){return(rt=(0,r.Z)(function*(e,t){const n=yield M(e,"POST","/v1/accounts:signInWithPhoneNumber",N(e,t));if(n.temporaryProof)throw q(e,"account-exists-with-different-credential",n);return n})).apply(this,arguments)}const it={USER_NOT_FOUND:"user-not-found"};function st(){return(st=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithPhoneNumber",N(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),it)})).apply(this,arguments)}class ot extends Pe{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ot({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ot({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return function(e,t){return nt.apply(this,arguments)}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return function(e,t){return rt.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return function(e,t){return st.apply(this,arguments)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new ot({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class at{constructor(e){var t,n,r,i,o,a;const l=(0,s.zd)((0,s.pd)(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,u=null!==(n=l.oobCode)&&void 0!==n?n:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=l.mode)&&void 0!==r?r:null);v(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=null!==(i=l.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=l.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=l.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,s.zd)((0,s.pd)(e)).link,n=t?(0,s.zd)((0,s.pd)(t)).deep_link_id:null,r=(0,s.zd)((0,s.pd)(e)).deep_link_id;return(r?(0,s.zd)((0,s.pd)(r)).link:null)||r||n||t||e}(e);try{return new at(t)}catch(n){return null}}}let lt=(()=>{class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return Ye._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=at.parseLink(t);return v(n,"argument-error"),Ye._fromEmailAndCode(e,n.code,n.tenantId)}}return e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink",e})();class ct{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ut extends ct{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ht extends ut{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return v("providerId"in t&&"signInMethod"in t,"argument-error"),Xe._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return v(e.idToken||e.accessToken,"argument-error"),Xe._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return ht.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ht.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:i,nonce:s,providerId:o}=e;if(!(n||r||t||i))return null;if(!o)return null;try{return new ht(o)._credential({idToken:t,accessToken:n,nonce:s,pendingToken:i})}catch(a){return null}}}let dt=(()=>{class e extends ut{constructor(){super("facebook.com")}static credential(t){return Xe._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch(n){return null}}}return e.FACEBOOK_SIGN_IN_METHOD="facebook.com",e.PROVIDER_ID="facebook.com",e})(),pt=(()=>{class e extends ut{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Xe._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return e.credential(n,r)}catch(i){return null}}}return e.GOOGLE_SIGN_IN_METHOD="google.com",e.PROVIDER_ID="google.com",e})(),ft=(()=>{class e extends ut{constructor(){super("github.com")}static credential(t){return Xe._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch(n){return null}}}return e.GITHUB_SIGN_IN_METHOD="github.com",e.PROVIDER_ID="github.com",e})();class gt extends Pe{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Qe(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Qe(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Qe(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new gt(n,i):null}static _create(e,t){return new gt(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class mt extends ct{constructor(e){v(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return mt.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return mt.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=gt.fromJSON(e);return v(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return gt._create(n,t)}catch(r){return null}}}let yt=(()=>{class e extends ut{constructor(){super("twitter.com")}static credential(t,n){return Xe._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e.credential(n,r)}catch(i){return null}}}return e.TWITTER_SIGN_IN_METHOD="twitter.com",e.PROVIDER_ID="twitter.com",e})();function _t(e,t){return vt.apply(this,arguments)}function vt(){return(vt=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signUp",N(e,t))})).apply(this,arguments)}class wt{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,n,i=!1){return(0,r.Z)(function*(){const r=yield ue._fromIdTokenResponse(e,n,i),s=bt(n);return new wt({user:r,providerId:s,_tokenResponse:n,operationType:t})})()}static _forOperation(e,t,n){return(0,r.Z)(function*(){yield e._updateTokensIfNecessary(n,!0);const r=bt(n);return new wt({user:e,providerId:r,_tokenResponse:n,operationType:t})})()}}function bt(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Tt(){return(Tt=(0,r.Z)(function*(e){var t;const n=Ie(e);if(yield n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new wt({user:n.currentUser,providerId:null,operationType:"signIn"});const r=yield _t(n,{returnSecureToken:!0}),i=yield wt._fromIdTokenResponse(n,"signIn",r,!0);return yield n._updateCurrentUser(i.user),i})).apply(this,arguments)}class St extends s.ZR{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,St.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new St(e,t,n,r)}}function Et(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw St._fromErrorAndOperation(e,n,t,r);throw n})}function Ct(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}function It(){return(It=(0,r.Z)(function*(e,t){const n=(0,s.m9)(e);yield At(!0,n,t);const{providerUserInfo:r}=yield z(n.auth,{idToken:yield n.getIdToken(),deleteProvider:[t]}),i=Ct(r||[]);return n.providerData=n.providerData.filter(e=>i.has(e.providerId)),i.has("phone")||(n.phoneNumber=null),yield n.auth._persistUserIfCurrent(n),n})).apply(this,arguments)}function kt(e,t){return xt.apply(this,arguments)}function xt(){return(xt=(0,r.Z)(function*(e,t,n=!1){const r=yield Q(e,t._linkToIdToken(e.auth,yield e.getIdToken()),n);return wt._forOperation(e,"link",r)})).apply(this,arguments)}function At(e,t,n){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,r.Z)(function*(e,t,n){yield ne(t);const r=!1===e?"provider-already-linked":"no-such-provider";v(Ct(t.providerData).has(n)===e,t.auth,r)})).apply(this,arguments)}function Rt(e,t){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,r.Z)(function*(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=yield Q(e,Et(r,i,t,e),n);v(s.idToken,r,"internal-error");const o=Y(s.idToken);v(o,r,"internal-error");const{sub:a}=o;return v(e.uid===a,r,"user-mismatch"),wt._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null==s?void 0:s.code)&&f(r,"user-mismatch"),s}})).apply(this,arguments)}function Ot(e,t){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,r.Z)(function*(e,t,n=!1){const r="signIn",i=yield Et(e,r,t),s=yield wt._fromIdTokenResponse(e,r,i);return n||(yield e._updateCurrentUser(s.user)),s})).apply(this,arguments)}function Lt(e,t){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,r.Z)(function*(e,t){return Ot(Ie(e),t)})).apply(this,arguments)}function Mt(e,t){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,r.Z)(function*(e,t){const n=(0,s.m9)(e);return yield At(!1,n,t.providerId),kt(n,t)})).apply(this,arguments)}function Vt(e,t){return jt.apply(this,arguments)}function jt(){return(jt=(0,r.Z)(function*(e,t){return Rt((0,s.m9)(e),t)})).apply(this,arguments)}function qt(e,t){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithCustomToken",N(e,t))})).apply(this,arguments)}function zt(){return(zt=(0,r.Z)(function*(e,t){const n=Ie(e),r=yield qt(n,{token:t,returnSecureToken:!0}),i=yield wt._fromIdTokenResponse(n,"signIn",r);return yield n._updateCurrentUser(i.user),i})).apply(this,arguments)}class $t{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Ht._fromServerResponse(e,t):f(e,"internal-error")}}class Ht extends $t{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Ht(t)}}function Gt(e,t,n){var r;v((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),v(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(v(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(v(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Zt(){return(Zt=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i={requestType:"PASSWORD_RESET",email:t};n&&Gt(r,i,n),yield Be(r,i)})).apply(this,arguments)}function Kt(){return(Kt=(0,r.Z)(function*(e,t,n){yield Re((0,s.m9)(e),{oobCode:t,newPassword:n})})).apply(this,arguments)}function Wt(){return(Wt=(0,r.Z)(function*(e,t){yield Le((0,s.m9)(e),{oobCode:t})})).apply(this,arguments)}function Yt(e,t){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,r.Z)(function*(e,t){const n=(0,s.m9)(e),r=yield Re(n,{oobCode:t}),i=r.requestType;switch(v(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":v(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":v(r.mfaInfo,n,"internal-error");default:v(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=$t._fromServerResponse(Ie(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}})).apply(this,arguments)}function Jt(){return(Jt=(0,r.Z)(function*(e,t){const{data:n}=yield Yt((0,s.m9)(e),t);return n.email})).apply(this,arguments)}function Xt(){return(Xt=(0,r.Z)(function*(e,t,n){const r=Ie(e),i=yield _t(r,{returnSecureToken:!0,email:t,password:n}),s=yield wt._fromIdTokenResponse(r,"signIn",i);return yield r._updateCurrentUser(s.user),s})).apply(this,arguments)}function en(){return(en=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i={requestType:"EMAIL_SIGNIN",email:t};v(n.handleCodeInApp,r,"argument-error"),n&&Gt(r,i,n),yield $e(r,i)})).apply(this,arguments)}function tn(){return(tn=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i=lt.credentialWithLink(t,n||E());return v(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Lt(r,i)})).apply(this,arguments)}function nn(e,t){return rn.apply(this,arguments)}function rn(){return(rn=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:createAuthUri",N(e,t))})).apply(this,arguments)}function sn(){return(sn=(0,r.Z)(function*(e,t){const n={identifier:t,continueUri:C()?E():"http://localhost"},{signinMethods:r}=yield nn((0,s.m9)(e),n);return r||[]})).apply(this,arguments)}function on(){return(on=(0,r.Z)(function*(e,t){const n=(0,s.m9)(e),r={requestType:"VERIFY_EMAIL",idToken:yield e.getIdToken()};t&&Gt(n.auth,r,t);const{email:i}=yield je(n.auth,r);i!==e.email&&(yield e.reload())})).apply(this,arguments)}function an(){return(an=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield e.getIdToken(),newEmail:t};n&&Gt(r.auth,i,n);const{email:o}=yield Ge(r.auth,i);o!==e.email&&(yield e.reload())})).apply(this,arguments)}function ln(e,t){return cn.apply(this,arguments)}function cn(){return(cn=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function un(){return(un=(0,r.Z)(function*(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const r=(0,s.m9)(e),i={idToken:yield r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},o=yield Q(r,ln(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:e})=>"password"===e);a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),yield r._updateTokensIfNecessary(o)})).apply(this,arguments)}function hn(e,t,n){return dn.apply(this,arguments)}function dn(){return(dn=(0,r.Z)(function*(e,t,n){const{auth:r}=e,i={idToken:yield e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=yield Q(e,Oe(r,i));yield e._updateTokensIfNecessary(s,!0)})).apply(this,arguments)}class pn{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class fn extends pn{constructor(e,t,n,r){super(e,t,n),this.username=r}}class gn extends pn{constructor(e,t){super(e,"facebook.com",t)}}class mn extends fn{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class yn extends pn{constructor(e,t){super(e,"google.com",t)}}class _n extends fn{constructor(e,t,n){super(e,"twitter.com",t,n)}}function vn(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){const r=null===(n=null===(t=Y(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new pn(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new gn(s,i);case"github.com":return new mn(s,i);case"google.com":return new yn(s,i);case"twitter.com":return new _n(s,i,e.screenName||null);case"custom":case"anonymous":return new pn(s,null);default:return new pn(s,r,i)}}(n)}class wn{constructor(e,t){this.type=e,this.credential=t}static _fromIdtoken(e){return new wn("enroll",e)}static _fromMfaPendingCredential(e){return new wn("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return wn._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return wn._fromIdtoken(e.multiFactorSession.idToken)}return null}}class bn{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Ie(e),i=t.customData._serverResponse,s=(i.mfaInfo||[]).map(e=>$t._fromServerResponse(n,e));v(i.mfaPendingCredential,n,"internal-error");const o=wn._fromMfaPendingCredential(i.mfaPendingCredential);return new bn(o,s,function(){var e=(0,r.Z)(function*(e){const r=yield e._process(n,o);delete i.mfaInfo,delete i.mfaPendingCredential;const s=Object.assign(Object.assign({},i),{idToken:r.idToken,refreshToken:r.refreshToken});switch(t.operationType){case"signIn":const e=yield wt._fromIdTokenResponse(n,t.operationType,s);return yield n._updateCurrentUser(e.user),e;case"reauthenticate":return v(t.user,n,"internal-error"),wt._forOperation(t.user,t.operationType,s);default:f(n,"internal-error")}});return function(t){return e.apply(this,arguments)}}())}resolveSignIn(e){var t=this;return(0,r.Z)(function*(){return t.signInResolver(e)})()}}function Tn(e,t){return O(e,"POST","/v2/accounts/mfaEnrollment:start",N(e,t))}class Sn{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>$t._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new Sn(e)}getSession(){var e=this;return(0,r.Z)(function*(){return wn._fromIdtoken(yield e.user.getIdToken())})()}enroll(e,t){var n=this;return(0,r.Z)(function*(){const r=e,i=yield n.getSession(),s=yield Q(n.user,r._process(n.user.auth,i,t));return yield n.user._updateTokensIfNecessary(s),n.user.reload()})()}unenroll(e){var t=this;return(0,r.Z)(function*(){const n="string"==typeof e?e:e.uid,r=yield t.user.getIdToken(),i=yield Q(t.user,(s=t.user.auth,o={idToken:r,mfaEnrollmentId:n},O(s,"POST","/v2/accounts/mfaEnrollment:withdraw",N(s,o))));var s,o;t.enrolledFactors=t.enrolledFactors.filter(({uid:e})=>e!==n),yield t.user._updateTokensIfNecessary(i);try{yield t.user.reload()}catch(a){if("auth/user-token-expired"!==a.code)throw a}})()}}const En=new WeakMap,Cn="__sak";class In{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Cn,"1"),this.storage.removeItem(Cn),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const kn=(()=>{class e extends In{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=(0,s.z$)();return me(e)||Te(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Se(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);(0,s.w1)()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(e,t){var n=()=>super._set,i=this;return(0,r.Z)(function*(){yield n().call(i,e,t),i.localCache[e]=JSON.stringify(t)})()}_get(e){var t=()=>super._get,n=this;return(0,r.Z)(function*(){const r=yield t().call(n,e);return n.localCache[e]=JSON.stringify(r),r})()}_remove(e){var t=()=>super._remove,n=this;return(0,r.Z)(function*(){yield t().call(n,e),delete n.localCache[e]})()}}return e.type="LOCAL",e})(),xn=(()=>{class e extends In{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}return e.type="SESSION",e})();let An=(()=>{class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;const r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}handleEvent(e){var t=this;return(0,r.Z)(function*(){const n=e,{eventId:i,eventType:s,data:o}=n.data,a=t.handlersMap[s];if(!(null==a?void 0:a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(a).map(function(){var e=(0,r.Z)(function*(e){return e(n.origin,o)});return function(t){return e.apply(this,arguments)}}()),c=yield function(e){return Promise.all(e.map(function(){var e=(0,r.Z)(function*(e){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}});return function(t){return e.apply(this,arguments)}}()))}(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:c})})()}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return e.receivers=[],e})();function Pn(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}class Rn{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,n=50){var i=this;return(0,r.Z)(function*(){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Pn("",20);r.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"))}}},i.handlers.add(o),r.port1.addEventListener("message",o.onMessage),i.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{o&&i.removeMessageHandler(o)})})()}}function Nn(){return window}function On(){return void 0!==Nn().WorkerGlobalScope&&"function"==typeof Nn().importScripts}function Dn(){return(Dn=(0,r.Z)(function*(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(e){return null}})).apply(this,arguments)}const Ln="firebaseLocalStorageDb",Fn="firebaseLocalStorage",Mn="fbase_key";class Un{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Vn(e,t){return e.transaction([Fn],t?"readwrite":"readonly").objectStore(Fn)}function jn(){const e=indexedDB.open(Ln,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Fn,{keyPath:Mn})}catch(r){n(r)}}),e.addEventListener("success",(0,r.Z)(function*(){const n=e.result;n.objectStoreNames.contains(Fn)?t(n):(n.close(),yield function(){const e=indexedDB.deleteDatabase(Ln);return new Un(e).toPromise()}(),t(yield jn()))}))})}function qn(e,t,n){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,r.Z)(function*(e,t,n){const r=Vn(e,!0).put({[Mn]:t,value:n});return new Un(r).toPromise()})).apply(this,arguments)}function zn(){return(zn=(0,r.Z)(function*(e,t){const n=Vn(e,!1).get(t),r=yield new Un(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function $n(e,t){const n=Vn(e,!0).delete(t);return new Un(n).toPromise()}const Hn=(()=>{class e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var e=this;return(0,r.Z)(function*(){return e.db||(e.db=yield jn()),e.db})()}_withRetries(e){var t=this;return(0,r.Z)(function*(){let n=0;for(;;)try{const n=yield t._openDb();return yield e(n)}catch(r){if(n++>3)throw r;t.db&&(t.db.close(),t.db=void 0)}})()}initializeServiceWorkerMessaging(){var e=this;return(0,r.Z)(function*(){return On()?e.initializeReceiver():e.initializeSender()})()}initializeReceiver(){var e=this;return(0,r.Z)(function*(){e.receiver=An._getInstance(On()?self:null),e.receiver._subscribe("keyChanged",function(){var t=(0,r.Z)(function*(t,n){return{keyProcessed:(yield e._poll()).includes(n.key)}});return function(e,n){return t.apply(this,arguments)}}()),e.receiver._subscribe("ping",function(){var e=(0,r.Z)(function*(e,t){return["keyChanged"]});return function(t,n){return e.apply(this,arguments)}}())})()}initializeSender(){var e=this;return(0,r.Z)(function*(){var t,n;if(e.activeServiceWorker=yield function(){return Dn.apply(this,arguments)}(),!e.activeServiceWorker)return;e.sender=new Rn(e.activeServiceWorker);const r=yield e.sender._send("ping",{},800);r&&(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(e.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(e){var t=this;return(0,r.Z)(function*(){var n;if(t.sender&&t.activeServiceWorker&&((null===(n=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===n?void 0:n.controller)||null)===t.activeServiceWorker)try{yield t.sender._send("keyChanged",{key:e},t.serviceWorkerReceiverAvailable?800:50)}catch(n){}})()}_isAvailable(){return(0,r.Z)(function*(){try{if(!indexedDB)return!1;const e=yield jn();return yield qn(e,Cn,"1"),yield $n(e,Cn),!0}catch(e){}return!1})()}_withPendingWrite(e){var t=this;return(0,r.Z)(function*(){t.pendingWrites++;try{yield e()}finally{t.pendingWrites--}})()}_set(e,t){var n=this;return(0,r.Z)(function*(){return n._withPendingWrite((0,r.Z)(function*(){return yield n._withRetries(n=>qn(n,e,t)),n.localCache[e]=t,n.notifyServiceWorker(e)}))})()}_get(e){var t=this;return(0,r.Z)(function*(){const n=yield t._withRetries(t=>function(e,t){return zn.apply(this,arguments)}(t,e));return t.localCache[e]=n,n})()}_remove(e){var t=this;return(0,r.Z)(function*(){return t._withPendingWrite((0,r.Z)(function*(){return yield t._withRetries(t=>$n(t,e)),delete t.localCache[e],t.notifyServiceWorker(e)}))})()}_poll(){var e=this;return(0,r.Z)(function*(){const t=yield e._withRetries(e=>{const t=Vn(e,!1).getAll();return new Un(t).toPromise()});if(!t)return[];if(0!==e.pendingWrites)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(e.localCache[i])!==JSON.stringify(s)&&(e.notifyListeners(i,s),n.push(i));for(const i of Object.keys(e.localCache))e.localCache[i]&&!r.has(i)&&(e.notifyListeners(i,null),n.push(i));return n})()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){var e=this;this.stopPolling(),this.pollTimer=setInterval((0,r.Z)(function*(){return e._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return e.type="LOCAL",e})();function Gn(e,t){return O(e,"POST","/v2/accounts/mfaSignIn:start",N(e,t))}function Zn(){return(Zn=(0,r.Z)(function*(e){return(yield O(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Kn(e){return new Promise((t,n)=>{const r=document.createElement("script");var i,s;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=g("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)})}function Wn(e){return`__${e}${Math.floor(1e6*Math.random())}`}const Yn=1e12;class Qn{constructor(e){this.auth=e,this.counter=Yn,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Jn(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Yn;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;return(null===(t=this._widgets.get(e||Yn))||void 0===t?void 0:t.getResponse())||""}execute(e){var t=this;return(0,r.Z)(function*(){var n;return null===(n=t._widgets.get(e||Yn))||void 0===n||n.execute(),""})()}}class Jn{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;v(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<50;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}();const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Xn=Wn("rcb"),er=new k(3e4,6e4);class tr{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Nn().grecaptcha}load(e,t=""){return v(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)?Promise.resolve(Nn().grecaptcha):new Promise((n,r)=>{const i=Nn().setTimeout(()=>{r(g(e,"network-request-failed"))},er.get());Nn()[Xn]=()=>{Nn().clearTimeout(i),delete Nn()[Xn];const s=Nn().grecaptcha;if(!s)return void r(g(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)},Kn(`https://www.google.com/recaptcha/api.js??${(0,s.xO)({onload:Xn,render:"explicit",hl:t})}`).catch(()=>{clearTimeout(i),r(g(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!Nn().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class nr{load(e){return(0,r.Z)(function*(){return new Qn(e)})()}clearedOneInstance(){}}const rr="recaptcha",ir={theme:"light",type:"image"};class sr{constructor(e,t=Object.assign({},ir),n){this.parameters=t,this.type=rr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ie(n),this.isInvisible="invisible"===this.parameters.size,v("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof e?document.getElementById(e):e;v(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new nr:new tr,this.validateStartingState()}verify(){var e=this;return(0,r.Z)(function*(){e.assertNotDestroyed();const t=yield e.render(),n=e.getAssertedRecaptcha();return n.getResponse(t)||new Promise(r=>{const i=t=>{t&&(e.tokenChangeListeners.delete(i),r(t))};e.tokenChangeListeners.add(i),e.isInvisible&&n.execute(t)})})()}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){v(!this.parameters.sitekey,this.auth,"argument-error"),v(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),v("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"==typeof e)e(t);else if("string"==typeof e){const n=Nn()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){v(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var e=this;return(0,r.Z)(function*(){if(yield e.init(),!e.widgetId){let t=e.container;if(!e.isInvisible){const e=document.createElement("div");t.appendChild(e),t=e}e.widgetId=e.getAssertedRecaptcha().render(t,e.parameters)}return e.widgetId})()}init(){var e=this;return(0,r.Z)(function*(){v(C()&&!On(),e.auth,"internal-error"),yield function(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}(),e.recaptcha=yield e._recaptchaLoader.load(e.auth,e.auth.languageCode||void 0);const t=yield function(e){return Zn.apply(this,arguments)}(e.auth);v(t,e.auth,"internal-error"),e.parameters.sitekey=t})()}getAssertedRecaptcha(){return v(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class or{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=ot._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}function ar(){return(ar=(0,r.Z)(function*(e,t,n){const r=Ie(e),i=yield ur(r,t,(0,s.m9)(n));return new or(i,e=>Lt(r,e))})).apply(this,arguments)}function lr(){return(lr=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);yield At(!1,r,"phone");const i=yield ur(r.auth,t,(0,s.m9)(n));return new or(i,e=>Mt(r,e))})).apply(this,arguments)}function cr(){return(cr=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i=yield ur(r.auth,t,(0,s.m9)(n));return new or(i,e=>Vt(r,e))})).apply(this,arguments)}function ur(e,t,n){return hr.apply(this,arguments)}function hr(){return(hr=(0,r.Z)(function*(e,t,n){var r;const i=yield n.verify();try{let s;if(v("string"==typeof i,e,"argument-error"),v(n.type===rr,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s)return v("enroll"===t.type,e,"internal-error"),(yield Tn(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{v("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;return v(n,e,"missing-multi-factor-info"),(yield Gn(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=yield et(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}})).apply(this,arguments)}function dr(){return(dr=(0,r.Z)(function*(e,t){yield kt((0,s.m9)(e),t)})).apply(this,arguments)}let pr=(()=>{class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=Ie(t)}verifyPhoneNumber(e,t){return ur(this.auth,e,(0,s.m9)(t))}static credential(e,t){return ot._fromVerification(e,t)}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?ot._fromTokenResponse(t,n):null}}return e.PROVIDER_ID="phone",e.PHONE_SIGN_IN_METHOD="phone",e})();function fr(e,t){return t?S(t):(v(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}class gr extends Pe{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qe(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Qe(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Qe(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function mr(e){return Ot(e.auth,new gr(e),e.bypassAuthState)}function yr(e){const{auth:t,user:n}=e;return v(n,t,"internal-error"),Rt(n,new gr(e),e.bypassAuthState)}function _r(e){return vr.apply(this,arguments)}function vr(){return(vr=(0,r.Z)(function*(e){const{auth:t,user:n}=e;return v(n,t,"internal-error"),kt(n,new gr(e),e.bypassAuthState)})).apply(this,arguments)}class wr{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,r.Z)(function*(t,n){e.pendingPromise={resolve:t,reject:n};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(r){e.reject(r)}});return function(e,n){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,r.Z)(function*(){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o)return void t.reject(o);const l={auth:t.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(a)(l))}catch(c){t.reject(c)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mr;case"linkViaPopup":case"linkViaRedirect":return _r;case"reauthViaPopup":case"reauthViaRedirect":return yr;default:f(this.auth,"internal-error")}}resolve(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const br=new k(2e3,1e4);function Tr(){return(Tr=(0,r.Z)(function*(e,t,n){const r=Ie(e);y(e,t,ct);const i=fr(r,n);return new Cr(r,"signInViaPopup",t,i).executeNotNull()})).apply(this,arguments)}function Sr(){return(Sr=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);y(r.auth,t,ct);const i=fr(r.auth,n);return new Cr(r.auth,"reauthViaPopup",t,i,r).executeNotNull()})).apply(this,arguments)}function Er(){return(Er=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);y(r.auth,t,ct);const i=fr(r.auth,n);return new Cr(r.auth,"linkViaPopup",t,i,r).executeNotNull()})).apply(this,arguments)}let Cr=(()=>{class e extends wr{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}executeNotNull(){var e=this;return(0,r.Z)(function*(){const t=yield e.execute();return v(t,e.auth,"internal-error"),t})()}onExecution(){var e=this;return(0,r.Z)(function*(){b(1===e.filter.length,"Popup operations only handle one event");const t=Pn();e.authWindow=yield e.resolver._openPopup(e.auth,e.provider,e.filter[0],t),e.authWindow.associatedEvent=t,e.resolver._originValidation(e.auth).catch(t=>{e.reject(t)}),e.resolver._isIframeWebStorageSupported(e.auth,t=>{t||e.reject(g(e.auth,"web-storage-unsupported"))}),e.pollUserCancellation()})()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(g(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;this.pollId=(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(g(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(e,br.get())};e()}}return e.currentPopupAction=null,e})();const Ir=new Map;class kr extends wr{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,r.Z)(function*(){let n=Ir.get(t.auth._key());if(!n){try{const r=(yield function(e,t){return xr.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;n=()=>Promise.resolve(r)}catch(r){n=()=>Promise.reject(r)}Ir.set(t.auth._key(),n)}return t.bypassAuthState||Ir.set(t.auth._key(),()=>Promise.resolve(null)),n()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,n=this;return(0,r.Z)(function*(){if("signInViaRedirect"===e.type)return t().call(n,e);if("unknown"!==e.type){if(e.eventId){const r=yield n.auth._redirectUserForId(e.eventId);if(r)return n.user=r,t().call(n,e);n.resolve(null)}}else n.resolve(null)})()}onExecution(){return(0,r.Z)(function*(){})()}cleanUp(){}}function xr(){return(xr=(0,r.Z)(function*(e,t){const n=Nr(t),r=Rr(e);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(n));return yield r._remove(n),i})).apply(this,arguments)}function Ar(e,t){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,r.Z)(function*(e,t){return Rr(e)._set(Nr(t),"true")})).apply(this,arguments)}function Rr(e){return S(e._redirectPersistence)}function Nr(e){return de("pendingRedirect",e.config.apiKey,e.name)}function Or(){return(Or=(0,r.Z)(function*(e,t,n){const r=Ie(e);y(e,t,ct);const i=fr(r,n);return yield Ar(i,r),i._openRedirect(r,t,"signInViaRedirect")})).apply(this,arguments)}function Dr(){return(Dr=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);y(r.auth,t,ct);const i=fr(r.auth,n);yield Ar(i,r.auth);const o=yield Vr(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",o)})).apply(this,arguments)}function Lr(){return(Lr=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);y(r.auth,t,ct);const i=fr(r.auth,n);yield At(!1,r,t.providerId),yield Ar(i,r.auth);const o=yield Vr(r);return i._openRedirect(r.auth,t,"linkViaRedirect",o)})).apply(this,arguments)}function Fr(){return(Fr=(0,r.Z)(function*(e,t){return yield Ie(e)._initializationPromise,Mr(e,t,!1)})).apply(this,arguments)}function Mr(e,t){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,r.Z)(function*(e,t,n=!1){const r=Ie(e),i=fr(r,t),s=new kr(r,i,n),o=yield s.execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,t)),o})).apply(this,arguments)}function Vr(e){return jr.apply(this,arguments)}function jr(){return(jr=(0,r.Z)(function*(e){const t=Pn(`${e.uid}:::`);return e._redirectEventId=t,yield e.auth._setRedirectUser(e),yield e.auth._persistUserIfCurrent(e),t})).apply(this,arguments)}class qr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zr(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!zr(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(g(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Br(e))}saveEventToCache(e){this.cachedEventUids.add(Br(e)),this.lastProcessedEventTime=Date.now()}}function Br(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function zr({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}function $r(e){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,r.Z)(function*(e,t={}){return O(e,"GET","/v1/projects",t)})).apply(this,arguments)}const Gr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zr=/^https?/;function Kr(){return(Kr=(0,r.Z)(function*(e){if(e.config.emulator)return;const{authorizedDomains:t}=yield $r(e);for(const r of t)try{if(Wr(r))return}catch(n){}f(e,"unauthorized-domain")})).apply(this,arguments)}function Wr(e){const t=E(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Zr.test(n))return!1;if(Gr.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Yr=new k(3e4,6e4);function Qr(){const e=Nn().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Jr=null;function Xr(e){return Jr=Jr||function(e){return new Promise((t,n)=>{var r,i,s;function o(){Qr(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Qr(),n(g(e,"network-request-failed"))},timeout:Yr.get()})}if(null===(i=null===(r=Nn().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Nn().gapi)||void 0===s?void 0:s.load)){const t=Wn("iframefcb");return Nn()[t]=()=>{gapi.load?o():n(g(e,"network-request-failed"))},Kn(`https://apis.google.com/js/api.js?onload=${t}`)}o()}}).catch(e=>{throw Jr=null,e})}(e),Jr}const ei=new k(5e3,15e3),ti={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ni=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ri(e){const t=e.config;v(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?x(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:o.SDK_VERSION},i=ni.get(e.config.apiHost);i&&(r.eid=i);const a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${(0,s.xO)(r).slice(1)}`}function ii(){return(ii=(0,r.Z)(function*(e){const t=yield Xr(e),n=Nn().gapi;return v(n,e,"internal-error"),t.open({where:document.body,url:ri(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ti,dontclear:!0},t=>new Promise(function(){var n=(0,r.Z)(function*(n,r){yield t.restyle({setHideOnLeave:!1});const i=g(e,"network-request-failed"),s=Nn().setTimeout(()=>{r(i)},ei.get());function o(){Nn().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})});return function(e,t){return n.apply(this,arguments)}}()))})).apply(this,arguments)}const si={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class oi{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function ai(e,t,n,r,i,a){v(e.config.authDomain,e,"auth-domain-config-required"),v(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:o.SDK_VERSION,eventId:i};if(t instanceof ct){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,s.xb)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))l[e]=t}if(t instanceof ut){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const c=l;for(const s of Object.keys(c))void 0===c[s]&&delete c[s];return`${function({config:e}){return e.emulator?x(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${(0,s.xO)(c).slice(1)}`}const li="webStorageSupport";class ci extends class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return w("unexpected MultiFactorSessionType")}}}{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new ci(e)}_finalizeEnroll(e,t,n){return function(e,t){return O(e,"POST","/v2/accounts/mfaEnrollment:finalize",N(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return O(e,"POST","/v2/accounts/mfaSignIn:finalize",N(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ui=(()=>{class e{constructor(){}static assertion(e){return ci._fromCredential(e)}}return e.FACTOR_ID="phone",e})();var hi,di="@firebase/auth",pi="0.19.3";class fi{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,r.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){v(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function gi(){return window}function mi(){return(mi=(0,r.Z)(function*(e,t,n){var r;const{BuildInfo:i}=gi();b(t.sessionId,"AuthEvent did not contain a session ID");const s=yield vi(t.sessionId),o={};return Te()?o.ibi=i.packageName:ve()?o.apn=i.packageName:f(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,ai(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)})).apply(this,arguments)}function yi(){return(yi=(0,r.Z)(function*(e){const{BuildInfo:t}=gi(),n={};Te()?n.iosBundleId=t.packageName:ve()?n.androidPackageName=t.packageName:f(e,"operation-not-supported-in-this-environment"),yield $r(e,n)})).apply(this,arguments)}function _i(){return(_i=(0,r.Z)(function*(e,t,n){const{cordova:r}=gi();let i=()=>{};try{yield new Promise((s,o)=>{let a=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout(()=>{o(g(e,"redirect-cancelled-by-user"))},2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),ve()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}})}finally{i()}})).apply(this,arguments)}function vi(e){return wi.apply(this,arguments)}function wi(){return(wi=(0,r.Z)(function*(e){const t=bi(e),n=yield crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(e=>e.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function bi(e){if(b(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}hi="Browser",(0,o._registerComponent)(new c.wA("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),{apiKey:r,authDomain:i}=n.options;return(e=>{v(r&&!r.includes(":"),"invalid-api-key",{appName:e.name}),v(!(null==i?void 0:i.includes(":")),"argument-error",{appName:e.name});const n={apiKey:r,authDomain:i,clientPlatform:hi,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ee(hi)},s=new Ce(e,n);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(S);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(s,t),s})(n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,o._registerComponent)(new c.wA("auth-internal",e=>{return t=Ie(e.getProvider("auth").getImmediate()),new fi(t);var t},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,o.registerVersion)(di,pi,void 0),(0,o.registerVersion)(di,pi,"esm2017");class Ti extends qr{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}initialized(){var e=this;return(0,r.Z)(function*(){yield e.initPromise})()}}function Si(e){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,r.Z)(function*(e){const t=yield Ii()._get(ki(e));return t&&(yield Ii()._remove(ki(e))),t})).apply(this,arguments)}function Ci(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}function Ii(){return S(kn)}function ki(e){return de("authEvent",e.config.apiKey,e.name)}function xi(e){if(!(null==e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return(0,s.zd)(n.join("?"))}function Ai(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:g("no-auth-event")}}function Pi(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Ri(e=(0,s.z$)()){return!("file:"!==Pi()&&"ionic:"!==Pi()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ni(){try{const e=self.localStorage,t=Pn();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(e=(0,s.z$)()){return(0,s.w1)()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(e=(0,s.z$)()){return/Edge\/\d+/.test(e)}(e)}()||(0,s.hl)()}catch(e){return Oi()&&(0,s.hl)()}return!1}function Oi(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Di(){return("http:"===Pi()||"https:"===Pi()||(0,s.ru)()||Ri())&&!((0,s.b$)()||(0,s.UG)())&&Ni()&&!Oi()}function Li(){return Ri()&&"undefined"!=typeof document}function Fi(){return(Fi=(0,r.Z)(function*(){return!!Li()&&new Promise(e=>{const t=setTimeout(()=>{e(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(t),e(!0)})})})).apply(this,arguments)}const Mi={LOCAL:"local",NONE:"none",SESSION:"session"},Ui=v,Vi="persistence";function ji(e){return qi.apply(this,arguments)}function qi(){return(qi=(0,r.Z)(function*(e){yield e._initializationPromise;const t=Bi(),n=de(Vi,e.config.apiKey,e.name);(null==t?void 0:t.sessionStorage)&&t.sessionStorage.setItem(n,e._getPersistence())})).apply(this,arguments)}function Bi(){return"undefined"!=typeof window?window:null}const zi=v;class $i{constructor(){this.browserResolver=S(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xn,this._completeRedirectFn=Mr}_openPopup(e,t,n,i){var o=this;return(0,r.Z)(function*(){var r;b(null===(r=o.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");const a=ai(e,t,n,E(),i);return function(e,t,n,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},si),{width:r.toString(),height:i.toString(),top:o,left:a}),u=(0,s.z$)().toLowerCase();n&&(l=ye(u)?"_blank":n),ge(u)&&(t=t||"http://localhost",c.scrollbars="yes");const h=Object.entries(c).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=(0,s.z$)()){var t;return Te(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(u)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new oi(null);const d=window.open(t||"",l,h);v(d,e,"popup-blocked");try{d.focus()}catch(p){}return new oi(d)}(e,a,Pn())})()}_openRedirect(e,t,n,i){var s=this;return(0,r.Z)(function*(){var r;return yield s._originValidation(e),r=ai(e,t,n,E(),i),Nn().location.href=r,new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(b(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n}initAndGetManager(e){var t=this;return(0,r.Z)(function*(){const n=yield function(e){return ii.apply(this,arguments)}(e),r=new qr(e);return n.register("authEvent",t=>(v(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:r.onEvent(t.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:r},t.iframes[e._key()]=n,r})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(li,{type:li},n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),f(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Kr.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Se()||me()||Te()}}),this.cordovaResolver=S(class{constructor(){this._redirectPersistence=xn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Mr}_initialize(e){var t=this;return(0,r.Z)(function*(){const n=e._key();let r=t.eventManagers.get(n);return r||(r=new Ti(e),t.eventManagers.set(n,r),t.attachCallbackListeners(e,r)),r})()}_openPopup(e){f(e,"operation-not-supported-in-this-environment")}_openRedirect(e,t,n,i){var o=this;return(0,r.Z)(function*(){!function(e){var t,n,r,i,s,o,a,l,c,u;const h=gi();v("function"==typeof(null===(t=null==h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),v(void 0!==(null===(n=null==h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),v("function"==typeof(null===(s=null===(i=null===(r=null==h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),v("function"==typeof(null===(l=null===(a=null===(o=null==h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),v("function"==typeof(null===(u=null===(c=null==h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const r=yield o._initialize(e);yield r.initialized(),r.resetRedirect(),Ir.clear(),yield o._originValidation(e);const a=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:Ci(),postBody:null,tenantId:e.tenantId,error:g(e,"no-auth-event")}}(e,n,i);yield function(e,t){return Ii()._set(ki(e),t)}(e,a);const l=yield function(e,t,n){return mi.apply(this,arguments)}(e,a,t),c=yield function(e){const{cordova:t}=gi();return new Promise(n=>{t.plugins.browsertab.isAvailable(r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(e=(0,s.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)})})}(l);return function(e,t,n){return _i.apply(this,arguments)}(e,r,c)})()}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return yi.apply(this,arguments)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:i,BuildInfo:s}=gi(),o=setTimeout((0,r.Z)(function*(){yield Si(e),t.onEvent(Ai())}),500),a=function(){var n=(0,r.Z)(function*(n){clearTimeout(o);const r=yield Si(e);let i=null;r&&(null==n?void 0:n.url)&&(i=function(e,t){var n,r;const i=function(e){const t=xi(e),n=t.link?decodeURIComponent(t.link):void 0,r=xi(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return xi(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=xi(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null==s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?g(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}(r,n.url)),t.onEvent(i||Ai())});return function(e){return n.apply(this,arguments)}}();void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,a);const l=i,c=`${s.packageName.toLowerCase()}://`;gi().handleOpenURL=function(){var e=(0,r.Z)(function*(e){if(e.toLowerCase().startsWith(c)&&a({url:e}),"function"==typeof l)try{l(e)}catch(t){console.error(t)}});return function(t){return e.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=xn,this._completeRedirectFn=Mr}_initialize(e){var t=this;return(0,r.Z)(function*(){return yield t.selectUnderlyingResolver(),t.assertedUnderlyingResolver._initialize(e)})()}_openPopup(e,t,n,i){var s=this;return(0,r.Z)(function*(){return yield s.selectUnderlyingResolver(),s.assertedUnderlyingResolver._openPopup(e,t,n,i)})()}_openRedirect(e,t,n,i){var s=this;return(0,r.Z)(function*(){return yield s.selectUnderlyingResolver(),s.assertedUnderlyingResolver._openRedirect(e,t,n,i)})()}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Li()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return zi(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var e=this;return(0,r.Z)(function*(){if(e.underlyingResolver)return;const t=yield function(){return Fi.apply(this,arguments)}();e.underlyingResolver=t?e.cordovaResolver:e.browserResolver})()}}function Hi(e){return e.unwrap()}function Gi(e){const{_tokenResponse:t}=e instanceof s.ZR?e.customData:e;if(!t)return null;if(!(e instanceof s.ZR)&&"temporaryProof"in t&&"phoneNumber"in t)return pr.credentialFromResult(e);const n=t.providerId;if(!n||"password"===n)return null;let r;switch(n){case"google.com":r=pt;break;case"facebook.com":r=dt;break;case"github.com":r=ft;break;case"twitter.com":r=yt;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?gt._create(n,o):Xe._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new ht(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof s.ZR?r.credentialFromError(e):r.credentialFromResult(e)}function Zi(e,t){return t.catch(t=>{throw t instanceof s.ZR&&function(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new Yi(e,function(e,t){var n;const r=(0,s.m9)(e),i=t;return v(t.customData.operationType,r,"argument-error"),v(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),bn._fromError(r,i)}(e,t));else if(r){const e=Gi(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}(e,t),t}).then(e=>{const t=e.user;return{operationType:e.operationType,credential:(n=e,Gi(n)),additionalUserInfo:vn(e),user:Qi.getOrCreate(t)};var n})}function Ki(e,t){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,r.Z)(function*(e,t){const n=yield t;return{verificationId:n.verificationId,confirm:t=>Zi(e,n.confirm(t))}})).apply(this,arguments)}class Yi{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Zi(Hi(this.auth),this.resolver.resolveSignIn(e))}}class Qi{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=(0,s.m9)(e);return En.has(t)||En.set(t,Sn._fromUser(t)),En.get(t)}(e)}static getOrCreate(e){return Qi.USER_MAP.has(e)||Qi.USER_MAP.set(e,new Qi(e)),Qi.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}linkWithCredential(e){var t=this;return(0,r.Z)(function*(){return Zi(t.auth,Mt(t._delegate,e))})()}linkWithPhoneNumber(e,t){var n=this;return(0,r.Z)(function*(){return Ki(n.auth,function(e,t,n){return lr.apply(this,arguments)}(n._delegate,e,t))})()}linkWithPopup(e){var t=this;return(0,r.Z)(function*(){return Zi(t.auth,function(e,t,n){return Er.apply(this,arguments)}(t._delegate,e,$i))})()}linkWithRedirect(e){var t=this;return(0,r.Z)(function*(){return yield ji(Ie(t.auth)),function(e,t,n){return function(e,t,n){return Lr.apply(this,arguments)}(e,t,n)}(t._delegate,e,$i)})()}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}reauthenticateWithCredential(e){var t=this;return(0,r.Z)(function*(){return Zi(t.auth,Vt(t._delegate,e))})()}reauthenticateWithPhoneNumber(e,t){return Ki(this.auth,function(e,t,n){return cr.apply(this,arguments)}(this._delegate,e,t))}reauthenticateWithPopup(e){return Zi(this.auth,function(e,t,n){return Sr.apply(this,arguments)}(this._delegate,e,$i))}reauthenticateWithRedirect(e){var t=this;return(0,r.Z)(function*(){return yield ji(Ie(t.auth)),function(e,t,n){return function(e,t,n){return Dr.apply(this,arguments)}(e,t,n)}(t._delegate,e,$i)})()}sendEmailVerification(e){return function(e,t){return on.apply(this,arguments)}(this._delegate,e)}unlink(e){var t=this;return(0,r.Z)(function*(){return yield function(e,t){return It.apply(this,arguments)}(t._delegate,e),t})()}updateEmail(e){return function(e,t){return hn((0,s.m9)(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return hn((0,s.m9)(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return function(e,t){return dr.apply(this,arguments)}(this._delegate,e)}updateProfile(e){return function(e,t){return un.apply(this,arguments)}(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return function(e,t,n){return an.apply(this,arguments)}(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Qi.USER_MAP=new WeakMap;const Ji=v;let Xi=(()=>{class e{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;Ji(n,"invalid-api-key",{appName:e.name});let r=[he];if("undefined"!=typeof window){r=function(e,t){const n=Bi();if(!(null==n?void 0:n.sessionStorage))return[];const r=de(Vi,e,t);switch(n.sessionStorage.getItem(r)){case Mi.NONE:return[he];case Mi.LOCAL:return[Hn,xn];case Mi.SESSION:return[xn];default:return[]}}(n,e.name);for(const e of[Hn,kn,xn])r.includes(e)||r.push(e)}Ji(n,"invalid-api-key",{appName:e.name});const i="undefined"!=typeof window?$i:void 0;this._delegate=t.initialize({options:{persistence:r,popupRedirectResolver:i}}),this._delegate._updateErrorMap(u),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Qi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){!function(e,t,n){const r=Ie(e);v(r._canInitEmulator,r,"emulator-config-failed"),v(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=xe(t),{host:o,port:a}=function(e){const t=xe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Ae(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ae(t)}}}(t);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(this._delegate,e,t)}applyActionCode(e){return function(e,t){return Wt.apply(this,arguments)}(this._delegate,e)}checkActionCode(e){return Yt(this._delegate,e)}confirmPasswordReset(e,t){return function(e,t,n){return Kt.apply(this,arguments)}(this._delegate,e,t)}createUserWithEmailAndPassword(e,t){var n=this;return(0,r.Z)(function*(){return Zi(n._delegate,function(e,t,n){return Xt.apply(this,arguments)}(n._delegate,e,t))})()}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return function(e,t){return sn.apply(this,arguments)}(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=at.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}(0,e)}getRedirectResult(){var e=this;return(0,r.Z)(function*(){Ji(Di(),e._delegate,"operation-not-supported-in-this-environment");const t=yield function(e,t){return Fr.apply(this,arguments)}(e._delegate,$i);return t?Zi(e._delegate,Promise.resolve(t)):{credential:null,user:null}})()}addFrameworkForLogging(e){!function(e,t){Ie(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=es(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=es(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return function(e,t,n){return en.apply(this,arguments)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return function(e,t,n){return Zt.apply(this,arguments)}(this._delegate,e,t||void 0)}setPersistence(e){var t=this;return(0,r.Z)(function*(){let n;switch(function(e,t){Ui(Object.values(Mi).includes(t),e,"invalid-persistence-type"),(0,s.b$)()?Ui(t!==Mi.SESSION,e,"unsupported-persistence-type"):(0,s.UG)()?Ui(t===Mi.NONE,e,"unsupported-persistence-type"):Oi()?Ui(t===Mi.NONE||t===Mi.LOCAL&&(0,s.hl)(),e,"unsupported-persistence-type"):Ui(t===Mi.NONE||Ni(),e,"unsupported-persistence-type")}(t._delegate,e),e){case Mi.SESSION:n=xn;break;case Mi.LOCAL:n=(yield S(Hn)._isAvailable())?Hn:kn;break;case Mi.NONE:n=he;break;default:return f("argument-error",{appName:t._delegate.name})}return t._delegate.setPersistence(n)})()}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Zi(this._delegate,function(e){return Tt.apply(this,arguments)}(this._delegate))}signInWithCredential(e){return Zi(this._delegate,Lt(this._delegate,e))}signInWithCustomToken(e){return Zi(this._delegate,function(e,t){return zt.apply(this,arguments)}(this._delegate,e))}signInWithEmailAndPassword(e,t){return Zi(this._delegate,function(e,t,n){return Lt((0,s.m9)(e),lt.credential(t,n))}(this._delegate,e,t))}signInWithEmailLink(e,t){return Zi(this._delegate,function(e,t,n){return tn.apply(this,arguments)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Ki(this._delegate,function(e,t,n){return ar.apply(this,arguments)}(this._delegate,e,t))}signInWithPopup(e){var t=this;return(0,r.Z)(function*(){return Ji(Di(),t._delegate,"operation-not-supported-in-this-environment"),Zi(t._delegate,function(e,t,n){return Tr.apply(this,arguments)}(t._delegate,e,$i))})()}signInWithRedirect(e){var t=this;return(0,r.Z)(function*(){return Ji(Di(),t._delegate,"operation-not-supported-in-this-environment"),yield ji(t._delegate),function(e,t,n){return function(e,t,n){return Or.apply(this,arguments)}(e,t,n)}(t._delegate,e,$i)})()}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return function(e,t){return Jt.apply(this,arguments)}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return e.Persistence=Mi,e})();function es(e,t,n){let r=e;"function"!=typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&Qi.getOrCreate(e)),error:t,complete:n}}class ts{constructor(){this.providerId="phone",this._delegate=new pr(Hi(i.Z.auth()))}static credential(e,t){return pr.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}ts.PHONE_SIGN_IN_METHOD=pr.PHONE_SIGN_IN_METHOD,ts.PROVIDER_ID=pr.PROVIDER_ID;const ns=v;var rs;(rs=i.Z).INTERNAL.registerComponent(new c.wA("auth-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Xi(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:lt,FacebookAuthProvider:dt,GithubAuthProvider:ft,GoogleAuthProvider:pt,OAuthProvider:ht,SAMLAuthProvider:mt,PhoneAuthProvider:ts,PhoneMultiFactorGenerator:ui,RecaptchaVerifier:class{constructor(e,t,n=i.Z.app()){var r;ns(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new sr(e,t,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:yt,Auth:Xi,AuthCredential:Pe,Error:s.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),rs.registerVersion("@firebase/auth-compat","0.2.3")},6676:function(e,t){!function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function r(e,t,r){var i,s=new Promise(function(s,o){n(i=e[t].apply(e,r)).then(s,o)});return s.request=i,s}function i(e,t,n){var i=r(e,t,n);return i.then(function(e){if(e)return new u(e,i.request)})}function s(e,t,n){n.forEach(function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})})}function o(e,t,n,i){i.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})})}function a(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})})}function l(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})})}function c(e){this._index=e}function u(e,t){this._cursor=e,this._request=t}function h(e){this._store=e}function d(e){this._tx=e,this.complete=new Promise(function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}})}function p(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new d(n)}function f(e){this._db=e}s(c,"_index",["name","keyPath","multiEntry","unique"]),o(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),l(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),s(u,"_cursor",["direction","key","primaryKey","value"]),o(u,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(e){e in IDBCursor.prototype&&(u.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then(function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then(function(e){if(e)return new u(e,t._request)})})})}),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},s(h,"_store",["name","keyPath","indexNames","autoIncrement"]),o(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),l(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(h,"_store",IDBObjectStore,["deleteIndex"]),d.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},s(d,"_tx",["objectStoreNames","mode"]),a(d,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},s(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["deleteObjectStore","close"]),f.prototype.transaction=function(){return new d(this._db.transaction.apply(this._db,arguments))},s(f,"_db",["name","version","objectStoreNames"]),a(f,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(e){[h,c].forEach(function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,s=i[e].apply(i,n.slice(0,-1));s.onsuccess=function(){r(s.result)}})})}),[c,h].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise(function(i){n.iterateCursor(e,function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)})})})}),e.openDb=function(e,t,n){var i=r(indexedDB,"open",[e,t]),s=i.request;return s&&(s.onupgradeneeded=function(e){n&&n(new p(s.result,e.oldVersion,s.transaction))}),i.then(function(e){return new f(e)})},e.deleteDb=function(e){return r(indexedDB,"deleteDatabase",[e])},Object.defineProperty(e,"__esModule",{value:!0})}(t)},7574:(e,t,n)=>{"use strict";n.d(t,{y:()=>c});var r=n(7393),i=n(9181),s=n(6490),o=n(6554),a=n(4487),l=n(2494);let c=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:o}=this,a=function(e,t,n){if(e){if(e instanceof r.L)return e;if(e[i.b])return e[i.b]()}return e||t||n?new r.L(e,t,n):new r.L(s.c)}(e,t,n);if(a.add(o?o.call(a,this.source):this.source||l.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),l.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(e){try{return this._subscribe(e)}catch(t){l.v.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:i}=e;if(t||i)return!1;e=n&&n instanceof r.L?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=u(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(i){n(i),r&&r.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[o.L](){return this}pipe(...e){return 0===e.length?this:(0===(t=e).length?a.y:1===t.length?t[0]:function(e){return t.reduce((e,t)=>t(e),e)})(this);var t}toPromise(e){return new(e=u(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function u(e){if(e||(e=l.v.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},6490:(e,t,n)=>{"use strict";n.d(t,{c:()=>s});var r=n(2494),i=n(4449);const s={closed:!0,next(e){},error(e){if(r.v.useDeprecatedSynchronousErrorHandling)throw e;(0,i.z)(e)},complete(){}}},5197:(e,t,n)=>{"use strict";n.d(t,{L:()=>i});var r=n(7393);class i extends r.L{notifyNext(e,t,n,r,i){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}},9765:(e,t,n)=>{"use strict";n.d(t,{Yc:()=>c,xQ:()=>u});var r=n(7574),i=n(7393),s=n(5319),o=n(7971),a=n(8858),l=n(9181);class c extends i.L{constructor(e){super(e),this.destination=e}}let u=(()=>{class e extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[l.b](){return new c(this)}lift(e){const t=new h(this,this);return t.operator=e,t}next(e){if(this.closed)throw new o.N;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].next(e)}}error(e){if(this.closed)throw new o.N;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].error(e);this.observers.length=0}complete(){if(this.closed)throw new o.N;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let r=0;r<t;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new o.N;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new o.N;return this.hasError?(e.error(this.thrownError),s.w.EMPTY):this.isStopped?(e.complete(),s.w.EMPTY):(this.observers.push(e),new a.W(this,e))}asObservable(){const e=new r.y;return e.source=this,e}}return e.create=(e,t)=>new h(e,t),e})();class h extends u{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):s.w.EMPTY}}},8858:(e,t,n)=>{"use strict";n.d(t,{W:()=>i});var r=n(5319);class i extends r.w{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},7393:(e,t,n)=>{"use strict";n.d(t,{L:()=>c});var r=n(9105),i=n(6490),s=n(5319),o=n(9181),a=n(2494),l=n(4449);class c extends s.w{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!e){this.destination=i.c;break}if("object"==typeof e){e instanceof c?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new u(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new u(this,e,t,n)}}[o.b](){return this}static create(e,t,n){const r=new c(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class u extends c{constructor(e,t,n,s){let o;super(),this._parentSubscriber=e;let a=this;(0,r.m)(t)?o=t:t&&(o=t.next,n=t.error,s=t.complete,t!==i.c&&(a=Object.create(t),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=n,this._complete=s}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):(0,l.z)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;(0,l.z)(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,l.z)(n)}}__tryOrSetError(e,t,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):((0,l.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}},5319:(e,t,n)=>{"use strict";n.d(t,{w:()=>a});var r=n(9796),i=n(1555),s=n(9105);const o=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();class a{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:n,_unsubscribe:l,_subscriptions:u}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof a)t.remove(this);else if(null!==t)for(let r=0;r<t.length;++r)t[r].remove(this);if((0,s.m)(l)){n&&(this._unsubscribe=void 0);try{l.call(this)}catch(h){e=h instanceof o?c(h.errors):[h]}}if((0,r.k)(u)){let t=-1,n=u.length;for(;++t<n;){const n=u[t];if((0,i.K)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof o?e=e.concat(c(h.errors)):e.push(h)}}}if(e)throw new o(e)}add(e){let t=e;if(!e)return a.EMPTY;switch(typeof e){case"function":t=new a(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof a)){const e=t;t=new a,t._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:n}=t;if(null===n)t._parentOrParents=this;else if(n instanceof a){if(n===this)return t;t._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return t;n.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[t]:r.push(t),t}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}var l;function c(e){return e.reduce((e,t)=>e.concat(t instanceof o?t.errors:t),[])}a.EMPTY=((l=new a).closed=!0,l)},2494:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},5345:(e,t,n)=>{"use strict";n.d(t,{IY:()=>o,Ds:()=>a,ft:()=>l});var r=n(7393),i=n(7574),s=n(7444);class o extends r.L{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function l(e,t){if(t.closed)return;if(e instanceof i.y)return e.subscribe(t);let n;try{n=(0,s.s)(e)(t)}catch(r){t.error(r)}return n}},2441:(e,t,n)=>{"use strict";n.d(t,{c:()=>a,N:()=>l});var r=n(9765),i=n(7574),s=n(5319),o=n(1307);class a extends i.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new s.w,e.add(this.source.subscribe(new c(this.getSubject(),this))),e.closed&&(this._connection=null,e=s.w.EMPTY)),e}refCount(){return(0,o.x)()(this)}}const l=(()=>{const e=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class c extends r.Yc{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}},8071:(e,t,n)=>{"use strict";n.d(t,{z:()=>s});var r=n(5917),i=n(3282);function s(...e){return(0,i.J)(1)((0,r.of)(...e))}},9193:(e,t,n)=>{"use strict";n.d(t,{E:()=>i,c:()=>s});var r=n(7574);const i=new r.y(e=>e.complete());function s(e){return e?function(e){return new r.y(t=>e.schedule(()=>t.complete()))}(e):i}},4402:(e,t,n)=>{"use strict";n.d(t,{D:()=>h});var r=n(7574),i=n(7444),s=n(5319),o=n(6554),a=n(4087),l=n(377),c=n(4072),u=n(9489);function h(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[o.L]}(e))return function(e,t){return new r.y(n=>{const r=new s.w;return r.add(t.schedule(()=>{const i=e[o.L]();r.add(i.subscribe({next(e){r.add(t.schedule(()=>n.next(e)))},error(e){r.add(t.schedule(()=>n.error(e)))},complete(){r.add(t.schedule(()=>n.complete()))}}))})),r})}(e,t);if((0,c.t)(e))return function(e,t){return new r.y(n=>{const r=new s.w;return r.add(t.schedule(()=>e.then(e=>{r.add(t.schedule(()=>{n.next(e),r.add(t.schedule(()=>n.complete()))}))},e=>{r.add(t.schedule(()=>n.error(e)))}))),r})}(e,t);if((0,u.z)(e))return(0,a.r)(e,t);if(function(e){return e&&"function"==typeof e[l.hZ]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new s.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(t.schedule(()=>{i=e[l.hZ](),r.add(t.schedule(function(){if(n.closed)return;let e,t;try{const n=i.next();e=n.value,t=n.done}catch(r){return void n.error(r)}t?n.complete():(n.next(e),this.schedule())}))})),r})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof r.y?e:new r.y((0,i.s)(e))}},6693:(e,t,n)=>{"use strict";n.d(t,{n:()=>o});var r=n(7574),i=n(5015),s=n(4087);function o(e,t){return t?(0,s.r)(e,t):new r.y((0,i.V)(e))}},6682:(e,t,n)=>{"use strict";n.d(t,{T:()=>a});var r=n(7574),i=n(4869),s=n(3282),o=n(6693);function a(...e){let t=Number.POSITIVE_INFINITY,n=null,a=e[e.length-1];return(0,i.K)(a)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof a&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof r.y?e[0]:(0,s.J)(t)((0,o.n)(e,n))}},5917:(e,t,n)=>{"use strict";n.d(t,{of:()=>o});var r=n(4869),i=n(6693),s=n(4087);function o(...e){let t=e[e.length-1];return(0,r.K)(t)?(e.pop(),(0,s.r)(e,t)):(0,i.n)(e)}},4612:(e,t,n)=>{"use strict";n.d(t,{b:()=>i});var r=n(9773);function i(e,t){return(0,r.zg)(e,t,1)}},5242:(e,t,n)=>{"use strict";n.d(t,{d:()=>i});var r=n(7393);function i(e=null){return t=>t.lift(new s(e))}class s{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new o(e,this.defaultValue))}}class o extends r.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},7519:(e,t,n)=>{"use strict";n.d(t,{x:()=>i});var r=n(7393);function i(e,t){return n=>n.lift(new s(e,t))}class s{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new o(e,this.compare,this.keySelector))}}class o extends r.L{constructor(e,t,n){super(e),this.keySelector=n,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:n}=this;t=n?n(e):e}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:e}=this;n=e(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))}}},5435:(e,t,n)=>{"use strict";n.d(t,{h:()=>i});var r=n(7393);function i(e,t){return function(n){return n.lift(new s(e,t))}}class s{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new o(e,this.predicate,this.thisArg))}}class o extends r.L{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}},8939:(e,t,n)=>{"use strict";n.d(t,{x:()=>s});var r=n(7393),i=n(5319);function s(e){return t=>t.lift(new o(e))}class o{constructor(e){this.callback=e}call(e,t){return t.subscribe(new a(e,this.callback))}}class a extends r.L{constructor(e,t){super(e),this.add(new i.w(t))}}},8049:(e,t,n)=>{"use strict";n.d(t,{P:()=>c});var r=n(3410),i=n(5435),s=n(5257),o=n(5242),a=n(4635),l=n(4487);function c(e,t){const n=arguments.length>=2;return c=>c.pipe(e?(0,i.h)((t,n)=>e(t,n,c)):l.y,(0,s.q)(1),n?(0,o.d)(t):(0,a.T)(()=>new r.K))}},8002:(e,t,n)=>{"use strict";n.d(t,{U:()=>i});var r=n(7393);function i(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(e,t))}}class s{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new o(e,this.project,this.thisArg))}}class o extends r.L{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}},3282:(e,t,n)=>{"use strict";n.d(t,{J:()=>s});var r=n(9773),i=n(4487);function s(e=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,e)}},9773:(e,t,n)=>{"use strict";n.d(t,{zg:()=>o});var r=n(8002),i=n(4402),s=n(5345);function o(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?s=>s.pipe(o((n,s)=>(0,i.D)(e(n,s)).pipe((0,r.U)((e,r)=>t(n,e,s,r))),n)):("number"==typeof t&&(n=t),t=>t.lift(new a(e,n)))}class a{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new l(e,this.project,this.concurrent))}}class l extends s.Ds{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new s.IY(this),n=this.destination;n.add(t);const r=(0,s.ft)(e,t);r!==t&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(e,t,n)=>{"use strict";n.d(t,{ht:()=>u,QV:()=>l});var r=n(7393),i=n(9193),s=n(5917),o=n(7574);class a{constructor(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}accept(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}toObservable(){switch(this.kind){case"N":return(0,s.of)(this.value);case"E":return e=this.error,new o.y(t=>t.error(e));case"C":return(0,i.c)()}var e;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new a("N",e):a.undefinedValueNotification}static createError(e){return new a("E",void 0,e)}static createComplete(){return a.completeNotification}}function l(e,t=0){return function(n){return n.lift(new c(e,t))}}a.completeNotification=new a("C"),a.undefinedValueNotification=new a("N",void 0);class c{constructor(e,t=0){this.scheduler=e,this.delay=t}call(e,t){return t.subscribe(new u(e,this.scheduler,this.delay))}}class u extends r.L{constructor(e,t,n=0){super(e),this.scheduler=t,this.delay=n}static dispatch(e){const{notification:t,destination:n}=e;t.observe(n),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(u.dispatch,this.delay,new h(e,this.destination)))}_next(e){this.scheduleMessage(a.createNext(e))}_error(e){this.scheduleMessage(a.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(e,t){this.notification=e,this.destination=t}}},9328:(e,t,n)=>{"use strict";n.d(t,{G:()=>i});var r=n(7393);function i(){return e=>e.lift(new s)}class s{call(e,t){return t.subscribe(new o(e))}}class o extends r.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}},1307:(e,t,n)=>{"use strict";n.d(t,{x:()=>i});var r=n(7393);function i(){return function(e){return e.lift(new s(e))}}class s{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new o(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class o extends r.L{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},2145:(e,t,n)=>{"use strict";n.d(t,{R:()=>i});var r=n(7393);function i(e,t){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new s(e,t,n))}}class s{constructor(e,t,n=!1){this.accumulator=e,this.seed=t,this.hasSeed=n}call(e,t){return t.subscribe(new o(e,this.accumulator,this.seed,this.hasSeed))}}class o extends r.L{constructor(e,t,n,r){super(e),this.accumulator=t,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let n;try{n=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}},8819:(e,t,n)=>{"use strict";n.d(t,{B:()=>a});var r=n(2441),i=n(1307),s=n(9765);function o(){return new s.xQ}function a(){return e=>{return(0,i.x)()((t=o,function(e){let n;n="function"==typeof t?t:function(){return t};const i=Object.create(e,r.N);return i.source=e,i.subjectFactory=n,i})(e));var t}}},2066:(e,t,n)=>{"use strict";n.d(t,{d:()=>h});var r=n(9765),i=n(7771),s=n(5319),o=n(309),a=n(7971),l=n(8858);class c extends r.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new u(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let c;if(this.closed)throw new a.N;if(this.isStopped||this.hasError?c=s.w.EMPTY:(this.observers.push(e),c=new l.W(this,e)),r&&e.add(e=new o.ht(e,r)),t)for(let s=0;s<i&&!e.closed;s++)e.next(n[s]);else for(let s=0;s<i&&!e.closed;s++)e.next(n[s].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),c}_getNow(){return(this.scheduler||i.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let s=0;for(;s<i&&!(e-r[s].time<n);)s++;return i>t&&(s=Math.max(s,i-t)),s>0&&r.splice(0,s),r}}class u{constructor(e,t){this.time=e,this.value=t}}function h(e,t,n){let r;return r=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},e=>e.lift(function({bufferSize:e=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,s,o=0,a=!1,l=!1;return function(u){let h;o++,!i||a?(a=!1,i=new c(e,t,r),h=i.subscribe(this),s=u.subscribe({next(e){i.next(e)},error(e){a=!0,i.error(e)},complete(){l=!0,s=void 0,i.complete()}}),l&&(s=void 0)):h=i.subscribe(this),this.add(()=>{o--,h.unsubscribe(),h=void 0,s&&!l&&n&&0===o&&(s.unsubscribe(),s=void 0,i=void 0)})}}(r))}},9761:(e,t,n)=>{"use strict";n.d(t,{O:()=>s});var r=n(8071),i=n(4869);function s(...e){const t=e[e.length-1];return(0,i.K)(t)?(e.pop(),n=>(0,r.z)(e,n,t)):t=>(0,r.z)(e,t)}},9673:(e,t,n)=>{"use strict";n.d(t,{R:()=>a});var r=n(7574),i=n(4581),s=n(6561);class o extends r.y{constructor(e,t=0,n=i.e){super(),this.source=e,this.delayTime=t,this.scheduler=n,(!(0,s.k)(t)||t<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=i.e)}static create(e,t=0,n=i.e){return new o(e,t,n)}static dispatch(e){const{source:t,subscriber:n}=e;return this.add(t.subscribe(n))}_subscribe(e){return this.scheduler.schedule(o.dispatch,this.delayTime,{source:this.source,subscriber:e})}}function a(e,t=0){return function(n){return n.lift(new l(e,t))}}class l{constructor(e,t){this.scheduler=e,this.delay=t}call(e,t){return new o(t,this.delay,this.scheduler).subscribe(e)}}},3190:(e,t,n)=>{"use strict";n.d(t,{w:()=>o});var r=n(8002),i=n(4402),s=n(5345);function o(e,t){return"function"==typeof t?n=>n.pipe(o((n,s)=>(0,i.D)(e(n,s)).pipe((0,r.U)((e,r)=>t(n,e,s,r))))):t=>t.lift(new a(e))}class a{constructor(e){this.project=e}call(e,t){return t.subscribe(new l(e,this.project))}}class l extends s.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const n=new s.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,s.ft)(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}},5257:(e,t,n)=>{"use strict";n.d(t,{q:()=>o});var r=n(7393),i=n(7108),s=n(9193);function o(e){return t=>0===e?(0,s.c)():t.lift(new a(e))}class a{constructor(e){if(this.total=e,this.total<0)throw new i.W}call(e,t){return t.subscribe(new l(e,this.total))}}class l extends r.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}},3342:(e,t,n)=>{"use strict";n.d(t,{b:()=>o});var r=n(7393);function i(){}var s=n(9105);function o(e,t,n){return function(r){return r.lift(new a(e,t,n))}}class a{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new l(e,this.nextOrObserver,this.error,this.complete))}}class l extends r.L{constructor(e,t,n,r){super(e),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,(0,s.m)(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||i,this._tapError=t.error||i,this._tapComplete=t.complete||i)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}},4635:(e,t,n)=>{"use strict";n.d(t,{T:()=>s});var r=n(3410),i=n(7393);function s(e=l){return t=>t.lift(new o(e))}class o{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new a(e,this.errorFactory))}}class a extends i.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function l(){return new r.K}},4087:(e,t,n)=>{"use strict";n.d(t,{r:()=>s});var r=n(7574),i=n(5319);function s(e,t){return new r.y(n=>{const r=new i.w;let s=0;return r.add(t.schedule(function(){s!==e.length?(n.next(e[s++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},6465:(e,t,n)=>{"use strict";n.d(t,{o:()=>s});var r=n(5319);class i extends r.w{constructor(e,t){super()}schedule(e,t=0){return this}}class s extends i{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n,r=!1;try{this.work(e)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}},6102:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});let r=(()=>{class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=()=>Date.now(),e})();class i extends r{constructor(e,t=r.now){super(e,()=>i.delegate&&i.delegate!==this?i.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}},4581:(e,t,n)=>{"use strict";n.d(t,{e:()=>h,E:()=>u});let r=1;const i=Promise.resolve(),s={};function o(e){return e in s&&(delete s[e],!0)}const a={setImmediate(e){const t=r++;return s[t]=!0,i.then(()=>o(t)&&e()),t},clearImmediate(e){o(e)}};var l=n(6465),c=n(6102);const u=new class extends c.v{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let n,r=-1,i=t.length;e=e||t.shift();do{if(n=e.execute(e.state,e.delay))break}while(++r<i&&(e=t.shift()));if(this.active=!1,n){for(;++r<i&&(e=t.shift());)e.unsubscribe();throw n}}}(class extends l.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=a.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(e,t,n);0===e.actions.length&&(a.clearImmediate(t),e.scheduled=void 0)}}),h=u},3637:(e,t,n)=>{"use strict";n.d(t,{z:()=>i,P:()=>s});var r=n(6465);const i=new(n(6102).v)(r.o),s=i},7771:(e,t,n)=>{"use strict";n.d(t,{c:()=>o,N:()=>s});var r=n(6465),i=n(6102);const s=new class extends i.v{}(class extends r.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(e,t,n):e.flush(this)}}),o=s},377:(e,t,n)=>{"use strict";n.d(t,{hZ:()=>r});const r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(e,t,n)=>{"use strict";n.d(t,{L:()=>r});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(e,t,n)=>{"use strict";n.d(t,{b:()=>r});const r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7108:(e,t,n)=>{"use strict";n.d(t,{W:()=>r});const r=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})()},3410:(e,t,n)=>{"use strict";n.d(t,{K:()=>r});const r=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})()},7971:(e,t,n)=>{"use strict";n.d(t,{N:()=>r});const r=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})()},4449:(e,t,n)=>{"use strict";function r(e){setTimeout(()=>{throw e},0)}n.d(t,{z:()=>r})},4487:(e,t,n)=>{"use strict";function r(e){return e}n.d(t,{y:()=>r})},9796:(e,t,n)=>{"use strict";n.d(t,{k:()=>r});const r=Array.isArray||(e=>e&&"number"==typeof e.length)},9489:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});const r=e=>e&&"number"==typeof e.length&&"function"!=typeof e},9105:(e,t,n)=>{"use strict";function r(e){return"function"==typeof e}n.d(t,{m:()=>r})},6561:(e,t,n)=>{"use strict";n.d(t,{k:()=>i});var r=n(9796);function i(e){return!(0,r.k)(e)&&e-parseFloat(e)+1>=0}},1555:(e,t,n)=>{"use strict";function r(e){return null!==e&&"object"==typeof e}n.d(t,{K:()=>r})},4072:(e,t,n)=>{"use strict";function r(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,{t:()=>r})},4869:(e,t,n)=>{"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,{K:()=>r})},7444:(e,t,n)=>{"use strict";n.d(t,{s:()=>u});var r=n(5015),i=n(4449),s=n(377),o=n(6554),a=n(9489),l=n(4072),c=n(1555);const u=e=>{if(e&&"function"==typeof e[o.L])return u=e,e=>{const t=u[o.L]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if((0,a.z)(e))return(0,r.V)(e);if((0,l.t)(e))return n=e,e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,i.z),e);if(e&&"function"==typeof e[s.hZ])return t=e,e=>{const n=t[s.hZ]();for(;;){let t;try{t=n.next()}catch(r){return e.error(r),e}if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e};{const t=(0,c.K)(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var t,n,u}},5015:(e,t,n)=>{"use strict";n.d(t,{V:()=>r});const r=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}},509:(e,t,n)=>{"use strict";n.d(t,{D:()=>a});var r=n(7393);class i extends r.L{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var s=n(7444),o=n(7574);function a(e,t,n,r,a=new i(e,n,r)){if(!a.closed)return t instanceof o.y?t.subscribe(a):(0,s.s)(t)(a)}},5642:(e,t,n)=>{"use strict";n.d(t,{K:()=>o});var r=n(8583),i=n(4726),s=n(7716);let o=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[i.p,r.ez]]}),e})()},6875:(e,t,n)=>{"use strict";n.d(t,{d:()=>a});var r=n(8583),i=n(2872),s=n(4782),o=n(7716);let a=(()=>{class e{static forRoot(t=s.z){return{ngModule:e,providers:[{provide:s.J,useValue:Object.assign(Object.assign({},s.z),t)}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[r.ez,i.U8]]}),e})()},1972:(e,t,n)=>{"use strict";n.d(t,{d:()=>r.d,z:()=>d});var r=n(6875),i=n(1649),s=n(4782),o=n(7716);class a{}let l=(()=>{class e{constructor(e,t,n){this.data=e,this.ref=t,this.confirmConfig=n,this.animationState="default",e.message=e.message||"Deseja excluir registro?",e.siFn=e.siFn}ngOnInit(){}close(){this.animationState="closing",this.ref.close()}onFadeFinished(e){const{toState:t}=e;"closing"===t&&"closing"===this.animationState&&this.close()}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(a),o.Y36(i.U),o.Y36(s.J))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-confirm"]],decls:17,vars:1,consts:[["id","myModal","role","dialog",1,"modal","fade","show",2,"display","block","background","rgba(0,0,0,.4)","z-index","1000"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title",2,"color","red"],[1,"fas","fa-exclamation-triangle"],["type","button","data-dismiss","modal",1,"close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-default",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.TgZ(3,"div",3),o.TgZ(4,"h4",4),o.TgZ(5,"span",5),o._uU(6," Excluir?"),o.qZA(),o.qZA(),o.TgZ(7,"button",6),o.NdJ("click",function(){return t.close()}),o._uU(8,"\xd7"),o.qZA(),o.qZA(),o.TgZ(9,"div",7),o.TgZ(10,"p"),o._uU(11),o.qZA(),o.qZA(),o.TgZ(12,"div",8),o.TgZ(13,"button",9),o.NdJ("click",function(){return t.close()}),o._uU(14,"N\xe3o"),o.qZA(),o.TgZ(15,"button",10),o.NdJ("click",function(){return t.data.siFn(),t.close()}),o._uU(16,"Sim "),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(11),o.Oqu(t.data.message))},styles:[""]}),e})();var c=n(7636),u=n(9765),h=n(2872);let d=(()=>{class e{constructor(e,t,n){this.overlay=e,this.parentInjector=t,this.confirmConfig=n,this.subject=new u.xQ}show(e){const t=this.getPositionStrategy(),n=this.overlay.create({positionStrategy:t}),r=new i.U(n);this.lastConfirm=r;const s=this.getInjector(e,r,this.parentInjector),o=new c.C5(l,null,s);return n.attach(o),this.confirm=r,r}dismiss(){this.confirm.close()}getPositionStrategy(){return this.overlay.position().global().top(this.getPosition()).right(this.confirmConfig.position.right+"%")}getPosition(){return(this.lastConfirm&&this.lastConfirm.isVisible()?this.lastConfirm.getPosition().bottom:this.confirmConfig.position.top)+"px"}getInjector(e,t,n){const r=new WeakMap;return r.set(a,e),r.set(i.U,t),new c.nK(n,r)}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(h.aV),o.LFG(o.zs3),o.LFG(s.J))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},8756:(e,t,n)=>{"use strict";n.d(t,{I:()=>r.I,b:()=>p});var r=n(9017),i=n(7636),s=n(1649),o=n(5059),a=n(7716),l=n(7238);const c={fadeComponent:(0,l.X$)("fadeAnimation",[(0,l.SB)("default",(0,l.oB)({opacity:1})),(0,l.eR)("void => *",[(0,l.oB)({opacity:0}),(0,l.jt)("{{ fadeIn }}ms")]),(0,l.eR)("default => closing",(0,l.jt)("{{ fadeOut }}ms",(0,l.oB)({opacity:0})))])};var u=n(8583);class h{constructor(e,t,n){this.data=e,this.ref=t,this.loadingConfig=n,this.color="red",this.style={color:"blue",fontWeight:"bolder",fontStyle:"italic"},this.animationState="default",e.message=e.message||"Aguarde..."}ngOnInit(){}ct(){h.teste.emit(!0)}close(){this.animationState="closing",this.ref.close()}onFadeFinished(e){const{toState:t}=e;"closing"===t&&"closing"===this.animationState&&this.close()}}h.teste=new a.vpe,h.\u0275fac=function(e){return new(e||h)(a.Y36(o.lC),a.Y36(s.U),a.Y36(o.CT))},h.\u0275cmp=a.Xpm({type:h,selectors:[["app-loading"]],decls:8,vars:2,consts:[["id","myModal","role","dialog",1,"modal","fade","show",2,"display","block"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","card-transparente",2,"border","none"],[1,"modal-body","centralize",2,"margin-bottom","0"],[1,"spinner"],[1,"justify-content-center"],[3,"ngStyle"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"div",3),a._UZ(4,"div",4),a.TgZ(5,"div",5),a.TgZ(6,"strong",6),a._uU(7),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(6),a.Q6J("ngStyle",t.style),a.xp6(1),a.Oqu(t.data.message))},directives:[u.PC],styles:[".cdk-overlay-container[_ngcontent-%COMP%], .centralize[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:1000}@keyframes spin{to{transform:rotate(1turn)}}@keyframes colors{0%{border-left-color:#4285f4;border-right-color:#4285f4;color:#4285f4}25%{border-left-color:#de3e35;border-right-color:#1b9a59;color:#de3e35}50%{border-left-color:#f7c223;border-right-color:#f7c223;color:#f7c223}75%{border-left-color:#1b9a59;border-right-color:#de3e35;color:#1b9a59}to{border-left-color:#4285f4;border-right-color:#4285f4;color:#4285f4}}.spinner[_ngcontent-%COMP%]{box-shadow:inset 0 1px 8px 0 #0000001a;border:none;border-right:8px solid #0000001a;border-left:8px solid #22a6b3;border-radius:50%;width:50px;height:50px;justify-self:center;align-self:center;animation:spin 1.2s linear infinite,colors 1.2s ease-in-out infinite}.msg[_ngcontent-%COMP%]{position:absolute;font-weight:700;color:#fff;margin-top:50px;animation:colors 1.2s ease-in-out infinite}"],data:{animation:[c.fadeComponent]}});var d=n(2872);let p=(()=>{class e{constructor(e,t,n){this.overlay=e,this.parentInjector=t,this.loadingConfig=n}show(e){const t=this.getPositionStrategy(),n=this.overlay.create({positionStrategy:t}),r=new s.U(n);this.lastLoading=r;const o=this.getInjector(e,r,this.parentInjector),a=new i.C5(h,null,o);return n.attach(a),this.loading=r,r}dismiss(){this.loading.close()}getPositionStrategy(){return this.overlay.position().global().top(this.getPosition()).right(this.loadingConfig.position.right+"%")}getPosition(){return(this.lastLoading&&this.lastLoading.isVisible()?this.lastLoading.getPosition().bottom:this.loadingConfig.position.top)+"px"}getInjector(e,t,n){const r=new WeakMap;return r.set(o.lC,e),r.set(s.U,t),new i.nK(n,r)}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(d.aV),a.LFG(a.zs3),a.LFG(o.CT))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},9017:(e,t,n)=>{"use strict";n.d(t,{I:()=>a});var r=n(8583),i=n(2872),s=n(5059),o=n(7716);let a=(()=>{class e{static forRoot(t=s.Sr){return{ngModule:e,providers:[{provide:s.CT,useValue:Object.assign(Object.assign({},s.Sr),t)}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[r.ez,i.U8]]}),e})()},5059:(e,t,n)=>{"use strict";n.d(t,{lC:()=>i,Sr:()=>s,CT:()=>o});var r=n(7716);class i{}const s={position:{top:50,right:40},animation:{fadeOut:2500,fadeIn:300}},o=new r.OlP("loading-config")},4782:(e,t,n)=>{"use strict";n.d(t,{z:()=>i,J:()=>s});var r=n(7716);const i={position:{top:50,right:40},animation:{fadeOut:2500,fadeIn:300}},s=new r.OlP("component-config")},1649:(e,t,n)=>{"use strict";n.d(t,{U:()=>r});class r{constructor(e){this.overlay=e}close(){this.overlay.dispose()}isVisible(){return this.overlay&&this.overlay.overlayElement}getPosition(){return this.overlay.overlayElement.getBoundingClientRect()}}},3922:(e,t,n)=>{"use strict";n.d(t,{E:()=>f.E,k:()=>p});var r=n(7636),i=n(1725),s=n(7238);const o={fadeToast:(0,s.X$)("fadeAnimation",[(0,s.SB)("default",(0,s.oB)({opacity:1})),(0,s.eR)("void => *",[(0,s.oB)({opacity:0}),(0,s.jt)("{{ fadeIn }}ms")]),(0,s.eR)("default => closing",(0,s.jt)("{{ fadeOut }}ms",(0,s.oB)({opacity:0})))])};var a=n(7716);class l{constructor(e){this.overlay=e}close(){this.overlay.dispose()}isVisible(){return this.overlay&&this.overlay.overlayElement}getPosition(){return this.overlay.overlayElement.getBoundingClientRect()}}const c=function(e,t){return{fadeIn:e,fadeOut:t}},u=function(e,t){return{value:e,params:t}};let h=(()=>{class e{constructor(e,t,n){this.data=e,this.ref=t,this.toastConfig=n,this.animationState="default",this.iconType=this.getAlertIcon()}ngOnInit(){"danger"!==this.data.type&&(this.intervalId=setTimeout(()=>this.animationState="closing",5e3))}ngOnDestroy(){clearTimeout(this.intervalId)}close(){this.ref.close()}onFadeFinished(e){const{toState:t}=e;"closing"===t&&"closing"===this.animationState&&this.close()}getAlertIcon(){switch(this.data.type){case"danger":return"biohazard";case"info":return"info";case"warning":return"exclamation-triangle";case"success":return"check-circle"}}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(i.hO),a.Y36(l),a.Y36(i.$d))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-toast"]],decls:9,vars:14,consts:[["id","toast","role","dialog"],[1,"col-2","align-self-center"],[1,"col-8","text-center"],[1,"col-2"],["type","button","data-dismiss","modal",1,"close",3,"click"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.NdJ("@fadeAnimation.done",function(e){return t.onFadeFinished(e)}),a.TgZ(1,"div",1),a._UZ(2,"i"),a.qZA(),a.TgZ(3,"div",2),a.TgZ(4,"p"),a._uU(5),a.qZA(),a.qZA(),a.TgZ(6,"div",3),a.TgZ(7,"button",4),a.NdJ("click",function(){return t.close()}),a._uU(8,"\xd7"),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.Gre(" alert alert-",t.data.type," toast row"),a.Q6J("@fadeAnimation",a.WLB(11,u,t.animationState,a.WLB(8,c,t.toastConfig.animation.fadeIn,t.toastConfig.animation.fadeOut))),a.xp6(2),a.Gre("fas fa-",t.iconType,""),a.xp6(3),a.Oqu(t.data.text))},styles:[".toast[_ngcontent-%COMP%]{box-shadow:0 8px 16px 0 #0003,0 6px 20px 0 #00000030!important;border-radius:10px;color:#fff;font-weight:700;margin:20 auto 0;min-width:100%}.alert-danger[_ngcontent-%COMP%]{background-color:#f00c}.alert-success[_ngcontent-%COMP%]{background-color:#06f319cc}.alert-warning[_ngcontent-%COMP%]{background-color:#e3f307cc}.alert-info[_ngcontent-%COMP%]{background-color:#2ad7eecc}"],data:{animation:[o.fadeToast]}}),e})();var d=n(2872);let p=(()=>{class e{constructor(e,t,n){this.overlay=e,this.parentInjector=t,this.toastConfig=n}success(e){this.show({type:"success",text:e})}info(e){this.show({type:"info",text:e})}warning(e){this.show({type:"warning",text:e})}danger(e){this.show({type:"danger",text:e})}show(e){const t=this.getPositionStrategy(),n=this.overlay.create({positionStrategy:t}),i=new l(n);this.lastToast=i;const s=this.getInjector(e,i,this.parentInjector),o=new r.C5(h,null,s);return n.attach(o),i}getPositionStrategy(){return this.overlay.position().global().top(this.getPosition()).right(this.toastConfig.position.right+"px")}getPosition(){return(this.lastToast&&this.lastToast.isVisible()?this.lastToast.getPosition().bottom:this.toastConfig.position.top)+"px"}getInjector(e,t,n){const s=new WeakMap;return s.set(i.hO,e),s.set(l,t),new r.nK(n,s)}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(d.aV),a.LFG(a.zs3),a.LFG(i.$d))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var f=n(3806)},1725:(e,t,n)=>{"use strict";n.d(t,{hO:()=>i,dO:()=>s,$d:()=>o});var r=n(7716);class i{}const s={position:{top:50,right:20},animation:{fadeOut:2500,fadeIn:300}},o=new r.OlP("toast-config")},3806:(e,t,n)=>{"use strict";n.d(t,{E:()=>o});var r=n(2872),i=n(1725),s=n(7716);let o=(()=>{class e{static forRoot(t=i.dO){return{ngModule:e,providers:[{provide:i.$d,useValue:Object.assign(Object.assign({},i.dO),t)}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[r.U8]]}),e})()},4726:(e,t,n)=>{"use strict";n.d(t,{p:()=>a});var r=n(8583),i=n(665),s=n(240),o=n(7716);let a=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[r.ez,i.u5,s.Bz,i.UX],i.u5,s.Bz,i.UX]}),e})()},2855:(e,t,n)=>{"use strict";var r=n(8583),i=n(7716);class s extends r.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class o extends s{static makeCurrent(){(0,r.HT)(new o)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(l=l||document.querySelector("base"),l?l.getAttribute("href"):null);return null==t?null:function(e){a=a||document.createElement("a"),a.setAttribute("href",e);const t=a.pathname;return"/"===t.charAt(0)?t:`/${t}`}(t)}resetBaseElement(){l=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return(0,r.Mx)(document.cookie,e)}}let a,l=null;const c=new i.OlP("TRANSITION_ID"),u=[{provide:i.ip1,useFactory:function(e,t,n){return()=>{n.get(i.CZH).donePromise.then(()=>{const n=(0,r.q)();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(t=>t.getAttribute("ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[c,r.K0,i.zs3],multi:!0}];class h{static init(){(0,i.VLi)(new h)}addToWindow(e){i.dqk.getAngularTestability=(t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},i.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),i.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),i.dqk.frameworkStabilizers||(i.dqk.frameworkStabilizers=[]),i.dqk.frameworkStabilizers.push(e=>{const t=i.dqk.getAllAngularTestabilities();let n=t.length,r=!1;const s=function(t){r=r||t,n--,0==n&&e(r)};t.forEach(function(e){e.whenStable(s)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:n?(0,r.q)().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let d=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();const p=new i.OlP("EventManagerPlugins");let f=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let r=0;r<n.length;r++){const t=n[r];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(p),i.LFG(i.R0b))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();class g{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const i=(0,r.q)().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,n)}}let m=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),y=(()=>{class e extends m{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,t,n){e.forEach(e=>{const r=this._doc.createElement("style");r.textContent=e,n.push(t.appendChild(r))})}addHost(e){const t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}removeHost(e){const t=this._hostNodes.get(e);t&&t.forEach(_),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((t,n)=>{this._addStylesToHost(e,n,t)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(_))}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(r.K0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();function _(e){(0,r.q)().remove(e)}const v={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},w=/%COMP%/g;function b(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?b(e,i,n):(i=i.replace(w,e),n.push(i))}return n}function T(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let S=(()=>{class e{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new E(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case i.ifc.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new C(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case 1:case i.ifc.ShadowDom:return new I(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=b(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(f),i.LFG(y),i.LFG(i.AFp))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();class E{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(v[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const i=v[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=v[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&(i.JOm.DashCase|i.JOm.Important)?e.style.setProperty(t,n,r&i.JOm.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&i.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,T(n)):this.eventManager.addEventListener(e,t,T(n))}}class C extends E{constructor(e,t,n,r){super(e),this.component=n;const i=b(r+"-"+n.id,n.styles,[]);t.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(w,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(w,r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class I extends E{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=b(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const e=document.createElement("style");e.textContent=i[s],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let k=(()=>{class e extends g{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,n){return e.addEventListener(t,n,!1),()=>this.removeEventListener(e,t,n)}removeEventListener(e,t,n){return e.removeEventListener(t,n)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(r.K0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();const x=["alt","control","meta","shift"],A={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},P={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},R={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let N=(()=>{class e extends g{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,i){const s=e.parseEventName(n),o=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,r.q)().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=e._normalizeKey(n.pop());let s="";if(x.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),s+=e+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(e){let t="",n=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&P.hasOwnProperty(t)&&(t=P[t]))}return A[t]||t}(e);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),x.forEach(r=>{r!=n&&(0,R[r])(e)&&(t+=r+".")}),t+=n,t}static eventCallback(t,n,r){return i=>{e.getEventFullKey(i)===t&&r.runGuarded(()=>n(i))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(r.K0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();const O=(0,i.eFA)(i._c5,"browser",[{provide:i.Lbi,useValue:r.bD},{provide:i.g9A,useValue:function(){o.makeCurrent(),h.init()},multi:!0},{provide:r.K0,useFactory:function(){return(0,i.RDi)(document),document},deps:[]}]),D=[[],{provide:i.zSh,useValue:"root"},{provide:i.qLn,useFactory:function(){return new i.qLn},deps:[]},{provide:p,useClass:k,multi:!0,deps:[r.K0,i.R0b,i.Lbi]},{provide:p,useClass:N,multi:!0,deps:[r.K0]},[],{provide:S,useClass:S,deps:[f,y,i.AFp]},{provide:i.FYo,useExisting:S},{provide:m,useExisting:y},{provide:y,useClass:y,deps:[r.K0]},{provide:i.dDg,useClass:i.dDg,deps:[i.R0b]},{provide:f,useClass:f,deps:[p,i.R0b]},{provide:r.JF,useClass:d,deps:[]},[]];let L=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:i.AFp,useValue:t.appId},{provide:c,useExisting:i.AFp},u]}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(e,12))},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:D,imports:[r.ez,i.hGG]}),e})();"undefined"!=typeof window&&window;var F=n(7238);function M(){return"undefined"!=typeof window&&void 0!==window.document}function U(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function V(e){switch(e.length){case 0:return new F.ZN;case 1:return e[0];default:return new F.ZE(e)}}function j(e,t,n,r,i={},s={}){const o=[],a=[];let l=-1,c=null;if(r.forEach(e=>{const n=e.offset,r=n==l,u=r&&c||{};Object.keys(e).forEach(n=>{let r=n,a=e[n];if("offset"!==n)switch(r=t.normalizePropertyName(r,o),a){case F.k1:a=i[n];break;case F.l3:a=s[n];break;default:a=t.normalizeStyleValue(n,r,a,o)}u[r]=a}),r||a.push(u),c=u,l=n}),o.length){const e="\n - ";throw new Error(`Unable to animate due to the following errors:${e}${o.join(e)}`)}return a}function q(e,t,n,r){switch(t){case"start":e.onStart(()=>r(n&&B(n,"start",e)));break;case"done":e.onDone(()=>r(n&&B(n,"done",e)));break;case"destroy":e.onDestroy(()=>r(n&&B(n,"destroy",e)))}}function B(e,t,n){const r=n.totalTime,i=z(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,null==r?e.totalTime:r,!!n.disabled),s=e._data;return null!=s&&(i._data=s),i}function z(e,t,n,r,i="",s=0,o){return{element:e,triggerName:t,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function $(e,t,n){let r;return e instanceof Map?(r=e.get(t),r||e.set(t,r=n)):(r=e[t],r||(r=e[t]=n)),r}function H(e){const t=e.indexOf(":");return[e.substring(1,t),e.substr(t+1)]}let G=(e,t)=>!1,Z=(e,t)=>!1,K=(e,t,n)=>[];const W=U();(W||"undefined"!=typeof Element)&&(G=M()?(e,t)=>{for(;t&&t!==document.documentElement;){if(t===e)return!0;t=t.parentNode||t.host}return!1}:(e,t)=>e.contains(t),Z=(()=>{if(W||Element.prototype.matches)return(e,t)=>e.matches(t);{const e=Element.prototype,t=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;return t?(e,n)=>t.apply(e,[n]):Z}})(),K=(e,t,n)=>{let r=[];if(n){const n=e.querySelectorAll(t);for(let e=0;e<n.length;e++)r.push(n[e])}else{const n=e.querySelector(t);n&&r.push(n)}return r});let Y=null,Q=!1;function J(e){Y||(Y=("undefined"!=typeof document?document.body:null)||{},Q=!!Y.style&&"WebkitAppearance"in Y.style);let t=!0;return Y.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&(t=e in Y.style,!t&&Q)&&(t="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in Y.style),t}const X=Z,ee=G,te=K;function ne(e){const t={};return Object.keys(e).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");t[r]=e[n]}),t}let re=(()=>{class e{validateStyleProperty(e){return J(e)}matchesElement(e,t){return X(e,t)}containsElement(e,t){return ee(e,t)}query(e,t,n){return te(e,t,n)}computeStyle(e,t,n){return n||""}animate(e,t,n,r,i,s=[],o){return new F.ZN(n,r)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();class ie{}ie.NOOP=new re;const se="ng-enter",oe="ng-leave",ae="ng-trigger",le=".ng-trigger",ce="ng-animating",ue=".ng-animating";function he(e){if("number"==typeof e)return e;const t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:de(parseFloat(t[1]),t[2])}function de(e,t){switch(t){case"s":return 1e3*e;default:return e}}function pe(e,t,n){return e.hasOwnProperty("duration")?e:function(e,t,n){let r,i=0,s="";if("string"==typeof e){const n=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return t.push(`The provided timing value "${e}" is invalid.`),{duration:0,delay:0,easing:""};r=de(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(i=de(parseFloat(o),n[4]));const a=n[5];a&&(s=a)}else r=e;if(!n){let n=!1,s=t.length;r<0&&(t.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(t.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&t.splice(s,0,`The provided timing value "${e}" is invalid.`)}return{duration:r,delay:i,easing:s}}(e,t,n)}function fe(e,t={}){return Object.keys(e).forEach(n=>{t[n]=e[n]}),t}function ge(e,t,n={}){if(t)for(let r in e)n[r]=e[r];else fe(e,n);return n}function me(e,t,n){return n?t+":"+n+";":""}function ye(e){let t="";for(let n=0;n<e.style.length;n++){const r=e.style.item(n);t+=me(0,r,e.style.getPropertyValue(r))}for(const n in e.style)e.style.hasOwnProperty(n)&&!n.startsWith("_")&&(t+=me(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.style[n]));e.setAttribute("style",t)}function _e(e,t,n){e.style&&(Object.keys(t).forEach(r=>{const i=Ie(r);n&&!n.hasOwnProperty(r)&&(n[r]=e.style[i]),e.style[i]=t[r]}),U()&&ye(e))}function ve(e,t){e.style&&(Object.keys(t).forEach(t=>{const n=Ie(t);e.style[n]=""}),U()&&ye(e))}function we(e){return Array.isArray(e)?1==e.length?e[0]:(0,F.vP)(e):e}const be=new RegExp("{{\\s*(.+?)\\s*}}","g");function Te(e){let t=[];if("string"==typeof e){let n;for(;n=be.exec(e);)t.push(n[1]);be.lastIndex=0}return t}function Se(e,t,n){const r=e.toString(),i=r.replace(be,(e,r)=>{let i=t[r];return t.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?e:i}function Ee(e){const t=[];let n=e.next();for(;!n.done;)t.push(n.value),n=e.next();return t}const Ce=/-+([a-z0-9])/g;function Ie(e){return e.replace(Ce,(...e)=>e[1].toUpperCase())}function ke(e,t){return 0===e||0===t}function xe(e,t,n){const r=Object.keys(n);if(r.length&&t.length){let s=t[0],o=[];if(r.forEach(e=>{s.hasOwnProperty(e)||o.push(e),s[e]=n[e]}),o.length)for(var i=1;i<t.length;i++){let n=t[i];o.forEach(function(t){n[t]=Pe(e,t)})}}return t}function Ae(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function Pe(e,t){return window.getComputedStyle(e)[t]}const Re="*";function Ne(e,t){const n=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(e=>function(e,t,n){if(":"==e[0]){const r=function(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,t)=>parseFloat(t)>parseFloat(e);case":decrement":return(e,t)=>parseFloat(t)<parseFloat(e);default:return t.push(`The transition alias value "${e}" is not supported`),"* => *"}}(e,n);if("function"==typeof r)return void t.push(r);e=r}const r=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${e}" is not supported`),t;const i=r[1],s=r[2],o=r[3];t.push(Le(i,o)),"<"!=s[0]||i==Re&&o==Re||t.push(Le(o,i))}(e,n,t)):n.push(e),n}const Oe=new Set(["true","1"]),De=new Set(["false","0"]);function Le(e,t){const n=Oe.has(e)||De.has(e),r=Oe.has(t)||De.has(t);return(i,s)=>{let o=e==Re||e==i,a=t==Re||t==s;return!o&&n&&"boolean"==typeof i&&(o=i?Oe.has(e):De.has(e)),!a&&r&&"boolean"==typeof s&&(a=s?Oe.has(t):De.has(t)),o&&a}}const Fe=new RegExp("s*:selfs*,?","g");function Me(e,t,n){return new Ue(e).build(t,n)}class Ue{constructor(e){this._driver=e}build(e,t){const n=new Ve(t);return this._resetContextStyleTimingState(n),Ae(this,we(e),n)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,r=t.depCount=0;const i=[],s=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(e=>{if(this._resetContextStyleTimingState(t),0==e.type){const n=e,r=n.name;r.toString().split(/\s*,\s*/).forEach(e=>{n.name=e,i.push(this.visitState(n,t))}),n.name=r}else if(1==e.type){const i=this.visitTransition(e,t);n+=i.queryCount,r+=i.depCount,s.push(i)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:i,transitions:s,queryCount:n,depCount:r,options:null}}visitState(e,t){const n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){const i=new Set,s=r||{};if(n.styles.forEach(e=>{if(je(e)){const t=e;Object.keys(t).forEach(e=>{Te(t[e]).forEach(e=>{s.hasOwnProperty(e)||i.add(e)})})}}),i.size){const n=Ee(i.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:e.name,style:n,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const n=Ae(this,we(e.animation),t);return{type:1,matchers:Ne(e.expr,t.errors),animation:n,queryCount:t.queryCount,depCount:t.depCount,options:qe(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(e=>Ae(this,e,t)),options:qe(e.options)}}visitGroup(e,t){const n=t.currentTime;let r=0;const i=e.steps.map(e=>{t.currentTime=n;const i=Ae(this,e,t);return r=Math.max(r,t.currentTime),i});return t.currentTime=r,{type:3,steps:i,options:qe(e.options)}}visitAnimate(e,t){const n=function(e,t){let n=null;if(e.hasOwnProperty("duration"))n=e;else if("number"==typeof e)return Be(pe(e,t).duration,0,"");const r=e;if(r.split(/\s+/).some(e=>"{"==e.charAt(0)&&"{"==e.charAt(1))){const e=Be(0,0,"");return e.dynamic=!0,e.strValue=r,e}return n=n||pe(r,t),Be(n.duration,n.delay,n.easing)}(e.timings,t.errors);let r;t.currentAnimateTimings=n;let i=e.styles?e.styles:(0,F.oB)({});if(5==i.type)r=this.visitKeyframes(i,t);else{let i=e.styles,s=!1;if(!i){s=!0;const e={};n.easing&&(e.easing=n.easing),i=(0,F.oB)(e)}t.currentTime+=n.duration+n.delay;const o=this.visitStyle(i,t);o.isEmptyStep=s,r=o}return t.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(e,t){const n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){const n=[];Array.isArray(e.styles)?e.styles.forEach(e=>{"string"==typeof e?e==F.l3?n.push(e):t.errors.push(`The provided style string value ${e} is not allowed.`):n.push(e)}):n.push(e.styles);let r=!1,i=null;return n.forEach(e=>{if(je(e)){const t=e,n=t.easing;if(n&&(i=n,delete t.easing),!r)for(let e in t)if(t[e].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const n=t.currentAnimateTimings;let r=t.currentTime,i=t.currentTime;n&&i>0&&(i-=n.duration+n.delay),e.styles.forEach(e=>{"string"!=typeof e&&Object.keys(e).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void t.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=t.collectedStyles[t.currentQuerySelector],o=s[n];let a=!0;o&&(i!=r&&i>=o.startTime&&r<=o.endTime&&(t.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=o.startTime),a&&(s[n]={startTime:i,endTime:r}),t.options&&function(e,t,n){const r=t.params||{},i=Te(e);i.length&&i.forEach(e=>{r.hasOwnProperty(e)||n.push(`Unable to resolve the local animation param ${e} in the given list of values`)})}(e[n],t.options,t.errors)})})}visitKeyframes(e,t){const n={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let s=!1,o=!1,a=0;const l=e.steps.map(e=>{const n=this._makeStyleAst(e,t);let l=null!=n.offset?n.offset:function(e){if("string"==typeof e)return null;let t=null;if(Array.isArray(e))e.forEach(e=>{if(je(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}});else if(je(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}return t}(n.styles),c=0;return null!=l&&(r++,c=n.offset=l),o=o||c<0||c>1,s=s||c<a,a=c,i.push(c),n});o&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&t.errors.push("Please ensure that all keyframe offsets are in order");const c=e.steps.length;let u=0;r>0&&r<c?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(u=1/(c-1));const h=c-1,d=t.currentTime,p=t.currentAnimateTimings,f=p.duration;return l.forEach((e,r)=>{const s=u>0?r==h?1:u*r:i[r],o=s*f;t.currentTime=d+p.delay+o,p.duration=o,this._validateStyleAst(e,t),e.offset=s,n.styles.push(e)}),n}visitReference(e,t){return{type:8,animation:Ae(this,we(e.animation),t),options:qe(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:qe(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:qe(e.options)}}visitQuery(e,t){const n=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[i,s]=function(e){const t=!!e.split(/\s*,\s*/).find(e=>":self"==e);return t&&(e=e.replace(Fe,"")),[e=e.replace(/@\*/g,le).replace(/@\w+/g,e=>".ng-trigger-"+e.substr(1)).replace(/:animating/g,ue),t]}(e.selector);t.currentQuerySelector=n.length?n+" "+i:i,$(t.collectedStyles,t.currentQuerySelector,{});const o=Ae(this,we(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:o,originalSelector:e.selector,options:qe(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const n="full"===e.timings?{duration:0,delay:0,easing:"full"}:pe(e.timings,t.errors,!0);return{type:12,animation:Ae(this,we(e.animation),t),timings:n,options:null}}}class Ve{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function je(e){return!Array.isArray(e)&&"object"==typeof e}function qe(e){var t;return e?(e=fe(e)).params&&(e.params=(t=e.params)?fe(t):null):e={},e}function Be(e,t,n){return{duration:e,delay:t,easing:n}}function ze(e,t,n,r,i,s,o=null,a=!1){return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class $e{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const He=new RegExp(":enter","g"),Ge=new RegExp(":leave","g");function Ze(e,t,n,r,i,s={},o={},a,l,c=[]){return(new Ke).buildKeyframes(e,t,n,r,i,s,o,a,l,c)}class Ke{buildKeyframes(e,t,n,r,i,s,o,a,l,c=[]){l=l||new $e;const u=new Ye(e,t,l,r,i,c,[]);u.options=a,u.currentTimeline.setStyles([s],null,u.errors,a),Ae(this,n,u);const h=u.timelines.filter(e=>e.containsAnimation());if(h.length&&Object.keys(o).length){const e=h[h.length-1];e.allowOnlyTimelineStyles()||e.setStyles([o],null,u.errors,a)}return h.length?h.map(e=>e.buildKeyframes()):[ze(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const n=t.subInstructions.consume(t.element);if(n){const r=t.createSubContext(e.options),i=t.currentTimeline.currentTime,s=this._visitSubInstructions(n,r,r.options);i!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){const n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,n){let r=t.currentTimeline.currentTime;const i=null!=n.duration?he(n.duration):null,s=null!=n.delay?he(n.delay):null;return 0!==i&&e.forEach(e=>{const n=t.appendInstructionToTimeline(e,i,s);r=Math.max(r,n.duration+n.delay)}),r}visitReference(e,t){t.updateOptions(e.options,!0),Ae(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const n=t.subContextCount;let r=t;const i=e.options;if(i&&(i.params||i.delay)&&(r=t.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=We);const e=he(i.delay);r.delayNextStep(e)}e.steps.length&&(e.steps.forEach(e=>Ae(this,e,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const n=[];let r=t.currentTimeline.currentTime;const i=e.options&&e.options.delay?he(e.options.delay):0;e.steps.forEach(s=>{const o=t.createSubContext(e.options);i&&o.delayNextStep(i),Ae(this,s,o),r=Math.max(r,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(e=>t.currentTimeline.mergeTimelineCollectedStyles(e)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const n=e.strValue;return pe(t.params?Se(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());const i=e.style;5==i.type?this.visitKeyframes(i,t):(t.incrementTime(n.duration),this.visitStyle(i,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(i):n.setStyles(e.styles,i,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const n=t.currentAnimateTimings,r=t.currentTimeline.duration,i=n.duration,s=t.createSubContext().currentTimeline;s.easing=n.easing,e.styles.forEach(e=>{s.forwardTime((e.offset||0)*i),s.setStyles(e.styles,e.easing,t.errors,t.options),s.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(s),t.transformIntoNewTimeline(r+i),t.previousNode=e}visitQuery(e,t){const n=t.currentTimeline.currentTime,r=e.options||{},i=r.delay?he(r.delay):0;i&&(6===t.previousNode.type||0==n&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=We);let s=n;const o=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=o.length;let a=null;o.forEach((n,r)=>{t.currentQueryIndex=r;const o=t.createSubContext(e.options,n);i&&o.delayNextStep(i),n===t.element&&(a=o.currentTimeline),Ae(this,e.animation,o),o.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,o.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),a&&(t.currentTimeline.mergeTimelineCollectedStyles(a),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const n=t.parentContext,r=t.currentTimeline,i=e.timings,s=Math.abs(i.duration),o=s*(t.currentQueryTotal-1);let a=s*t.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const l=t.currentTimeline;a&&l.delayNextStep(a);const c=l.currentTime;Ae(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const We={};class Ye{constructor(e,t,n,r,i,s,o,a){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=We,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new Qe(this._driver,t,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const n=e;let r=this.options;null!=n.duration&&(r.duration=he(n.duration)),null!=n.delay&&(r.delay=he(n.delay));const i=n.params;if(i){let e=r.params;e||(e=this.options.params={}),Object.keys(i).forEach(n=>{t&&e.hasOwnProperty(n)||(e[n]=Se(i[n],e,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const n=e.params={};Object.keys(t).forEach(e=>{n[e]=t[e]})}}return e}createSubContext(e=null,t,n){const r=t||this.element,i=new Ye(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(e),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(e){return this.previousNode=We,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+e.delay,easing:""},i=new Je(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,r,i,s){let o=[];if(r&&o.push(this.element),e.length>0){e=(e=e.replace(He,"."+this._enterClassName)).replace(Ge,"."+this._leaveClassName);let t=this._driver.query(this.element,e,1!=n);0!==n&&(t=n<0?t.slice(t.length+n,t.length):t.slice(0,n)),o.push(...t)}return i||0!=o.length||s.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),o}}class Qe{constructor(e,t,n,r){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Qe(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||F.l3,this._currentKeyframe[e]=F.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,r){t&&(this._previousKeyframe.easing=t);const i=r&&r.params||{},s=function(e,t){const n={};let r;return e.forEach(e=>{"*"===e?(r=r||Object.keys(t),r.forEach(e=>{n[e]=F.l3})):ge(e,!1,n)}),n}(e,this._globalTimelineStyles);Object.keys(s).forEach(e=>{const t=Se(s[e],i,n);this._pendingStyles[e]=t,this._localTimelineStyles.hasOwnProperty(e)||(this._backFill[e]=this._globalTimelineStyles.hasOwnProperty(e)?this._globalTimelineStyles[e]:F.l3),this._updateStyle(e,t)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(t=>{this._currentKeyframe[t]=e[t]}),Object.keys(this._localTimelineStyles).forEach(e=>{this._currentKeyframe.hasOwnProperty(e)||(this._currentKeyframe[e]=this._localTimelineStyles[e])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const n=this._styleSummary[t],r=e._styleSummary[t];(!n||r.time>n.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,s)=>{const o=ge(i,!0);Object.keys(o).forEach(n=>{const r=o[n];r==F.k1?e.add(n):r==F.l3&&t.add(n)}),n||(o.offset=s/this.duration),r.push(o)});const i=e.size?Ee(e.values()):[],s=t.size?Ee(t.values()):[];if(n){const e=r[0],t=fe(e);e.offset=0,t.offset=1,r=[e,t]}return ze(this.element,r,i,s,this.duration,this.startTime,this.easing,!1)}}class Je extends Qe{constructor(e,t,n,r,i,s,o=!1){super(e,t,s.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const i=[],s=n+t,o=t/s,a=ge(e[0],!1);a.offset=0,i.push(a);const l=ge(e[0],!1);l.offset=Xe(o),i.push(l);const c=e.length-1;for(let r=1;r<=c;r++){let o=ge(e[r],!1);o.offset=Xe((t+o.offset*n)/s),i.push(o)}n=s,t=0,r="",e=i}return ze(this.element,e,this.preStyleProps,this.postStyleProps,n,t,r,!0)}}function Xe(e,t=3){const n=Math.pow(10,t-1);return Math.round(e*n)/n}class et{}class tt extends et{normalizePropertyName(e,t){return Ie(e)}normalizeStyleValue(e,t,n,r){let i="";const s=n.toString().trim();if(nt[t]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const t=n.match(/^[+-]?[\d\.]+([a-z]*)$/);t&&0==t[1].length&&r.push(`Please provide a CSS unit value for ${e}:${n}`)}return s+i}}const nt=(()=>function(e){const t={};return e.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function rt(e,t,n,r,i,s,o,a,l,c,u,h,d){return{type:0,element:e,triggerName:t,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:h,errors:d}}const it={};class st{constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,r){return function(e,t,n,r,i){return e.some(e=>e(t,n,r,i))}(this.ast.matchers,e,t,n,r)}buildStyles(e,t,n){const r=this._stateStyles["*"],i=this._stateStyles[e],s=r?r.buildStyles(t,n):{};return i?i.buildStyles(t,n):s}build(e,t,n,r,i,s,o,a,l,c){const u=[],h=this.ast.options&&this.ast.options.params||it,d=this.buildStyles(n,o&&o.params||it,u),p=a&&a.params||it,f=this.buildStyles(r,p,u),g=new Set,m=new Map,y=new Map,_="void"===r,v={params:Object.assign(Object.assign({},h),p)},w=c?[]:Ze(e,t,this.ast.animation,i,s,d,f,v,l,u);let b=0;if(w.forEach(e=>{b=Math.max(e.duration+e.delay,b)}),u.length)return rt(t,this._triggerName,n,r,_,d,f,[],[],m,y,b,u);w.forEach(e=>{const n=e.element,r=$(m,n,{});e.preStyleProps.forEach(e=>r[e]=!0);const i=$(y,n,{});e.postStyleProps.forEach(e=>i[e]=!0),n!==t&&g.add(n)});const T=Ee(g.values());return rt(t,this._triggerName,n,r,_,d,f,w,T,m,y,b)}}class ot{constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){const n={},r=fe(this.defaultParams);return Object.keys(e).forEach(t=>{const n=e[t];null!=n&&(r[t]=n)}),this.styles.styles.forEach(e=>{if("string"!=typeof e){const i=e;Object.keys(i).forEach(e=>{let s=i[e];s.length>1&&(s=Se(s,r,t));const o=this.normalizer.normalizePropertyName(e,t);s=this.normalizer.normalizeStyleValue(e,o,s,t),n[o]=s})}}),n}}class at{constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,this.transitionFactories=[],this.states={},t.states.forEach(e=>{this.states[e.name]=new ot(e.style,e.options&&e.options.params||{},n)}),lt(this.states,"true","1"),lt(this.states,"false","0"),t.transitions.forEach(t=>{this.transitionFactories.push(new st(e,t,this.states))}),this.fallbackTransition=new st(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(e,t)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,r){return this.transitionFactories.find(i=>i.match(e,t,n,r))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}function lt(e,t,n){e.hasOwnProperty(t)?e.hasOwnProperty(n)||(e[n]=e[t]):e.hasOwnProperty(n)&&(e[t]=e[n])}const ct=new $e;class ut{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(e,t){const n=[],r=Me(this._driver,t,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[e]=r}_buildPlayer(e,t,n){const r=e.element,i=j(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(r,i,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){const r=[],i=this._animations[e];let s;const o=new Map;if(i?(s=Ze(this._driver,t,i,se,oe,{},{},n,ct,r),s.forEach(e=>{const t=$(o,e.element,{});e.postStyleProps.forEach(e=>t[e]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),s=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);o.forEach((e,t)=>{Object.keys(e).forEach(n=>{e[n]=this._driver.computeStyle(t,n,F.l3)})});const a=V(s.map(e=>{const t=o.get(e.element);return this._buildPlayer(e,{},t)}));return this._playersById[e]=a,a.onDestroy(()=>this.destroy(e)),this.players.push(a),a}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,n,r){const i=z(t,"","","");return q(this._getPlayer(e),n,i,r),()=>{}}command(e,t,n,r){if("register"==n)return void this.register(e,r[0]);if("create"==n)return void this.create(e,t,r[0]||{});const i=this._getPlayer(e);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const ht="ng-animate-queued",dt="ng-animate-disabled",pt=".ng-animate-disabled",ft=[],gt={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},mt={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class yt{constructor(e,t=""){this.namespaceId=t;const n=e&&e.hasOwnProperty("value");if(this.value=null!=(r=n?e.value:e)?r:null,n){const t=fe(e);delete t.value,this.options=t}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const e=this.options.params;Object.keys(t).forEach(n=>{null==e[n]&&(e[n]=t[n])})}}}const _t="void",vt=new yt(_t);class wt{constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,kt(t,this._hostClassName)}listen(e,t,n,r){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${t}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${t}" is not supported!`);var i;const s=$(this._elementListeners,e,[]),o={name:t,phase:n,callback:r};s.push(o);const a=$(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(kt(e,ae),kt(e,"ng-trigger-"+t),a[t]=vt),()=>{this._engine.afterFlush(()=>{const e=s.indexOf(o);e>=0&&s.splice(e,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,n,r=!0){const i=this._getTrigger(t),s=new Tt(this.id,t,e);let o=this._engine.statesByElement.get(e);o||(kt(e,ae),kt(e,"ng-trigger-"+t),this._engine.statesByElement.set(e,o={}));let a=o[t];const l=new yt(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&l.absorbOptions(a.options),o[t]=l,a||(a=vt),l.value!==_t&&a.value===l.value){if(!function(e,t){const n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!t.hasOwnProperty(r)||e[r]!==t[r])return!1}return!0}(a.params,l.params)){const t=[],n=i.matchStyles(a.value,a.params,t),r=i.matchStyles(l.value,l.params,t);t.length?this._engine.reportError(t):this._engine.afterFlush(()=>{ve(e,n),_e(e,r)})}return}const c=$(this._engine.playersByElement,e,[]);c.forEach(e=>{e.namespaceId==this.id&&e.triggerName==t&&e.queued&&e.destroy()});let u=i.matchTransition(a.value,l.value,e,l.params),h=!1;if(!u){if(!r)return;u=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:u,fromState:a,toState:l,player:s,isFallbackTransition:h}),h||(kt(e,ht),s.onStart(()=>{xt(e,ht)})),s.onDone(()=>{let t=this.players.indexOf(s);t>=0&&this.players.splice(t,1);const n=this._engine.playersByElement.get(e);if(n){let e=n.indexOf(s);e>=0&&n.splice(e,1)}}),this.players.push(s),c.push(s),s}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,n)=>{delete t[e]}),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(t=>t.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(e=>e.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const n=this._engine.driver.query(e,le,!0);n.forEach(e=>{if(e.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(e);n.size?n.forEach(n=>n.triggerLeaveAnimation(e,t,!1,!0)):this.clearElementCache(e)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(e=>this.clearElementCache(e)))}triggerLeaveAnimation(e,t,n,r){const i=this._engine.statesByElement.get(e);if(i){const s=[];if(Object.keys(i).forEach(t=>{if(this._triggers[t]){const n=this.trigger(e,t,_t,r);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),n&&V(s).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){const r=new Set;t.forEach(t=>{const i=t.name;if(r.has(i))return;r.add(i);const s=this._triggers[i].fallbackTransition,o=n[i]||vt,a=new yt(_t),l=new Tt(this.id,i,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:i,transition:s,fromState:o,toState:a,player:l,isFallbackTransition:!0})})}}removeNode(e,t){const n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(n.totalAnimations){const t=n.players.length?n.playersByQueriedElement.get(e):[];if(t&&t.length)r=!0;else{let t=e;for(;t=t.parentNode;)if(n.statesByElement.get(t)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)n.markElementAsRemoved(this.id,e,!1,t);else{const r=e.__ng_removed;r&&r!==gt||(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){kt(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,s=this._elementListeners.get(i);s&&s.forEach(t=>{if(t.name==n.triggerName){const r=z(i,n.triggerName,n.fromState.value,n.toState.value);r._data=e,q(n.player,t.phase,r,t.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(n)}),this._queue=[],t.sort((e,t)=>{const n=e.transition.ast.depCount,r=t.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(e.element,t.element)?1:-1})}destroy(e){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(t=>t.element===e)||t,t}}class bt{constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(e,t)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(t=>{t.queued&&e.push(t)})}),e}createNamespace(e,t){const n=new wt(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,t)){this._namespaceList.splice(i+1,0,e),r=!0;break}r||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}destroy(e,t){if(!e)return;const n=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[e];const t=this._namespaceList.indexOf(n);t>=0&&this._namespaceList.splice(t,1)}),this.afterFlushAnimationsDone(()=>n.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,n=this.statesByElement.get(e);if(n){const e=Object.keys(n);for(let r=0;r<e.length;r++){const i=n[e[r]].namespaceId;if(i){const e=this._fetchNamespace(i);e&&t.add(e)}}}return t}trigger(e,t,n,r){if(St(t)){const i=this._fetchNamespace(e);if(i)return i.trigger(t,n,r),!0}return!1}insertNode(e,t,n,r){if(!St(t))return;const i=t.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const e=this.collectedLeaveElements.indexOf(t);e>=0&&this.collectedLeaveElements.splice(e,1)}if(e){const r=this._fetchNamespace(e);r&&r.insertNode(t,n)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),kt(e,dt)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),xt(e,dt))}removeNode(e,t,n,r){if(St(t)){const i=e?this._fetchNamespace(e):null;if(i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),n){const n=this.namespacesByHostElement.get(t);n&&n.id!==e&&n.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,n,r){this.collectedLeaveElements.push(t),t.__ng_removed={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(e,t,n,r,i){return St(t)?this._fetchNamespace(e).listen(t,n,r,i):()=>{}}_buildInstruction(e,t,n,r,i){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,i)}destroyInnerAnimations(e){let t=this.driver.query(e,le,!0);t.forEach(e=>this.destroyActiveAnimationsForElement(e)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,ue,!0),t.forEach(e=>this.finishActiveQueriedAnimationOnElement(e)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(e=>{e.queued?e.markedForDestroy=!0:e.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(e=>e.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return V(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e.__ng_removed;if(t&&t.setForRemoval){if(e.__ng_removed=gt,t.namespaceId){this.destroyInnerAnimations(e);const n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,pt)&&this.markElementAsDisabled(e,!1),this.driver.query(e,pt,!0).forEach(e=>{this.markElementAsDisabled(e,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((e,t)=>this._balanceNamespaceList(e,t)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)kt(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{t=this._flushAnimations(n,e)}finally{for(let e=0;e<n.length;e++)n[e]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(e=>e()),this._flushFns=[],this._whenQuietFns.length){const e=this._whenQuietFns;this._whenQuietFns=[],t.length?V(t).onDone(()=>{e.forEach(e=>e())}):e.forEach(e=>e())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const n=new $e,r=[],i=new Map,s=[],o=new Map,a=new Map,l=new Map,c=new Set;this.disabledNodes.forEach(e=>{c.add(e);const t=this.driver.query(e,".ng-animate-queued",!0);for(let n=0;n<t.length;n++)c.add(t[n])});const u=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=It(h,this.collectedEnterElements),p=new Map;let f=0;d.forEach((e,t)=>{const n=se+f++;p.set(t,n),e.forEach(e=>kt(e,n))});const g=[],m=new Set,y=new Set;for(let P=0;P<this.collectedLeaveElements.length;P++){const e=this.collectedLeaveElements[P],t=e.__ng_removed;t&&t.setForRemoval&&(g.push(e),m.add(e),t.hasAnimation?this.driver.query(e,".ng-star-inserted",!0).forEach(e=>m.add(e)):y.add(e))}const _=new Map,v=It(h,Array.from(m));v.forEach((e,t)=>{const n=oe+f++;_.set(t,n),e.forEach(e=>kt(e,n))}),e.push(()=>{d.forEach((e,t)=>{const n=p.get(t);e.forEach(e=>xt(e,n))}),v.forEach((e,t)=>{const n=_.get(t);e.forEach(e=>xt(e,n))}),g.forEach(e=>{this.processLeaveNode(e)})});const w=[],b=[];for(let P=this._namespaceList.length-1;P>=0;P--)this._namespaceList[P].drainQueuedTransitions(t).forEach(e=>{const t=e.player,i=e.element;if(w.push(t),this.collectedEnterElements.length){const e=i.__ng_removed;if(e&&e.setForMove)return void t.destroy()}const c=!u||!this.driver.containsElement(u,i),h=_.get(i),d=p.get(i),f=this._buildInstruction(e,n,d,h,c);if(f.errors&&f.errors.length)b.push(f);else{if(c)return t.onStart(()=>ve(i,f.fromStyles)),t.onDestroy(()=>_e(i,f.toStyles)),void r.push(t);if(e.isFallbackTransition)return t.onStart(()=>ve(i,f.fromStyles)),t.onDestroy(()=>_e(i,f.toStyles)),void r.push(t);f.timelines.forEach(e=>e.stretchStartingKeyframe=!0),n.append(i,f.timelines),s.push({instruction:f,player:t,element:i}),f.queriedElements.forEach(e=>$(o,e,[]).push(t)),f.preStyleProps.forEach((e,t)=>{const n=Object.keys(e);if(n.length){let e=a.get(t);e||a.set(t,e=new Set),n.forEach(t=>e.add(t))}}),f.postStyleProps.forEach((e,t)=>{const n=Object.keys(e);let r=l.get(t);r||l.set(t,r=new Set),n.forEach(e=>r.add(e))})}});if(b.length){const e=[];b.forEach(t=>{e.push(`@${t.triggerName} has failed due to:\n`),t.errors.forEach(t=>e.push(`- ${t}\n`))}),w.forEach(e=>e.destroy()),this.reportError(e)}const T=new Map,S=new Map;s.forEach(e=>{const t=e.element;n.has(t)&&(S.set(t,t),this._beforeAnimationBuild(e.player.namespaceId,e.instruction,T))}),r.forEach(e=>{const t=e.element;this._getPreviousPlayers(t,!1,e.namespaceId,e.triggerName,null).forEach(e=>{$(T,t,[]).push(e),e.destroy()})});const E=g.filter(e=>Rt(e,a,l)),C=new Map;Ct(C,this.driver,y,l,F.l3).forEach(e=>{Rt(e,a,l)&&E.push(e)});const I=new Map;d.forEach((e,t)=>{Ct(I,this.driver,new Set(e),a,F.k1)}),E.forEach(e=>{const t=C.get(e),n=I.get(e);C.set(e,Object.assign(Object.assign({},t),n))});const k=[],x=[],A={};s.forEach(e=>{const{element:t,player:s,instruction:o}=e;if(n.has(t)){if(c.has(t))return s.onDestroy(()=>_e(t,o.toStyles)),s.disabled=!0,s.overrideTotalTime(o.totalTime),void r.push(s);let e=A;if(S.size>1){let n=t;const r=[];for(;n=n.parentNode;){const t=S.get(n);if(t){e=t;break}r.push(n)}r.forEach(t=>S.set(t,e))}const n=this._buildAnimation(s.namespaceId,o,T,i,I,C);if(s.setRealPlayer(n),e===A)k.push(s);else{const t=this.playersByElement.get(e);t&&t.length&&(s.parentPlayer=V(t)),r.push(s)}}else ve(t,o.fromStyles),s.onDestroy(()=>_e(t,o.toStyles)),x.push(s),c.has(t)&&r.push(s)}),x.forEach(e=>{const t=i.get(e.element);if(t&&t.length){const n=V(t);e.setRealPlayer(n)}}),r.forEach(e=>{e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()});for(let P=0;P<g.length;P++){const e=g[P],t=e.__ng_removed;if(xt(e,oe),t&&t.hasAnimation)continue;let n=[];if(o.size){let t=o.get(e);t&&t.length&&n.push(...t);let r=this.driver.query(e,ue,!0);for(let e=0;e<r.length;e++){let t=o.get(r[e]);t&&t.length&&n.push(...t)}}const r=n.filter(e=>!e.destroyed);r.length?At(this,e,r):this.processLeaveNode(e)}return g.length=0,k.forEach(e=>{this.players.push(e),e.onDone(()=>{e.destroy();const t=this.players.indexOf(e);this.players.splice(t,1)}),e.play()}),k}elementContainsData(e,t){let n=!1;const r=t.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,r,i){let s=[];if(t){const t=this.playersByQueriedElement.get(e);t&&(s=t)}else{const t=this.playersByElement.get(e);if(t){const e=!i||i==_t;t.forEach(t=>{t.queued||(e||t.triggerName==r)&&s.push(t)})}}return(n||r)&&(s=s.filter(e=>!(n&&n!=e.namespaceId||r&&r!=e.triggerName))),s}_beforeAnimationBuild(e,t,n){const r=t.element,i=t.isRemovalTransition?void 0:e,s=t.isRemovalTransition?void 0:t.triggerName;for(const o of t.timelines){const e=o.element,a=e!==r,l=$(n,e,[]);this._getPreviousPlayers(e,a,i,s,t.toState).forEach(e=>{const t=e.getRealPlayer();t.beforeDestroy&&t.beforeDestroy(),e.destroy(),l.push(e)})}ve(r,t.fromStyles)}_buildAnimation(e,t,n,r,i,s){const o=t.triggerName,a=t.element,l=[],c=new Set,u=new Set,h=t.timelines.map(t=>{const h=t.element;c.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new F.ZN(t.duration,t.delay);const p=h!==a,f=function(e){const t=[];return Pt(e,t),t}((n.get(h)||ft).map(e=>e.getRealPlayer())).filter(e=>!!e.element&&e.element===h),g=i.get(h),m=s.get(h),y=j(0,this._normalizer,0,t.keyframes,g,m),_=this._buildPlayer(t,y,f);if(t.subTimeline&&r&&u.add(h),p){const t=new Tt(e,o,h);t.setRealPlayer(_),l.push(t)}return _});l.forEach(e=>{$(this.playersByQueriedElement,e.element,[]).push(e),e.onDone(()=>function(e,t,n){let r;if(e instanceof Map){if(r=e.get(t),r){if(r.length){const e=r.indexOf(n);r.splice(e,1)}0==r.length&&e.delete(t)}}else if(r=e[t],r){if(r.length){const e=r.indexOf(n);r.splice(e,1)}0==r.length&&delete e[t]}return r}(this.playersByQueriedElement,e.element,e))}),c.forEach(e=>kt(e,ce));const d=V(h);return d.onDestroy(()=>{c.forEach(e=>xt(e,ce)),_e(a,t.toStyles)}),u.forEach(e=>{$(r,e,[]).push(d)}),d}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new F.ZN(e.duration,e.delay)}}class Tt{constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new F.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(n=>q(e,t,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){$(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function St(e){return e&&1===e.nodeType}function Et(e,t){const n=e.style.display;return e.style.display=null!=t?t:"none",n}function Ct(e,t,n,r,i){const s=[];n.forEach(e=>s.push(Et(e)));const o=[];r.forEach((n,r)=>{const s={};n.forEach(e=>{const n=s[e]=t.computeStyle(r,e,i);n&&0!=n.length||(r.__ng_removed=mt,o.push(r))}),e.set(r,s)});let a=0;return n.forEach(e=>Et(e,s[a++])),o}function It(e,t){const n=new Map;if(e.forEach(e=>n.set(e,[])),0==t.length)return n;const r=new Set(t),i=new Map;function s(e){if(!e)return 1;let t=i.get(e);if(t)return t;const o=e.parentNode;return t=n.has(o)?o:r.has(o)?1:s(o),i.set(e,t),t}return t.forEach(e=>{const t=s(e);1!==t&&n.get(t).push(e)}),n}function kt(e,t){if(e.classList)e.classList.add(t);else{let n=e.$$classes;n||(n=e.$$classes={}),n[t]=!0}}function xt(e,t){if(e.classList)e.classList.remove(t);else{let n=e.$$classes;n&&delete n[t]}}function At(e,t,n){V(n).onDone(()=>e.processLeaveNode(t))}function Pt(e,t){for(let n=0;n<e.length;n++){const r=e[n];r instanceof F.ZE?Pt(r.players,t):t.push(r)}}function Rt(e,t,n){const r=n.get(e);if(!r)return!1;let i=t.get(e);return i?r.forEach(e=>i.add(e)):t.set(e,r),n.delete(e),!0}class Nt{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(e,t)=>{},this._transitionEngine=new bt(e,t,n),this._timelineEngine=new ut(e,t,n),this._transitionEngine.onRemovalComplete=(e,t)=>this.onRemovalComplete(e,t)}registerTrigger(e,t,n,r,i){const s=e+"-"+r;let o=this._triggerCache[s];if(!o){const e=[],t=Me(this._driver,i,e);if(e.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${e.join("\n - ")}`);o=function(e,t,n){return new at(e,t,n)}(r,t,this._normalizer),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(t,r,o)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}onRemove(e,t,n,r){this._transitionEngine.removeNode(e,t,r||!1,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,r){if("@"==n.charAt(0)){const[e,i]=H(n);this._timelineEngine.command(e,t,i,r)}else this._transitionEngine.trigger(e,t,n,r)}listen(e,t,n,r,i){if("@"==n.charAt(0)){const[e,r]=H(n);return this._timelineEngine.listen(e,t,r,i)}return this._transitionEngine.listen(e,t,n,r,i)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Ot(e,t){let n=null,r=null;return Array.isArray(t)&&t.length?(n=Lt(t[0]),t.length>1&&(r=Lt(t[t.length-1]))):t&&(n=Lt(t)),n||r?new Dt(e,n,r):null}class Dt{constructor(e,t,n){this._element=e,this._startStyles=t,this._endStyles=n,this._state=0;let r=Dt.initialStylesByElement.get(e);r||Dt.initialStylesByElement.set(e,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&_e(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(_e(this._element,this._initialStyles),this._endStyles&&(_e(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Dt.initialStylesByElement.delete(this._element),this._startStyles&&(ve(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ve(this._element,this._endStyles),this._endStyles=null),_e(this._element,this._initialStyles),this._state=3)}}function Lt(e){let t=null;const n=Object.keys(e);for(let r=0;r<n.length;r++){const i=n[r];Ft(i)&&(t=t||{},t[i]=e[i])}return t}function Ft(e){return"display"===e||"position"===e}Dt.initialStylesByElement=new WeakMap;const Mt="animation",Ut="animationend";class Vt{constructor(e,t,n,r,i,s,o){this._element=e,this._name=t,this._duration=n,this._delay=r,this._easing=i,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=e=>this._handleCallback(e)}apply(){!function(e,t){const n=Ht(e,"").trim();n.length&&(function(e,t){let n=0;for(let r=0;r<e.length;r++)","===e.charAt(r)&&n++}(n),t=`${n}, ${t}`),$t(e,"",t)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),zt(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){jt(this._element,this._name,"paused")}resume(){jt(this._element,this._name,"running")}setPosition(e){const t=qt(this._element,this._name);this._position=e*this._duration,$t(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),zt(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(e,t){const n=Ht(e,"").split(","),r=Bt(n,t);r>=0&&(n.splice(r,1),$t(e,"",n.join(",")))}(this._element,this._name))}}function jt(e,t,n){$t(e,"PlayState",n,qt(e,t))}function qt(e,t){const n=Ht(e,"");return n.indexOf(",")>0?Bt(n.split(","),t):Bt([n],t)}function Bt(e,t){for(let n=0;n<e.length;n++)if(e[n].indexOf(t)>=0)return n;return-1}function zt(e,t,n){n?e.removeEventListener(Ut,t):e.addEventListener(Ut,t)}function $t(e,t,n,r){const i=Mt+t;if(null!=r){const t=e.style[i];if(t.length){const e=t.split(",");e[r]=n,n=e.join(",")}}e.style[i]=n}function Ht(e,t){return e.style[Mt+t]||""}class Gt{constructor(e,t,n,r,i,s,o,a){this.element=e,this.keyframes=t,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=r+i,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Vt(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(e[n]=t?this._finalStyles[n]:Pe(this.element,n))})}this.currentSnapshot=e}}class Zt extends F.ZN{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=ne(t)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class Kt{constructor(){this._count=0}validateStyleProperty(e){return J(e)}matchesElement(e,t){return X(e,t)}containsElement(e,t){return ee(e,t)}query(e,t,n){return te(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,n){n=n.map(e=>ne(e));let r=`@keyframes ${t} {\n`,i="";n.forEach(e=>{i=" ";const t=parseFloat(e.offset);r+=`${i}${100*t}% {\n`,i+=" ",Object.keys(e).forEach(t=>{const n=e[t];switch(t){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${t}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const s=document.createElement("style");return s.textContent=r,s}animate(e,t,n,r,i,s=[],o){const a=s.filter(e=>e instanceof Gt),l={};ke(n,r)&&a.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>l[e]=t[e])});const c=function(e){let t={};return e&&(Array.isArray(e)?e:[e]).forEach(e=>{Object.keys(e).forEach(n=>{"offset"!=n&&"easing"!=n&&(t[n]=e[n])})}),t}(t=xe(e,t,l));if(0==n)return new Zt(e,c);const u="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(e,u,t);(function(e){var t;const n=null===(t=e.getRootNode)||void 0===t?void 0:t.call(e);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(e).appendChild(h);const d=Ot(e,t),p=new Gt(e,t,u,n,r,i,c,d);return p.onDestroy(()=>{var e;(e=h).parentNode.removeChild(e)}),p}}class Wt{constructor(e,t,n,r){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,n){return e.animate(t,n)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:Pe(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class Yt{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Qt().toString()),this._cssKeyframesDriver=new Kt}validateStyleProperty(e){return J(e)}matchesElement(e,t){return X(e,t)}containsElement(e,t){return ee(e,t)}query(e,t,n){return te(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,n,r,i,s=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,n,r,i,s);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const l={},c=s.filter(e=>e instanceof Wt);ke(n,r)&&c.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>l[e]=t[e])});const u=Ot(e,t=xe(e,t=t.map(e=>ge(e,!1)),l));return new Wt(e,t,a,u)}}function Qt(){return M()&&Element.prototype.animate||{}}let Jt=(()=>{class e extends F._j{constructor(e,t){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(t.body,{id:"0",encapsulation:i.ifc.None,styles:[],data:{animation:[]}})}build(e){const t=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(e)?(0,F.vP)(e):e;return tn(this._renderer,null,t,"register",[n]),new Xt(t,this._renderer)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.FYo),i.LFG(r.K0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();class Xt extends F.LC{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new en(this._id,e,t||{},this._renderer)}}class en{constructor(e,t,n,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return tn(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function tn(e,t,n,r,i){return e.setProperty(t,`@@${n}:${r}`,i)}const nn="@",rn="@.disabled";let sn=(()=>{class e{constructor(e,t,n){this.delegate=e,this.engine=t,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),t.onRemovalComplete=(e,t)=>{t&&t.parentNode(e)&&t.removeChild(e.parentNode,e)}}createRenderer(e,t){const n=this.delegate.createRenderer(e,t);if(!(e&&t&&t.data&&t.data.animation)){let e=this._rendererCache.get(n);return e||(e=new on("",n,this.engine),this._rendererCache.set(n,e)),e}const r=t.id,i=t.id+"-"+this._currentId;this._currentId++,this.engine.register(i,e);const s=t=>{Array.isArray(t)?t.forEach(s):this.engine.registerTrigger(r,i,e,t.name,t)};return t.data.animation.forEach(s),new an(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,n){e>=0&&e<this._microtaskId?this._zone.run(()=>t(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(e=>{const[t,n]=e;t(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([t,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.FYo),i.LFG(Nt),i.LFG(i.R0b))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();class on{constructor(e,t,n){this.namespaceId=e,this.delegate=t,this.engine=n,this.destroyNode=this.delegate.destroyNode?e=>t.destroyNode(e):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,r=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,r){this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){t.charAt(0)==nn&&t==rn?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class an extends on{constructor(e,t,n,r){super(t,n,r),this.factory=e,this.namespaceId=t}setProperty(e,t,n){t.charAt(0)==nn?"."==t.charAt(1)&&t==rn?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.substr(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if(t.charAt(0)==nn){const r=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e);let i=t.substr(1),s="";return i.charAt(0)!=nn&&([i,s]=function(e){const t=e.indexOf(".");return[e.substring(0,t),e.substr(t+1)]}(i)),this.engine.listen(this.namespaceId,r,i,s,e=>{this.factory.scheduleListenerCallback(e._data||-1,n,e)})}return this.delegate.listen(e,t,n)}}let ln=(()=>{class e extends Nt{constructor(e,t,n){super(e.body,t,n)}ngOnDestroy(){this.flush()}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(r.K0),i.LFG(ie),i.LFG(et))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();const cn=new i.OlP("AnimationModuleType"),un=[{provide:F._j,useClass:Jt},{provide:et,useFactory:function(){return new tt}},{provide:Nt,useClass:ln},{provide:i.FYo,useFactory:function(e,t,n){return new sn(e,t,n)},deps:[S,Nt,i.R0b]}],hn=[{provide:ie,useFactory:function(){return"function"==typeof Qt()?new Yt:new Kt}},{provide:cn,useValue:"BrowserAnimations"},...un],dn=[{provide:ie,useClass:re},{provide:cn,useValue:"NoopAnimations"},...un];let pn=(()=>{class e{static withConfig(t){return{ngModule:e,providers:t.disableAnimations?dn:hn}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:hn,imports:[L]}),e})();var fn=n(1841),gn=n(2482),mn=n.n(gn);const yn={apiKey:"AIzaSyD7fNwU9UnDZ_l7M7jGISMOMrpW9j9iJ1o",authDomain:"wk-marketplace.firebaseapp.com",projectId:"wk-marketplace",storageBucket:"wk-marketplace.appspot.com",messagingSenderId:"170255924385",appId:"1:170255924385:web:ca0846b6a5e9078d3bc4e0",measurementId:"G-327J1JK114"};var _n=n(8747),vn=n(3637),wn=n(7574),bn=n(5917),Tn=n(6682),Sn=n(8002),En=n(8819),Cn=n(3190),In=n(2145),kn=n(7519),xn=n(5197),An=n(509);class Pn{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new Rn(e,this.observables,this.project))}}class Rn extends xn.L{constructor(e,t,n){super(e),this.observables=t,this.project=n,this.toRespond=[];const r=t.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add((0,An.D)(this,t[i],void 0,i))}notifyNext(e,t,n){this.values[n]=t;const r=this.toRespond;if(r.length>0){const e=r.indexOf(n);-1!==e&&r.splice(e,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}var Nn=n(7393);class On{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new Dn(e,this.predicate))}}class Dn extends Nn.L{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}var Ln=n(4459),Fn=(n(941),n(156)),Mn=n(8604),Un=n(6304),Vn=n(279),jn=n(3854),qn=n(9306);const Bn="@firebase/database",zn="0.12.4";let $n="";function Hn(e){$n=e}class Gn{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,jn.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,jn.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Zn{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,jn.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Kn=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Gn(t)}}catch(t){}return new Zn},Wn=Kn("localStorage"),Yn=Kn("sessionStorage"),Qn=new qn.Yd("@firebase/database"),Jn=function(){let e=1;return function(){return e++}}(),Xn=function(e){const t=(0,jn.dS)(e),n=new jn.gQ;n.update(t);const r=n.digest();return jn.US.encodeByteArray(r)},er=function(...e){let t="";for(let n=0;n<e.length;n++){const r=e[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=er.apply(null,r):t+="object"==typeof r?(0,jn.Pz)(r):r,t+=" "}return t};let tr=null,nr=!0;const rr=function(e,t){(0,jn.hu)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Qn.logLevel=qn.in.VERBOSE,tr=Qn.log.bind(Qn),t&&Yn.set("logging_enabled",!0)):"function"==typeof e?tr=e:(tr=null,Yn.remove("logging_enabled"))},ir=function(...e){if(!0===nr&&(nr=!1,null===tr&&!0===Yn.get("logging_enabled")&&rr(!0)),tr){const t=er.apply(null,e);tr(t)}},sr=function(e){return function(...t){ir(e,...t)}},or=function(...e){const t="FIREBASE INTERNAL ERROR: "+er(...e);Qn.error(t)},ar=function(...e){const t=`FIREBASE FATAL ERROR: ${er(...e)}`;throw Qn.error(t),new Error(t)},lr=function(...e){const t="FIREBASE WARNING: "+er(...e);Qn.warn(t)},cr=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},ur="[MIN_NAME]",hr="[MAX_NAME]",dr=function(e,t){if(e===t)return 0;if(e===ur||t===hr)return-1;if(t===ur||e===hr)return 1;{const n=wr(e),r=wr(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},pr=function(e,t){return e===t?0:e<t?-1:1},fr=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+(0,jn.Pz)(t))},gr=function(e){if("object"!=typeof e||null===e)return(0,jn.Pz)(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=(0,jn.Pz)(t[r]),n+=":",n+=gr(e[t[r]]);return n+="}",n},mr=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)r.push(e.substring(i,i+t>n?n:i+t));return r};function yr(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const _r=function(e){let t,n,r,i,s;(0,jn.hu)(!cr(e),"Invalid JSON number"),0===e?(n=0,r=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),n=i+1023,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));const o=[];for(s=52;s;s-=1)o.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)o.push(n%2?1:0),n=Math.floor(n/2);o.push(t?1:0),o.reverse();const a=o.join("");let l="";for(s=0;s<64;s+=8){let e=parseInt(a.substr(s,8),2).toString(16);1===e.length&&(e="0"+e),l+=e}return l.toLowerCase()},vr=new RegExp("^-?(0*)\\d{1,10}$"),wr=function(e){if(vr.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},br=function(e){try{e()}catch(t){setTimeout(()=>{throw lr("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},Tr=function(e,t){const n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n};class Sr{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(e=>this.appCheck=e)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){lr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Er{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(e=>this.auth_=e)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(e=>e&&"auth/token-not-initialized"===e.code?(ir("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',lr(e)}}let Cr=(()=>{class e{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return e.OWNER="owner",e})();const Ir=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,kr="websocket",xr="long_polling";class Ar{constructor(e,t,n,r,i=!1,s="",o=!1){this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Wn.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Wn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Pr(e,t,n){let r;if((0,jn.hu)("string"==typeof t,"typeof type must == string"),(0,jn.hu)("object"==typeof n,"typeof params must == object"),t===kr)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==xr)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return yr(n,(e,t)=>{i.push(e+"="+t)}),r+i.join("&")}class Rr{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,jn.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,jn.p$)(this.counters_)}}const Nr={},Or={};function Dr(e){const t=e.toString();return Nr[t]||(Nr[t]=new Rr),Nr[t]}class Lr{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&br(()=>{this.onMessage_(e[t])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Fr{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=sr(e),this.stats_=Dr(t),this.urlFn=e=>(this.appCheckToken&&(e.ac=this.appCheckToken),Pr(t,xr,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Lr(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if((0,jn.Yr)()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Mr((...e)=>{const[t,n,r,i,s]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===t)this.id=n,this.password=r;else{if("close"!==t)throw new Error("Unrecognized command received: "+t);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,()=>{this.onClosed_()})):this.onClosed_()}},(...e)=>{const[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)},()=>{this.onClosed_()},this.urlFn);const e={start:"t"};e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Ir.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Fr.forceAllow_=!0}static forceDisallow(){Fr.forceDisallow_=!0}static isAvailable(){return!((0,jn.Yr)()||!Fr.forceAllow_&&(Fr.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,jn.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=(0,jn.h$)(t),r=mr(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,jn.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,jn.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Mr{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,jn.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Jn(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Mr.createIFrame_();let n="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(n='<script>document.domain="'+document.domain+'";<\/script>');const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(i){ir("frame writing exception"),i.stack&&ir(i.stack),ir(i)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ir("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),n()})}addTag(e,t){(0,jn.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{ir("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(n){}},Math.floor(1))}}let Ur=null;"undefined"!=typeof MozWebSocket?Ur=MozWebSocket:"undefined"!=typeof WebSocket&&(Ur=WebSocket);let Vr=(()=>{class e{constructor(t,n,r,i,s,o,a){this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=sr(this.connId),this.stats_=Dr(n),this.connURL=e.connectionURL_(n,o,a,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,t,n,r){const i={v:"5"};return!(0,jn.Yr)()&&"undefined"!=typeof location&&location.hostname&&Ir.test(location.hostname)&&(i.r="f"),t&&(i.s=t),n&&(i.ls=n),r&&(i.ac=r),Pr(e,kr,i)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Wn.set("previous_websocket_failure",!0);try{if((0,jn.Yr)()){const e={headers:{"User-Agent":`Firebase/5/${$n}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const t=process.env,n=0===this.connURL.indexOf("wss://")?t.HTTPS_PROXY||t.https_proxy:t.HTTP_PROXY||t.http_proxy;n&&(e.proxy={origin:n}),this.mySock=new Ur(this.connURL,[],e)}else this.mySock=new Ur(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(n){this.log_("Error instantiating WebSocket.");const e=n.message||n.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const e=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);e&&e.length>1&&parseFloat(e[1])<4.4&&(t=!0)}return!t&&null!==Ur&&!e.forceDisallow_}static previouslyFailed(){return Wn.isInMemoryStorage||!0===Wn.get("previous_websocket_failure")}markConnectionHealthy(){Wn.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=(0,jn.cI)(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,jn.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=(0,jn.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=mr(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e})();class jr{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Fr,Vr]}initTransports_(e){const t=Vr&&Vr.isAvailable();let n=t&&!Vr.previouslyFailed();if(e.webSocketOnly&&(t||lr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Vr];else{const e=this.transports_=[];for(const t of jr.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class qr{constructor(e,t,n,r,i,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=sr("c:"+this.id+":"),this.transportManager_=new jr(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Tr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=fr("t",e),n=fr("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=fr("t",e),n=fr("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=fr("t",e);if("d"in e){const n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?or("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):or("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&lr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),Tr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Tr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Wn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Br{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class zr{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,jn.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){(0,jn.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class $r extends zr{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,jn.uI)()||(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new $r}getInitialEvent(e){return(0,jn.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Hr{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Gr(){return new Hr("")}function Zr(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Kr(e){return e.pieces_.length-e.pieceNum_}function Wr(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Hr(e.pieces_,t)}function Yr(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Qr(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function Jr(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Hr(t,0)}function Xr(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Hr)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new Hr(n,0)}function ei(e){return e.pieceNum_>=e.pieces_.length}function ti(e,t){const n=Zr(e),r=Zr(t);if(null===n)return t;if(n===r)return ti(Wr(e),Wr(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function ni(e,t){const n=Qr(e,0),r=Qr(t,0);for(let i=0;i<n.length&&i<r.length;i++){const e=dr(n[i],r[i]);if(0!==e)return e}return n.length===r.length?0:n.length<r.length?-1:1}function ri(e,t){if(Kr(e)!==Kr(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function ii(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(Kr(e)>Kr(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class si{constructor(e,t){this.errorPrefix_=t,this.parts_=Qr(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=(0,jn.ug)(this.parts_[n]);oi(this)}}function oi(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ai(e))}function ai(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class li extends zr{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))},!1)}static getInstance(){return new li}getInitialEvent(e){return(0,jn.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const ci=1e3;let ui,hi=(()=>{class e extends Br{constructor(t,n,r,i,s,o,a,l){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=e.nextPersistentConnectionId_++,this.log_=sr("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ci,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!(0,jn.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");li.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&$r.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_((0,jn.Pz)(i)),(0,jn.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new jn.BH,n={p:e._path.toString(),q:e._queryObject},r={action:"g",request:n,onComplete:e=>{const r=e.d;"ok"===e.s?(this.onDataUpdate_(n.p,r,!1,null),t.resolve(r)):t.reject(r)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const e=this.outstandingGets_[i];void 0!==e&&r===e&&(delete this.outstandingGets_[i],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+i+" timed out on connection"),t.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(i),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),(0,jn.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,jn.hu)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)})}sendListen_(t){const n=t.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r};t.tag&&(s.q=n._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,s=>{const o=s.d,a=s.s;e.warnOnListenWarnings_(o,n),(this.listens.get(r)&&this.listens.get(r).get(i))===t&&(this.log_("listen response",s),"ok"!==a&&this.removeListen_(r,i),t.onComplete&&t.onComplete(a,o))})}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&(0,jn.r3)(e,"w")){const n=(0,jn.DV)(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();lr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,jn.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=(0,jn.w9)(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)})}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,jn.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,e=>{r&&setTimeout(()=>{r(e.s,e.d)},Math.floor(0))})}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,e=>{"ok"!==e.s&&this.log_("reportStats","Error sending stats: "+e.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,jn.Pz)(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):or("Unrecognized action received from server: "+(0,jn.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,jn.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ci,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ci,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ci),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Un.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const n=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),i=t.onRealtimeDisconnect_.bind(t),s=t.id+":"+e.nextConnectionId_++,o=t.lastSessionId;let a=!1,l=null;const c=function(){l?l.close():(a=!0,i())};t.realtime_={close:c,sendRequest:function(e){(0,jn.hu)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(e)}};const u=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[e,c]=yield Promise.all([t.authTokenProvider_.getToken(u),t.appCheckTokenProvider_.getToken(u)]);a?ir("getToken() completed but was canceled"):(ir("getToken() completed. Creating connection."),t.authToken_=e&&e.accessToken,t.appCheckToken_=c&&c.token,l=new qr(s,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,n,r,i,e=>{lr(e+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},o))}catch(or){t.log_("Failed to get token: "+or),a||(t.repoInfo_.nodeAdmin&&lr(or),c())}}})()}interrupt(e){ir("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ir("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,jn.xb)(this.interruptReasons_)&&(this.reconnectDelay_=ci,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map(e=>gr(e)).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new Hr(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){ir("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){ir("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";(0,jn.Yr)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+$n.replace(/\./g,"-")]=1,(0,jn.uI)()?e["framework.cordova"]=1:(0,jn.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=$r.getInstance().currentlyOnline();return(0,jn.xb)(this.interruptReasons_)&&e}}return e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e})();class di{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new di(e,t)}}class pi{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new di(ur,e),r=new di(ur,t);return 0!==this.compare(n,r)}minPost(){return di.MIN}}class fi extends pi{static get __EMPTY_NODE(){return ui}static set __EMPTY_NODE(e){ui=e}compare(e,t){return dr(e.name,t.name)}isDefinedOn(e){throw(0,jn.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return di.MIN}maxPost(){return new di(hr,ui)}makePost(e,t){return(0,jn.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new di(e,ui)}toString(){return".key"}}const gi=new fi;class mi{constructor(e,t,n,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let yi,_i=(()=>{class e{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:vi.EMPTY_NODE,this.right=null!=s?s:vi.EMPTY_NODE}copy(t,n,r,i,s){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return vi.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return vi.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})();class vi{constructor(e,t=vi.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new vi(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,_i.BLACK,null,null))}remove(e){return new vi(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,_i.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new mi(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new mi(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new mi(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new mi(this.root_,null,this.comparator_,!0,e)}}function wi(e,t){return dr(e.name,t.name)}function bi(e,t){return dr(e,t)}vi.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new _i(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Ti=function(e){return"number"==typeof e?"number:"+_r(e):"string:"+e},Si=function(e){if(e.isLeafNode()){const t=e.val();(0,jn.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,jn.r3)(t,".sv"),"Priority must be a string or number.")}else(0,jn.hu)(e===yi||e.isEmpty(),"priority of unexpected type.");(0,jn.hu)(e===yi||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Ei,Ci,Ii,ki=(()=>{class e{constructor(t,n=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,(0,jn.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Si(this.priorityNode_)}static set __childrenNodeConstructor(e){Ei=e}static get __childrenNodeConstructor(){return Ei}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new e(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ei(t)?this:".priority"===Zr(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){const r=Zr(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,jn.hu)(".priority"!==r||1===Kr(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Wr(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Ti(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?_r(this.value_):this.value_,this.lazyHash_=Xn(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:((0,jn.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),s=e.VALUE_TYPE_ORDER.indexOf(r);return(0,jn.hu)(i>=0,"Unknown leaf type: "+n),(0,jn.hu)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}return e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e})();const xi=new class extends pi{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?dr(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return di.MIN}maxPost(){return new di(hr,new ki("[PRIORITY-POST]",Ii))}makePost(e,t){const n=Ci(e);return new di(t,new ki("[PRIORITY-POST]",n))}toString(){return".priority"}},Ai=Math.log(2);class Pi{constructor(e){this.count=parseInt(Math.log(e+1)/Ai,10),this.current_=this.count-1;const t=parseInt(Array(this.count+1).join("1"),2);this.bits_=e+1&t}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ri=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new _i(a,o.node,_i.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),u=i(l+1,r);return o=e[l],a=n?n(o):o,new _i(a,o.node,_i.BLACK,c,u)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const c=i(s+1,a),u=e[s],h=n?n(u):u;l(new _i(h,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,_i.BLACK):(a(r,_i.BLACK),a(r,_i.RED))}return s}(new Pi(e.length));return new vi(r||t,s)};let Ni;const Oi={};class Di{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,jn.hu)(Oi&&xi,"ChildrenNode.ts has not been loaded"),Ni=Ni||new Di({".priority":Oi},{".priority":xi}),Ni}get(e){const t=(0,jn.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof vi?t:null}hasIndex(e){return(0,jn.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,jn.hu)(e!==gi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(di.Wrap);let s,o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=i.getNext();s=r?Ri(n,e.getCompare()):Oi;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const c=Object.assign({},this.indexes_);return c[a]=s,new Di(c,l)}addToIndexes(e,t){const n=(0,jn.UI)(this.indexes_,(n,r)=>{const i=(0,jn.DV)(this.indexSet_,r);if((0,jn.hu)(i,"Missing index implementation for "+r),n===Oi){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(di.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),Ri(n,i.getCompare())}return Oi}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new di(e.name,r))),i.insert(e,e.node)}});return new Di(n,this.indexSet_)}removeFromIndexes(e,t){const n=(0,jn.UI)(this.indexes_,n=>{if(n===Oi)return n;{const r=t.get(e.name);return r?n.remove(new di(e.name,r)):n}});return new Di(n,this.indexSet_)}}let Li,Fi=(()=>{class e{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Si(this.priorityNode_),this.children_.isEmpty()&&(0,jn.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Li||(Li=new e(new vi(bi),null,Di.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Li}updatePriority(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?Li:t}}getChild(e){const t=Zr(e);return null===t?this:this.getImmediateChild(t).getChild(Wr(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(t,n){if((0,jn.hu)(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);{const r=new di(t,n);let i,s;n.isEmpty()?(i=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?Li:this.priorityNode_;return new e(i,o,s)}}updateChild(e,t){const n=Zr(e);if(null===n)return t;{(0,jn.hu)(".priority"!==Zr(e)||1===Kr(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(Wr(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(xi,(o,a)=>{n[o]=a.val(t),r++,s&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!t&&s&&i<2*r){const e=[];for(const t in n)e[t]=n[t];return e}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Ti(this.getPriority().val())+":"),this.forEachChild(xi,(t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)}),this.lazyHash_=""===e?"":Xn(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new di(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new di(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new di(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal(e=>t(e.name,e.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,e=>e);{const n=this.children_.getIteratorFrom(e.name,di.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,e=>e);{const n=this.children_.getReverseIteratorFrom(e.name,di.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Mi?-1:0}withIndex(t){if(t===gi||this.indexMap_.hasIndex(t))return this;{const n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===gi||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(xi),n=t.getIterator(xi);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===gi?null:this.indexMap_.get(e.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})();const Mi=new class extends Fi{constructor(){super(new vi(bi),Fi.EMPTY_NODE,Di.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Fi.EMPTY_NODE}isEmpty(){return!1}};function Ui(e,t=null){if(null===e)return Fi.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),(0,jn.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new ki(e,Ui(t));if(e instanceof Array){let n=Fi.EMPTY_NODE;return yr(e,(t,r)=>{if((0,jn.r3)(e,t)&&"."!==t.substring(0,1)){const e=Ui(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}}),n.updatePriority(Ui(t))}{const n=[];let r=!1;if(yr(e,(e,t)=>{if("."!==e.substring(0,1)){const i=Ui(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new di(e,i)))}}),0===n.length)return Fi.EMPTY_NODE;const i=Ri(n,wi,e=>e.name,bi);if(r){const e=Ri(n,xi.getCompare());return new Fi(i,Ui(t),new Di({".priority":e},{".priority":xi}))}return new Fi(i,Ui(t),Di.Default)}}Object.defineProperties(di,{MIN:{value:new di(ur,Fi.EMPTY_NODE)},MAX:{value:new di(hr,Mi)}}),fi.__EMPTY_NODE=Fi.EMPTY_NODE,ki.__childrenNodeConstructor=Fi,yi=Mi,Ii=Mi,Ci=Ui;class Vi extends pi{constructor(e){super(),this.indexPath_=e,(0,jn.hu)(!ei(e)&&".priority"!==Zr(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?dr(e.name,t.name):i}makePost(e,t){const n=Ui(e),r=Fi.EMPTY_NODE.updateChild(this.indexPath_,n);return new di(t,r)}maxPost(){const e=Fi.EMPTY_NODE.updateChild(this.indexPath_,Mi);return new di(hr,e)}toString(){return Qr(this.indexPath_,0).join("/")}}const ji=new class extends pi{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?dr(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return di.MIN}maxPost(){return di.MAX}makePost(e,t){const n=Ui(e);return new di(t,n)}toString(){return".value"}},qi="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Bi=function(){let e=0;const t=[];return function(n){const r=n===e;let i;e=n;const s=new Array(8);for(i=7;i>=0;i--)s[i]=qi.charAt(n%64),n=Math.floor(n/64);(0,jn.hu)(0===n,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=qi.charAt(t[i]);return(0,jn.hu)(20===o.length,"nextPushId: Length should be 20."),o}}(),zi=function(e){if("2147483647"===e)return"-";const t=wr(e);if(null!=t)return""+(t+1);const n=new Array(e.length);for(let s=0;s<n.length;s++)n[s]=e.charAt(s);if(n.length<786)return n.push("-"),n.join("");let r=n.length-1;for(;r>=0&&"z"===n[r];)r--;if(-1===r)return hr;const i=qi.charAt(qi.indexOf(n[r])+1);return n[r]=i,n.slice(0,r+1).join("")},$i=function(e){if("-2147483648"===e)return ur;const t=wr(e);if(null!=t)return""+(t-1);const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=qi.charAt(qi.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function Hi(e){return{type:"value",snapshotNode:e}}function Gi(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Zi(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Ki(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class Wi{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){(0,jn.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(Zi(t,o)):(0,jn.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(Gi(t,n)):s.trackChildChange(Ki(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(xi,(e,r)=>{t.hasChild(e)||n.trackChildChange(Zi(e,r))}),t.isLeafNode()||t.forEachChild(xi,(t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Ki(t,r,i))}else n.trackChildChange(Gi(t,r))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Fi.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Yi{constructor(e){this.indexedFilter_=new Wi(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Yi.getStartPost_(e),this.endPost_=Yi.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,n,r,i,s){return this.matches(new di(t,n))||(n=Fi.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=Fi.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(Fi.EMPTY_NODE);const i=this;return t.forEachChild(xi,(e,t)=>{i.matches(new di(e,t))||(r=r.updateImmediateChild(e,Fi.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Qi{constructor(e){this.rangedFilter_=new Yi(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new di(t,n))||(n=Fi.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=Fi.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=Fi.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();let i;if(i=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),t)<=0:this.index_.compare(t,this.rangedFilter_.getEndPost())<=0,!i)break;r=r.updateImmediateChild(t.name,t.node),n++}}else{let e,n,i,s;if(r=t.withIndex(this.index_),r=r.updatePriority(Fi.EMPTY_NODE),this.reverse_){s=r.getReverseIterator(this.index_),e=this.rangedFilter_.getEndPost(),n=this.rangedFilter_.getStartPost();const t=this.index_.getCompare();i=(e,n)=>t(n,e)}else s=r.getIterator(this.index_),e=this.rangedFilter_.getStartPost(),n=this.rangedFilter_.getEndPost(),i=this.index_.getCompare();let o=0,a=!1;for(;s.hasNext();){const t=s.getNext();!a&&i(e,t)<=0&&(a=!0),a&&o<this.limit_&&i(t,n)<=0?o++:r=r.updateImmediateChild(t.name,Fi.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const o=e;(0,jn.hu)(o.numChildren()===this.limit_,"");const a=new di(t,n),l=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let u=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||o.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);const h=null==u?1:s(u,a);if(c&&!n.isEmpty()&&h>=0)return null!=i&&i.trackChildChange(Ki(t,n,e)),o.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(Zi(t,e));const n=o.updateImmediateChild(t,Fi.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(Gi(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&s(l,a)>=0?(null!=i&&(i.trackChildChange(Zi(l.name,l.node)),i.trackChildChange(Gi(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(l.name,Fi.EMPTY_NODE)):e}}class Ji{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=xi}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,jn.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,jn.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ur}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,jn.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,jn.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:hr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,jn.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===xi}copy(){const e=new Ji;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Xi(e,t,n){const r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function es(e,t,n){const r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function ts(e,t){const n=e.copy();return n.index_=t,n}function ns(e){const t={};if(e.isDefault())return t;let n;return e.index_===xi?n="$priority":e.index_===ji?n="$value":e.index_===gi?n="$key":((0,jn.hu)(e.index_ instanceof Vi,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=(0,jn.Pz)(n),e.startSet_&&(t.startAt=(0,jn.Pz)(e.indexStartValue_),e.startNameSet_&&(t.startAt+=","+(0,jn.Pz)(e.indexStartName_))),e.endSet_&&(t.endAt=(0,jn.Pz)(e.indexEndValue_),e.endNameSet_&&(t.endAt+=","+(0,jn.Pz)(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function rs(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==xi&&(t.i=e.index_.toString()),t}class is extends Br{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=sr("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,jn.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=is.getListenId_(e,n),o={};this.listens_[s]=o;const a=ns(e._queryParams);this.restRequest_(i+".json",a,(e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),(0,jn.DV)(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}})}unlisten(e,t){const n=is.getListenId_(e,t);delete this.listens_[n]}get(e){const t=ns(e._queryParams),n=e._path.toString(),r=new jn.BH;return this.restRequest_(n+".json",t,(e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,i])=>{r&&r.accessToken&&(t.auth=r.accessToken),i&&i.token&&(t.ac=i.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,jn.xO)(t);this.log_("Sending REST request for "+s);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&4===o.readyState){this.log_("REST Response for "+s+" received. status:",o.status,"response:",o.responseText);let t=null;if(o.status>=200&&o.status<300){try{t=(0,jn.cI)(o.responseText)}catch(e){lr("Failed to parse JSON response for "+s+": "+o.responseText)}n(null,t)}else 401!==o.status&&404!==o.status&&lr("Got unsuccessful REST response for "+s+" Status: "+o.status),n(o.status);n=null}},o.open("GET",s,!0),o.send()})}}class ss{constructor(){this.rootNode_=Fi.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function os(){return{value:null,children:new Map}}function as(e,t,n){if(ei(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=Zr(t);e.children.has(r)||e.children.set(r,os()),as(e.children.get(r),t=Wr(t),n)}}function ls(e,t){if(ei(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;{const n=e.value;return e.value=null,n.forEachChild(xi,(t,n)=>{as(e,new Hr(t),n)}),ls(e,t)}}if(e.children.size>0){const n=Zr(t);return t=Wr(t),e.children.has(n)&&ls(e.children.get(n),t)&&e.children.delete(n),0===e.children.size}return!0}function cs(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((e,n)=>{t(n,e)})}(e,(e,r)=>{cs(r,new Hr(t.toString()+"/"+e),n)})}class us{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&yr(this.last_,(e,n)=>{t[e]=t[e]-n}),this.last_=e,t}}class hs{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new us(e);const n=1e4+2e4*Math.random();Tr(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;yr(e,(e,r)=>{r>0&&(0,jn.r3)(this.statsToReport_,e)&&(t[e]=r,n=!0)}),n&&this.server_.reportStats(t),Tr(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ds=(()=>(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ds||(ds={})),ds))();function ps(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}class fs{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=ds.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(ei(this.path)){if(null!=this.affectedTree.value)return(0,jn.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Hr(e));return new fs(Gr(),t,this.revert)}}return(0,jn.hu)(Zr(this.path)===e,"operationForChild called for unrelated child."),new fs(Wr(this.path),this.affectedTree,this.revert)}}class gs{constructor(e,t){this.source=e,this.path=t,this.type=ds.LISTEN_COMPLETE}operationForChild(e){return ei(this.path)?new gs(this.source,Gr()):new gs(this.source,Wr(this.path))}}class ms{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=ds.OVERWRITE}operationForChild(e){return ei(this.path)?new ms(this.source,Gr(),this.snap.getImmediateChild(e)):new ms(this.source,Wr(this.path),this.snap)}}class ys{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=ds.MERGE}operationForChild(e){if(ei(this.path)){const t=this.children.subtree(new Hr(e));return t.isEmpty()?null:t.value?new ms(this.source,Gr(),t.value):new ys(this.source,Gr(),t)}return(0,jn.hu)(Zr(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ys(this.source,Wr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class _s{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ei(e))return this.isFullyInitialized()&&!this.filtered_;const t=Zr(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class vs{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function ws(e,t,n,r,i,s){const o=r.filter(e=>e.type===n);o.sort((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw(0,jn.g5)("Should only compare child_ events.");const r=new di(t.childName,t.snapshotNode),i=new di(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)),o.forEach(n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach(i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))})})}function bs(e,t){return{eventCache:e,serverCache:t}}function Ts(e,t,n,r){return bs(new _s(t,n,r),e.serverCache)}function Ss(e,t,n,r){return bs(e.eventCache,new _s(t,n,r))}function Es(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Cs(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Is;class ks{constructor(e,t=(()=>(Is||(Is=new vi(pr)),Is))()){this.value=e,this.children=t}static fromObject(e){let t=new ks(null);return yr(e,(e,n)=>{t=t.set(new Hr(e),n)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Gr(),value:this.value};if(ei(e))return null;{const n=Zr(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(Wr(e),t);return null!=i?{path:Xr(new Hr(n),i.path),value:i.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ei(e))return this;{const t=Zr(e),n=this.children.get(t);return null!==n?n.subtree(Wr(e)):new ks(null)}}set(e,t){if(ei(e))return new ks(t,this.children);{const n=Zr(e),r=(this.children.get(n)||new ks(null)).set(Wr(e),t),i=this.children.insert(n,r);return new ks(this.value,i)}}remove(e){if(ei(e))return this.children.isEmpty()?new ks(null):new ks(null,this.children);{const t=Zr(e),n=this.children.get(t);if(n){const r=n.remove(Wr(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new ks(null):new ks(this.value,i)}return this}}get(e){if(ei(e))return this.value;{const t=Zr(e),n=this.children.get(t);return n?n.get(Wr(e)):null}}setTree(e,t){if(ei(e))return t;{const n=Zr(e),r=(this.children.get(n)||new ks(null)).setTree(Wr(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new ks(this.value,i)}}fold(e){return this.fold_(Gr(),e)}fold_(e,t){const n={};return this.children.inorderTraversal((r,i)=>{n[r]=i.fold_(Xr(e,r),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,Gr(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(ei(e))return null;{const r=Zr(e),i=this.children.get(r);return i?i.findOnPath_(Wr(e),Xr(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Gr(),t)}foreachOnPath_(e,t,n){if(ei(e))return this;{this.value&&n(t,this.value);const r=Zr(e),i=this.children.get(r);return i?i.foreachOnPath_(Wr(e),Xr(t,r),n):new ks(null)}}foreach(e){this.foreach_(Gr(),e)}foreach_(e,t){this.children.inorderTraversal((n,r)=>{r.foreach_(Xr(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}}class xs{constructor(e){this.writeTree_=e}static empty(){return new xs(new ks(null))}}function As(e,t,n){if(ei(t))return new xs(new ks(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=ti(i,t);return s=s.updateChild(o,n),new xs(e.writeTree_.set(i,s))}{const r=new ks(n),i=e.writeTree_.setTree(t,r);return new xs(i)}}}function Ps(e,t,n){let r=e;return yr(n,(e,n)=>{r=As(r,Xr(t,e),n)}),r}function Rs(e,t){if(ei(t))return xs.empty();{const n=e.writeTree_.setTree(t,new ks(null));return new xs(n)}}function Ns(e,t){return null!=Os(e,t)}function Os(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(ti(n.path,t)):null}function Ds(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(xi,(e,n)=>{t.push(new di(e,n))}):e.writeTree_.children.inorderTraversal((e,n)=>{null!=n.value&&t.push(new di(e,n.value))}),t}function Ls(e,t){if(ei(t))return e;{const n=Os(e,t);return new xs(null!=n?new ks(n):e.writeTree_.subtree(t))}}function Fs(e){return e.writeTree_.isEmpty()}function Ms(e,t){return Us(Gr(),e.writeTree_,t)}function Us(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((t,i)=>{".priority"===t?((0,jn.hu)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Us(Xr(e,t),i,n)}),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Xr(e,".priority"),r)),n}}function Vs(e,t){return Ys(t,e)}function js(e,t){if(e.snap)return ii(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&ii(Xr(e.path,n),t))return!0;return!1}function qs(e){return e.visible}function Bs(e,t,n){let r=xs.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)ii(n,e)?(t=ti(n,e),r=As(r,t,s.snap)):ii(e,n)&&(t=ti(e,n),r=As(r,Gr(),s.snap.getChild(t)));else{if(!s.children)throw(0,jn.g5)("WriteRecord should have .snap or .children");if(ii(n,e))t=ti(n,e),r=Ps(r,t,s.children);else if(ii(e,n))if(t=ti(e,n),ei(t))r=Ps(r,Gr(),s.children);else{const e=(0,jn.DV)(s.children,Zr(t));if(e){const n=e.getChild(Wr(t));r=As(r,Gr(),n)}}}}}return r}function zs(e,t,n,r,i){if(r||i){const s=Ls(e.visibleWrites,t);return!i&&Fs(s)?n:i||null!=n||Ns(s,Gr())?Ms(Bs(e.allWrites,function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(ii(e.path,t)||ii(t,e.path))},t),n||Fi.EMPTY_NODE):null}{const r=Os(e.visibleWrites,t);if(null!=r)return r;{const r=Ls(e.visibleWrites,t);return Fs(r)?n:null!=n||Ns(r,Gr())?Ms(r,n||Fi.EMPTY_NODE):null}}}function $s(e,t,n,r){return zs(e.writeTree,e.treePath,t,n,r)}function Hs(e,t){return function(e,t,n){let r=Fi.EMPTY_NODE;const i=Os(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(xi,(e,t)=>{r=r.updateImmediateChild(e,t)}),r;if(n){const i=Ls(e.visibleWrites,t);return n.forEachChild(xi,(e,t)=>{const n=Ms(Ls(i,new Hr(e)),t);r=r.updateImmediateChild(e,n)}),Ds(i).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}return Ds(Ls(e.visibleWrites,t)).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}(e.writeTree,e.treePath,t)}function Gs(e,t,n,r){return function(e,t,n,r,i){(0,jn.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Xr(t,n);if(Ns(e.visibleWrites,s))return null;{const t=Ls(e.visibleWrites,s);return Fs(t)?i.getChild(n):Ms(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function Zs(e,t){return function(e,t){return Os(e.visibleWrites,t)}(e.writeTree,Xr(e.treePath,t))}function Ks(e,t,n){return function(e,t,n,r){const i=Xr(t,n),s=Os(e.visibleWrites,i);return null!=s?s:r.isCompleteForChild(n)?Ms(Ls(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Ws(e,t){return Ys(Xr(e.treePath,t),e.writeTree)}function Ys(e,t){return{treePath:e,writeTree:t}}class Qs{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;(0,jn.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,jn.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Ki(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Zi(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Gi(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw(0,jn.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Ki(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const Js=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class Xs{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new _s(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ks(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Cs(this.viewCache_),i=function(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const l=Ls(e.visibleWrites,t),c=Os(l,Gr());if(null!=c)a=c;else{if(null==n)return[];a=Ms(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let i=n.getNext();for(;i&&e.length<1;)0!==t(i,r)&&e.push(i),i=n.getNext();return e}}(e.writeTree,e.treePath,t,n,0,i,s)}(this.writes_,r,t,0,n,e);return 0===i.length?null:i[0]}}function eo(e,t,n,r,i,s){const o=t.eventCache;if(null!=Zs(r,n))return t;{let a,l;if(ei(n))if((0,jn.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Cs(t),i=Hs(r,n instanceof Fi?n:Fi.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=$s(r,Cs(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=Zr(n);if(".priority"===c){(0,jn.hu)(1===Kr(n),"Can't have a priority with additional path components");const i=o.getNode();l=t.serverCache.getNode();const s=Gs(r,n,i,l);a=null!=s?e.filter.updatePriority(i,s):o.getNode()}else{const u=Wr(n);let h;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();const e=Gs(r,n,o.getNode(),l);h=null!=e?o.getNode().getImmediateChild(c).updateChild(u,e):o.getNode().getImmediateChild(c)}else h=Ks(r,c,t.serverCache);a=null!=h?e.filter.updateChild(o.getNode(),c,h,u,i,s):o.getNode()}}return Ts(t,a,o.isFullyInitialized()||ei(n),e.filter.filtersNodes())}}function to(e,t,n,r,i,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(ei(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=Zr(n);if(!l.isCompleteForPath(n)&&Kr(n)>1)return t;const i=Wr(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,i,Js,null)}const h=Ss(t,c,l.isFullyInitialized()||ei(n),u.filtersNodes());return eo(e,h,n,i,new Xs(i,h,s),a)}function no(e,t,n,r,i,s,o){const a=t.eventCache;let l,c;const u=new Xs(i,t,s);if(ei(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=Ts(t,c,!0,e.filter.filtersNodes());else{const i=Zr(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=Ts(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=Wr(n),c=a.getNode().getImmediateChild(i);let h;if(ei(s))h=r;else{const e=u.getCompleteChild(i);h=null!=e?".priority"===Yr(s)&&e.getChild(Jr(s)).isEmpty()?e:e.updateChild(s,r):Fi.EMPTY_NODE}l=c.equals(h)?t:Ts(t,e.filter.updateChild(a.getNode(),i,h,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}return l}function ro(e,t){return e.eventCache.isCompleteForChild(t)}function io(e,t,n){return n.foreach((e,n)=>{t=t.updateChild(e,n)}),t}function so(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=ei(n)?r:new ks(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal((n,r)=>{if(u.hasChild(n)){const l=io(0,t.serverCache.getNode().getImmediateChild(n),r);c=to(e,c,new Hr(n),l,i,s,o,a)}}),l.children.inorderTraversal((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!u.hasChild(n)&&!l){const l=io(0,t.serverCache.getNode().getImmediateChild(n),r);c=to(e,c,new Hr(n),l,i,s,o,a)}}),c}class oo{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new Wi(n.getIndex()),i=(s=n).loadsAllData()?new Wi(s.getIndex()):s.hasLimit()?new Qi(s):new Yi(s);var s;this.processor_=function(e){return{filter:e}}(i);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(Fi.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(Fi.EMPTY_NODE,a.getNode(),null),u=new _s(l,o.isFullyInitialized(),r.filtersNodes()),h=new _s(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=bs(h,u),this.eventGenerator_=new vs(this.query_)}get query(){return this.query_}}function ao(e,t){const n=Cs(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!ei(t)&&!n.getImmediateChild(Zr(t)).isEmpty())?n.getChild(t):null}function lo(e){return 0===e.eventRegistrations_.length}function co(e,t,n){const r=[];if(n){(0,jn.hu)(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach(e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)})}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function uo(e,t,n,r){t.type===ds.MERGE&&null!==t.source.queryId&&((0,jn.hu)(Cs(e.viewCache_),"We should always have a full cache before handling merges"),(0,jn.hu)(Es(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=function(e,t,n,r,i){const s=new Qs;let o,a;if(n.type===ds.OVERWRITE){const l=n;l.source.fromUser?o=no(e,t,l.path,l.snap,r,i,s):((0,jn.hu)(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!ei(l.path),o=to(e,t,l.path,l.snap,r,i,a,s))}else if(n.type===ds.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,r,i,s,o){let a=t;return r.foreach((r,l)=>{const c=Xr(n,r);ro(t,Zr(c))&&(a=no(e,a,c,l,i,s,o))}),r.foreach((r,l)=>{const c=Xr(n,r);ro(t,Zr(c))||(a=no(e,a,c,l,i,s,o))}),a}(e,t,l.path,l.children,r,i,s):((0,jn.hu)(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=so(e,t,l.path,l.children,r,i,a,s))}else if(n.type===ds.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,r,i,s){let o;if(null!=Zs(r,n))return t;{const a=new Xs(r,t,i),l=t.eventCache.getNode();let c;if(ei(n)||".priority"===Zr(n)){let n;if(t.serverCache.isFullyInitialized())n=$s(r,Cs(t));else{const e=t.serverCache.getNode();(0,jn.hu)(e instanceof Fi,"serverChildren would be complete if leaf node"),n=Hs(r,e)}n=n,c=e.filter.updateFullNode(l,n,s)}else{const i=Zr(n);let u=Ks(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,Wr(n),a,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,Fi.EMPTY_NODE,Wr(n),a,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=$s(r,Cs(t)),o.isLeafNode()&&(c=e.filter.updateFullNode(c,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=Zs(r,Gr()),Ts(t,c,o,e.filter.filtersNodes())}}(e,t,a.path,r,i,s):function(e,t,n,r,i,s,o){if(null!=Zs(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(ei(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return to(e,t,n,l.getNode().getChild(n),i,s,a,o);if(ei(n)){let r=new ks(null);return l.getNode().forEachChild(gi,(e,t)=>{r=r.set(new Hr(e),t)}),so(e,t,n,r,i,s,a,o)}return t}{let c=new ks(null);return r.foreach((e,t)=>{const r=Xr(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))}),so(e,t,n,c,i,s,a,o)}}(e,t,a.path,a.affectedTree,r,i,s)}else{if(n.type!==ds.LISTEN_COMPLETE)throw(0,jn.g5)("Unknown operation type: "+n.type);o=function(e,t,n,r,i){const s=t.serverCache;return eo(e,Ss(t,s.getNode(),s.isFullyInitialized()||ei(n),s.isFiltered()),n,r,Js,i)}(e,t,n.path,r,s)}const l=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Es(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Hi(Es(t)))}}(t,o,l),{viewCache:o,changes:l}}(e.processor_,i,t,n,r);var o,a;return o=e.processor_,(0,jn.hu)((a=s.viewCache).eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),(0,jn.hu)(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),(0,jn.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,ho(e,s.changes,s.viewCache.eventCache.getNode(),null)}function ho(e,t,n,r){return function(e,t,n,r){const i=[],s=[];return t.forEach(t=>{"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push({type:"child_moved",snapshotNode:t.snapshotNode,childName:t.childName})}),ws(e,i,"child_removed",t,r,n),ws(e,i,"child_added",t,r,n),ws(e,i,"child_moved",s,r,n),ws(e,i,"child_changed",t,r,n),ws(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,r?[r]:e.eventRegistrations_)}let po,fo;class go{constructor(){this.views=new Map}}function mo(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return(0,jn.hu)(null!=s,"SyncTree gave us an op for an invalid query."),uo(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(uo(s,t,n,r));return i}}function yo(e,t,n,r,i){const s=e.views.get(t._queryIdentifier);if(!s){let e=$s(n,i?r:null),s=!1;e?s=!0:r instanceof Fi?(e=Hs(n,r),s=!1):(e=Fi.EMPTY_NODE,s=!1);const o=bs(new _s(e,s,!1),new _s(r,i,!1));return new oo(t,o)}return s}function _o(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function vo(e,t){let n=null;for(const r of e.views.values())n=n||ao(r,t);return n}function wo(e,t){return t._queryParams.loadsAllData()?So(e):e.views.get(t._queryIdentifier)}function bo(e,t){return null!=wo(e,t)}function To(e){return null!=So(e)}function So(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Eo=1;class Co{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ks(null),this.pendingWriteTree_={visibleWrites:xs.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Io(e,t,n,r,i){return function(e,t,n,r,i){(0,jn.hu)(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=As(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?No(e,new ms({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function ko(e,t,n=!1){const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(function(e,t){const n=e.allWrites.findIndex(e=>e.writeId===t);(0,jn.hu)(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&js(t,r.path)?i=!1:ii(r.path,t.path)&&(s=!0)),o--}return!!i&&(s?(function(e){e.visibleWrites=Bs(e.allWrites,qs,Gr()),e.lastWriteId=e.allWrites.length>0?e.allWrites[e.allWrites.length-1].writeId:-1}(e),!0):(r.snap?e.visibleWrites=Rs(e.visibleWrites,r.path):yr(r.children,t=>{e.visibleWrites=Rs(e.visibleWrites,Xr(r.path,t))}),!0))}(e.pendingWriteTree_,t)){let t=new ks(null);return null!=r.snap?t=t.set(Gr(),!0):yr(r.children,e=>{t=t.set(new Hr(e),!0)}),No(e,new fs(r.path,t,n))}return[]}function xo(e,t,n){return No(e,new ms({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Ao(e,t,n,r){const i=t._path,s=e.syncPointTree_.get(i);let o=[];if(s&&("default"===t._queryIdentifier||bo(s,t))){const a=function(e,t,n,r){const i=t._queryIdentifier,s=[];let o=[];const a=To(e);if("default"===i)for(const[l,c]of e.views.entries())o=o.concat(co(c,n,r)),lo(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(i);t&&(o=o.concat(co(t,n,r)),lo(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!To(e)&&s.push(new((0,jn.hu)(po,"Reference.ts has not been loaded"),po)(t._repo,t._path)),{removed:s,events:o}}(s,t,n,r);0===s.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));const l=a.removed;o=a.events;const c=-1!==l.findIndex(e=>e._queryParams.loadsAllData()),u=e.syncPointTree_.findOnPath(i,(e,t)=>To(t));if(c&&!u){const t=e.syncPointTree_.subtree(i);if(!t.isEmpty()){const n=function(e){return e.fold((e,t,n)=>{if(t&&To(t))return[So(t)];{let e=[];return t&&(e=_o(t)),yr(n,(t,n)=>{e=e.concat(n)}),e}})}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=Lo(e,r);e.listenProvider_.startListening(qo(i),Fo(e,i),s.hashFn,s.onComplete)}}}if(!u&&l.length>0&&!r)if(c){const n=null;e.listenProvider_.stopListening(qo(t),n)}else l.forEach(t=>{const n=e.queryToTagMap.get(Mo(t));e.listenProvider_.stopListening(qo(t),n)});!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=Mo(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,l)}return o}function Po(e,t,n){const r=t._path;let i=null,s=!1;e.syncPointTree_.foreachOnPath(r,(e,t)=>{const n=ti(e,r);i=i||vo(t,n),s=s||To(t)});let o,a=e.syncPointTree_.get(r);a?(s=s||To(a),i=i||vo(a,Gr())):(a=new go,e.syncPointTree_=e.syncPointTree_.set(r,a)),null!=i?o=!0:(o=!1,i=Fi.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((e,t)=>{const n=vo(t,Gr());n&&(i=i.updateImmediateChild(e,n))}));const l=bo(a,t);if(!l&&!t._queryParams.loadsAllData()){const n=Mo(t);(0,jn.hu)(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=Eo++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let c=function(e,t,n,r,i,s){const o=yo(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(xi,(e,t)=>{r.push(Gi(e,t))}),n.isFullyInitialized()&&r.push(Hi(n.getNode())),ho(e,r,n.getNode(),t)}(o,n)}(a,t,n,Vs(e.pendingWriteTree_,r),i,o);if(!l&&!s){const n=wo(a,t);c=c.concat(function(e,t,n){const r=t._path,i=Fo(e,t),s=Lo(e,n),o=e.listenProvider_.startListening(qo(t),i,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(r);if(i)(0,jn.hu)(!To(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold((e,t,n)=>{if(!ei(e)&&t&&To(t))return[So(t).query];{let e=[];return t&&(e=e.concat(_o(t).map(e=>e.query))),yr(n,(t,n)=>{e=e.concat(n)}),e}});for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(qo(r),Fo(e,r))}}return o}(e,t,n))}return c}function Ro(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(e,n)=>{const r=vo(n,ti(e,t));if(r)return r});return zs(r,t,i,n,!0)}function No(e,t){return Oo(t,e.syncPointTree_,null,Vs(e.pendingWriteTree_,Gr()))}function Oo(e,t,n,r){if(ei(e.path))return Do(e,t,n,r);{const i=t.get(Gr());null==n&&null!=i&&(n=vo(i,Gr()));let s=[];const o=Zr(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=Ws(r,o);s=s.concat(Oo(a,l,e,t))}return i&&(s=s.concat(mo(i,e,r,n))),s}}function Do(e,t,n,r){const i=t.get(Gr());null==n&&null!=i&&(n=vo(i,Gr()));let s=[];return t.children.inorderTraversal((t,i)=>{const o=n?n.getImmediateChild(t):null,a=Ws(r,t),l=e.operationForChild(t);l&&(s=s.concat(Do(l,i,o,a)))}),i&&(s=s.concat(mo(i,e,r,n))),s}function Lo(e,t){const n=t.query,r=Fo(e,n);return{hashFn:()=>(function(e){return e.viewCache_.serverCache.getNode()}(t)||Fi.EMPTY_NODE).hash(),onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=Uo(e,n);if(r){const n=Vo(r),i=n.path,s=n.queryId,o=ti(i,t);return jo(e,i,new gs(ps(s),o))}return[]}(e,n._path,r):function(e,t){return No(e,new gs({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Ao(e,n,null,r)}}}}function Fo(e,t){const n=Mo(t);return e.queryToTagMap.get(n)}function Mo(e){return e._path.toString()+"$"+e._queryIdentifier}function Uo(e,t){return e.tagToQueryMap.get(t)}function Vo(e){const t=e.indexOf("$");return(0,jn.hu)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Hr(e.substr(0,t))}}function jo(e,t,n){const r=e.syncPointTree_.get(t);return(0,jn.hu)(r,"Missing sync point for query tag that we're tracking"),mo(r,n,Vs(e.pendingWriteTree_,t),null)}function qo(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new((0,jn.hu)(fo,"Reference.ts has not been loaded"),fo)(e._repo,e._path):e}class Bo{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Bo(t)}node(){return this.node_}}class zo{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Xr(this.path_,e);return new zo(this.syncTree_,t)}node(){return Ro(this.syncTree_,this.path_)}}const $o=function(e,t,n){return e&&"object"==typeof e?((0,jn.hu)(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?Ho(e[".sv"],t,n):"object"==typeof e[".sv"]?Go(e[".sv"],t):void(0,jn.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Ho=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:(0,jn.hu)(!1,"Unexpected server value: "+e)}},Go=function(e,t,n){e.hasOwnProperty("increment")||(0,jn.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!=typeof r&&(0,jn.hu)(!1,"Unexpected increment value: "+r);const i=t.node();if((0,jn.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!=typeof s?r:s+r},Zo=function(e,t,n,r){return Wo(t,new zo(n,e),r)},Ko=function(e,t,n){return Wo(e,new Bo(t),n)};function Wo(e,t,n){const r=e.getPriority().val(),i=$o(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=$o(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new ki(s,Ui(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new ki(i))),r.forEachChild(xi,(e,r)=>{const i=Wo(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))}),s}}class Yo{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function Qo(e,t){let n=t instanceof Hr?t:new Hr(t),r=e,i=Zr(n);for(;null!==i;){const e=(0,jn.DV)(r.node.children,i)||{children:{},childCount:0};r=new Yo(i,r,e),n=Wr(n),i=Zr(n)}return r}function Jo(e){return e.node.value}function Xo(e,t){e.node.value=t,ia(e)}function ea(e){return e.node.childCount>0}function ta(e,t){yr(e.node.children,(n,r)=>{t(new Yo(n,e,r))})}function na(e,t,n,r){n&&!r&&t(e),ta(e,e=>{na(e,t,!0,r)}),n&&r&&t(e)}function ra(e){return new Hr(null===e.parent?e.name:ra(e.parent)+"/"+e.name)}function ia(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===Jo(e)&&!ea(e)}(n),i=(0,jn.r3)(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,ia(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,ia(e))}(e.parent,e.name,e)}const sa=/[\[\].#$\/\u0000-\u001F\u007F]/,oa=/[\[\].#$\u0000-\u001F\u007F]/,aa=10485760,la=function(e){return"string"==typeof e&&0!==e.length&&!sa.test(e)},ca=function(e){return"string"==typeof e&&0!==e.length&&!oa.test(e)},ua=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!cr(e)||e&&"object"==typeof e&&(0,jn.r3)(e,".sv")},ha=function(e,t,n,r){r&&void 0===t||da((0,jn.gK)(e,"value"),t,n)},da=function(e,t,n){const r=n instanceof Hr?new si(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+ai(r));if("function"==typeof t)throw new Error(e+"contains a function "+ai(r)+" with contents = "+t.toString());if(cr(t))throw new Error(e+"contains "+t.toString()+" "+ai(r));if("string"==typeof t&&t.length>aa/3&&(0,jn.ug)(t)>aa)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+ai(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let n=!1,i=!1;if(yr(t,(t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!la(t)))throw new Error(e+" contains an invalid key ("+t+") "+ai(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=(0,jn.ug)(t),oi(e)}(r,t),da(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=(0,jn.ug)(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)}),n&&i)throw new Error(e+' contains ".value" child '+ai(r)+" in addition to actual children.")}},pa=function(e,t,n,r){if(r&&void 0===t)return;const i=(0,jn.gK)(e,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const s=[];yr(t,(e,t)=>{const r=new Hr(e);if(da(i,t,Xr(n,r)),".priority"===Yr(r)&&!ua(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)}),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=Qr(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!la(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(ni);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&ii(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},fa=function(e,t,n){if(!n||void 0!==t){if(cr(t))throw new Error((0,jn.gK)(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ua(t))throw new Error((0,jn.gK)(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ga=function(e,t,n,r){if(!(r&&void 0===n||la(n)))throw new Error((0,jn.gK)(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ma=function(e,t,n,r){if(!(r&&void 0===n||ca(n)))throw new Error((0,jn.gK)(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ya=function(e,t){if(".info"===Zr(t))throw new Error(e+" failed = Can't modify data under /.info/")},_a=function(e,t){const n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!la(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),ca(e)}(n))throw new Error((0,jn.gK)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class va{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function wa(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||ri(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function ba(e,t,n){wa(e,n),Sa(e,e=>ri(e,t))}function Ta(e,t,n){wa(e,n),Sa(e,e=>ii(e,t)||ii(t,e))}function Sa(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];i&&(t(i.path)?(Ea(e.eventLists_[r]),e.eventLists_[r]=null):n=!1)}n&&(e.eventLists_=[]),e.recursionDepth_--}function Ea(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();tr&&ir("event: "+n.toString()),br(r)}}}const Ca="repo_interrupt";class Ia{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new va,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=os(),this.transactionQueueTree_=new Yo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ka(e){const t=e.infoData_.getNode(new Hr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function xa(e){return(t=(t={timestamp:ka(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function Aa(e,t,n,r,i){e.dataUpdateCount++;const s=new Hr(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const t=(0,jn.UI)(n,e=>Ui(e));o=function(e,t,n,r){const i=Uo(e,r);if(i){const r=Vo(i),s=r.path,o=r.queryId,a=ti(s,t),l=ks.fromObject(n);return jo(e,s,new ys(ps(o),a,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=Ui(n);o=function(e,t,n,r){const i=Uo(e,r);if(null!=i){const r=Vo(i),s=r.path,o=r.queryId,a=ti(s,t);return jo(e,s,new ms(ps(o),a,n))}return[]}(e.serverSyncTree_,s,t,i)}else if(r){const t=(0,jn.UI)(n,e=>Ui(e));o=function(e,t,n){const r=ks.fromObject(n);return No(e,new ys({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=Ui(n);o=xo(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=Ba(e,s)),Ta(e.eventQueue_,a,o)}function Pa(e,t){Ra(e,"connected",t),!1===t&&function(e){Ua(e,"onDisconnectEvents");const t=xa(e),n=os();cs(e.onDisconnect_,Gr(),(r,i)=>{const s=Zo(r,i,e.serverSyncTree_,t);as(n,r,s)});let r=[];cs(n,Gr(),(t,n)=>{r=r.concat(xo(e.serverSyncTree_,t,n));const i=Za(e,t);Ba(e,i)}),e.onDisconnect_=os(),Ta(e.eventQueue_,Gr(),r)}(e)}function Ra(e,t,n){const r=new Hr("/.info/"+t),i=Ui(n);e.infoData_.updateSnapshot(r,i);const s=xo(e.infoSyncTree_,r,i);Ta(e.eventQueue_,r,s)}function Na(e){return e.nextWriteId_++}function Oa(e,t,n,r,i){Ua(e,"set",{path:t.toString(),value:n,priority:r});const s=xa(e),o=Ui(n,r),a=Ro(e.serverSyncTree_,t),l=Ko(o,a,s),c=Na(e),u=Io(e.serverSyncTree_,t,l,c,!0);wa(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),(n,r)=>{const s="ok"===n;s||lr("set at "+t+" failed: "+n);const o=ko(e.serverSyncTree_,c,!s);Ta(e.eventQueue_,t,o),Va(0,i,n,r)});const h=Za(e,t);Ba(e,h),Ta(e.eventQueue_,h,[])}function Da(e,t,n){e.server_.onDisconnectCancel(t.toString(),(r,i)=>{"ok"===r&&ls(e.onDisconnect_,t),Va(0,n,r,i)})}function La(e,t,n,r){const i=Ui(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(n,s)=>{"ok"===n&&as(e.onDisconnect_,t,i),Va(0,r,n,s)})}function Fa(e,t,n){let r;r=".info"===Zr(t._path)?Ao(e.infoSyncTree_,t,n):Ao(e.serverSyncTree_,t,n),ba(e.eventQueue_,t._path,r)}function Ma(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Ca)}function Ua(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),ir(n,...t)}function Va(e,t,n,r){t&&br(()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const s=new Error(i);s.code=e,t(s)}})}function ja(e,t,n){return Ro(e.serverSyncTree_,t,n)||Fi.EMPTY_NODE}function qa(e,t=e.transactionQueueTree_){if(t||Ga(e,t),Jo(t)){const n=$a(e,t);(0,jn.hu)(n.length>0,"Sending zero length transaction queue"),n.every(e=>0===e.status)&&function(e,t,n){const r=n.map(e=>e.currentWriteId),i=ja(e,t,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const e=n[c];(0,jn.hu)(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=ti(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;e.server_.put(l.toString(),a,r=>{Ua(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(ko(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push(()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)),n[t].unwatcher();Ga(e,Qo(e.transactionQueueTree_,t)),qa(e,e.transactionQueueTree_),Ta(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)br(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)n[e].status=3===n[e].status?4:0;else{lr("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}Ba(e,t)}},o)}(e,ra(t),n)}else ea(t)&&ta(t,t=>{qa(e,t)})}function Ba(e,t){const n=za(e,t),r=ra(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter(e=>0===e.status).map(e=>e.currentWriteId);for(let o=0;o<t.length;o++){const a=t[o],l=ti(n,a.path);let c,u=!1;if((0,jn.hu)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===a.status)u=!0,c=a.abortReason,i=i.concat(ko(e.serverSyncTree_,a.currentWriteId,!0));else if(0===a.status)if(a.retryCount>=25)u=!0,c="maxretry",i=i.concat(ko(e.serverSyncTree_,a.currentWriteId,!0));else{const n=ja(e,a.path,s);a.currentInputSnapshot=n;const r=t[o].update(n.val());if(void 0!==r){da("transaction failed: Data returned ",r,a.path);let t=Ui(r);"object"==typeof r&&null!=r&&(0,jn.r3)(r,".priority")||(t=t.updatePriority(n.getPriority()));const o=a.currentWriteId,l=xa(e),c=Ko(t,n,l);a.currentOutputSnapshotRaw=t,a.currentOutputSnapshotResolved=c,a.currentWriteId=Na(e),s.splice(s.indexOf(o),1),i=i.concat(Io(e.serverSyncTree_,a.path,c,a.currentWriteId,a.applyLocally)),i=i.concat(ko(e.serverSyncTree_,o,!0))}else u=!0,c="nodata",i=i.concat(ko(e.serverSyncTree_,a.currentWriteId,!0))}Ta(e.eventQueue_,n,i),i=[],u&&(t[o].status=2,setTimeout(t[o].unwatcher,Math.floor(0)),t[o].onComplete&&r.push("nodata"===c?()=>t[o].onComplete(null,!1,t[o].currentInputSnapshot):()=>t[o].onComplete(new Error(c),!1,null)))}Ga(e,e.transactionQueueTree_);for(let o=0;o<r.length;o++)br(r[o]);qa(e,e.transactionQueueTree_)}(e,$a(e,n),r),r}function za(e,t){let n,r=e.transactionQueueTree_;for(n=Zr(t);null!==n&&void 0===Jo(r);)r=Qo(r,n),n=Zr(t=Wr(t));return r}function $a(e,t){const n=[];return Ha(e,t,n),n.sort((e,t)=>e.order-t.order),n}function Ha(e,t,n){const r=Jo(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);ta(t,t=>{Ha(e,t,n)})}function Ga(e,t){const n=Jo(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,Xo(t,n.length>0?n:void 0)}ta(t,t=>{Ga(e,t)})}function Za(e,t){const n=ra(za(e,t)),r=Qo(e.transactionQueueTree_,t);return function(e,t,n){let r=e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,t=>{Ka(e,t)}),Ka(e,r),na(r,t=>{Ka(e,t)}),n}function Ka(e,t){const n=Jo(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?((0,jn.hu)(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):((0,jn.hu)(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(ko(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Xo(t,void 0):n.length=s+1,Ta(e.eventQueue_,ra(t),i);for(let e=0;e<r.length;e++)br(r[e])}}const Wa=function(e,t){const n=Ya(e),r=n.namespace;return"firebase.com"===n.domain&&ar(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||ar("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&lr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Ar(n.host,n.secure,r,t,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new Hr(n.pathString)}},Ya=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(i=function(e){let t="";const n=e.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let e=n[i];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(r){}t+="/"+e}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):lr(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};class Qa{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,jn.Pz)(this.snapshot.exportVal())}}class Ja{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Xa{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,jn.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class el{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new jn.BH;return Da(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){ya("OnDisconnect.remove",this._path);const e=new jn.BH;return La(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){ya("OnDisconnect.set",this._path),ha("OnDisconnect.set",e,this._path,!1);const t=new jn.BH;return La(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){ya("OnDisconnect.setWithPriority",this._path),ha("OnDisconnect.setWithPriority",e,this._path,!1),fa("OnDisconnect.setWithPriority",t,!1);const n=new jn.BH;return function(e,t,n,r,i){const s=Ui(n,r);e.server_.onDisconnectPut(t.toString(),s.val(!0),(n,r)=>{"ok"===n&&as(e.onDisconnect_,t,s),Va(0,i,n,r)})}(this._repo,this._path,e,t,n.wrapCallback(()=>{})),n.promise}update(e){ya("OnDisconnect.update",this._path),pa("OnDisconnect.update",e,this._path,!1);const t=new jn.BH;return function(e,t,n,r){if((0,jn.xb)(n))return ir("onDisconnect().update() called with empty data.  Don't do anything."),void Va(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(i,s)=>{"ok"===i&&yr(n,(n,r)=>{const i=Ui(r);as(e.onDisconnect_,Xr(t,n),i)}),Va(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class tl{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return ei(this._path)?null:Yr(this._path)}get ref(){return new sl(this._repo,this._path)}get _queryIdentifier(){const e=rs(this._queryParams),t=gr(e);return"{}"===t?"default":t}get _queryObject(){return rs(this._queryParams)}isEqual(e){if(!((e=(0,jn.m9)(e))instanceof tl))return!1;const t=this._repo===e._repo,n=ri(this._path,e._path);return t&&n&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}function nl(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function rl(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===gi){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==ur)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==hr)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(e.getIndex()===xi){if(null!=t&&!ua(t)||null!=n&&!ua(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,jn.hu)(e.getIndex()instanceof Vi||e.getIndex()===ji,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function il(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class sl extends tl{constructor(e,t){super(e,t,new Ji,!1)}get parent(){const e=Jr(this._path);return null===e?null:new sl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class ol{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Hr(e),n=cl(this.ref,e);return new ol(this._node.getChild(t),n,xi)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(t,n)=>e(new ol(n,cl(this.ref,t),xi)))}hasChild(e){const t=new Hr(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function al(e,t){return(e=(0,jn.m9)(e))._checkNotDeleted("ref"),void 0!==t?cl(e._root,t):e._root}function ll(e,t){(e=(0,jn.m9)(e))._checkNotDeleted("refFromURL");const n=Wa(t,e._repo.repoInfo_.nodeAdmin);_a("refFromURL",n);const r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||ar("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),al(e,n.path.toString())}function cl(e,t){var n;return null===Zr((e=(0,jn.m9)(e))._path)?((n=t)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ma("child","path",n,!1)):ma("child","path",t,!1),new sl(e._repo,Xr(e._path,t))}function ul(e,t){e=(0,jn.m9)(e),ya("set",e._path),ha("set",t,e._path,!1);const n=new jn.BH;return Oa(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}class hl{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new Qa("value",this,new ol(e.snapshotNode,new sl(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Ja(this,e,t):null}matches(e){return e instanceof hl&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class dl{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Ja(this,e,t):null}createEvent(e,t){(0,jn.hu)(null!=e.childName,"Child events should have a childName.");const n=cl(new sl(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new Qa(e.type,this,new ol(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof dl&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function pl(e,t,n,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{Fa(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const o=new Xa(n,s||void 0),a="value"===t?new hl(o):new dl(t,o);return function(e,t,n){let r;r=".info"===Zr(t._path)?Po(e.infoSyncTree_,t,n):Po(e.serverSyncTree_,t,n),ba(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>Fa(e._repo,e,a)}function fl(e,t,n,r){return pl(e,"value",t,n,r)}function gl(e,t,n,r){return pl(e,"child_added",t,n,r)}function ml(e,t,n,r){return pl(e,"child_changed",t,n,r)}function yl(e,t,n,r){return pl(e,"child_moved",t,n,r)}function _l(e,t,n,r){return pl(e,"child_removed",t,n,r)}function vl(e,t,n){let r=null;const i=n?new Xa(n):null;"value"===t?r=new hl(i):t&&(r=new dl(t,i)),Fa(e._repo,e,r)}class wl{}class bl extends wl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ha("endAt",this._value,e._path,!0);const t=es(e._queryParams,this._value,this._key);if(il(t),rl(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new tl(e._repo,e._path,t,e._orderByCalled)}}class Tl extends wl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ha("endBefore",this._value,e._path,!1);const t=function(e,t,n){let r,i;return e.index_===gi?("string"==typeof t&&(t=$i(t)),i=es(e,t,n)):(r=null==n?ur:$i(n),i=es(e,t,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(il(t),rl(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new tl(e._repo,e._path,t,e._orderByCalled)}}class Sl extends wl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ha("startAt",this._value,e._path,!0);const t=Xi(e._queryParams,this._value,this._key);if(il(t),rl(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new tl(e._repo,e._path,t,e._orderByCalled)}}class El extends wl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ha("startAfter",this._value,e._path,!1);const t=function(e,t,n){let r;if(e.index_===gi)"string"==typeof t&&(t=zi(t)),r=Xi(e,t,n);else{let i;i=null==n?hr:zi(n),r=Xi(e,t,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(il(t),rl(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new tl(e._repo,e._path,t,e._orderByCalled)}}class Cl extends wl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new tl(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}class Il extends wl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new tl(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}class kl extends wl{constructor(e){super(),this._path=e}_apply(e){nl(e,"orderByChild");const t=new Hr(this._path);if(ei(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new Vi(t),r=ts(e._queryParams,n);return rl(r),new tl(e._repo,e._path,r,!0)}}class xl extends wl{_apply(e){nl(e,"orderByKey");const t=ts(e._queryParams,gi);return rl(t),new tl(e._repo,e._path,t,!0)}}class Al extends wl{_apply(e){nl(e,"orderByPriority");const t=ts(e._queryParams,xi);return rl(t),new tl(e._repo,e._path,t,!0)}}class Pl extends wl{_apply(e){nl(e,"orderByValue");const t=ts(e._queryParams,ji);return rl(t),new tl(e._repo,e._path,t,!0)}}class Rl extends wl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(ha("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new bl(this._value,this._key)._apply(new Sl(this._value,this._key)._apply(e))}}function Nl(e,...t){let n=(0,jn.m9)(e);for(const r of t)n=r._apply(n);return n}!function(e){(0,jn.hu)(!po,"__referenceConstructor has already been defined"),po=e}(sl),function(e){(0,jn.hu)(!fo,"__referenceConstructor has already been defined"),fo=e}(sl);const Ol={};function Dl(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||ar("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ir("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o,a,l=Wa(s,i),c=l.repoInfo;"undefined"!=typeof process&&(a=process.env.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s=`http://${a}?ns=${c.namespace}`,l=Wa(s,i),c=l.repoInfo):o=!l.repoInfo.secure;const u=i&&o?new Cr(Cr.OWNER):new Er(e.name,e.options,t);_a("Invalid Firebase Database URL",l),ei(l.path)||ar("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,r){let i=Ol[t.name];i||(i={},Ol[t.name]=i);let s=i[e.toURLString()];return s&&ar("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Ia(e,!1,n,r),i[e.toURLString()]=s,s}(c,e,u,new Sr(e.name,n));return new Ll(h,e)}class Ll{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(e,t,n){if(e.stats_=Dr(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new is(e.repoInfo_,(t,n,r,i)=>{Aa(e,t,n,r,i)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>Pa(e,!0),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,jn.Pz)(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new hi(e.repoInfo_,t,(t,n,r,i)=>{Aa(e,t,n,r,i)},t=>{Pa(e,t)},t=>{!function(e,t){yr(t,(t,n)=>{Ra(e,t,n)})}(e,t)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(t=>{e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(t=>{e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=function(t,n){const r=t.toString();return Or[r]||(Or[r]=new hs(e.stats_,e.server_)),Or[r]}(e.repoInfo_),e.infoData_=new ss,e.infoSyncTree_=new Co({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=xo(e.infoSyncTree_,t._path,o),setTimeout(()=>{i("ok")},0)),s},stopListening:()=>{}}),Ra(e,"connected",!1),e.serverSyncTree_=new Co({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,(n,r)=>{const s=i(n,r);Ta(e.eventQueue_,t._path,s)}),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new sl(this._repo,Gr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(e,t){const n=Ol[t];n&&n[e.key]===e||ar(`Database ${t}(${e.repoInfo_}) has already been deleted.`),Ma(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ar("Cannot call "+e+" on a deleted database.")}}class Fl{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}hi.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},hi.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},Hn(Vn.SDK_VERSION),(0,Vn._registerComponent)(new Mn.wA("database",(e,{instanceIdentifier:t})=>Dl(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Vn.registerVersion)(Bn,zn,void 0),(0,Vn.registerVersion)(Bn,zn,"esm2017");const Ml=new qn.Yd("@firebase/database-compat"),Ul=function(e){Ml.warn("FIREBASE WARNING: "+e)};class Vl{constructor(e){this._delegate=e}cancel(e){(0,jn.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,jn.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),t=>e(t)),t}remove(e){(0,jn.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,jn.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),t=>e(t)),t}set(e,t){(0,jn.Dv)("OnDisconnect.set",1,2,arguments.length),(0,jn.Wj)("OnDisconnect.set","onComplete",t,!0);const n=this._delegate.set(e);return t&&n.then(()=>t(null),e=>t(e)),n}setWithPriority(e,t,n){(0,jn.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,jn.Wj)("OnDisconnect.setWithPriority","onComplete",n,!0);const r=this._delegate.setWithPriority(e,t);return n&&r.then(()=>n(null),e=>n(e)),r}update(e,t){if((0,jn.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,Ul("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,jn.Wj)("OnDisconnect.update","onComplete",t,!0);const n=this._delegate.update(e);return t&&n.then(()=>t(null),e=>t(e)),n}}class jl{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,jn.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class ql{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,jn.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,jn.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,jn.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,jn.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,jn.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),ma("DataSnapshot.child","path",e,!1),new ql(this._database,this._delegate.child(e))}hasChild(e){return(0,jn.Dv)("DataSnapshot.hasChild",1,1,arguments.length),ma("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,jn.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,jn.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,jn.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new ql(this._database,t)))}hasChildren(){return(0,jn.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,jn.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,jn.Dv)("DataSnapshot.ref",0,0,arguments.length),new zl(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Bl{constructor(e,t){this.database=e,this._delegate=t}on(e,t,n,r){var i;(0,jn.Dv)("Query.on",2,4,arguments.length),(0,jn.Wj)("Query.on","callback",t,!1);const s=Bl.getCancelAndContextArgs_("Query.on",n,r),o=(e,n)=>{t.call(s.context,new ql(this.database,e),n)};o.userCallback=t,o.context=s.context;const a=null===(i=s.cancel)||void 0===i?void 0:i.bind(s.context);switch(e){case"value":return fl(this._delegate,o,a),t;case"child_added":return gl(this._delegate,o,a),t;case"child_removed":return _l(this._delegate,o,a),t;case"child_changed":return ml(this._delegate,o,a),t;case"child_moved":return yl(this._delegate,o,a),t;default:throw new Error((0,jn.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,n){if((0,jn.Dv)("Query.off",0,3,arguments.length),function(e,t,n){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,jn.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,jn.Wj)("Query.off","callback",t,!0),(0,jn.lb)("Query.off","context",n,!0),t){const r=()=>{};r.userCallback=t,r.context=n,vl(this._delegate,e,r)}else vl(this._delegate,e)}get(){return function(e){return function(e,t){const n=function(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,(e,t)=>{const i=ti(e,n);r=r||vo(t,i)});let i=e.syncPointTree_.get(n);i?r=r||vo(i,Gr()):(i=new go,e.syncPointTree_=e.syncPointTree_.set(n,i));const s=null!=r,o=s?new _s(r,!0,!1):null;return Es(yo(i,t,Vs(e.pendingWriteTree_,t._path),s?o.getNode():Fi.EMPTY_NODE,s).viewCache_)}(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then(n=>{const r=Ui(n).withIndex(t._queryParams.getIndex()),i=xo(e.serverSyncTree_,t._path,r);return ba(e.eventQueue_,t._path,i),Promise.resolve(r)},n=>(Ua(e,"get for query "+(0,jn.Pz)(t)+" failed: "+n),Promise.reject(new Error(n))))}((e=(0,jn.m9)(e))._repo,e).then(t=>new ol(t,new sl(e._repo,e._path),e._queryParams.getIndex()))}(this._delegate).then(e=>new ql(this.database,e))}once(e,t,n,r){(0,jn.Dv)("Query.once",1,4,arguments.length),(0,jn.Wj)("Query.once","callback",t,!0);const i=Bl.getCancelAndContextArgs_("Query.once",n,r),s=new jn.BH,o=(e,n)=>{const r=new ql(this.database,e);t&&t.call(i.context,r,n),s.resolve(r)};o.userCallback=t,o.context=i.context;const a=e=>{i.cancel&&i.cancel.call(i.context,e),s.reject(e)};switch(e){case"value":fl(this._delegate,o,a,{onlyOnce:!0});break;case"child_added":gl(this._delegate,o,a,{onlyOnce:!0});break;case"child_removed":_l(this._delegate,o,a,{onlyOnce:!0});break;case"child_changed":ml(this._delegate,o,a,{onlyOnce:!0});break;case"child_moved":yl(this._delegate,o,a,{onlyOnce:!0});break;default:throw new Error((0,jn.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(e){return(0,jn.Dv)("Query.limitToFirst",1,1,arguments.length),new Bl(this.database,Nl(this._delegate,function(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Cl(e)}(e)))}limitToLast(e){return(0,jn.Dv)("Query.limitToLast",1,1,arguments.length),new Bl(this.database,Nl(this._delegate,function(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Il(e)}(e)))}orderByChild(e){return(0,jn.Dv)("Query.orderByChild",1,1,arguments.length),new Bl(this.database,Nl(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ma("orderByChild","path",e,!1),new kl(e)}(e)))}orderByKey(){return(0,jn.Dv)("Query.orderByKey",0,0,arguments.length),new Bl(this.database,Nl(this._delegate,new xl))}orderByPriority(){return(0,jn.Dv)("Query.orderByPriority",0,0,arguments.length),new Bl(this.database,Nl(this._delegate,new Al))}orderByValue(){return(0,jn.Dv)("Query.orderByValue",0,0,arguments.length),new Bl(this.database,Nl(this._delegate,new Pl))}startAt(e=null,t){return(0,jn.Dv)("Query.startAt",0,2,arguments.length),new Bl(this.database,Nl(this._delegate,function(e=null,t){return ga("startAt","key",t,!0),new Sl(e,t)}(e,t)))}startAfter(e=null,t){return(0,jn.Dv)("Query.startAfter",0,2,arguments.length),new Bl(this.database,Nl(this._delegate,function(e,t){return ga("startAfter","key",t,!0),new El(e,t)}(e,t)))}endAt(e=null,t){return(0,jn.Dv)("Query.endAt",0,2,arguments.length),new Bl(this.database,Nl(this._delegate,function(e,t){return ga("endAt","key",t,!0),new bl(e,t)}(e,t)))}endBefore(e=null,t){return(0,jn.Dv)("Query.endBefore",0,2,arguments.length),new Bl(this.database,Nl(this._delegate,function(e,t){return ga("endBefore","key",t,!0),new Tl(e,t)}(e,t)))}equalTo(e,t){return(0,jn.Dv)("Query.equalTo",1,2,arguments.length),new Bl(this.database,Nl(this._delegate,function(e,t){return ga("equalTo","key",t,!0),new Rl(e,t)}(e,t)))}toString(){return(0,jn.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,jn.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,jn.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Bl))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,n){const r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,(0,jn.Wj)(e,"cancel",r.cancel,!0),r.context=n,(0,jn.lb)(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error((0,jn.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new zl(this.database,new sl(this._delegate._repo,this._delegate._path))}}class zl extends Bl{constructor(e,t){super(e,new tl(t._repo,t._path,new Ji,!1)),this.database=e,this._delegate=t}getKey(){return(0,jn.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,jn.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new zl(this.database,cl(this._delegate,e))}getParent(){(0,jn.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new zl(this.database,e):null}getRoot(){return(0,jn.Dv)("Reference.root",0,0,arguments.length),new zl(this.database,this._delegate.root)}set(e,t){(0,jn.Dv)("Reference.set",1,2,arguments.length),(0,jn.Wj)("Reference.set","onComplete",t,!0);const n=ul(this._delegate,e);return t&&n.then(()=>t(null),e=>t(e)),n}update(e,t){if((0,jn.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,Ul("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ya("Reference.update",this._delegate._path),(0,jn.Wj)("Reference.update","onComplete",t,!0);const n=function(e,t){pa("update",t,e._path,!1);const n=new jn.BH;return function(e,t,n,r){Ua(e,"update",{path:t.toString(),value:n});let i=!0;const s=xa(e),o={};if(yr(n,(n,r)=>{i=!1,o[n]=Zo(Xr(t,n),Ui(r),e.serverSyncTree_,s)}),i)ir("update() called with empty data.  Don't do anything."),Va(0,r,"ok",void 0);else{const i=Na(e),s=function(e,t,n,r){!function(e,t,n,r){(0,jn.hu)(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=Ps(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=ks.fromObject(n);return No(e,new ys({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}(e.serverSyncTree_,t,o,i);wa(e.eventQueue_,s),e.server_.merge(t.toString(),n,(n,s)=>{const o="ok"===n;o||lr("update at "+t+" failed: "+n);const a=ko(e.serverSyncTree_,i,!o),l=a.length>0?Ba(e,t):t;Ta(e.eventQueue_,l,a),Va(0,r,n,s)}),yr(n,n=>{const r=Za(e,Xr(t,n));Ba(e,r)}),Ta(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}(this._delegate,e);return t&&n.then(()=>t(null),e=>t(e)),n}setWithPriority(e,t,n){(0,jn.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,jn.Wj)("Reference.setWithPriority","onComplete",n,!0);const r=function(e,t,n){if(ya("setWithPriority",e._path),ha("setWithPriority",t,e._path,!1),fa("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";const r=new jn.BH;return Oa(e._repo,e._path,t,n,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return n&&r.then(()=>n(null),e=>n(e)),r}remove(e){(0,jn.Dv)("Reference.remove",0,1,arguments.length),(0,jn.Wj)("Reference.remove","onComplete",e,!0);const t=function(e){return ya("remove",e._path),ul(e,null)}(this._delegate);return e&&t.then(()=>e(null),t=>e(t)),t}transaction(e,t,n){(0,jn.Dv)("Reference.transaction",1,3,arguments.length),(0,jn.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,jn.Wj)("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if(void 0!==n&&"boolean"!=typeof n)throw new Error((0,jn.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,n);const r=function(e,t,n){var r;if(e=(0,jn.m9)(e),ya("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";const i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,s=new jn.BH,o=fl(e,()=>{});return function(t,n,r,i,o,a){Ua(t,"transaction on "+n);const l={path:n,update:r,onComplete:(t,n,r)=>{let i=null;t?s.reject(t):(i=new ol(r,new sl(e._repo,e._path),xi),s.resolve(new Fl(n,i)))},status:null,order:Jn(),applyLocally:a,retryCount:0,unwatcher:o,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=ja(t,n,void 0);l.currentInputSnapshot=c;const u=l.update(c.val());if(void 0===u)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{da("transaction failed: Data returned ",u,l.path),l.status=0;const e=Qo(t.transactionQueueTree_,n),r=Jo(e)||[];let i;r.push(l),Xo(e,r),"object"==typeof u&&null!==u&&(0,jn.r3)(u,".priority")?(i=(0,jn.DV)(u,".priority"),(0,jn.hu)(ua(i),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):i=(Ro(t.serverSyncTree_,n)||Fi.EMPTY_NODE).getPriority().val();const s=xa(t),o=Ui(u,i),a=Ko(o,c,s);l.currentOutputSnapshotRaw=o,l.currentOutputSnapshotResolved=a,l.currentWriteId=Na(t);const h=Io(t.serverSyncTree_,n,a,l.currentWriteId,l.applyLocally);Ta(t.eventQueue_,n,h),qa(t,t.transactionQueueTree_)}}(e._repo,e._path,t,0,o,i),s.promise}(this._delegate,e,{applyLocally:n}).then(e=>new jl(e.committed,new ql(this.database,e.snapshot)));return t&&r.then(e=>t(null,e.committed,e.snapshot),e=>t(e,!1,null)),r}setPriority(e,t){(0,jn.Dv)("Reference.setPriority",1,2,arguments.length),(0,jn.Wj)("Reference.setPriority","onComplete",t,!0);const n=function(e,t){e=(0,jn.m9)(e),ya("setPriority",e._path),fa("setPriority",t,!1);const n=new jn.BH;return Oa(e._repo,Xr(e._path,".priority"),t,null,n.wrapCallback(()=>{})),n.promise}(this._delegate,e);return t&&n.then(()=>t(null),e=>t(e)),n}push(e,t){(0,jn.Dv)("Reference.push",0,2,arguments.length),(0,jn.Wj)("Reference.push","onComplete",t,!0);const n=function(e,t){e=(0,jn.m9)(e),ya("push",e._path),ha("push",t,e._path,!0);const n=ka(e._repo),r=Bi(n),i=cl(e,r),s=cl(e,r);let o;return o=null!=t?ul(s,t).then(()=>s):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}(this._delegate,e),r=n.then(e=>new zl(this.database,e));t&&r.then(()=>t(null),e=>t(e));const i=new zl(this.database,n);return i.then=r.then.bind(r),i.catch=r.catch.bind(r,void 0),i}onDisconnect(){return ya("Reference.onDisconnect",this._delegate._path),new Vl(new el(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class $l{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,n={}){!function(e,t,n,r={}){(e=(0,jn.m9)(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&ar("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ar('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Cr(Cr.OWNER);else if(r.mockUserToken){const t="string"==typeof r.mockUserToken?r.mockUserToken:(0,jn.Sg)(r.mockUserToken,e.app.options.projectId);s=new Cr(t)}!function(e,t,n,r){e.repoInfo_=new Ar(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}(i,t,n,s)}(this._delegate,e,t,n)}ref(e){if((0,jn.Dv)("database.ref",0,1,arguments.length),e instanceof zl){const t=ll(this._delegate,e.toString());return new zl(this,t)}{const t=al(this._delegate,e);return new zl(this,t)}}refFromURL(e){(0,jn.Dv)("database.refFromURL",1,1,arguments.length);const t=ll(this._delegate,e);return new zl(this,t)}goOffline(){return(0,jn.Dv)("database.goOffline",0,0,arguments.length),(e=(0,jn.m9)(e=this._delegate))._checkNotDeleted("goOffline"),void Ma(e._repo);var e}goOnline(){return(0,jn.Dv)("database.goOnline",0,0,arguments.length),(e=(0,jn.m9)(e=this._delegate))._checkNotDeleted("goOnline"),void((t=e._repo).persistentConnection_&&t.persistentConnection_.resume(Ca));var e,t}}$l.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:e=>function(e){return{".sv":{increment:e}}}(e)};var Hl=Object.freeze({__proto__:null,initStandalone:function({app:e,url:t,version:n,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){Hn(n);const o=new Mn.zt("auth-internal",new Mn.H0("database-standalone"));return o.setComponent(new Mn.wA("auth-internal",()=>r,"PRIVATE")),{instance:new $l(Dl(e,o,void 0,t,s),e),namespace:i}}});const Gl=$l.ServerValue;var Zl;(Zl=Fn.Z).INTERNAL.registerComponent(new Mn.wA("database-compat",(e,{instanceIdentifier:t})=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new $l(r,n)},"PUBLIC").setServiceProps({Reference:zl,Query:Bl,Database:$l,DataSnapshot:ql,enableLogging:function(e,t){rr(e,t)},INTERNAL:Hl,ServerValue:Gl}).setMultipleInstances(!0)),Zl.registerVersion("@firebase/database-compat","0.1.4");var Kl=n(3820),Wl=n(5355),Yl=n(7841);function Ql(e){return null==e}function Jl(e){return"function"==typeof e.set}function Xl(e,t){return Jl(t)?t:e.ref(t)}function ec(e,t){if("string"==typeof e)return t.stringCase();if(Jl(e))return t.firebaseCase();if("function"==typeof e.exportVal)return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof e)}function tc(e,t,n="on",r=vn.z){return new wn.y(i=>{let s=null;return s=e[n](t,(e,t)=>{r.schedule(()=>{i.next({snapshot:e,prevKey:t})}),"once"===n&&r.schedule(()=>i.complete())},e=>{r.schedule(()=>i.error(e))}),"on"===n?{unsubscribe(){null!=s&&e.off(t,s)}}:{unsubscribe(){}}}).pipe((0,Sn.U)(e=>{const{snapshot:n,prevKey:r}=e;let i=null;return n.exists()&&(i=n.key),{type:t,payload:n,prevKey:r,key:i}}),(0,En.B)())}function nc(e,t){const n=e.length;for(let r=0;r<n;r++)if(e[r].payload.key===t)return r;return-1}function rc(e,t){const{payload:n,prevKey:r,key:i}=t,s=nc(e,i),o=function(e,t){if(Ql(t))return 0;{const n=nc(e,t);return-1===n?e.length:n+1}}(e,r);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let n=null;t.payload.forEach(t=>{const r={payload:t,type:"value",prevKey:n,key:t.key};return n=t.key,e=[...e,r],!1})}return e;case"child_added":if(s>-1){const i=e[s-1];(i&&i.key||null)!==r&&(e=e.filter(e=>e.payload.key!==n.key)).splice(o,0,t)}else{if(null==r)return[t,...e];(e=e.slice()).splice(o,0,t)}return e;case"child_removed":return e.filter(e=>e.payload.key!==n.key);case"child_changed":return e.map(e=>e.payload.key===i?t:e);case"child_moved":if(s>-1){const t=e.splice(s,1)[0];return(e=e.slice()).splice(o,0,t),e}return e;default:return e}}function ic(e){return(Ql(e)||0===e.length)&&(e=["child_added","child_removed","child_changed","child_moved"]),e}function sc(e,t,n){return function(e,t,n){return tc(e,"value","once",n).pipe((0,Cn.w)(r=>{const i=[(0,bn.of)(r)];return t.forEach(t=>i.push(tc(e,t,"on",n))),(0,Tn.T)(...i).pipe((0,In.R)(rc,[]))}),(0,kn.x)())}(e,t=ic(t),n)}function oc(e,t,n){const r=(t=ic(t)).map(t=>tc(e,t,"on",n));return(0,Tn.T)(...r)}function ac(e,t){return function(n,r){return ec(n,{stringCase:()=>e.child(n)[t](r),firebaseCase:()=>n[t](r),snapshotCase:()=>n.ref[t](r)})}}function lc(e){return function(t){return t?ec(t,{stringCase:()=>e.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):e.remove()}}function cc(e,t){return function(){return tc(e,"value","on",t)}}const uc=new i.OlP("angularfire2.realtimeDatabaseURL"),hc=new i.OlP("angularfire2.database.use-emulator");let dc=(()=>{class e{constructor(e,t,n,r,i,s,o,a,l,c,u,h,d,p,f){this.schedulers=s;const g=o,m=(0,_n.on)(e,i,t);a&&(0,Kl.nw)(m,i,l,u,h,d,c,p),this.database=(0,_n.cc)(`${m.name}.database.${n}`,"AngularFireDatabase",m.name,()=>{const e=i.runOutsideAngular(()=>m.database(n||void 0));return g&&e.useEmulator(...g),e},[g])}list(e,t){const n=this.schedulers.ngZone.runOutsideAngular(()=>Xl(this.database,e));let r=n;return t&&(r=t(n)),function(e,t){const n=t.schedulers.outsideAngular,r=t.schedulers.ngZone.run(()=>e.ref);return{query:e,update:ac(r,"update"),set:ac(r,"set"),push:e=>r.push(e),remove:lc(r),snapshotChanges:t=>sc(e,t,n).pipe(Ln.iC),stateChanges:t=>oc(e,t,n).pipe(Ln.iC),auditTrail:t=>function(e,t,n){return function(e,t,n){return function(e,t){return tc(e,"value","on",t).pipe((0,Sn.U)(e=>{let t;return e.payload.forEach(e=>(t=e.key,!1)),{data:e,lastKeyToLoad:t}}))}(e,n).pipe(function(...e){return t=>{let n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new Pn(e,n))}}(t),(0,Sn.U)(([e,t])=>{const n=e.lastKeyToLoad,r=t.map(e=>e.key);return{actions:t,lastKeyToLoad:n,loadedKeys:r}}),(r=e=>-1===e.loadedKeys.indexOf(e.lastKeyToLoad),e=>e.lift(new On(r))),(0,Sn.U)(e=>e.actions));var r}(e,oc(e,t).pipe((0,In.R)((e,t)=>[...e,t],[])),n)}(e,t,n).pipe(Ln.iC),valueChanges:(t,r)=>sc(e,t,n).pipe((0,Sn.U)(e=>e.map(e=>r&&r.idField?Object.assign(Object.assign({},e.payload.val()),{[r.idField]:e.key}):e.payload.val())),Ln.iC)}}(r,this)}object(e){return function(e,t){return{query:e,snapshotChanges:()=>cc(e,t.schedulers.outsideAngular)().pipe(Ln.iC),update:t=>e.ref.update(t),set:t=>e.ref.set(t),remove:()=>e.ref.remove(),valueChanges:()=>cc(e,t.schedulers.outsideAngular)().pipe(Ln.iC,(0,Sn.U)(e=>e.payload.exists()?e.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Xl(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(_n.Dh),i.LFG(_n.xv,8),i.LFG(uc,8),i.LFG(i.Lbi),i.LFG(i.R0b),i.LFG(Ln.HU),i.LFG(hc,8),i.LFG(Kl.zQ,8),i.LFG(Kl.Qv,8),i.LFG(Kl.L6,8),i.LFG(Kl._Q,8),i.LFG(Kl.rT,8),i.LFG(Kl.lh,8),i.LFG(Kl.f7,8),i.LFG(Wl.nm,8))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),pc=(()=>{class e{constructor(){Yl.Z.registerVersion("angularfire",Ln.q4.full,"rtdb-compat")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[dc]}),e})();var fc=n(8534),gc=n(4384),mc=n(240);let yc=(()=>{class e{constructor(e){this.router=e}ngOnInit(){}getStyle(){return`topo ${this.headerTransparent?"headerTransparent":"headerSolid"} fixed-top`}goToHome(){this.router.navigate(["/"])}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(mc.F0))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-header"]],inputs:{title:"title",headerTransparent:"headerTransparent"},features:[i._Bn([])],decls:11,vars:2,consts:[[3,"ngClass"],["id","main-navbar",1,"navbar","navbar-default"],[1,"container-fluid"],[1,"navbar-header"],[1,"navbar-brand"],[1,"menu-bar"],[1,"text-center",2,"margin-top","-10px"],[1,"title",3,"click"],[1,"fas","fa-shopping-basket"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.TgZ(1,"nav",1),i.TgZ(2,"div",2),i.TgZ(3,"div",3),i.TgZ(4,"div",4),i._UZ(5,"span",5),i.qZA(),i.qZA(),i.TgZ(6,"div",6),i.TgZ(7,"span",7),i.NdJ("click",function(){return t.goToHome()}),i._UZ(8,"i",8),i._uU(9),i.qZA(),i.qZA(),i._UZ(10,"div"),i.qZA(),i.qZA(),i.qZA()),2&e&&(i.Q6J("ngClass",t.getStyle()),i.xp6(9),i.hij(" ",t.title," "))},directives:[r.mk],styles:['@import url("https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap");.topo[_ngcontent-%COMP%]{width:100%;height:45px;color:#fff;font-size:clamp(1rem,8vw,2rem);font-weight:bolder;text-align:center;z-index:997}.headerTransparent[_ngcontent-%COMP%]{background:linear-gradient(180deg,#fff,#f2f2f2cc 50%,#2c3e5000);color:#8637a8}.headerSolid[_ngcontent-%COMP%]{background:#fff;box-shadow:0 8px 16px 0 #0003,0 6px 20px 0 #00000030}.header-logo[_ngcontent-%COMP%]{width:45px;height:45px;margin-top:-5px}.title[_ngcontent-%COMP%]{font-family:Dancing Script,cursive;font-size:37px;color:red;transition:all .2s}.title[_ngcontent-%COMP%]:hover{cursor:pointer;text-shadow:0 8px 16px 0 #0003,0 6px 20px 0 #00000030;font-size:39px}a[_ngcontent-%COMP%]:hover{text-decoration:none!important}.navbar[_ngcontent-%COMP%]{padding:4px 1rem}.navbar-brand[_ngcontent-%COMP%]{padding:2px!important}']}),e})();function _c(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li"),i.TgZ(1,"button",5),i.NdJ("click",function(){const t=i.CHM(e).$implicit;return i.oxw().goTo(t.url)}),i._UZ(2,"i"),i.TgZ(3,"div",2),i.TgZ(4,"div",3),i._uU(5),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&e){const e=t.$implicit;i.xp6(2),i.Gre("fas fa-",e.icon," btn-icon"),i.xp6(3),i.Oqu(e.label)}}let vc=(()=>{class e{constructor(e){this.router=e,this.buttons=[]}ngOnInit(){this.buttons.push({icon:"home",label:"Home",url:"/"})}goTo(e){this.router.navigate([e])}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(mc.F0))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-fab"]],inputs:{buttons:"buttons"},decls:7,vars:1,consts:[["id","menu-share",1,"float","fab-btn"],[1,"fas","fa-shopping-basket","btn-icon-menu"],[1,"label-container"],[1,"label-text"],[4,"ngFor","ngForOf"],[1,"fab-btn",3,"click"]],template:function(e,t){1&e&&(i.TgZ(0,"button",0),i._UZ(1,"i",1),i.TgZ(2,"div",2),i.TgZ(3,"div",3),i._uU(4,"Menu"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(5,"ul"),i.YNc(6,_c,6,4,"li",4),i.qZA()),2&e&&(i.xp6(6),i.Q6J("ngForOf",t.buttons))},directives:[r.sg],styles:["*[_ngcontent-%COMP%]{padding:0;margin:0}.float[_ngcontent-%COMP%]{position:fixed;width:50px;height:50px;bottom:20px;left:14px;background-color:hsla(0,0%,100%,.459);color:#fff;border:1px dotted #8282824d;border-radius:50px;text-align:center;z-index:997;animation:bot-to-top 2s ease-out;animation:pulse 2s infinite}.fab-btn[_ngcontent-%COMP%]{clear:both}.fab-btn-item[_ngcontent-%COMP%]{background-color:#2f6bec;color:#fff;border-radius:20px;text-align:center;box-shadow:0 8px 16px 0 #0003,0 6px 20px 0 #00000030;border:1px solid #8282824d;width:40px;height:40px;display:block}.label-container[_ngcontent-%COMP%]{position:relative;bottom:33px;left:60px;display:table;visibility:hidden;float:right}.label-text[_ngcontent-%COMP%]{color:#fff;background:#33333380;display:table-cell;vertical-align:middle;padding:5px;border-radius:15px}.fab-tooltip[_ngcontent-%COMP%]{position:relative;bottom:30px;left:70px;display:table;visibility:hidden;float:left}ul[_ngcontent-%COMP%]{position:fixed;left:15px;padding-bottom:20px;bottom:50px;z-index:100}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin-bottom:10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#2f6bec;color:#fff;border-radius:50px;text-align:center;box-shadow:0 8px 16px 0 #0003,0 6px 20px 0 #00000030;border:1px solid #8282824d;width:50px;height:50px;display:block}ul[_ngcontent-%COMP%]:hover{visibility:visible!important;opacity:1!important}.btn-icon[_ngcontent-%COMP%], .btn-icon-menu[_ngcontent-%COMP%]{font-size:24px;margin-top:10px}.btn-icon-menu[_ngcontent-%COMP%]{margin-top:12px;color:red}button#menu-share[_ngcontent-%COMP%] + ul[_ngcontent-%COMP%]{visibility:hidden}button#menu-share[_ngcontent-%COMP%]:hover + ul[_ngcontent-%COMP%]{visibility:visible;animation:scale-in .5s}button#menu-share[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{animation:rotate-in .5s}button#menu-share[_ngcontent-%COMP%]:hover > i[_ngcontent-%COMP%]{animation:rotate-out .5s}button.fab-btn[_ngcontent-%COMP%] > div.label-container[_ngcontent-%COMP%]{visibility:hidden;opacity:0;transition:visibility 0s,opacity .5s ease}button.fab-btn[_ngcontent-%COMP%]:hover > div.label-container[_ngcontent-%COMP%]{visibility:visible;opacity:1}.menu-logo[_ngcontent-%COMP%]{width:40px;height:40px;margin-top:3px}@keyframes bot-to-top{0%{bottom:-40px}50%{bottom:40px}}@keyframes scale-in{0%{transform:scale(0);opacity:0}to{transform:scale(1);opacity:1}}@keyframes rotate-in{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes rotate-out{0%{transform:rotate(1turn)}to{transform:rotate(0deg)}}@keyframes pulse{0%{transform:scale(.95);box-shadow:0 0 0 0 #000000b3}70%{transform:scale(1);box-shadow:0 0 0 10px #0000}to{transform:scale(.95);box-shadow:0 0 0 0 #0000}}"]}),e})();const wc=[{path:"",component:(()=>{class e{constructor(){this.buttons=[]}ngOnInit(){this.buttons=[{icon:"users",label:"Clientes",url:"/customers"},{icon:"file-invoice-dollar",label:"Pedidos",url:"/orders"},{icon:"table",label:"Produtos",url:"/products"}]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-home"]],decls:6,vars:2,consts:[["id","main"],["title","WK Marketplace",3,"headerTransparent"],[1,"page"],[3,"buttons"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.TgZ(1,"div"),i._UZ(2,"app-header",1),i.qZA(),i.TgZ(3,"div",2),i._UZ(4,"router-outlet"),i.qZA(),i._UZ(5,"app-fab",3),i.qZA()),2&e&&(i.xp6(2),i.Q6J("headerTransparent",!1),i.xp6(3),i.Q6J("buttons",t.buttons))},directives:[yc,mc.lC,vc],styles:[""]}),e})(),children:[{path:"customers",loadChildren:()=>Promise.all([n.e(872),n.e(592),n.e(88)]).then(n.bind(n,88)).then(e=>e.CustomersModule)},{path:"orders",loadChildren:()=>Promise.all([n.e(872),n.e(592),n.e(294)]).then(n.bind(n,6294)).then(e=>e.OrdersModule)},{path:"products",loadChildren:()=>Promise.all([n.e(872),n.e(592),n.e(302)]).then(n.bind(n,4302)).then(e=>e.ProductsModule)}]}];let bc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[mc.Bz.forRoot(wc)],mc.Bz]}),e})(),Tc=(()=>{class e{constructor(){this.title="wktest"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-root"]],decls:2,vars:0,consts:[[2,"margin","auto"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i._UZ(1,"router-outlet"),i.qZA())},directives:[mc.lC],styles:[""]}),e})();var Sc=n(5642),Ec=n(4726),Cc=n(3922),Ic=n(1972),kc=n(8756);n(6875),n(9017),n(3806),(0,r.qS)(mn());let xc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e,bootstrap:[Tc]}),e.\u0275inj=i.cJS({providers:[{provide:i.soG,useValue:"pt-Br"},{provide:fc.hP,useValue:"wk-marketplace.appspot.com"}],imports:[[_n.hO.initializeApp(yn),pc,fc.TE,gc.yb,bc,L,pn,Sc.K,Ec.p,fn.JF,Ic.d.forRoot(),kc.I.forRoot(),Cc.E.forRoot()]]}),e})();(0,i.G48)(),O().bootstrapModule(xc).catch(e=>console.error(e))},6304:(e,t,n)=>{"use strict";function r(e,t,n,r,i,s,o){try{var a=e[s](o),l=a.value}catch(c){return void n(c)}a.done?t(l):Promise.resolve(l).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,s){var o=e.apply(t,n);function a(e){r(o,i,s,a,l,"next",e)}function l(e){r(o,i,s,a,l,"throw",e)}a(void 0)})}}n.d(t,{Z:()=>i})}},e=>{"use strict";e(e.s=2855)}]);